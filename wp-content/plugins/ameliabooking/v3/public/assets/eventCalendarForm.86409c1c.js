import{aR as Ht,o as a,c as n,h as N,w as F,av as yt,au as bt,r as A,m as fe,b as e,n as S,F as $,k as v,e as d,j as H,p,bo as pe,aS as _t,y as Nt,u as Bt,aP as _,bp as jt,bq as qt,br as Gt,bs as Jt,aU as ft,A as at,s as zt,D as Ce,a2 as Qt,l as T,a as f,a8 as ie,ah as Xt,g as i,t as y,_ as $e,ai as Be,a5 as Zt,f as ze,bt as Kt,q as je,al as Le,an as St,z as Mt,E as He,B as W,a3 as ea,C as gt,ak as ta,aw as aa,b8 as sa,ac as la,ax as ia}from"./stepForm.55ab4bc3.js";import{e as na,u as Pe,a as ht,b as Ne,c as Dt,d as Tt,f as oa,_ as ra,g as ca,h as ua,i as da,j as ma,m as $t,k as va,l as pa}from"./eventListForm.5836c50e.js";import{_ as _e}from"./catalogForm.0107d17f.js";const _a={name:"EventCalendarFilterSkeleton"},fa={class:"am-ecfils"};function ga(X,P,O,ne,c,x){const V=yt,R=bt;return a(),n("div",fa,[N(R,{rows:1,animated:""},{template:F(()=>[N(V,{class:"am-ecfils__item am-ecfils__search",variant:"text"}),N(V,{class:"am-ecfils__item am-ecfils__btn",variant:"text"})]),_:1})])}var ha=Ht(_a,[["render",ga]]);const ya={name:"EventCalendarBasicSkeleton"},z=Object.assign(ya,{props:{rows:{type:Number,default:1},size:{type:String,default:"default",validator(X){return["default","medium","small","mini","micro","custom"].includes(X)}},customStyle:{type:Object,default:()=>({})}},setup(X){const P=X;return(O,ne)=>{const c=yt,x=bt;return a(!0),n($,null,A(new Array(e(P).rows),V=>(a(),n("div",{key:V,class:"am-ecbs",style:fe(e(P).customStyle)},[N(x,{animated:""},{template:F(()=>[N(c,{class:S(["am-ecbs__item",`am-${e(P).size}`]),variant:"text"},null,8,["class"])]),_:1})],4))),128)}}});const ba={name:"EventCalendarMainSkeleton"},ka=Object.assign(ba,{props:{height:{type:Number,default:0}},setup(X){const P=X;let O=v(()=>({"--am-h-ecms":`${P.height}px`}));return(ne,c)=>{const x=yt,V=bt;return a(),n("div",{class:"am-ecms",style:fe(e(O))},[N(V,{animated:""},{template:F(()=>[(a(!0),n($,null,A(new Array(7),R=>(a(),d(x,{key:R,class:"am-ecms__item",variant:"text",style:{height:"26px"}}))),128))]),_:1}),(a(!0),n($,null,A(new Array(6),R=>(a(),d(V,{key:R,animated:""},{template:F(()=>[(a(!0),n($,null,A(new Array(7),J=>(a(),d(x,{key:J,class:"am-ecms__item",variant:"text",style:fe({height:`${(e(P).height-26)/6}px`})},null,8,["style"]))),128))]),_:2},1024))),128))],4)}}});const Ca={key:0,class:"am-ecs__filters-top"},xa=f("span",{class:"am-icon-filter"},null,-1),Ea={key:0},Ya={class:"am-ecs__header-actions"},wa={key:0,class:"am-ecs__header-text"},Sa={key:1,class:"am-ecs"},Ma={class:"am-ecs__side-header__text"},Da={class:"am-ecs__side-header__range"},Ta={key:0},$a={class:"am-ecs__side-header__actions"},Ba=["onClick"],za=["onClick"],La={class:"am-ecs__side-card__header"},Pa={key:0,class:"am-ecs__side-card__begins"},Ia={key:1,class:"am-ecs__side-card__price"},Fa={class:"am-ecs__side-card__date-time"},Va={class:"am-ecs__side-card__day"},Aa={class:"am-ecs__side-card__month"},Oa={class:"am-ecs__side-card__at"},Ra={class:"am-ecs__side-card__time"},Ua={class:"am-ecs__side-card__name"},Wa={key:0,class:"am-ecs__side-card__location"},Ha={key:1,class:"am-ecs__side-card__footer"},Na={key:1,class:"am-ecs__side-card__spots"},ja={key:0,class:"am-ecs__side-card__spots-numb"},qa={class:"am-ecs__side-card__spots-text"},Ga=["onClick"],Ja={class:"am-ecs__side-card__header"},Qa={key:0,class:"am-ecs__side-card__begins"},Xa={key:1,class:"am-ecs__side-card__price"},Za={class:"am-ecs__side-card__date-time"},Ka={class:"am-ecs__side-card__day"},es={class:"am-ecs__side-card__month"},ts={class:"am-ecs__side-card__at"},as={class:"am-ecs__side-card__time"},ss={class:"am-ecs__side-card__name"},ls={key:0,class:"am-ecs__side-card__location"},is={key:1,class:"am-ecs__side-card__footer"},ns={key:0,class:"am-ecs__side-card__status am-waiting"},os={key:1,class:"am-ecs__side-card__spots"},rs={class:"am-ecs__side-card__spots-numb"},cs={class:"am-ecs__side-card__spots-text"},us={key:2,class:"am-ecs__side-empty"},ds={key:3,class:"am-ecs__side-empty"},ms={props:{monthsInFuture:{type:Number,default:1}},setup(X){const P=X,O=H("settings");let ne=v(()=>o.getters.getReady),c=v(()=>o.getters.getLoading),x=v(()=>o.getters["eventEntities/getUpcomingLoading"]);const V=p(null),{width:R}=pe(V),J=p(null),{width:I}=pe(J);let qe=v(()=>_t(I.value));const u=p(null),{width:Ie,height:ge}=pe(u);let Z=p(null);const{width:K,height:ee}=pe(Z);let te=v(()=>_t(K.value)),Ge=p(null);const{height:xe}=pe(Ge);let he=p(null);const{width:st}=pe(he);let oe=v(()=>_t(st.value)),Fe=p(null);const{height:Ee}=pe(Fe);let E=p(null);const{height:k}=pe(E);let ye=p(0),re=p(0),Ve=H("customizedDataForm"),C=v(()=>Ve.value.calendar.options),Je=H("labels");const be=H("localLanguage");let M=v(()=>na(be.value).el.datepicker),lt=v(()=>O.general.usedLanguages.includes(be.value)),m=v(()=>{let s=Nt({...Je});if(Ve.value.calendar.translations){let l=Ve.value.calendar.translations;Object.keys(l).forEach(t=>{l[t][be.value]&&lt.value?s[t]=l[t][be.value]:l[t].default&&(s[t]=l[t].default)})}return s});const o=Bt();let Ae=v(()=>o.getters["eventEntities/getCalendarEvents"]),ce=H("popupVisible"),j=p(_().format("YYYY-MM-DD")),q=p({locale:be.value.split("_")[0],locales:jt,plugins:[qt,Gt],initialView:"dayGridMonth",headerToolbar:!1,slotLabelFormat:{hour:"numeric",minute:"2-digit",hour12:!1},eventTimeFormat:{hour:"numeric",minute:"2-digit",hour12:!1},aspectRatio:.9,firstDay:Jt(),dayMaxEvents:!0,selectable:!0,unselectAuto:!1,selectLongPressDelay:0,dayCellClassNames:"am-evt-day-wrapper",unselectCancel:".am-evt-more-link-inner",moreLinkClassNames:"am-evt-more-link",eventClassNames:"am-evt-block",eventContent:it,eventClick:Qe,dateClick:nt,moreLinkContent:ot,moreLinkClick:rt,events:[]});function it(s){let l=s.event.extendedProps,t=l.evtColor,r=l.places===1?`${l.places} ${m.value.event_slot_left}`:`${l.places} ${m.value.event_slots_left}`,w=m.value.event_no_spots,ve=m.value.closed,le=m.value.canceled,U=l.places<=0?w:r;l.evtStatus==="closed"&&(U=ve),l.evtStatus==="canceled"&&(U=le),l.evtStatus==="waiting"&&(U=m.value.join_waiting_list);let B='<span class="am-evt-spots-left">'+U+"</span>",G='<div class="am-evt-spots">'+B+"</div>";l.evtStatus==="closed"||l.evtStatus==="canceled"||l.evtStatus==="waiting"?G=C.value.status.visibility?G:"":G=C.value.capacity.visibility?G:"";let Q=l.hovered?" am-evt-hovered":"",pt=` am-evt-${l.evtStatus}`;return{html:'<div class="am-evt-wrapper'+Q+pt+'" style="--am-c-evt: '+t+'"><span class="am-evt-background"></span><div class="am-evt-time">'+ft(l.evtTimeStart)+'</div><div class="am-evt-inner"><p class="am-evt-text">'+s.event.title+"</p></div>"+G+"</div>"}}function Qe(s){ce.value=!0,o.commit("eventBooking/setEventId",parseInt(s.event.extendedProps.evtId)),at(o,{},"SelectEvent","event",null,null),q.value.events.map(l=>{l.hovered=parseInt(l.evtId)===parseInt(s.event.extendedProps.evtId)})}function nt(){}function ot(s){let l=m.value.event;return s.num>1&&(l=m.value.events),u.value.getApi().el.offsetWidth<448?{html:'<div class="am-evt-more-link-inner mobile"></div>'}:{html:'<div class="am-evt-more-link-inner">+'+s.num+" "+l+"</div>"}}function rt(s){s.jsEvent.stopPropagation()}function Oe(s){if(!s.length)return[];s=s.map(t=>({periodStart:_(t.periodStart),periodEnd:_(t.periodEnd)})).sort((t,r)=>t.periodStart-r.periodStart);const l=[s[0]];for(let t=1;t<s.length;t++){const r=l[l.length-1],w=s[t];w.periodStart<=r.periodEnd?r.periodEnd=_.max(r.periodEnd,w.periodEnd):l.push(w)}return l.map(t=>({periodStart:t.periodStart.format("YYYY-MM-DD HH:mm:ss"),periodEnd:t.periodEnd.format("YYYY-MM-DD HH:mm:ss")}))}function Ye(s){let l=[];s.forEach(function(r){Oe(r.periods).forEach(w=>{let ve=_(w.periodStart.split(" ")[0],"YYYY-MM-DD"),le=_(w.periodEnd.split(" ")[0],"YYYY-MM-DD"),U=_(w.periodStart.split(" ")[1],"HH:mm:ss").format("HH:mm:ss"),B=_(w.periodEnd.split(" ")[1],"HH:mm:ss").format("HH:mm:ss");B==="00:00:00"&&(B="24:00:00",le.subtract(1,"days"));let G=ht(r);l.push({evtId:r.id,evtStatus:G?"waiting":Pe(r),periodId:w.id,locationId:r.locationId,customLocation:r.customLocation,title:r.name,places:G?Ne(r):r.full?0:ue(r),evtColor:r.color,hovered:!1,evtTimeStart:U,start:ve.format("YYYY-MM-DD")+" "+U,end:le.format("YYYY-MM-DD")+" "+B})})});let t=[];l.forEach(r=>{t.find(w=>w.evtId===r.evtId&&w.start.split(" ")[0]===r.start.split(" ")[0])||t.push(r)}),q.value.events=t}zt(()=>{let s=Array.from(Ae.value);Ye(s)});function ue(s){if(s.customPricing){let l=0,t=s.customTickets;if(s.maxCustomCapacity){let r=0;t.forEach(w=>{(!("enabled"in w)||w.enabled)&&(r+=w.sold)}),l=s.maxCustomCapacity-r}else t.forEach(r=>{(!("enabled"in r)||r.enabled)&&(l+=r.spots-r.sold-("persons"in r?r.persons:0))});return l}return s.places}function Xe(){let s=[_(j.value).startOf("month").subtract(15,"days").format("YYYY-MM-DD"),_(j.value).endOf("month").add(15,"days").format("YYYY-MM-DD")];o.commit("params/setDates",s),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","calendar")}function we(s){s==="today"&&u.value.getApi().today(),s==="prev"&&u.value.getApi().prev(),s==="next"&&u.value.getApi().next(),j.value=_(u.value.getApi().getDate().toUTCString()).format("YYYY-MM-DD"),L.value=_(j.value).format("MM"),ae.value=_(j.value).format("YYYY"),Xe()}let L=p(_(j.value).format("MM")),Ze=p([{value:"01",label:M.value.month1},{value:"02",label:M.value.month2},{value:"03",label:M.value.month3},{value:"04",label:M.value.month4},{value:"05",label:M.value.month5},{value:"06",label:M.value.month6},{value:"07",label:M.value.month7},{value:"08",label:M.value.month8},{value:"09",label:M.value.month9},{value:"10",label:M.value.month10},{value:"11",label:M.value.month11},{value:"12",label:M.value.month12}]),ae=p(_(j.value).format("YYYY")),de=p([{value:_().format("YYYY")},{value:_().add(1,"year").format("YYYY")},{value:_().add(2,"year").format("YYYY")}]);function b(){j.value=_(`${ae.value}-${L.value}`,"YYYY-MM").format("YYYY-MM-DD"),Xe()}let Ke=v(()=>`${Ze.value.find(s=>s.value===L.value).label}, ${ae.value}`),et={components:{IconComponent:_e},template:'<IconComponent icon="arrow-left"/>'},h={components:{IconComponent:_e},template:'<IconComponent icon="arrow-right"/>'},g={components:{IconComponent:_e},template:'<IconComponent icon="folder"/>'},D={components:{IconComponent:_e},template:'<IconComponent icon="locations"/>'},ct={components:{IconComponent:_e},template:'<IconComponent icon="employee"/>'},Lt={components:{IconComponent:_e},template:'<IconComponent icon="circle-empty"/>'},Se=p(!1),Re=v(()=>o.getters["eventEntities/getFilteredLocations"](o.getters["params/getShortcodeParams"])),ut=v(()=>o.getters["eventEntities/getFilteredTags"](o.getters["params/getShortcodeParams"])),dt=v(()=>o.getters["eventEntities/getEmployees"]),Pt=p(["Open","Full","Upcoming","Closed","Canceled"]),tt=v(()=>{let s=o.getters["params/getShortcodeParams"].tags&&o.getters["params/getShortcodeParams"].tags.length===1,l=ut.value.length,t=o.getters["params/getShortcodeParams"].locations&&o.getters["params/getShortcodeParams"].locations.length===1,r=Re.value.length,w=dt.value.length,ve=!s&&l>0,le=!t&&r>0,U=w>0,B={tag:"am-mw25",location:"am-mw25",employee:"am-mw25",status:"am-mw25"};if(!ve&&!le&&!U)B.status="am-mw100";else{let G=ve+le+U;if(G===2){let Q="am-mw33",pt="am-mw33";ve&&(B.tag=Q),le&&(B.location=Q),U&&(B.employee=Q),B.status=pt}else if(G===1){let Q="am-mw50";ve&&(B.tag=Q),le&&(B.location=Q),U&&(B.employee=Q),B.status=Q}}return B}),It={components:{IconComponent:_e},template:'<IconComponent icon="filter"/>'},Ue=v({get:()=>o.getters["params/getSearch"],set:s=>{o.commit("params/setSearch",s.length?s:null)}}),Ft={components:{IconComponent:_e},template:'<IconComponent icon="search"/>'},Me=v({get:()=>o.getters["params/getTag"],set:s=>{o.commit("params/setTag",s.length?s:null)}}),De=v({get:()=>o.getters["params/getLocations"],set:s=>{o.commit("params/setLocations",s.length?s:null)}}),Te=v({get:()=>o.getters["params/getEmployees"],set:s=>{o.commit("params/setEmployees",s.length?s:null)}}),ke=p([]);function kt(s){let l=Array.from(Ae.value);if(s.length){let t=[];l.forEach(r=>{s.forEach(w=>{w===Pe(r)&&t.push(r)})}),Ye(t)}else Ye(l)}let Ct=p(null);Ce([Ue,Me,De,Te],()=>{clearTimeout(Ct.value),Ct.value=setTimeout(()=>{o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","calendar"),o.dispatch("eventEntities/requestEvents","upcoming"),o.commit("setLoading",!0)},1e3)}),Ce(Ae,s=>{ke.value.length?kt(ke.value):Ye(s),je(()=>{u.value&&setTimeout(()=>{u.value.getApi().render()},200)})}),Ce(c,()=>{c.value||je(()=>{let s=u.value.getApi();s.gotoDate(j.value),setTimeout(()=>{s.render()},200)})}),Qt(()=>{ge.value&&(ye.value=ge.value,re.value=ge.value+ee.value+xe.value+48-(Ee.value+36),O.appointments.waitingListEvents.enabled&&(re.value-=k.value+28)),Ie.value<448?(q.value.moreLinkClassNames+=q.value.moreLinkClassNames.includes("mobile")?"":" mobile",q.value.dayCellClassNames+=q.value.dayCellClassNames.includes("mobile")?"":" mobile"):(q.value.moreLinkClassNames="am-evt-more-link",q.value.dayCellClassNames="am-evt-day-wrapper"),!ne.value&&!ge.value&&(ye.value=I.value*.9)});let mt=v(()=>o.getters["eventEntities/getUpcomingEvents"].filter(s=>Pe(s)==="open"||Pe(s)==="upcoming")),vt=v(()=>o.getters["eventEntities/getUpcomingEvents"].filter(s=>ht(s))),Vt=p([{title:m.value.upcoming,class:"am-upcoming"},{title:m.value.waiting_list,class:"am-waiting"}]),me=p(0),se=p(1),We=v(()=>P.monthsInFuture===0||P.monthsInFuture===1||P.monthsInFuture<0?1:P.monthsInFuture);o.commit("params/setUpcomingDates",[_().add(se.value,"months").startOf("month").format("YYYY-MM-DD"),_().add(We.value,"months").endOf("month").format("YYYY-MM-DD")]),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","upcoming");let At=v(()=>o.getters["params/getUpcomingDates"]);function Ot(s){return _(s[1],"YYYY-MM-DD").diff(_(s[0]),"months")===0?`${M.value[`month${_(s[0]).format("M")}`]} ${_(s[0]).format("YYYY")}`:`${M.value[`month${_(s[0]).format("M")}`]} ${_(s[0]).format("YYYY")} - ${M.value[`month${_(s[1]).format("M")}`]} ${_(s[1]).format("YYYY")}`}function xt(s){s==="prev"&&(se.value=se.value-We.value),s==="next"&&(se.value=se.value+We.value),o.commit("params/setUpcomingDates",[_().add(se.value,"months").startOf("month").format("YYYY-MM-DD"),_().add(We.value===1?se.value:se.value+We.value-1,"months").endOf("month").format("YYYY-MM-DD")]),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","upcoming")}function Et(s){return s.customPricing?Tt(s)?`${m.value.from} ${Mt(oa(s))}`:m.value.event_free:Tt(s)?Mt(s.price):m.value.event_free}function Yt(s){let l=[];return s.forEach(t=>{l.push(t.periodStart.split(" ")[0]),l.push(t.periodEnd.split(" ")[0])}),!l.every(t=>t===l[0])}function wt(s){o.commit("eventBooking/setEventId",parseInt(s)),at(o,{},"SelectEvent","event",null,null),ce.value=!0}function Rt(s){let l=ue(s),t=l===1?m.value.event_slot_left:m.value.event_slots_left,r=m.value.event_no_spots;return l<=0?r:t}window.addEventListener("resize",Ut);function Ut(){setTimeout(()=>{u.value.getApi().render()},200)}let Y=H("amColors"),Wt=v(()=>({"--am-c-ecal-bgr":Y.value.colorMainBgr,"--am-c-ecal-heading-text":Y.value.colorMainHeadingText,"--am-c-ecal-heading-text-op70":T(Y.value.colorMainHeadingText,.7),"--am-c-ecal-text":Y.value.colorMainText,"--am-c-ecal-text-op03":T(Y.value.colorMainText,.03),"--am-c-ecal-text-op05":T(Y.value.colorMainText,.05),"--am-c-ecal-text-op10":T(Y.value.colorMainText,.1),"--am-c-ecal-text-op20":T(Y.value.colorMainText,.2),"--am-c-ecal-text-op30":T(Y.value.colorMainText,.3),"--am-c-ecal-text-op50":T(Y.value.colorMainText,.5),"--am-c-ecal-text-op70":T(Y.value.colorMainText,.7),"--am-c-ecal-card-bgr":Y.value.colorCardBgr,"--am-c-ecal-card-border":Y.value.colorCardBorder,"--am-c-ecal-card-border-op10":T(Y.value.colorCardBorder,.1),"--am-c-ecal-card-text":Y.value.colorCardText,"--am-c-ecal-card-text-op80":T(Y.value.colorCardText,.8),"--am-c-ecal-card-text-op50":T(Y.value.colorCardText,.5),"--am-c-ecal-error":Y.value.colorError,"--am-c-ecal-primary":Y.value.colorPrimary,"--am-c-ecal-primary-op30":T(Y.value.colorPrimary,.3),"--am-c-ecal-success":Y.value.colorSuccess,"--am-c-ecal-warning":Y.value.colorWarning}));return(s,l)=>(a(),n("div",{ref_key:"evtCalPageRef",ref:V,class:S(["am-ecs__page",{"am-tablet":e(R)<992}]),style:fe(e(Wt))},[f("div",{ref_key:"mainBlockRef",ref:J,class:S(["am-ecs__main",{"am-full-width":e(R)<992||!e(C).upcomingBlock.visibility}])},[e(C).search.visibility||e(C).filters.visibility?(a(),n("div",{key:0,ref_key:"filtersRef",ref:Z,class:"am-ecs__filters"},[e(c)?i("",!0):(a(),n("div",Ca,[e(C).search.visibility?(a(),n("div",{key:0,class:S(["am-ecs__filters-search",e(te)])},[e(c)?i("",!0):(a(),d(Xt,{key:0,modelValue:e(Ue),"onUpdate:modelValue":l[0]||(l[0]=t=>ie(Ue)?Ue.value=t:Ue=t),placeholder:`${e(m).event_search}...`,"icon-start":e(Ft),disabled:e(c),size:"small"},null,8,["modelValue","placeholder","icon-start","disabled"]))],2)):i("",!0),e(C).filters.visibility?(a(),n("div",{key:1,class:S(["am-ecs__filters-btn",[{"am-single":!e(C).search.visibility},e(te)]])},[e(c)?i("",!0):(a(),d($e,{key:0,icon:e(It),"icon-only":e(K)<=500,"custom-class":"am-ecs__filters-btn__inner",category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[1]||(l[1]=t=>ie(Se)?Se.value=!e(Se):Se=!e(Se))},{default:F(()=>[xa,e(K)>500?(a(),n("span",Ea,y(e(m).event_filters),1)):i("",!0)]),_:1},8,["icon","icon-only","disabled"]))],2)):i("",!0)])),e(c)?(a(),d(ha,{key:1})):i("",!0),N(Zt,{name:"am-slide-fade"},{default:F(()=>[e(Se)?(a(),n("div",{key:0,class:S(["am-ecs__filters-menu",e(te)])},[(!e(o).getters["params/getShortcodeParams"].tags||e(o).getters["params/getShortcodeParams"].tags.length!==1)&&e(ut).length>0?(a(),n("div",{key:0,class:S(["am-ecs__filters-menu__items",[e(te),e(tt).tag]])},[e(c)?i("",!0):(a(),d(Be,{key:0,modelValue:e(Me),"onUpdate:modelValue":l[2]||(l[2]=t=>ie(Me)?Me.value=t:Me=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,"prefix-icon":e(Me)?"":e(g),placeholder:e(m).event_type,disabled:e(c)},{default:F(()=>[(a(!0),n($,null,A(e(ut),(t,r)=>(a(),d(Le,{key:r,class:S(`am-ecs-tag__${t.name.replace(/\s+/g,"")}`),value:t.name,label:t.name},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","prefix-icon","placeholder","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),(!e(o).getters["params/getShortcodeParams"].locations||e(o).getters["params/getShortcodeParams"].locations.length!==1)&&e(Re).length>0?(a(),n("div",{key:1,class:S(["am-ecs__filters-menu__items",[e(te),e(tt).location]])},[e(c)?i("",!0):(a(),d(Be,{key:0,modelValue:e(De),"onUpdate:modelValue":l[3]||(l[3]=t=>ie(De)?De.value=t:De=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_location,"prefix-icon":e(De)?"":e(D),disabled:e(c)},{default:F(()=>[(a(!0),n($,null,A(e(Re),t=>(a(),d(Le,{key:t.id,class:S(`am-ecs-location__${t.id}`),value:t.id,label:t.name},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),e(dt).length>0?(a(),n("div",{key:2,class:S(["am-ecs__filters-menu__items",[e(te),e(tt).employee]])},[e(c)?i("",!0):(a(),d(Be,{key:0,modelValue:e(Te),"onUpdate:modelValue":l[4]||(l[4]=t=>ie(Te)?Te.value=t:Te=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_employee,"prefix-icon":e(Te)?"":e(ct),disabled:e(c)},{default:F(()=>[(a(!0),n($,null,A(e(dt),t=>(a(),d(Le,{key:t.id,class:S(`am-ecs-employee__${t.id}`),value:t.id,label:`${t.firstName} ${t.lastName}`},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),f("div",{class:S(["am-ecs__filters-menu__items",[e(te),e(tt).status]])},[e(c)?i("",!0):(a(),d(Be,{key:0,modelValue:e(ke),"onUpdate:modelValue":l[5]||(l[5]=t=>ie(ke)?ke.value=t:ke=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_status,"prefix-icon":e(ke).length?"":e(Lt),disabled:e(c),onChange:kt},{default:F(()=>[(a(!0),n($,null,A(e(Pt),t=>(a(),d(Le,{key:t.toLowerCase(),class:S(`am-ecs-status__${t.toLowerCase()}`),value:t.toLowerCase(),label:e(m)[t.toLowerCase()]},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)],2)):i("",!0)]),_:1})],512)):i("",!0),f("div",{ref_key:"headerRef",ref:Ge,class:"am-ecs__header"},[f("div",{class:S(["am-ecs__header-inner",e(qe)])},[f("div",Ya,[e(c)?i("",!0):(a(),d($e,{key:0,"custom-class":"am-ecs__header-today",category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[6]||(l[6]=t=>we("today"))},{default:F(()=>[ze(y(e(m).event_today),1)]),_:1},8,["disabled"])),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"100px",marginRight:"16px"}})):i("",!0),e(c)?i("",!0):(a(),d($e,{key:2,"custom-class":"am-ecs__header-prev","icon-only":!0,icon:e(et),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[7]||(l[7]=t=>we("prev"))},null,8,["icon","disabled"])),e(c)?(a(),d(z,{key:3,size:"small","custom-style":{width:"32px",marginRight:"8px"}})):i("",!0),e(c)?i("",!0):(a(),d($e,{key:4,"custom-class":"am-ecs__header-next","icon-only":!0,icon:e(h),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[8]||(l[8]=t=>we("next"))},null,8,["icon","disabled"])),e(c)?(a(),d(z,{key:5,size:"small","custom-style":{width:"32px",marginRight:"16px"}})):i("",!0)]),e(c)?i("",!0):(a(),n("div",wa,y(e(Ke)),1)),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"100px"}})):i("",!0)],2),f("div",{class:S(["am-ecs__header-selection",e(qe)])},[e(c)?i("",!0):(a(),d(Be,{key:0,modelValue:e(L),"onUpdate:modelValue":l[9]||(l[9]=t=>ie(L)?L.value=t:L=t),size:"small",disabled:e(c),onChange:b},{default:F(()=>[(a(!0),n($,null,A(e(Ze),t=>(a(),d(Le,{key:t.value,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"])),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"calc(50% - 3px)"}},null,8,["custom-style"])):i("",!0),e(c)?i("",!0):(a(),d(Be,{key:2,modelValue:e(ae),"onUpdate:modelValue":l[10]||(l[10]=t=>ie(ae)?ae.value=t:ae=t),size:"small",disabled:e(c),onChange:b},{default:F(()=>[(a(!0),n($,null,A(e(de),t=>(a(),d(Le,{key:t.value,value:t.value},null,8,["value"]))),128))]),_:1},8,["modelValue","disabled"])),e(c)?(a(),d(z,{key:3,size:"small","custom-style":{width:"calc(50% - 3px)"}},null,8,["custom-style"])):i("",!0)],2)],512),e(c)?i("",!0):(a(),n("div",Sa,[N(e(Kt),{ref_key:"eventCalendarRef",ref:u,options:e(q)},null,8,["options"])])),e(c)?(a(),d(ka,{key:2,height:e(ye)},null,8,["height"])):i("",!0)],2),e(C).upcomingBlock.visibility?(a(),n("div",{key:0,ref_key:"sideRef",ref:he,class:S(["am-ecs__side",{"am-full-width":e(R)<992}])},[f("div",{ref_key:"sideHeaderRef",ref:Fe,class:"am-ecs__side-header"},[f("div",Ma,[e(x)?i("",!0):(a(),n($,{key:0},[ze(y(e(m).event_upcoming_events),1)],64)),e(x)?(a(),d(z,{key:1,size:"small"})):i("",!0)]),f("div",Da,[e(x)?i("",!0):(a(),n("div",Ta,y(Ot(e(At))),1)),e(x)?(a(),d(z,{key:1,size:"micro","custom-style":{width:"100%"}})):i("",!0)]),f("div",$a,[e(x)?i("",!0):(a(),d($e,{key:0,"custom-class":"am-ecs__side-header__btn","icon-only":!0,icon:e(et),category:"secondary",type:"plain",size:"small",disabled:e(c)||e(se)===1,onClick:l[11]||(l[11]=t=>xt("prev"))},null,8,["icon","disabled"])),e(x)?(a(),d(z,{key:1,size:"small","custom-style":{width:"calc(50% - 4px)"}},null,8,["custom-style"])):i("",!0),e(x)?i("",!0):(a(),d($e,{key:2,"custom-class":"am-ecs__side-header__btn","icon-only":!0,icon:e(h),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[12]||(l[12]=t=>xt("next"))},null,8,["icon","disabled"])),e(x)?(a(),d(z,{key:3,size:"small","custom-style":{width:"calc(50% - 4px)"}},null,8,["custom-style"])):i("",!0)])],512),e(O).appointments.waitingListEvents.enabled?(a(),n("div",{key:0,ref_key:"sideTabRef",ref:E,class:"am-ecs__side-tab"},[e(x)?i("",!0):(a(!0),n($,{key:0},A(e(Vt),(t,r)=>(a(),n("div",{key:r,class:S(["am-ecs__side-tab__item",[{"am-active":e(me)===r},t.class]]),onClick:()=>ie(me)?me.value=r:me=r},y(t.title),11,Ba))),128)),e(x)?(a(),d(z,{key:1,rows:2,"custom-style":{width:"117px",height:"42px"},size:"custom"})):i("",!0)],512)):i("",!0),f("div",{class:S(["am-ecs__side-main",e(oe)]),style:fe(e(R)>991?{height:`${e(re)}px`}:{})},[e(mt).length&&!e(x)&&e(me)===0?(a(!0),n($,{key:0},A(e(mt),t=>(a(),n("div",{key:t.id,class:S(["am-ecs__side-card",e(oe)]),style:fe({"--am-c-evt":t.color,"--am-c-evt-op05":e(T)(t.color,.05)}),onClick:r=>wt(t.id)},[f("div",La,[Yt(t.periods)?(a(),n("span",Pa,y(e(m).event_begins),1)):i("",!0),e(C).price.visibility?(a(),n("span",Ia,[ze(y(Et(t))+" ",1),e(St)(e(o),t.id,"event")&&e(C).tax.visibility?(a(),n($,{key:0},[ze(y(e(O).payments.taxes.excluded?` +${e(m).total_tax_colon}`:` ${e(m).incl_tax}`),1)],64)):i("",!0)])):i("",!0)]),f("div",Fa,[f("span",Va,y(e(_)(t.periods[0].periodStart.split(" ")[0]).format("DD")),1),f("span",Aa,y(e(M).months[e(_)(t.periods[0].periodStart.split(" ")[0]).format("MMM").toLowerCase()].toUpperCase()),1),f("span",Oa,y(e(m).event_at),1),f("span",Ra,y(e(ft)(t.periods[0].periodStart.split(" ")[1])),1)]),f("div",Ua,y(t.name),1),e(C).location.visibility?(a(),n("div",Wa,y(e(Dt)(t,e(Re))),1)):i("",!0),e(C).status.visibility||e(C).capacity.visibility?(a(),n("div",Ha,[e(C).status.visibility?(a(),n("div",{key:0,class:S(["am-ecs__side-card__status",`am-${e(Pe)(t)}`])},y(e(m)[e(Pe)(t)]),3)):i("",!0),e(C).capacity.visibility?(a(),n("div",Na,[ue(t)?(a(),n("span",ja,y(ue(t)),1)):i("",!0),f("span",qa,y(Rt(t)),1)])):i("",!0)])):i("",!0)],14,za))),128)):i("",!0),e(vt).length&&!e(x)&&e(me)===1?(a(!0),n($,{key:1},A(e(vt),t=>(a(),n("div",{key:t.id,class:S(["am-ecs__side-card",e(oe)]),style:fe({"--am-c-evt":t.color,"--am-c-evt-op05":e(T)(t.color,.05)}),onClick:r=>wt(t.id)},[f("div",Ja,[Yt(t.periods)?(a(),n("span",Qa,y(e(m).event_begins),1)):i("",!0),e(C).price.visibility?(a(),n("span",Xa,[ze(y(Et(t))+" ",1),e(St)(e(o),t.id,"event")&&e(C).tax.visibility?(a(),n($,{key:0},[ze(y(e(O).payments.taxes.excluded?` +${e(m).total_tax_colon}`:` ${e(m).incl_tax}`),1)],64)):i("",!0)])):i("",!0)]),f("div",Za,[f("span",Ka,y(e(_)(t.periods[0].periodStart.split(" ")[0]).format("DD")),1),f("span",es,y(e(M).months[e(_)(t.periods[0].periodStart.split(" ")[0]).format("MMM").toLowerCase()].toUpperCase()),1),f("span",ts,y(e(m).event_at),1),f("span",as,y(e(ft)(t.periods[0].periodStart.split(" ")[1])),1)]),f("div",ss,y(t.name),1),e(C).location.visibility?(a(),n("div",ls,y(e(Dt)(t,e(Re))),1)):i("",!0),e(C).status.visibility||e(C).capacity.visibility?(a(),n("div",is,[e(C).status.visibility?(a(),n("div",ns,y(e(Ne)(t)>0?e(m).waiting_list:e(m).join_waiting_list),1)):i("",!0),e(C).capacity.visibility&&e(Ne)(t)>0?(a(),n("div",os,[f("span",rs,y(e(Ne)(t)),1),f("span",cs,y(e(Ne)(t)===1?e(m).person_waiting:e(m).people_waiting),1)])):i("",!0)])):i("",!0)],14,Ga))),128)):i("",!0),!e(mt).length&&!e(x)&&e(me)===0?(a(),n("div",us,y(e(m).evt_empty_message),1)):i("",!0),!e(vt).length&&!e(x)&&e(me)===1?(a(),n("div",ds," There are no events with waiting list possibilities ")):i("",!0),e(x)?(a(),d(z,{key:4,rows:5,"custom-style":{height:"150px",marginBottom:"12px"},size:"custom"})):i("",!0)],6)],2)):i("",!0)],6))}};const vs=f("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),ps=f("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),_s=["href"],fs={key:0,class:"am-dialog-el-header"},gs={name:"EventsCalendarFormWrapper"},Cs=Object.assign(gs,{emits:["isRestored"],setup(X,{emit:P}){const O=He(ra),ne=He(ca),c=He(ua),x=He(da),V=He(ma);let R=H("isMounted");const J=p(!1);W("popupVisible",J);const I=H("settings"),qe=H("baseUrls"),u=Bt();let Ie=p(0);function ge(){Ie.value=window.visualViewport.height}window.addEventListener("resize",ge),u.commit("setFormKey","ecf");const Z=H("shortcodeData");u.commit("shortcodeParams/setForm","eventCalendarForm"),u.commit("shortcodeParams/setShortcodeParams",Z.value),u.commit("bookableType/setType","event"),u.commit("eventEntities/setEventsDisplay","calendar");let K=p(null),ee=p(null),te=v(()=>u.getters["eventEntities/getEvents"]);function Ge(h){u.commit("eventEntities/setEvents",h)}let xe=p(0);W("containerWidth",xe);let he=p(0);W("dialogWidth",he),window.addEventListener("resize",st);function st(){K.value&&(xe.value=K.value.offsetWidth),ee.value&&(he.value=ee.value.offsetWidth)}let oe=v(()=>u.getters.getReady),Fe=v(()=>u.getters.getLoading),Ee=v(()=>u.getters["eventBooking/getBooked"]);const E=p(0);W("stepIndex",E);const k=p([O,c,V]);W("stepsArray",k);let ye=p([]);W("eventFluidStepKey",ye),Ce(ye,h=>{if(h.indexOf("eventTickets")>-1&&k.value.find(g=>g.name==="EventTickets")===void 0&&k.value.splice(E.value+1,0,ne),h.indexOf("eventTickets")<0&&k.value.find(g=>g.name==="EventTickets")!==void 0){let g=k.value.indexOf(ne);k.value.splice(g,1)}if(h.indexOf("eventPayment")>-1&&k.value.find(g=>g.name==="EventPayment")===void 0&&k.value.splice(E.value+1,0,x),h.indexOf("eventPayment")<0&&k.value.find(g=>g.name==="EventPayment")!==void 0){let g=k.value.indexOf(x);k.value.splice(g,1)}},{deep:!0});let re=v(()=>ht(u.getters["eventEntities/getEvent"](u.getters["eventBooking/getSelectedEventId"])));Ce(re,h=>{if(h){let g=JSON.parse(JSON.stringify(u.getters["eventEntities/getEvent"](u.getters["eventBooking/getSelectedEventId"]).waitingList));u.commit("eventWaitingListOptions/setAllData",{...g,isAvailable:re.value})}});let Ve=p(!1);W("bringingAnyoneVisibility",Ve);let C=p(!1),Je=p(!1),be=v(()=>Ee.value!==null?Ee.value.customerCabinetUrl.length>0:!0);function M(){u.commit("setLoading",!0),E.value=E.value===k.value.length-1?E.value:E.value+1}function lt(){u.commit("setLoading",!0),E.value=E.value-1,ce.value=!ce.value}function m(){C.value=!0;let h=document.getElementsByClassName("am-dialog-el")[0];sa(h.children[0],h.children[0].children[0],50,300)}function o(){C.value=!1}function Ae(h){Je.value=h}let ce=p(!1);function j(){ce.value=!0}function q(){ce.value=!1}function it(){k.value[E.value].name==="CongratulationsStep"&&Ee.value?window.location.href=Ee.value.customerCabinetUrl:J.value=!1}W("secondButton",{secondButtonClick:it}),W("changingStepsFunctions",{nextStep:M,previousStep:lt,footerButtonClick:m,footerButtonReset:o,footerBtnDisabledUpdater:Ae,footerButtonClicked:C,footerBtnDisabled:Je,headerButtonPreviousClick:j,headerButtonPreviousReset:q,headerButtonPreviousClicked:ce});let Qe=p(1);ea("upcomingDateRange",{futureMonthsNumber:Qe}),u.commit("params/setDates",[$t().startOf("month").subtract(15,"days").format("YYYY-MM-DD"),$t().endOf("month").add(15,"days").format("YYYY-MM-DD")]),u.commit("pagination/setPage",0),u.dispatch("eventEntities/requestEntities",{types:["tags","employees","locations","customFields","taxes"],loadEntities:Z.value.trigger||window.ameliaShortcodeData.filter(h=>!h.hasApiCall).length===window.ameliaShortcodeData.length?!0:Z.value.hasApiCall}),zt(()=>{document.getElementById("amelia-v2-booking-"+Z.value.counter).classList.add("amelia-v2-booking-"+Z.value.counter+"-loaded"),Ce(oe,h=>{h&&at(u,{events:te,useEvents:Ge},"ViewContent","event",null,null)}),je(()=>{K.value&&(xe.value=K.value.offsetWidth),ee.value&&(he.value=ee.value.offsetWidth)}),at(u,{containerWidth:xe},"ContainerWidth","event",null,null),ge(),R.value=!0});function nt(){k.value[E.value].name==="CongratulationsStep"&&(u.commit("setReady",!1),window.location.reload()),ye.value=[],E.value=0}function ot(){je(()=>{u.dispatch("persons/resetPersons"),u.dispatch("coupon/resetCoupon"),u.dispatch("tickets/resetCustomTickets"),u.dispatch("eventWaitingListOptions/resetWaitingOptions")})}function rt(){je(()=>{ee.value&&(he.value=ee.value.offsetWidth)})}Ce(oe,h=>{if(h){let g=ia(u,Z.value);if(g){k.value.splice(0,k.value.length),E.value=0,g.steps.forEach(ct=>{switch(ct){case"EventInfo":k.value.push(O);break;case"EventTickets":k.value.push(ne);break;case"EventCustomerInfo":k.value.push(c);break;case"EventPayment":k.value.push(x);break;case"CongratulationsStep":k.value.push(V);break}E.value++}),u.commit("setLoading",!1);let D=-1;g.result==="success"?D=k.value.length-1:(g.result==="error"||g.result==="canceled")&&(D=k.value.length-2),E.value=D,J.value=!0,P("isRestored",!0)}}});let Oe=v(()=>I.customizedData&&"ecf"in I.customizedData?I.customizedData.ecf:gt.ecf);W("customizedDataForm",Oe);const Ye=H("labels"),ue=H("localLanguage");let Xe=v(()=>I.general.usedLanguages.includes(ue.value)),we=v(()=>{let h={},g=Oe.value[k.value[E.value].key].translations;return g&&Object.keys(g).forEach(D=>{g[D][ue.value]&&Xe.value?h[D]=g[D][ue.value]:g[D].default&&(h[D]=g[D].default)}),Object.keys(h).length?h:Ye}),L=v(()=>Oe.value[k.value[E.value].key].options),Ze=v(()=>"secBtn"in L.value&&"visibility"in L.value.secBtn?L.value.secBtn.visibility:!0),ae=v(()=>re.value&&k.value[E.value].key==="info"?"waitingBtn"in L.value?L.value.waitingBtn.buttonType:"filled":L.value.primBtn.buttonType);const de=p(I.customizedData?I.customizedData.fonts:gt.fonts);W("amFonts",de);let b=v(()=>I.customizedData&&"ecf"in I.customizedData?I.customizedData.ecf.colors:gt.ecf.colors);W("amColors",b);let Ke=v(()=>({"--am-c-primary":b.value.colorPrimary,"--am-c-success":b.value.colorSuccess,"--am-c-error":b.value.colorError,"--am-c-warning":b.value.colorWarning,"--am-c-main-bgr":b.value.colorMainBgr,"--am-c-main-heading-text":b.value.colorMainHeadingText,"--am-c-main-text":b.value.colorMainText,"--am-c-sb-bgr":b.value.colorSbBgr,"--am-c-sb-text":b.value.colorSbText,"--am-c-inp-bgr":b.value.colorInpBgr,"--am-c-inp-border":b.value.colorInpBorder,"--am-c-inp-text":b.value.colorInpText,"--am-c-inp-placeholder":b.value.colorInpPlaceHolder,"--am-c-drop-bgr":b.value.colorDropBgr,"--am-c-drop-text":b.value.colorDropText,"--am-c-card-bgr":b.value.colorCardBgr,"--am-c-card-text":b.value.colorCardText,"--am-c-card-border":b.value.colorCardBorder,"--am-c-btn-prim":b.value.colorBtnPrim,"--am-c-btn-prim-text":b.value.colorBtnPrimText,"--am-c-btn-sec":b.value.colorBtnSec,"--am-c-btn-sec-text":b.value.colorBtnSecText,"--am-c-skeleton-op20":T(b.value.colorMainText,.2),"--am-c-skeleton-op60":T(b.value.colorMainText,.6),"--am-font-family":de.value.fontFamily,"--am-dvh":Ie.value?`${Ie.value}px`:"100dvh","--am-mw-main":"792px","--am-hd-main":E.value>0?"592px":"652px","--am-c-scroll-op30":T(b.value.colorPrimary,.3),"--am-c-scroll-op10":T(b.value.colorPrimary,.1),"--am-rad-input":"6px","--am-mb-dialog":"300px"}));function et(){let h=document.head||document.getElementsByTagName("head")[0];h.querySelector("#amCustomFont")&&h.querySelector("#amCustomFont").remove();let g=`@font-face {font-family: '${de.value.fontFamily}'; src: url(${de.value.fontUrl});}`,D=document.createElement("style");h.appendChild(D),D.setAttribute("type","text/css"),D.setAttribute("id","amCustomFont"),D.appendChild(document.createTextNode(g))}return de.value.customFontSelected&&et(),(h,g)=>(a(),n($,null,[de.value.customFontSelected?i("",!0):(a(),n($,{key:0},[vs,ps,f("link",{rel:"stylesheet",type:"text/css",href:`${e(qe).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,_s)],64)),f("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:K,class:"am-ecf",style:fe(e(Ke))},[N(ms,{"months-in-future":e(Qe)},null,8,["months-in-future"]),e(oe)?(a(),d(ta,{key:0,modelValue:J.value,"onUpdate:modelValue":g[0]||(g[0]=D=>J.value=D),width:"650px","append-to-body":!0,"destroy-on-close":!0,"align-center":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-class":"amelia-v2-booking am-dialog-el","custom-styles":e(Ke),onClose:nt,onClosed:ot,onOpened:rt},{default:F(()=>[f("div",{id:"amelia-container",ref_key:"dialogContainer",ref:ee},[E.value>0?(a(),n("div",fs,[N(va,{ready:e(oe),loading:e(Fe),"customized-labels":e(we)},null,8,["ready","loading","customized-labels"])])):i("",!0),(a(),d(la(k.value[E.value]),{"in-dialog":!0,"global-class":"am-dialog-el__main-container"})),N(pa,{loading:e(Fe),"second-button-show":e(be)&&e(Ze)&&e(I).roles.customerCabinet.enabled&&e(I).roles.customerCabinet.pageUrl!==null,"payment-gateway":e(u).getters["payment/getPaymentGateway"],"customized-labels":e(we),"primary-footer-button-type":e(ae),"secondary-footer-button-type":e(L).secBtn.buttonType,"is-waiting-list":e(re)},null,8,["loading","second-button-show","payment-gateway","customized-labels","primary-footer-button-type","secondary-footer-button-type","is-waiting-list"])],512)]),_:1},8,["modelValue","custom-styles"])):i("",!0)],4),N(aa)],64))}});export{Cs as default};
