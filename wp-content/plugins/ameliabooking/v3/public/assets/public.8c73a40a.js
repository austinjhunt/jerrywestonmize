import{e as I,b as v,a as A,c as C,_ as g}from"./eventBooking.067cfaf7.js";import{aQ as _,bh as h,bk as p,m,x as i,bl as y,A as l,bm as d,bM as f,bN as x,bO as E,bj as b}from"./stepForm.557a9dcb.js";import"./customizeForm.d62bdd41.js";import"./catalogForm.1f511ffa.js";var L={namespaced:!0,state:()=>({form:null,preselected:{}}),getters:{getForm(e){return e.form},getShortcodeParams(e){return e.preselected}},mutations:{setForm(e,t){e.form=t},setShortcodeParams(e,t){e.preselected=t}},actions:{}};function F(e){return _(e).format("YYYY-MM-DD")}var k={namespaced:!0,state:()=>({params:{id:null,tag:null,search:null,recurring:null,dates:_().toDate(),locationId:null,providers:null}}),getters:{getTag(e){return e.params.tag},getSearch(e){return e.params.search},getLocationIdParam(e){return e.params.locationId},getDates(e){return e.params.dates},getEventParams(e){return{dates:[F(e.params.dates)],id:e.params.id,search:e.params.search,locationId:e.params.locationId,tag:e.params.tag,recurring:e.params.recurring,providers:e.params.providers}},getAllData(e){return{dates:e.params.dates,id:e.params.id,search:e.params.search,locationId:e.params.locationId,tag:e.params.tag,recurring:e.params.recurring,providers:e.params.providers}}},mutations:{setTag(e,t){e.params.tag=t||null},setLocationIdParam(e,t){e.params.locationId=t||null},setId(e,t){e.params.id=t},setParams(e,t){t.eventId&&(e.params.id=t.eventId),t.eventTag&&(e.params.tag=t.eventTag),t.eventRecurring&&(e.params.recurring=t.eventRecurring)},setSearch(e,t){e.params.search=t||null},setDates(e,t){e.params.dates=t},setAllData(e,t){e.params={dates:t.dates,id:t.id?parseInt(t.id):null,search:t.search,locationId:t.locationId?parseInt(t.locationId):null,tag:t.tag,recurring:t.recurring,providers:t.providers}}},actions:{}},U={namespaced:!0,state:()=>({show:1,page:1,count:0}),getters:{getShow(e){return e.show},getPage(e){return e.page},getCount(e){return e.count},getAllData(e){return{show:e.show,page:e.page,count:e.count}}},mutations:{setShow(e,t){e.show=t},setPage(e,t){e.page=t},setCount(e,t){e.count=t},setAllData(e,t){e.show=parseInt(t.show),e.page=parseInt(t.page),e.count=parseInt(t.count)}},actions:{}},D={namespaced:!0,state:()=>({id:null,externalId:null,firstName:"",lastName:"",email:"",phone:"",countryPhoneIso:"",loggedUser:!1}),getters:{getCustomerId(e){return e.id},getCustomerExternalId(e){return e.externalId},getCustomerFirstName(e){return e.firstName},getCustomerLastName(e){return e.lastName},getCustomerEmail(e){return e.email},getCustomerPhone(e){return e.phone},getCustomerCountryPhoneIso(e){return e.countryPhoneIso},getLoggedUser(e){return e.loggedUser},getAllData(e){return{id:e.id,externalId:e.externalId,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,countryPhoneIso:e.countryPhoneIso,loggedUser:e.loggedUser}}},mutations:{setCustomerId(e,t){e.id=t},setCustomerExternalId(e,t){e.externalId=t},setCustomerFirstName(e,t){e.firstName=t},setCustomerLastName(e,t){e.lastName=t},setCustomerEmail(e,t){e.email=t},setCustomerPhone(e,t){e.phone=t},setCustomerCountryPhoneIso(e,t){e.countryPhoneIso=t},setLoggedUser(e,t){e.loggedUser=t},setCurrentUser(e,t){e.id=t.id,e.externalid=t.externalid,e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone?t.phone:"",e.countryPhoneIso=t.countryPhoneIso?t.countryPhoneIso:""},setAllData(e,t){e.id=t.id,e.externalId=t.externalId,e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone,e.countryPhoneIso=t.countryPhoneIso,e.loggedUser=t.loggedUser}},actions:{requestCurrentUserData({commit:e}){if(e("setLoading",!0,{root:!0}),!("ameliaUser"in window)||!window.ameliaUser)h.get("/users/current").then(t=>{t.data.data.user&&(window.ameliaUser=t.data.data.user?t.data.data.user:null,e("setCurrentUser",window.ameliaUser),e("setLoggedUser",!0)),e("setLoading",!1,{root:!0})}).catch(()=>{e("setLoading",!1,{root:!0})});else{let t=setInterval(()=>{"ameliaUser"in window&&(clearInterval(t),e("setCurrentUser",window.ameliaUser),e("setLoggedUser",!0)),e("setLoading",!1,{root:!0})},1e3)}}}},S={namespaced:!0,state:()=>({customFieldsArray:[],customFields:{}}),getters:{getFilteredCustomFieldsArray(e){return e.customFieldsArray},getCustomFields(e){return e.customFields},getCustomFieldValue:e=>t=>e.customFields[t].value,getAllData(e){return{customFields:e.customFields}}},mutations:{setFilteredCustomFieldsArray(e,t){e.customFieldsArray=t},setCustomFields(e,t){e.customFields=t},setCustomFieldValue(e,t){e.customFields[t.key].value=t.value},setAllData(e,t){e.customFields=t.customFields}},actions:{filterEventCustomFields({commit:e,getters:t,rootGetters:a}){let r=a["eventBooking/getSelectedEventId"],n=[],o={};a["eventEntities/getCustomFields"].forEach(s=>{if(s.events.find(u=>u.id===parseInt(r))||s.allEvents){switch(n.push(s),o[`cf${s.id}`]={id:s.id,label:s.label,type:s.type,position:s.position,options:s.options,required:s.required},s.type){case"checkbox":case"file":o[`cf${s.id}`].value=[];break;default:o[`cf${s.id}`].value=""}t.getCustomFields[`cf${s.id}`]&&(o[`cf${s.id}`].value=t.getCustomFields[`cf${s.id}`].value)}}),e("setFilteredCustomFieldsArray",n),e("setCustomFields",o)}}},T={namespaced:!0,state:()=>({persons:1,max:1,min:1}),getters:{getMaxPersons(e){return e.max},getMinPersons(e){return e.min},getPersons(e){return e.persons},getAllData(e){return{persons:e.persons,max:e.max,min:e.min}}},mutations:{setMaxPersons(e,t){e.max=t},setMinPersons(e,t){e.min=t},setPersons(e,t){e.persons=t},setAllData(e,t){e.persons=t.persons,e.max=t.max,e.min=t.min}},actions:{resetPersons({commit:e}){e("setPersons",1),e("setMaxPersons",1),e("setMinPersons",1)}}},R={namespaced:!0,state:()=>({tickets:[],ticketsData:[],maxCustomCapacity:null,maxExtraPeople:null,globalSpots:0}),getters:{getTickets(e){return e.tickets},getMaxCustomCapacity(e){return e.maxCustomCapacity},getMaxExtraPeople(e){return e.maxExtraPeople},getTicketNumber:e=>t=>e.ticketsData.find(a=>a.id===t).persons,getTicketsSum(e){let t=0;return e.ticketsData.forEach(a=>{t+=a.persons}),t},getTicketsData(e){return e.ticketsData},getEventGlobalSpots(e){return e.globalSpots},getAllData(e){return{tickets:e.tickets,ticketsData:e.ticketsData,maxCustomCapacity:e.maxCustomCapacity,maxExtraPeople:e.maxExtraPeople,globalSpots:e.globalSpots}}},mutations:{setTickets(e,t){e.tickets=t,t.forEach(a=>{if(a.enabled){let r={spots:a.spots,sold:a.sold,persons:0,price:a.dateRangePrice?a.dateRangePrice:a.price,name:a.name,id:a.id,eventTicketId:a.id};e.ticketsData.push(r)}})},setMaxCustomCapacity(e,t){e.maxCustomCapacity=t},setReduceMaxExtraPeople(e,t){e.maxExtraPeople=e.maxExtraPeople+1-t},setMaxExtraPeople(e,t){e.maxExtraPeople=t},setTicketNumber(e,t){e.ticketsData.forEach(a=>{a.id===t.id&&(a.persons=parseInt(t.numb))})},setEventGlobalSpots(e,t){e.globalSpots+=t},setAllData(e,t){e.tickets=t.tickets,e.ticketsData=t.ticketsData,e.maxCustomCapacity=t.maxCustomCapacity,e.maxExtraPeople=t.maxExtraPeople,e.globalSpots=t.globalSpots}},actions:{resetCustomTickets({commit:e}){e("setAllData",{tickets:[],ticketsData:[],maxCustomCapacity:null,maxExtraPeople:null,globalSpots:0})}}},N={namespaced:!0,state:()=>({amount:0,gateway:"",deposit:!1,depositAmount:0,depositType:"",data:{},error:"",onSitePayment:!1}),getters:{getError(e){return e.error},getPaymentGateway(e){return e.gateway},getPaymentDeposit(e){return e.deposit},getAllData(e){return{amount:e.amount,gateway:e.gateway,deposit:e.deposit,depositAmount:e.depositAmount,depositType:e.depositType,data:e.data}},getOnSitePayment(e){return e.onSitePayment}},mutations:{setError(e,t){e.error=t},setPaymentGateway(e,t){e.gateway=t},setPaymentDeposit(e,t){e.deposit=t},setPaymentDepositAmount(e,t){e.depositAmount=t},setPaymentDepositType(e,t){e.depositType=t},setAllData(e,t){e.amount=t.amount,e.gateway=t.gateway,e.deposit=t.deposit,e.depositAmount=t.depositAmount,e.depositType=t.depositType,e.data=t.data},setOnSitePayment(e,t){e.onSitePayment=t}},actions:{}},M={namespaced:!0,state:()=>({type:""}),getters:{getType(e){return e.type}},mutations:{setType(e,t){e.type=t}},actions:{}},B={namespaced:!0,state:()=>({code:"",discount:"",deduction:"",limit:"",error:"",loading:!1,required:!1,payPalActions:null,servicesIds:[]}),getters:{getCoupon(e){return{code:e.code,discount:e.discount,deduction:e.deduction,limit:e.limit,required:e.required,servicesIds:e.servicesIds}},getCouponValidated(e){return!e.required||e.code!==""},getCode(e){return e.code},getError(e){return e.error},getLoading(e){return e.loading},getPayPalActions(e){return e.payPalActions}},mutations:{setCoupon(e,t){e.code=t.code,e.discount=t.discount,e.deduction=t.deduction,e.limit=t.limit,e.servicesIds=t.servicesIds},setCode(e,t){e.code=t},setError(e,t){e.error=t},setLoading(e,t){e.loading=t},setCouponRequired(e,t){e.required=t},setPayPalActions(e,t){e.payPalActions=t},enablePayPalActions(e){e.payPalActions&&e.payPalActions.enable()},disablePayPalActions(e){e.payPalActions&&e.payPalActions.disable()}},actions:{resetCoupon({commit:e}){e("setCoupon",{code:"",discount:"",deduction:"",limit:"",servicesIds:[]})}}};const K=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./stepForm.557a9dcb.js")+"").then(function(e){return e.c5}),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/stepForm.557a9dcb.js","assets/stepForm.ac488553.css"]))}),q=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./catalogForm.1f511ffa.js")+"").then(function(e){return e.C}),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/catalogForm.1f511ffa.js","assets/catalogForm.da42f7c7.css","assets/stepForm.557a9dcb.js","assets/stepForm.ac488553.css"]))}),H=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./EventsListForm.27a25cd3.js")+""),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/EventsListForm.27a25cd3.js","assets/EventsListForm.fb0defff.css","assets/stepForm.557a9dcb.js","assets/stepForm.ac488553.css","assets/catalogForm.1f511ffa.js","assets/catalogForm.da42f7c7.css","assets/customizeForm.d62bdd41.js","assets/customizeForm.559895a3.css"]))}),$=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./DialogForms.905d4fe9.js")+""),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/DialogForms.905d4fe9.js","assets/DialogForms.eacaa3f4.css","assets/stepForm.557a9dcb.js","assets/stepForm.ac488553.css","assets/catalogForm.1f511ffa.js","assets/catalogForm.da42f7c7.css","assets/EventsListForm.27a25cd3.js","assets/EventsListForm.fb0defff.css","assets/customizeForm.d62bdd41.js","assets/customizeForm.559895a3.css"]))});typeof window.ameliaShortcodeData=="undefined"&&(window.ameliaShortcodeData=[{counter:null}]);const P=window.wpAmeliaUrls.wpAmeliaPluginURL+"v3/public/";window.__dynamic_handler__=function(e){return P+"assets/"+e};window.__dynamic_preload__=function(e){return e.map(t=>P+t)};let w=m(!1);window.ameliaShortcodeDataTriggered!==void 0&&window.ameliaShortcodeDataTriggered.forEach(e=>{if(e.in_dialog){c(e);let t=setInterval(()=>{let a=e.trigger_type&&e.trigger_type==="class"?[...document.getElementsByClassName(e.trigger)]:[document.getElementById(e.trigger)];if(a.length>0&&a[0]!==null&&typeof a[0]!="undefined"){clearInterval(t),a.forEach(n=>{n.style.display="none"});let r=setInterval(()=>{w.value&&(clearInterval(r),a.forEach(n=>{n.style.removeProperty("display")}))},250)}},250)}else{let t=!1,a=setInterval(function(){let r=e.trigger_type&&e.trigger_type==="class"?[...document.getElementsByClassName(e.trigger)]:[document.getElementById(e.trigger)];!t&&r.length>0&&r[0]!==null&&typeof r[0]!="undefined"&&(t=!0,clearInterval(a),r.forEach(n=>{n.onclick=function(){let o=setInterval(function(){let s=document.getElementsByClassName("amelia-skip-load-"+e.counter);if(s.length){clearInterval(o);for(let u=0;u<s.length;u++)s[u].classList.contains("amelia-v2-booking-"+e.counter+"-loaded")||c(e)}},1e3)}}))},1e3)}});window.ameliaShortcodeData.forEach(e=>{c(e)});function c(e){const t=i(window.wpAmeliaSettings);let a=y({setup(){const r=i(window.wpAmeliaUrls),n=i(window.wpAmeliaLabels),o=m(window.localeLanguage[0]),s=i({isBasic:!1,isPro:!0,isDeveloper:!0,isLite:!1});l("settings",d(t)),l("baseUrls",d(r)),l("labels",d(n)),l("localLanguage",d(o)),l("shortcodeData",d(m(e))),l("licence",s),l("isMounted",w)}});t.googleTag.id&&a.use(f,{config:{id:window.wpAmeliaSettings.googleTag.id}}),t.googleAnalytics.id&&a.use(f,{config:{id:window.wpAmeliaSettings.googleAnalytics.id}}),t.facebookPixel.id&&(x(),E(window.wpAmeliaSettings.facebookPixel.id)),a.component("StepFormWrapper",K).component("CatalogFormWrapper",q).component("EventsListFormWrapper",H).component("DialogForms",$).use(b({namespaced:!0,state:()=>({settings:i(window.wpAmeliaSettings),labels:i(window.wpAmeliaLabels),localLanguage:m(window.localeLanguage[0]),baseUrls:i(window.wpAmeliaUrls),ready:!1,loading:!1,formKey:""}),getters:{getSettings(r){return r.settings},getLabels(r){return r.labels},getLocalLanguage(r){return r.localLanguage},getBaseUrls(r){return r.baseUrls},getReady(r){return r.ready},getLoading(r){return r.loading},getFormKey(r){return r.formKey}},mutations:{setReady(r,n){r.ready=n},setLoading(r,n){r.loading=n},setFormKey(r,n){r.formKey=n}},modules:{entities:I,booking:v,eventEntities:A,eventBooking:C,shortcodeParams:L,params:k,pagination:U,customerInfo:D,customFields:S,persons:T,tickets:R,payment:N,bookableType:M,coupon:B}})).mount(`#amelia-v2-booking${e.counter!==null?"-"+e.counter:""}`)}window.amelia={load:c};
