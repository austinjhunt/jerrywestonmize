import{e as h,b as I,a as v,c as A,_ as g,u as y}from"./licence.de0ab33c.js";import{aR as P,bi as C,bl as p,p as m,y as i,bm as E,B as l,bn as d,bN as f,bO as x,bP as b,bk as L}from"./stepForm.d7ef2d76.js";import"./customizeForm.c81941eb.js";import"./catalogForm.44d0a75b.js";var F={namespaced:!0,state:()=>({form:null,preselected:{}}),getters:{getForm(e){return e.form},getShortcodeParams(e){return e.preselected}},mutations:{setForm(e,t){e.form=t},setShortcodeParams(e,t){e.preselected=t}},actions:{}};function k(e){return P(e).format("YYYY-MM-DD")}var U={namespaced:!0,state:()=>({params:{id:null,tag:null,search:null,recurring:null,dates:P().toDate(),locationId:null,providers:null},shortcodeParams:{ids:null,tags:null}}),getters:{getTag(e){return e.params.tag},getSearch(e){return e.params.search},getLocationIdParam(e){return e.params.locationId},getDates(e){return e.params.dates},getEventParams(e){return{dates:[k(e.params.dates)],id:e.params.id?e.params.id:e.shortcodeParams.ids,search:e.params.search,locationId:e.params.locationId,tag:e.params.tag?e.params.tag:e.shortcodeParams.tags,recurring:e.params.recurring,providers:e.params.providers}},getShortcodeParams(e){return console.log(e.shortcodeParams),{ids:e.shortcodeParams.ids,tags:e.shortcodeParams.tags}},getAllData(e){return{dates:e.params.dates,id:e.params.id,search:e.params.search,locationId:e.params.locationId,tag:e.params.tag,recurring:e.params.recurring,providers:e.params.providers}}},mutations:{setTag(e,t){e.params.tag=t||null},setLocationIdParam(e,t){e.params.locationId=t||null},setId(e,t){e.params.id=t},setParams(e,t){t.eventId&&(e.shortcodeParams.ids=t.eventId.split(",")),t.eventTag&&(e.shortcodeParams.tags=t.eventTag.split("{").map(r=>r.replace("},","").replace("}","")).filter(r=>r!=="")),t.eventRecurring&&(e.params.recurring=t.eventRecurring)},setSearch(e,t){e.params.search=t||null},setDates(e,t){e.params.dates=t},setAllData(e,t){e.params={dates:t.dates,id:t.id?parseInt(t.id):null,search:t.search,locationId:t.locationId?parseInt(t.locationId):null,tag:t.tag,recurring:t.recurring,providers:t.providers}}},actions:{}},S={namespaced:!0,state:()=>({show:1,page:1,count:0}),getters:{getShow(e){return e.show},getPage(e){return e.page},getCount(e){return e.count},getAllData(e){return{show:e.show,page:e.page,count:e.count}}},mutations:{setShow(e,t){e.show=t},setPage(e,t){e.page=t},setCount(e,t){e.count=t},setAllData(e,t){e.show=parseInt(t.show),e.page=parseInt(t.page),e.count=parseInt(t.count)}},actions:{}},D={namespaced:!0,state:()=>({id:null,externalId:null,firstName:"",lastName:"",email:"",phone:"",countryPhoneIso:"",loggedUser:!1}),getters:{getCustomerId(e){return e.id},getCustomerExternalId(e){return e.externalId},getCustomerFirstName(e){return e.firstName},getCustomerLastName(e){return e.lastName},getCustomerEmail(e){return e.email},getCustomerPhone(e){return e.phone},getCustomerCountryPhoneIso(e){return e.countryPhoneIso},getLoggedUser(e){return e.loggedUser},getAllData(e){return{id:e.id,externalId:e.externalId,firstName:e.firstName,lastName:e.lastName,email:e.email,phone:e.phone,countryPhoneIso:e.countryPhoneIso,loggedUser:e.loggedUser}}},mutations:{setCustomerId(e,t){e.id=t},setCustomerExternalId(e,t){e.externalId=t},setCustomerFirstName(e,t){e.firstName=t},setCustomerLastName(e,t){e.lastName=t},setCustomerEmail(e,t){e.email=t},setCustomerPhone(e,t){e.phone=t},setCustomerCountryPhoneIso(e,t){e.countryPhoneIso=t},setLoggedUser(e,t){e.loggedUser=t},setCurrentUser(e,t){e.id=t.id,e.externalid=t.externalid,e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone?t.phone:"",e.countryPhoneIso=t.countryPhoneIso?t.countryPhoneIso:""},setAllData(e,t){e.id=t.id,e.externalId=t.externalId,e.firstName=t.firstName,e.lastName=t.lastName,e.email=t.email,e.phone=t.phone,e.countryPhoneIso=t.countryPhoneIso,e.loggedUser=t.loggedUser}},actions:{requestCurrentUserData({commit:e}){if(e("setLoading",!0,{root:!0}),!("ameliaUser"in window)||!window.ameliaUser)C.get("/users/current").then(t=>{t.data.data.user&&(window.ameliaUser=t.data.data.user?t.data.data.user:null,e("setCurrentUser",window.ameliaUser),e("setLoggedUser",!0)),e("setLoading",!1,{root:!0})}).catch(()=>{e("setLoading",!1,{root:!0})});else{let t=setInterval(()=>{"ameliaUser"in window&&(clearInterval(t),e("setCurrentUser",window.ameliaUser),e("setLoggedUser",!0)),e("setLoading",!1,{root:!0})},1e3)}}}},T={namespaced:!0,state:()=>({customFieldsArray:[],customFields:{}}),getters:{getFilteredCustomFieldsArray(e){return e.customFieldsArray},getCustomFields(e){return e.customFields},getCustomFieldValue:e=>t=>e.customFields[t].value,getAllData(e){return{customFields:e.customFields}}},mutations:{setFilteredCustomFieldsArray(e,t){e.customFieldsArray=t},setCustomFields(e,t){e.customFields=t},setCustomFieldValue(e,t){e.customFields[t.key].value=t.value},setAllData(e,t){e.customFields=t.customFields}},actions:{filterEventCustomFields({commit:e,getters:t,rootGetters:r}){let s=r["eventBooking/getSelectedEventId"],o=[],n={};r["eventEntities/getCustomFields"].forEach(a=>{if(a.events.find(u=>u.id===parseInt(s))||a.allEvents){switch(o.push(a),n[`cf${a.id}`]={id:a.id,label:a.label,type:a.type,position:a.position,options:a.options,required:a.required},a.type){case"checkbox":case"file":n[`cf${a.id}`].value=[];break;default:n[`cf${a.id}`].value=""}t.getCustomFields[`cf${a.id}`]&&(n[`cf${a.id}`].value=t.getCustomFields[`cf${a.id}`].value)}}),e("setFilteredCustomFieldsArray",o),e("setCustomFields",n)}}},R={namespaced:!0,state:()=>({persons:1,max:1,min:1}),getters:{getMaxPersons(e){return e.max},getMinPersons(e){return e.min},getPersons(e){return e.persons},getAllData(e){return{persons:e.persons,max:e.max,min:e.min}}},mutations:{setMaxPersons(e,t){e.max=t},setMinPersons(e,t){e.min=t},setPersons(e,t){e.persons=t},setAllData(e,t){e.persons=t.persons,e.max=t.max,e.min=t.min}},actions:{resetPersons({commit:e}){e("setPersons",1),e("setMaxPersons",1),e("setMinPersons",1)}}},N={namespaced:!0,state:()=>({tickets:[],ticketsData:[],maxCustomCapacity:null,maxExtraPeople:null,globalSpots:0}),getters:{getTickets(e){return e.tickets},getMaxCustomCapacity(e){return e.maxCustomCapacity},getMaxExtraPeople(e){return e.maxExtraPeople},getTicketNumber:e=>t=>e.ticketsData.find(r=>r.id===t).persons,getTicketsSum(e){let t=0;return e.ticketsData.forEach(r=>{t+=r.persons}),t},getTicketsData(e){return e.ticketsData},getEventGlobalSpots(e){return e.globalSpots},getAllData(e){return{tickets:e.tickets,ticketsData:e.ticketsData,maxCustomCapacity:e.maxCustomCapacity,maxExtraPeople:e.maxExtraPeople,globalSpots:e.globalSpots}}},mutations:{setTickets(e,t){e.tickets=t,t.forEach(r=>{if(r.enabled){let s={spots:r.spots,sold:r.sold,persons:0,price:r.dateRangePrice?r.dateRangePrice:r.price,name:r.name,id:r.id,eventTicketId:r.id};e.ticketsData.push(s)}})},setMaxCustomCapacity(e,t){e.maxCustomCapacity=t},setReduceMaxExtraPeople(e,t){e.maxExtraPeople=e.maxExtraPeople+1-t},setMaxExtraPeople(e,t){e.maxExtraPeople=t},setTicketNumber(e,t){e.ticketsData.forEach(r=>{r.id===t.id&&(r.persons=parseInt(t.numb))})},setEventGlobalSpots(e,t){e.globalSpots+=t},setAllData(e,t){e.tickets=t.tickets,e.ticketsData=t.ticketsData,e.maxCustomCapacity=t.maxCustomCapacity,e.maxExtraPeople=t.maxExtraPeople,e.globalSpots=t.globalSpots}},actions:{resetCustomTickets({commit:e}){e("setAllData",{tickets:[],ticketsData:[],maxCustomCapacity:null,maxExtraPeople:null,globalSpots:0})}}},B={namespaced:!0,state:()=>({amount:0,gateway:"",deposit:!1,depositAmount:0,depositType:"",data:{},error:"",onSitePayment:!1}),getters:{getError(e){return e.error},getPaymentGateway(e){return e.gateway},getPaymentDeposit(e){return e.deposit},getAllData(e){return{amount:e.amount,gateway:e.gateway,deposit:e.deposit,depositAmount:e.depositAmount,depositType:e.depositType,data:e.data}},getOnSitePayment(e){return e.onSitePayment}},mutations:{setError(e,t){e.error=t},setPaymentGateway(e,t){e.gateway=t},setPaymentDeposit(e,t){e.deposit=t},setPaymentDepositAmount(e,t){e.depositAmount=t},setPaymentDepositType(e,t){e.depositType=t},setAllData(e,t){e.amount=t.amount,e.gateway=t.gateway,e.deposit=t.deposit,e.depositAmount=t.depositAmount,e.depositType=t.depositType,e.data=t.data},setOnSitePayment(e,t){e.onSitePayment=t}},actions:{}},M={namespaced:!0,state:()=>({type:""}),getters:{getType(e){return e.type}},mutations:{setType(e,t){e.type=t}},actions:{}},q={namespaced:!0,state:()=>({code:"",discount:"",deduction:"",limit:"",error:"",loading:!1,required:!1,payPalActions:null,servicesIds:[]}),getters:{getCoupon(e){return{code:e.code,discount:e.discount,deduction:e.deduction,limit:e.limit,required:e.required,servicesIds:e.servicesIds}},getCouponValidated(e){return!e.required||e.code!==""},getCode(e){return e.code},getError(e){return e.error},getLoading(e){return e.loading},getPayPalActions(e){return e.payPalActions}},mutations:{setCoupon(e,t){e.code=t.code,e.discount=t.discount,e.deduction=t.deduction,e.limit=t.limit,e.servicesIds=t.servicesIds},setCode(e,t){e.code=t},setError(e,t){e.error=t},setLoading(e,t){e.loading=t},setCouponRequired(e,t){e.required=t},setPayPalActions(e,t){e.payPalActions=t},enablePayPalActions(e){e.payPalActions&&e.payPalActions.enable()},disablePayPalActions(e){e.payPalActions&&e.payPalActions.disable()}},actions:{resetCoupon({commit:e}){e("setCoupon",{code:"",discount:"",deduction:"",limit:"",servicesIds:[]})}}};const K=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./stepForm.d7ef2d76.js")+"").then(function(e){return e.c7}),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/stepForm.d7ef2d76.js","assets/stepForm.be79aff9.css"]))}),H=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./catalogForm.44d0a75b.js")+"").then(function(e){return e.C}),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/catalogForm.44d0a75b.js","assets/catalogForm.7081e5c7.css","assets/stepForm.d7ef2d76.js","assets/stepForm.be79aff9.css"]))}),O=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./EventsListForm.e32a6fed.js")+""),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/EventsListForm.e32a6fed.js","assets/EventsListForm.5d51c034.css","assets/stepForm.d7ef2d76.js","assets/stepForm.be79aff9.css","assets/catalogForm.44d0a75b.js","assets/catalogForm.7081e5c7.css","assets/customizeForm.c81941eb.js","assets/customizeForm.67828c79.css"]))}),$=p({loader:()=>g(()=>import(""+(window.__dynamic_handler__||function(e){return e})("./DialogForms.cef847d7.js")+""),(window.__dynamic_preload__ || function(importer) { return importer; })(["assets/DialogForms.cef847d7.js","assets/DialogForms.eacaa3f4.css","assets/stepForm.d7ef2d76.js","assets/stepForm.be79aff9.css","assets/catalogForm.44d0a75b.js","assets/catalogForm.7081e5c7.css","assets/EventsListForm.e32a6fed.js","assets/EventsListForm.5d51c034.css","assets/customizeForm.c81941eb.js","assets/customizeForm.67828c79.css"]))});typeof window.ameliaShortcodeData=="undefined"&&(window.ameliaShortcodeData=[{counter:null}]);const _=window.wpAmeliaUrls.wpAmeliaPluginURL+"v3/public/";window.__dynamic_handler__=function(e){return _+"assets/"+e};window.__dynamic_preload__=function(e){return e.map(t=>_+t)};let w=m(!1);window.ameliaShortcodeDataTriggered!==void 0&&window.ameliaShortcodeDataTriggered.forEach(e=>{if(e.in_dialog){c(e);let t=setInterval(()=>{let r=e.trigger_type&&e.trigger_type==="class"?[...document.getElementsByClassName(e.trigger)]:[document.getElementById(e.trigger)];if(r.length>0&&r[0]!==null&&typeof r[0]!="undefined"){clearInterval(t),r.forEach(o=>{o.style.display="none"});let s=setInterval(()=>{w.value&&(clearInterval(s),r.forEach(o=>{o.style.removeProperty("display")}))},250)}},250)}else{let t=!1,r=setInterval(function(){let s=e.trigger_type&&e.trigger_type==="class"?[...document.getElementsByClassName(e.trigger)]:[document.getElementById(e.trigger)];!t&&s.length>0&&s[0]!==null&&typeof s[0]!="undefined"&&(t=!0,clearInterval(r),s.forEach(o=>{if(o.onclick=function(){let n=setInterval(function(){let a=document.getElementsByClassName("amelia-skip-load-"+e.counter);if(a.length){clearInterval(n);for(let u=0;u<a.length;u++)a[u].classList.contains("amelia-v2-booking-"+e.counter+"-loaded")||c(e)}},1e3)},"ameliaCache"in window&&window.ameliaCache.length&&window.ameliaCache[0]){let n=JSON.parse(window.ameliaCache[0]);if(n&&"request"in n&&"form"in n.request&&"shortcode"in n.request.form&&"trigger"in n.request.form.shortcode&&n.request.form.shortcode.trigger){if(!("trigger_type"in n.request.form.shortcode)||!n.request.form.shortcode.trigger_type||n.request.form.shortcode.trigger_type==="id"){let a=document.getElementById(n.request.form.shortcode.trigger);typeof a!="undefined"&&a.click()}else if("trigger_type"in n.request.form.shortcode&&n.request.form.shortcode.trigger_type==="class"){let a=document.getElementsByClassName(n.request.form.shortcode.trigger);typeof a!="undefined"&&a.length&&a[0].click()}}}}))},1e3)}});window.ameliaShortcodeData.forEach(e=>{c(e)});function c(e){const t=i(window.wpAmeliaSettings);let r=E({setup(){const s=i(window.wpAmeliaUrls),o=i(window.wpAmeliaLabels),n=m(window.localeLanguage[0]),a=i(y());l("settings",d(t)),l("baseUrls",d(s)),l("labels",d(o)),l("localLanguage",d(n)),l("shortcodeData",d(m(e))),l("licence",a),l("isMounted",w)}});t.googleTag.id&&r.use(f,{config:{id:window.wpAmeliaSettings.googleTag.id}}),t.googleAnalytics.id&&r.use(f,{config:{id:window.wpAmeliaSettings.googleAnalytics.id}}),t.facebookPixel.id&&(x(),b(window.wpAmeliaSettings.facebookPixel.id)),r.component("StepFormWrapper",K).component("CatalogFormWrapper",H).component("EventsListFormWrapper",O).component("DialogForms",$).use(L({namespaced:!0,state:()=>({settings:i(window.wpAmeliaSettings),labels:i(window.wpAmeliaLabels),localLanguage:m(window.localeLanguage[0]),baseUrls:i(window.wpAmeliaUrls),ready:!1,loading:!1,formKey:""}),getters:{getSettings(s){return s.settings},getLabels(s){return s.labels},getLocalLanguage(s){return s.localLanguage},getBaseUrls(s){return s.baseUrls},getReady(s){return s.ready},getLoading(s){return s.loading},getFormKey(s){return s.formKey}},mutations:{setReady(s,o){s.ready=o},setLoading(s,o){s.loading=o},setFormKey(s,o){s.formKey=o}},modules:{entities:h,booking:I,eventEntities:v,eventBooking:A,shortcodeParams:F,params:U,pagination:S,customerInfo:D,customFields:T,persons:R,tickets:N,payment:B,bookableType:M,coupon:q}})).mount(`#amelia-v2-booking${e.counter!==null?"-"+e.counter:""}`)}window.amelia={load:c};
