import{aR as Ht,o as a,c as n,h as j,w as I,av as gt,au as yt,r as V,m as ve,b as e,n as w,F as $,k as v,e as d,j as N,p,bo as de,aS as vt,y as Nt,u as Tt,aP as f,bp as jt,bq as qt,br as Gt,bs as Jt,aU as pt,A as Ze,s as $t,D as be,a2 as Qt,l as T,a as y,a8 as ie,ah as Xt,g as i,t as b,_ as De,ai as Te,a5 as Zt,f as $e,bt as Kt,q as Ne,al as Be,an as Yt,z as St,E as We,B as H,a3 as ea,C as _t,ak as ta,aw as aa,b8 as sa,ac as la,ax as ia}from"./stepForm.43f5bea5.js";import{e as na,u as ze,a as ft,b as He,c as wt,d as Mt,f as oa,_ as ra,g as ca,h as ua,i as da,j as ma,m as Dt,k as va,l as pa}from"./eventListForm.d9ed0602.js";import{_ as me}from"./catalogForm.c6dab7cf.js";const _a={name:"EventCalendarFilterSkeleton"},fa={class:"am-ecfils"};function ga(ee,L,A,ne,c,C){const F=gt,O=yt;return a(),n("div",fa,[j(O,{rows:1,animated:""},{template:I(()=>[j(F,{class:"am-ecfils__item am-ecfils__search",variant:"text"}),j(F,{class:"am-ecfils__item am-ecfils__btn",variant:"text"})]),_:1})])}var ya=Ht(_a,[["render",ga]]);const ha={name:"EventCalendarBasicSkeleton"},z=Object.assign(ha,{props:{rows:{type:Number,default:1},size:{type:String,default:"default",validator(ee){return["default","medium","small","mini","micro","custom"].includes(ee)}},customStyle:{type:Object,default:()=>({})}},setup(ee){const L=ee;return(A,ne)=>{const c=gt,C=yt;return a(!0),n($,null,V(new Array(e(L).rows),F=>(a(),n("div",{key:F,class:"am-ecbs",style:ve(e(L).customStyle)},[j(C,{animated:""},{template:I(()=>[j(c,{class:w(["am-ecbs__item",`am-${e(L).size}`]),variant:"text"},null,8,["class"])]),_:1})],4))),128)}}});const ba={name:"EventCalendarMainSkeleton"},ka=Object.assign(ba,{props:{height:{type:Number,default:0}},setup(ee){const L=ee;let A=v(()=>({"--am-h-ecms":`${L.height}px`}));return(ne,c)=>{const C=gt,F=yt;return a(),n("div",{class:"am-ecms",style:ve(e(A))},[j(F,{animated:""},{template:I(()=>[(a(!0),n($,null,V(new Array(7),O=>(a(),d(C,{key:O,class:"am-ecms__item",variant:"text",style:{height:"26px"}}))),128))]),_:1}),(a(!0),n($,null,V(new Array(6),O=>(a(),d(F,{key:O,animated:""},{template:I(()=>[(a(!0),n($,null,V(new Array(7),J=>(a(),d(C,{key:J,class:"am-ecms__item",variant:"text",style:ve({height:`${(e(L).height-26)/6}px`})},null,8,["style"]))),128))]),_:2},1024))),128))],4)}}});const Ca={key:0,class:"am-ecs__filters-top"},xa=y("span",{class:"am-icon-filter"},null,-1),Ea={key:0},Ya={class:"am-ecs__header-actions"},Sa={key:0,class:"am-ecs__header-text"},wa={key:1,class:"am-ecs"},Ma={class:"am-ecs__side-header__text"},Da={class:"am-ecs__side-header__range"},Ta={key:0},$a={class:"am-ecs__side-header__actions"},Ba=["onClick"],za=["onClick"],La={class:"am-ecs__side-card__header"},Pa={key:0,class:"am-ecs__side-card__begins"},Ia={key:1,class:"am-ecs__side-card__price"},Fa={class:"am-ecs__side-card__date-time"},Va={class:"am-ecs__side-card__day"},Aa={class:"am-ecs__side-card__month"},Oa={class:"am-ecs__side-card__at"},Ra={class:"am-ecs__side-card__time"},Ua={class:"am-ecs__side-card__name"},Wa={key:0,class:"am-ecs__side-card__location"},Ha={key:1,class:"am-ecs__side-card__footer"},Na={key:1,class:"am-ecs__side-card__spots"},ja={key:0,class:"am-ecs__side-card__spots-numb"},qa={class:"am-ecs__side-card__spots-text"},Ga=["onClick"],Ja={class:"am-ecs__side-card__header"},Qa={key:0,class:"am-ecs__side-card__begins"},Xa={key:1,class:"am-ecs__side-card__price"},Za={class:"am-ecs__side-card__date-time"},Ka={class:"am-ecs__side-card__day"},es={class:"am-ecs__side-card__month"},ts={class:"am-ecs__side-card__at"},as={class:"am-ecs__side-card__time"},ss={class:"am-ecs__side-card__name"},ls={key:0,class:"am-ecs__side-card__location"},is={key:1,class:"am-ecs__side-card__footer"},ns={key:0,class:"am-ecs__side-card__status am-waiting"},os={key:1,class:"am-ecs__side-card__spots"},rs={class:"am-ecs__side-card__spots-numb"},cs={class:"am-ecs__side-card__spots-text"},us={key:2,class:"am-ecs__side-empty"},ds={key:3,class:"am-ecs__side-empty"},ms={props:{monthsInFuture:{type:Number,default:1}},setup(ee){const L=ee,A=N("settings");let ne=v(()=>o.getters.getReady),c=v(()=>o.getters.getLoading),C=v(()=>o.getters["eventEntities/getUpcomingLoading"]);const F=p(null),{width:O}=de(F),J=p(null),{width:P}=de(J);let je=v(()=>vt(P.value));const u=p(null),{width:oe,height:Q}=de(u);let X=p(null);const{width:Le,height:Ke}=de(X);let R=v(()=>vt(Le.value)),pe=p(null);const{height:et}=de(pe);let _e=p(null);const{width:qe}=de(_e);let re=v(()=>vt(qe.value)),E=p(null);const{height:k}=de(E);let ke=p(null);const{height:Ce}=de(ke);let Pe=p(0),fe=p(0),xe=N("customizedDataForm"),x=v(()=>xe.value.calendar.options),tt=N("labels");const ge=N("localLanguage");let D=v(()=>na(ge.value).el.datepicker),at=v(()=>A.general.usedLanguages.includes(ge.value)),m=v(()=>{let s=Nt({...tt});if(xe.value.calendar.translations){let l=xe.value.calendar.translations;Object.keys(l).forEach(t=>{l[t][ge.value]&&at.value?s[t]=l[t][ge.value]:l[t].default&&(s[t]=l[t].default)})}return s});const o=Tt();let Ie=v(()=>o.getters["eventEntities/getCalendarEvents"]),Ge=N("popupVisible"),q=p(f().format("YYYY-MM-DD")),U=p({locale:ge.value.split("_")[0],locales:jt,plugins:[qt,Gt],initialView:"dayGridMonth",headerToolbar:!1,slotLabelFormat:{hour:"numeric",minute:"2-digit",hour12:!1},eventTimeFormat:{hour:"numeric",minute:"2-digit",hour12:!1},aspectRatio:.9,firstDay:Jt(),dayMaxEvents:!0,selectable:!0,unselectAuto:!1,selectLongPressDelay:0,dayCellClassNames:"am-evt-day-wrapper",unselectCancel:".am-evt-more-link-inner",moreLinkClassNames:"am-evt-more-link",eventClassNames:"am-evt-block",eventContent:st,eventClick:lt,dateClick:it,moreLinkContent:Fe,moreLinkClick:nt,events:[]});function st(s){let l=s.event.extendedProps,t=l.evtColor,r=l.places===1?`${l.places} ${m.value.event_slot_left}`:`${l.places} ${m.value.event_slots_left}`,S=m.value.event_no_spots,ue=m.value.closed,le=m.value.canceled,W=l.places<=0?S:r;l.evtStatus==="closed"&&(W=ue),l.evtStatus==="canceled"&&(W=le),l.evtStatus==="waiting"&&(W=m.value.join_waiting_list);let B='<span class="am-evt-spots-left">'+W+"</span>",G='<div class="am-evt-spots">'+B+"</div>";l.evtStatus==="closed"||l.evtStatus==="canceled"||l.evtStatus==="waiting"?G=x.value.status.visibility?G:"":G=x.value.capacity.visibility?G:"";let K=l.hovered?" am-evt-hovered":"",mt=` am-evt-${l.evtStatus}`;return{html:'<div class="am-evt-wrapper'+K+mt+'" style="--am-c-evt: '+t+'"><span class="am-evt-background"></span><div class="am-evt-time">'+pt(l.evtTimeStart)+'</div><div class="am-evt-inner"><p class="am-evt-text">'+s.event.title+"</p></div>"+G+"</div>"}}function lt(s){Ge.value=!0,o.commit("eventBooking/setEventId",parseInt(s.event.extendedProps.evtId)),Ze(o,{},"SelectEvent","event",null,null),U.value.events.map(l=>{l.hovered=parseInt(l.evtId)===parseInt(s.event.extendedProps.evtId)})}function it(){}function Fe(s){let l=m.value.event;return s.num>1&&(l=m.value.events),u.value.getApi().el.offsetWidth<448?{html:'<div class="am-evt-more-link-inner mobile"></div>'}:{html:'<div class="am-evt-more-link-inner">+'+s.num+" "+l+"</div>"}}function nt(s){s.jsEvent.stopPropagation()}function Ve(s){if(!s.length)return[];s=s.map(t=>({periodStart:f(t.periodStart),periodEnd:f(t.periodEnd)})).sort((t,r)=>t.periodStart-r.periodStart);const l=[s[0]];for(let t=1;t<s.length;t++){const r=l[l.length-1],S=s[t];S.periodStart<=r.periodEnd?r.periodEnd=f.max(r.periodEnd,S.periodEnd):l.push(S)}return l.map(t=>({periodStart:t.periodStart.format("YYYY-MM-DD HH:mm:ss"),periodEnd:t.periodEnd.format("YYYY-MM-DD HH:mm:ss")}))}function Ee(s){let l=[];s.forEach(function(r){Ve(r.periods).forEach(S=>{let ue=f(S.periodStart.split(" ")[0],"YYYY-MM-DD"),le=f(S.periodEnd.split(" ")[0],"YYYY-MM-DD"),W=f(S.periodStart.split(" ")[1],"HH:mm:ss").format("HH:mm:ss"),B=f(S.periodEnd.split(" ")[1],"HH:mm:ss").format("HH:mm:ss");B==="00:00:00"&&(B="24:00:00",le.subtract(1,"days"));let G=ft(r);l.push({evtId:r.id,evtStatus:G?"waiting":ze(r),periodId:S.id,locationId:r.locationId,customLocation:r.customLocation,title:r.name,places:G?He(r):r.full?0:ye(r),evtColor:r.color,hovered:!1,evtTimeStart:W,start:ue.format("YYYY-MM-DD")+" "+W,end:le.format("YYYY-MM-DD")+" "+B})})});let t=[];l.forEach(r=>{t.find(S=>S.evtId===r.evtId&&S.start.split(" ")[0]===r.start.split(" ")[0])||t.push(r)}),U.value.events=t}$t(()=>{let s=Array.from(Ie.value);Ee(s)});function ye(s){if(s.customPricing){let l=0,t=s.customTickets;if(s.maxCustomCapacity){let r=0;t.forEach(S=>{(!("enabled"in S)||S.enabled)&&(r+=S.sold)}),l=s.maxCustomCapacity-r}else t.forEach(r=>{(!("enabled"in r)||r.enabled)&&(l+=r.spots-r.sold-("persons"in r?r.persons:0))});return l}return s.places}function Z(){let s=[f(q.value).startOf("month").subtract(15,"days").format("YYYY-MM-DD"),f(q.value).endOf("month").add(15,"days").format("YYYY-MM-DD")];o.commit("params/setDates",s),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","calendar")}function Ae(s){s==="today"&&u.value.getApi().today(),s==="prev"&&u.value.getApi().prev(),s==="next"&&u.value.getApi().next(),q.value=f(u.value.getApi().getDate().toUTCString()).format("YYYY-MM-DD"),te.value=f(q.value).format("MM"),_.value=f(q.value).format("YYYY"),Z()}let te=p(f(q.value).format("MM")),ae=p([{value:"01",label:D.value.month1},{value:"02",label:D.value.month2},{value:"03",label:D.value.month3},{value:"04",label:D.value.month4},{value:"05",label:D.value.month5},{value:"06",label:D.value.month6},{value:"07",label:D.value.month7},{value:"08",label:D.value.month8},{value:"09",label:D.value.month9},{value:"10",label:D.value.month10},{value:"11",label:D.value.month11},{value:"12",label:D.value.month12}]),_=p(f(q.value).format("YYYY")),Je=p([{value:f().format("YYYY")},{value:f().add(1,"year").format("YYYY")},{value:f().add(2,"year").format("YYYY")}]);function Qe(){q.value=f(`${_.value}-${te.value}`,"YYYY-MM").format("YYYY-MM-DD"),Z()}let h=v(()=>`${ae.value.find(s=>s.value===te.value).label}, ${_.value}`),g={components:{IconComponent:me},template:'<IconComponent icon="arrow-left"/>'},M={components:{IconComponent:me},template:'<IconComponent icon="arrow-right"/>'},ot={components:{IconComponent:me},template:'<IconComponent icon="folder"/>'},Bt={components:{IconComponent:me},template:'<IconComponent icon="locations"/>'},zt={components:{IconComponent:me},template:'<IconComponent icon="employee"/>'},Lt={components:{IconComponent:me},template:'<IconComponent icon="circle-empty"/>'},Ye=p(!1),Oe=v(()=>o.getters["eventEntities/getFilteredLocations"](o.getters["params/getShortcodeParams"])),rt=v(()=>o.getters["eventEntities/getFilteredTags"](o.getters["params/getShortcodeParams"])),ct=v(()=>o.getters["eventEntities/getEmployees"]),Pt=p(["Open","Full","Upcoming","Closed","Canceled"]),Xe=v(()=>{let s=o.getters["params/getShortcodeParams"].tags&&o.getters["params/getShortcodeParams"].tags.length===1,l=rt.value.length,t=o.getters["params/getShortcodeParams"].locations&&o.getters["params/getShortcodeParams"].locations.length===1,r=Oe.value.length,S=ct.value.length,ue=!s&&l>0,le=!t&&r>0,W=S>0,B={tag:"am-mw25",location:"am-mw25",employee:"am-mw25",status:"am-mw25"};if(!ue&&!le&&!W)B.status="am-mw100";else{let G=ue+le+W;if(G===2){let K="am-mw33",mt="am-mw33";ue&&(B.tag=K),le&&(B.location=K),W&&(B.employee=K),B.status=mt}else if(G===1){let K="am-mw50";ue&&(B.tag=K),le&&(B.location=K),W&&(B.employee=K),B.status=K}}return B}),It={components:{IconComponent:me},template:'<IconComponent icon="filter"/>'},Re=v({get:()=>o.getters["params/getSearch"],set:s=>{o.commit("params/setSearch",s.length?s:null)}}),Ft={components:{IconComponent:me},template:'<IconComponent icon="search"/>'},Se=v({get:()=>o.getters["params/getTag"],set:s=>{o.commit("params/setTag",s.length?s:null)}}),we=v({get:()=>o.getters["params/getLocations"],set:s=>{o.commit("params/setLocations",s.length?s:null)}}),Me=v({get:()=>o.getters["params/getEmployees"],set:s=>{o.commit("params/setEmployees",s.length?s:null)}}),he=p([]);function ht(s){let l=Array.from(Ie.value);if(s.length){let t=[];l.forEach(r=>{s.forEach(S=>{S===ze(r)&&t.push(r)})}),Ee(t)}else Ee(l)}let bt=p(null);be([Re,Se,we,Me],()=>{clearTimeout(bt.value),bt.value=setTimeout(()=>{o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","calendar"),o.dispatch("eventEntities/requestEvents","upcoming"),o.commit("setLoading",!0)},1e3)}),be(Ie,s=>{he.value.length?ht(he.value):Ee(s),Ne(()=>{u.value&&setTimeout(()=>{u.value.getApi().render()},200)})}),be(c,()=>{c.value||Ne(()=>{let s=u.value.getApi();s.gotoDate(q.value),setTimeout(()=>{s.render()},200)})}),Qt(()=>{Q.value&&(Pe.value=Q.value,fe.value=Q.value+Ke.value+et.value+48-(k.value+36),A.appointments.waitingListEvents.enabled&&(fe.value-=Ce.value+28)),oe.value<448?(U.value.moreLinkClassNames+=U.value.moreLinkClassNames.includes("mobile")?"":" mobile",U.value.dayCellClassNames+=U.value.dayCellClassNames.includes("mobile")?"":" mobile"):(U.value.moreLinkClassNames="am-evt-more-link",U.value.dayCellClassNames="am-evt-day-wrapper"),!ne.value&&!Q.value&&(Pe.value=P.value*.9)});let ut=v(()=>o.getters["eventEntities/getUpcomingEvents"].filter(s=>ze(s)==="open"||ze(s)==="upcoming")),dt=v(()=>o.getters["eventEntities/getUpcomingEvents"].filter(s=>ft(s))),Vt=p([{title:m.value.upcoming,class:"am-upcoming"},{title:m.value.waiting_list,class:"am-waiting"}]),ce=p(0),se=p(1),Ue=v(()=>L.monthsInFuture===0||L.monthsInFuture===1||L.monthsInFuture<0?1:L.monthsInFuture);o.commit("params/setUpcomingDates",[f().add(se.value,"months").startOf("month").format("YYYY-MM-DD"),f().add(Ue.value,"months").endOf("month").format("YYYY-MM-DD")]),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","upcoming");let At=v(()=>o.getters["params/getUpcomingDates"]);function Ot(s){return f(s[1],"YYYY-MM-DD").diff(f(s[0]),"months")===0?`${D.value[`month${f(s[0]).format("M")}`]} ${f(s[0]).format("YYYY")}`:`${D.value[`month${f(s[0]).format("M")}`]} ${f(s[0]).format("YYYY")} - ${D.value[`month${f(s[1]).format("M")}`]} ${f(s[1]).format("YYYY")}`}function kt(s){s==="prev"&&(se.value=se.value-Ue.value),s==="next"&&(se.value=se.value+Ue.value),o.commit("params/setUpcomingDates",[f().add(se.value,"months").startOf("month").format("YYYY-MM-DD"),f().add(Ue.value===1?se.value:se.value+Ue.value-1,"months").endOf("month").format("YYYY-MM-DD")]),o.commit("pagination/setPage",0),o.dispatch("eventEntities/requestEvents","upcoming")}function Ct(s){return s.customPricing?Mt(s)?`${m.value.from} ${St(oa(s))}`:m.value.event_free:Mt(s)?St(s.price):m.value.event_free}function xt(s){let l=[];return s.forEach(t=>{l.push(t.periodStart.split(" ")[0]),l.push(t.periodEnd.split(" ")[0])}),!l.every(t=>t===l[0])}function Et(s){o.commit("eventBooking/setEventId",parseInt(s)),Ze(o,{},"SelectEvent","event",null,null),Ge.value=!0}function Rt(s){let l=ye(s),t=l===1?m.value.event_slot_left:m.value.event_slots_left,r=m.value.event_no_spots;return l<=0?r:t}window.addEventListener("resize",Ut);function Ut(){setTimeout(()=>{u.value.getApi().render()},200)}let Y=N("amColors"),Wt=v(()=>({"--am-c-ecal-bgr":Y.value.colorMainBgr,"--am-c-ecal-heading-text":Y.value.colorMainHeadingText,"--am-c-ecal-heading-text-op70":T(Y.value.colorMainHeadingText,.7),"--am-c-ecal-text":Y.value.colorMainText,"--am-c-ecal-text-op03":T(Y.value.colorMainText,.03),"--am-c-ecal-text-op05":T(Y.value.colorMainText,.05),"--am-c-ecal-text-op10":T(Y.value.colorMainText,.1),"--am-c-ecal-text-op20":T(Y.value.colorMainText,.2),"--am-c-ecal-text-op30":T(Y.value.colorMainText,.3),"--am-c-ecal-text-op50":T(Y.value.colorMainText,.5),"--am-c-ecal-text-op70":T(Y.value.colorMainText,.7),"--am-c-ecal-card-bgr":Y.value.colorCardBgr,"--am-c-ecal-card-border":Y.value.colorCardBorder,"--am-c-ecal-card-border-op10":T(Y.value.colorCardBorder,.1),"--am-c-ecal-card-text":Y.value.colorCardText,"--am-c-ecal-card-text-op80":T(Y.value.colorCardText,.8),"--am-c-ecal-card-text-op50":T(Y.value.colorCardText,.5),"--am-c-ecal-error":Y.value.colorError,"--am-c-ecal-primary":Y.value.colorPrimary,"--am-c-ecal-primary-op30":T(Y.value.colorPrimary,.3),"--am-c-ecal-success":Y.value.colorSuccess,"--am-c-ecal-warning":Y.value.colorWarning}));return(s,l)=>(a(),n("div",{ref_key:"evtCalPageRef",ref:F,class:w(["am-ecs__page",{"am-tablet":e(O)<992}]),style:ve(e(Wt))},[y("div",{ref_key:"mainBlockRef",ref:J,class:w(["am-ecs__main",{"am-full-width":e(O)<992||!e(x).upcomingBlock.visibility}])},[e(x).search.visibility||e(x).filters.visibility?(a(),n("div",{key:0,ref_key:"filtersRef",ref:X,class:"am-ecs__filters"},[e(c)?i("",!0):(a(),n("div",Ca,[e(x).search.visibility?(a(),n("div",{key:0,class:w(["am-ecs__filters-search",e(R)])},[e(c)?i("",!0):(a(),d(Xt,{key:0,modelValue:e(Re),"onUpdate:modelValue":l[0]||(l[0]=t=>ie(Re)?Re.value=t:Re=t),placeholder:`${e(m).event_search}...`,"icon-start":e(Ft),disabled:e(c),size:"small"},null,8,["modelValue","placeholder","icon-start","disabled"]))],2)):i("",!0),e(x).filters.visibility?(a(),n("div",{key:1,class:w(["am-ecs__filters-btn",[{"am-single":!e(x).search.visibility},e(R)]])},[e(c)?i("",!0):(a(),d(De,{key:0,icon:e(It),"icon-only":e(Le)<=500,"custom-class":"am-ecs__filters-btn__inner",category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[1]||(l[1]=t=>ie(Ye)?Ye.value=!e(Ye):Ye=!e(Ye))},{default:I(()=>[xa,e(Le)>500?(a(),n("span",Ea,b(e(m).event_filters),1)):i("",!0)]),_:1},8,["icon","icon-only","disabled"]))],2)):i("",!0)])),e(c)?(a(),d(ya,{key:1})):i("",!0),j(Zt,{name:"am-slide-fade"},{default:I(()=>[e(Ye)?(a(),n("div",{key:0,class:w(["am-ecs__filters-menu",e(R)])},[(!e(o).getters["params/getShortcodeParams"].tags||e(o).getters["params/getShortcodeParams"].tags.length!==1)&&e(rt).length>0?(a(),n("div",{key:0,class:w(["am-ecs__filters-menu__items",[e(R),e(Xe).tag]])},[e(c)?i("",!0):(a(),d(Te,{key:0,modelValue:e(Se),"onUpdate:modelValue":l[2]||(l[2]=t=>ie(Se)?Se.value=t:Se=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,"prefix-icon":e(Se)?"":e(ot),placeholder:e(m).event_type,disabled:e(c)},{default:I(()=>[(a(!0),n($,null,V(e(rt),(t,r)=>(a(),d(Be,{key:r,class:w(`am-ecs-tag__${t.name.replace(/\s+/g,"")}`),value:t.name,label:t.name},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","prefix-icon","placeholder","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),(!e(o).getters["params/getShortcodeParams"].locations||e(o).getters["params/getShortcodeParams"].locations.length!==1)&&e(Oe).length>0?(a(),n("div",{key:1,class:w(["am-ecs__filters-menu__items",[e(R),e(Xe).location]])},[e(c)?i("",!0):(a(),d(Te,{key:0,modelValue:e(we),"onUpdate:modelValue":l[3]||(l[3]=t=>ie(we)?we.value=t:we=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_location,"prefix-icon":e(we)?"":e(Bt),disabled:e(c)},{default:I(()=>[(a(!0),n($,null,V(e(Oe),t=>(a(),d(Be,{key:t.id,class:w(`am-ecs-location__${t.id}`),value:t.id,label:t.name},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),e(ct).length>0?(a(),n("div",{key:2,class:w(["am-ecs__filters-menu__items",[e(R),e(Xe).employee]])},[e(c)?i("",!0):(a(),d(Te,{key:0,modelValue:e(Me),"onUpdate:modelValue":l[4]||(l[4]=t=>ie(Me)?Me.value=t:Me=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_employee,"prefix-icon":e(Me)?"":e(zt),disabled:e(c)},{default:I(()=>[(a(!0),n($,null,V(e(ct),t=>(a(),d(Be,{key:t.id,class:w(`am-ecs-employee__${t.id}`),value:t.id,label:`${t.firstName} ${t.lastName}`},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)):i("",!0),y("div",{class:w(["am-ecs__filters-menu__items",[e(R),e(Xe).status]])},[e(c)?i("",!0):(a(),d(Te,{key:0,modelValue:e(he),"onUpdate:modelValue":l[5]||(l[5]=t=>ie(he)?he.value=t:he=t),clearable:"",size:"small",filterable:!1,multiple:!0,"collapse-tags":!0,placeholder:e(m).event_status,"prefix-icon":e(he).length?"":e(Lt),disabled:e(c),onChange:ht},{default:I(()=>[(a(!0),n($,null,V(e(Pt),t=>(a(),d(Be,{key:t.toLowerCase(),class:w(`am-ecs-status__${t.toLowerCase()}`),value:t.toLowerCase(),label:e(m)[t.toLowerCase()]},null,8,["class","value","label"]))),128))]),_:1},8,["modelValue","placeholder","prefix-icon","disabled"])),e(c)?(a(),d(z,{key:1,size:"small"})):i("",!0)],2)],2)):i("",!0)]),_:1})],512)):i("",!0),y("div",{ref_key:"headerRef",ref:pe,class:"am-ecs__header"},[y("div",{class:w(["am-ecs__header-inner",e(je)])},[y("div",Ya,[e(c)?i("",!0):(a(),d(De,{key:0,"custom-class":"am-ecs__header-today",category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[6]||(l[6]=t=>Ae("today"))},{default:I(()=>[$e(b(e(m).event_today),1)]),_:1},8,["disabled"])),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"100px",marginRight:"16px"}})):i("",!0),e(c)?i("",!0):(a(),d(De,{key:2,"custom-class":"am-ecs__header-prev","icon-only":!0,icon:e(g),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[7]||(l[7]=t=>Ae("prev"))},null,8,["icon","disabled"])),e(c)?(a(),d(z,{key:3,size:"small","custom-style":{width:"32px",marginRight:"8px"}})):i("",!0),e(c)?i("",!0):(a(),d(De,{key:4,"custom-class":"am-ecs__header-next","icon-only":!0,icon:e(M),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[8]||(l[8]=t=>Ae("next"))},null,8,["icon","disabled"])),e(c)?(a(),d(z,{key:5,size:"small","custom-style":{width:"32px",marginRight:"16px"}})):i("",!0)]),e(c)?i("",!0):(a(),n("div",Sa,b(e(h)),1)),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"100px"}})):i("",!0)],2),y("div",{class:w(["am-ecs__header-selection",e(je)])},[e(c)?i("",!0):(a(),d(Te,{key:0,modelValue:e(te),"onUpdate:modelValue":l[9]||(l[9]=t=>ie(te)?te.value=t:te=t),size:"small",disabled:e(c),onChange:Qe},{default:I(()=>[(a(!0),n($,null,V(e(ae),t=>(a(),d(Be,{key:t.value,value:t.value,label:t.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled"])),e(c)?(a(),d(z,{key:1,size:"small","custom-style":{width:"calc(50% - 3px)"}},null,8,["custom-style"])):i("",!0),e(c)?i("",!0):(a(),d(Te,{key:2,modelValue:e(_),"onUpdate:modelValue":l[10]||(l[10]=t=>ie(_)?_.value=t:_=t),size:"small",disabled:e(c),onChange:Qe},{default:I(()=>[(a(!0),n($,null,V(e(Je),t=>(a(),d(Be,{key:t.value,value:t.value},null,8,["value"]))),128))]),_:1},8,["modelValue","disabled"])),e(c)?(a(),d(z,{key:3,size:"small","custom-style":{width:"calc(50% - 3px)"}},null,8,["custom-style"])):i("",!0)],2)],512),e(c)?i("",!0):(a(),n("div",wa,[j(e(Kt),{ref_key:"eventCalendarRef",ref:u,options:e(U)},null,8,["options"])])),e(c)?(a(),d(ka,{key:2,height:e(Pe)},null,8,["height"])):i("",!0)],2),e(x).upcomingBlock.visibility?(a(),n("div",{key:0,ref_key:"sideRef",ref:_e,class:w(["am-ecs__side",{"am-full-width":e(O)<992}])},[y("div",{ref_key:"sideHeaderRef",ref:E,class:"am-ecs__side-header"},[y("div",Ma,[e(C)?i("",!0):(a(),n($,{key:0},[$e(b(e(m).event_upcoming_events),1)],64)),e(C)?(a(),d(z,{key:1,size:"small"})):i("",!0)]),y("div",Da,[e(C)?i("",!0):(a(),n("div",Ta,b(Ot(e(At))),1)),e(C)?(a(),d(z,{key:1,size:"micro","custom-style":{width:"100%"}})):i("",!0)]),y("div",$a,[e(C)?i("",!0):(a(),d(De,{key:0,"custom-class":"am-ecs__side-header__btn","icon-only":!0,icon:e(g),category:"secondary",type:"plain",size:"small",disabled:e(c)||e(se)===1,onClick:l[11]||(l[11]=t=>kt("prev"))},null,8,["icon","disabled"])),e(C)?(a(),d(z,{key:1,size:"small","custom-style":{width:"calc(50% - 4px)"}},null,8,["custom-style"])):i("",!0),e(C)?i("",!0):(a(),d(De,{key:2,"custom-class":"am-ecs__side-header__btn","icon-only":!0,icon:e(M),category:"secondary",type:"plain",size:"small",disabled:e(c),onClick:l[12]||(l[12]=t=>kt("next"))},null,8,["icon","disabled"])),e(C)?(a(),d(z,{key:3,size:"small","custom-style":{width:"calc(50% - 4px)"}},null,8,["custom-style"])):i("",!0)])],512),e(A).appointments.waitingListEvents.enabled?(a(),n("div",{key:0,ref_key:"sideTabRef",ref:ke,class:"am-ecs__side-tab"},[e(C)?i("",!0):(a(!0),n($,{key:0},V(e(Vt),(t,r)=>(a(),n("div",{key:r,class:w(["am-ecs__side-tab__item",[{"am-active":e(ce)===r},t.class]]),onClick:()=>ie(ce)?ce.value=r:ce=r},b(t.title),11,Ba))),128)),e(C)?(a(),d(z,{key:1,rows:2,"custom-style":{width:"117px",height:"42px"},size:"custom"})):i("",!0)],512)):i("",!0),y("div",{class:w(["am-ecs__side-main",e(re)]),style:ve(e(O)>991?{height:`${e(fe)}px`}:{})},[e(ut).length&&!e(C)&&e(ce)===0?(a(!0),n($,{key:0},V(e(ut),t=>(a(),n("div",{key:t.id,class:w(["am-ecs__side-card",e(re)]),style:ve({"--am-c-evt":t.color,"--am-c-evt-op05":e(T)(t.color,.05)}),onClick:r=>Et(t.id)},[y("div",La,[xt(t.periods)?(a(),n("span",Pa,b(e(m).event_begins),1)):i("",!0),e(x).price.visibility?(a(),n("span",Ia,[$e(b(Ct(t))+" ",1),e(Yt)(e(o),t.id,"event")&&e(x).tax.visibility?(a(),n($,{key:0},[$e(b(e(A).payments.taxes.excluded?` +${e(m).total_tax_colon}`:` ${e(m).incl_tax}`),1)],64)):i("",!0)])):i("",!0)]),y("div",Fa,[y("span",Va,b(e(f)(t.periods[0].periodStart.split(" ")[0]).format("DD")),1),y("span",Aa,b(e(D).months[e(f)(t.periods[0].periodStart.split(" ")[0]).format("MMM").toLowerCase()].toUpperCase()),1),y("span",Oa,b(e(m).event_at),1),y("span",Ra,b(e(pt)(t.periods[0].periodStart.split(" ")[1])),1)]),y("div",Ua,b(t.name),1),e(x).location.visibility?(a(),n("div",Wa,b(e(wt)(t,e(Oe))),1)):i("",!0),e(x).status.visibility||e(x).capacity.visibility?(a(),n("div",Ha,[e(x).status.visibility?(a(),n("div",{key:0,class:w(["am-ecs__side-card__status",`am-${e(ze)(t)}`])},b(e(m)[e(ze)(t)]),3)):i("",!0),e(x).capacity.visibility?(a(),n("div",Na,[ye(t)?(a(),n("span",ja,b(ye(t)),1)):i("",!0),y("span",qa,b(Rt(t)),1)])):i("",!0)])):i("",!0)],14,za))),128)):i("",!0),e(dt).length&&!e(C)&&e(ce)===1?(a(!0),n($,{key:1},V(e(dt),t=>(a(),n("div",{key:t.id,class:w(["am-ecs__side-card",e(re)]),style:ve({"--am-c-evt":t.color,"--am-c-evt-op05":e(T)(t.color,.05)}),onClick:r=>Et(t.id)},[y("div",Ja,[xt(t.periods)?(a(),n("span",Qa,b(e(m).event_begins),1)):i("",!0),e(x).price.visibility?(a(),n("span",Xa,[$e(b(Ct(t))+" ",1),e(Yt)(e(o),t.id,"event")&&e(x).tax.visibility?(a(),n($,{key:0},[$e(b(e(A).payments.taxes.excluded?` +${e(m).total_tax_colon}`:` ${e(m).incl_tax}`),1)],64)):i("",!0)])):i("",!0)]),y("div",Za,[y("span",Ka,b(e(f)(t.periods[0].periodStart.split(" ")[0]).format("DD")),1),y("span",es,b(e(D).months[e(f)(t.periods[0].periodStart.split(" ")[0]).format("MMM").toLowerCase()].toUpperCase()),1),y("span",ts,b(e(m).event_at),1),y("span",as,b(e(pt)(t.periods[0].periodStart.split(" ")[1])),1)]),y("div",ss,b(t.name),1),e(x).location.visibility?(a(),n("div",ls,b(e(wt)(t,e(Oe))),1)):i("",!0),e(x).status.visibility||e(x).capacity.visibility?(a(),n("div",is,[e(x).status.visibility?(a(),n("div",ns,b(e(He)(t)>0?e(m).waiting_list:e(m).join_waiting_list),1)):i("",!0),e(x).capacity.visibility&&e(He)(t)>0?(a(),n("div",os,[y("span",rs,b(e(He)(t)),1),y("span",cs,b(e(He)(t)===1?e(m).person_waiting:e(m).people_waiting),1)])):i("",!0)])):i("",!0)],14,Ga))),128)):i("",!0),!e(ut).length&&!e(C)&&e(ce)===0?(a(),n("div",us,b(e(m).evt_empty_message),1)):i("",!0),!e(dt).length&&!e(C)&&e(ce)===1?(a(),n("div",ds," There are no events with waiting list possibilities ")):i("",!0),e(C)?(a(),d(z,{key:4,rows:5,"custom-style":{height:"150px",marginBottom:"12px"},size:"custom"})):i("",!0)],6)],2)):i("",!0)],6))}};const vs=y("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),ps=y("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),_s=["href"],fs={key:0,class:"am-dialog-el-header"},gs={name:"EventsCalendarFormWrapper"},Cs=Object.assign(gs,{emits:["isRestored"],setup(ee,{emit:L}){const A=We(ra),ne=We(ca),c=We(ua),C=We(da),F=We(ma);let O=N("isMounted");const J=p(!1);H("popupVisible",J);const P=N("settings"),je=N("baseUrls"),u=Tt();u.commit("setFormKey","ecf");const oe=N("shortcodeData");u.commit("shortcodeParams/setForm","eventCalendarForm"),u.commit("shortcodeParams/setShortcodeParams",oe.value),u.commit("bookableType/setType","event"),u.commit("eventEntities/setEventsDisplay","calendar");let Q=p(null),X=p(null),Le=v(()=>u.getters["eventEntities/getEvents"]);function Ke(h){u.commit("eventEntities/setEvents",h)}let R=p(0);H("containerWidth",R);let pe=p(0);H("dialogWidth",pe),window.addEventListener("resize",et);function et(){Q.value&&(R.value=Q.value.offsetWidth),X.value&&(pe.value=X.value.offsetWidth)}let _e=v(()=>u.getters.getReady),qe=v(()=>u.getters.getLoading),re=v(()=>u.getters["eventBooking/getBooked"]);const E=p(0);H("stepIndex",E);const k=p([A,c,F]);H("stepsArray",k);let ke=p([]);H("eventFluidStepKey",ke),be(ke,h=>{if(h.indexOf("eventTickets")>-1&&k.value.find(g=>g.name==="EventTickets")===void 0&&k.value.splice(E.value+1,0,ne),h.indexOf("eventTickets")<0&&k.value.find(g=>g.name==="EventTickets")!==void 0){let g=k.value.indexOf(ne);k.value.splice(g,1)}if(h.indexOf("eventPayment")>-1&&k.value.find(g=>g.name==="EventPayment")===void 0&&k.value.splice(E.value+1,0,C),h.indexOf("eventPayment")<0&&k.value.find(g=>g.name==="EventPayment")!==void 0){let g=k.value.indexOf(C);k.value.splice(g,1)}},{deep:!0});let Ce=v(()=>ft(u.getters["eventEntities/getEvent"](u.getters["eventBooking/getSelectedEventId"])));be(Ce,h=>{if(h){let g=JSON.parse(JSON.stringify(u.getters["eventEntities/getEvent"](u.getters["eventBooking/getSelectedEventId"]).waitingList));u.commit("eventWaitingListOptions/setAllData",{...g,isAvailable:Ce.value})}});let Pe=p(!1);H("bringingAnyoneVisibility",Pe);let fe=p(!1),xe=p(!1),x=v(()=>re.value!==null?re.value.customerCabinetUrl.length>0:!0);function tt(){u.commit("setLoading",!0),E.value=E.value===k.value.length-1?E.value:E.value+1}function ge(){u.commit("setLoading",!0),E.value=E.value-1,o.value=!o.value}function D(){fe.value=!0;let h=document.getElementsByClassName("am-dialog-el")[0];sa(h.children[0],h.children[0].children[0],50,300)}function at(){fe.value=!1}function m(h){xe.value=h}let o=p(!1);function Ie(){o.value=!0}function Ge(){o.value=!1}function q(){k.value[E.value].name==="CongratulationsStep"&&re.value?window.location.href=re.value.customerCabinetUrl:J.value=!1}H("secondButton",{secondButtonClick:q}),H("changingStepsFunctions",{nextStep:tt,previousStep:ge,footerButtonClick:D,footerButtonReset:at,footerBtnDisabledUpdater:m,footerButtonClicked:fe,footerBtnDisabled:xe,headerButtonPreviousClick:Ie,headerButtonPreviousReset:Ge,headerButtonPreviousClicked:o});let U=p(1);ea("upcomingDateRange",{futureMonthsNumber:U}),u.commit("params/setDates",[Dt().startOf("month").subtract(15,"days").format("YYYY-MM-DD"),Dt().endOf("month").add(15,"days").format("YYYY-MM-DD")]),u.commit("pagination/setPage",0),u.dispatch("eventEntities/requestEntities",{types:["tags","employees","locations","customFields","taxes"],loadEntities:oe.value.trigger||window.ameliaShortcodeData.filter(h=>!h.hasApiCall).length===window.ameliaShortcodeData.length?!0:oe.value.hasApiCall}),$t(()=>{document.getElementById("amelia-v2-booking-"+oe.value.counter).classList.add("amelia-v2-booking-"+oe.value.counter+"-loaded"),be(_e,h=>{h&&Ze(u,{events:Le,useEvents:Ke},"ViewContent","event",null,null)}),Ne(()=>{Q.value&&(R.value=Q.value.offsetWidth),X.value&&(pe.value=X.value.offsetWidth)}),Ze(u,{containerWidth:R},"ContainerWidth","event",null,null),O.value=!0});function st(){k.value[E.value].name==="CongratulationsStep"&&(u.commit("setReady",!1),window.location.reload()),ke.value=[],E.value=0}function lt(){Ne(()=>{u.dispatch("persons/resetPersons"),u.dispatch("coupon/resetCoupon"),u.dispatch("tickets/resetCustomTickets"),u.dispatch("eventWaitingListOptions/resetWaitingOptions")})}function it(){Ne(()=>{X.value&&(pe.value=X.value.offsetWidth)})}be(_e,h=>{if(h){let g=ia(u,oe.value);if(g){k.value.splice(0,k.value.length),E.value=0,g.steps.forEach(ot=>{switch(ot){case"EventInfo":k.value.push(A);break;case"EventTickets":k.value.push(ne);break;case"EventCustomerInfo":k.value.push(c);break;case"EventPayment":k.value.push(C);break;case"CongratulationsStep":k.value.push(F);break}E.value++}),u.commit("setLoading",!1);let M=-1;g.result==="success"?M=k.value.length-1:(g.result==="error"||g.result==="canceled")&&(M=k.value.length-2),E.value=M,J.value=!0,L("isRestored",!0)}}});let Fe=v(()=>P.customizedData&&"ecf"in P.customizedData?P.customizedData.ecf:_t.ecf);H("customizedDataForm",Fe);const nt=N("labels"),Ve=N("localLanguage");let Ee=v(()=>P.general.usedLanguages.includes(Ve.value)),ye=v(()=>{let h={},g=Fe.value[k.value[E.value].key].translations;return g&&Object.keys(g).forEach(M=>{g[M][Ve.value]&&Ee.value?h[M]=g[M][Ve.value]:g[M].default&&(h[M]=g[M].default)}),Object.keys(h).length?h:nt}),Z=v(()=>Fe.value[k.value[E.value].key].options),Ae=v(()=>"secBtn"in Z.value&&"visibility"in Z.value.secBtn?Z.value.secBtn.visibility:!0),te=v(()=>Ce.value&&k.value[E.value].key==="info"?"waitingBtn"in Z.value?Z.value.waitingBtn.buttonType:"filled":Z.value.primBtn.buttonType);const ae=p(P.customizedData?P.customizedData.fonts:_t.fonts);H("amFonts",ae);let _=v(()=>P.customizedData&&"ecf"in P.customizedData?P.customizedData.ecf.colors:_t.ecf.colors);H("amColors",_);let Je=v(()=>({"--am-c-primary":_.value.colorPrimary,"--am-c-success":_.value.colorSuccess,"--am-c-error":_.value.colorError,"--am-c-warning":_.value.colorWarning,"--am-c-main-bgr":_.value.colorMainBgr,"--am-c-main-heading-text":_.value.colorMainHeadingText,"--am-c-main-text":_.value.colorMainText,"--am-c-sb-bgr":_.value.colorSbBgr,"--am-c-sb-text":_.value.colorSbText,"--am-c-inp-bgr":_.value.colorInpBgr,"--am-c-inp-border":_.value.colorInpBorder,"--am-c-inp-text":_.value.colorInpText,"--am-c-inp-placeholder":_.value.colorInpPlaceHolder,"--am-c-drop-bgr":_.value.colorDropBgr,"--am-c-drop-text":_.value.colorDropText,"--am-c-card-bgr":_.value.colorCardBgr,"--am-c-card-text":_.value.colorCardText,"--am-c-card-border":_.value.colorCardBorder,"--am-c-btn-prim":_.value.colorBtnPrim,"--am-c-btn-prim-text":_.value.colorBtnPrimText,"--am-c-btn-sec":_.value.colorBtnSec,"--am-c-btn-sec-text":_.value.colorBtnSecText,"--am-c-skeleton-op20":T(_.value.colorMainText,.2),"--am-c-skeleton-op60":T(_.value.colorMainText,.6),"--am-font-family":ae.value.fontFamily,"--am-mw-main":"792px","--am-hd-main":E.value>0?"592px":"652px","--am-c-scroll-op30":T(_.value.colorPrimary,.3),"--am-c-scroll-op10":T(_.value.colorPrimary,.1),"--am-rad-input":"6px","--am-mb-dialog":"300px"}));function Qe(){let h=document.head||document.getElementsByTagName("head")[0];h.querySelector("#amCustomFont")&&h.querySelector("#amCustomFont").remove();let g=`@font-face {font-family: '${ae.value.fontFamily}'; src: url(${ae.value.fontUrl});}`,M=document.createElement("style");h.appendChild(M),M.setAttribute("type","text/css"),M.setAttribute("id","amCustomFont"),M.appendChild(document.createTextNode(g))}return ae.value.customFontSelected&&Qe(),(h,g)=>(a(),n($,null,[ae.value.customFontSelected?i("",!0):(a(),n($,{key:0},[vs,ps,y("link",{rel:"stylesheet",type:"text/css",href:`${e(je).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,_s)],64)),y("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:Q,class:"am-ecf",style:ve(e(Je))},[j(ms,{"months-in-future":e(U)},null,8,["months-in-future"]),e(_e)?(a(),d(ta,{key:0,modelValue:J.value,"onUpdate:modelValue":g[0]||(g[0]=M=>J.value=M),width:"650px","append-to-body":!0,"destroy-on-close":!0,"align-center":!0,"close-on-click-modal":!1,"close-on-press-escape":!1,"modal-class":"amelia-v2-booking am-dialog-el","custom-styles":e(Je),onClose:st,onClosed:lt,onOpened:it},{default:I(()=>[y("div",{id:"amelia-container",ref_key:"dialogContainer",ref:X},[E.value>0?(a(),n("div",fs,[j(va,{ready:e(_e),loading:e(qe),"customized-labels":e(ye)},null,8,["ready","loading","customized-labels"])])):i("",!0),(a(),d(la(k.value[E.value]),{"in-dialog":!0,"global-class":"am-dialog-el__main-container"})),j(pa,{loading:e(qe),"second-button-show":e(x)&&e(Ae)&&e(P).roles.customerCabinet.enabled&&e(P).roles.customerCabinet.pageUrl!==null,"payment-gateway":e(u).getters["payment/getPaymentGateway"],"customized-labels":e(ye),"primary-footer-button-type":e(te),"secondary-footer-button-type":e(Z).secBtn.buttonType,"is-waiting-list":e(Ce)},null,8,["loading","second-button-show","payment-gateway","customized-labels","primary-footer-button-type","secondary-footer-button-type","is-waiting-list"])],512)]),_:1},8,["modelValue","custom-styles"])):i("",!0)],4),j(aa)],64))}});export{Cs as default};
