import{bF as qs,bG as Ii,l as U,s as V,m as b,n as K,o as u,c as A,y as yr,q as Be,b as t,a as d,j as N,w as S,f as ue,t as w,ab as Fe,h as ke,i as $,p as j,H as Qe,_ as Ze,aL as ro,bH as $i,bI as Ni,b6 as it,aV as Ae,bJ as Al,bs as io,u as Oe,e as Y,a8 as ga,r as ve,F as ne,b9 as Sa,bK as $l,ap as Ye,bL as zs,am as Je,aG as Nl,aF as Ol,bM as ja,aY as $e,b4 as Fl,A as tt,bg as Oi,bh as Mi,a0 as Zs,x as Ge,b1 as ot,bj as bt,aS as lt,bk as Vi,bl as Dt,af as ft,bb as br,bN as Ri,bO as qi,bP as Br,bQ as Ui,bi as st,bR as Mo,D as ze,E as kl,G as xt,v as co,b7 as _a,b8 as Ca,bn as zi,aJ as ha,bS as Ar,bT as xo,bU as ms,bV as wa,bW as Yn,bX as ji,bY as Yi,al as ct,bZ as uo,aM as vt,b_ as Fr,b$ as kr,c0 as Cs,c1 as ys,aR as ht,g as Vo,b5 as Ct,c2 as hs,c3 as Wi,c4 as Hi,bz as Ga,c5 as Dr,ad as wr,c6 as Mt,c7 as Ut,aB as $t,c8 as Qt,c9 as bs,aC as mo,ca as Kt,cb as Ta,ay as po,an as fo,cc as Gi,aZ as Js,cd as Zi,ce as vs,aq as nt,cf as go,cg as Dl,ch as Ji,ci as Xi,cj as Ro,ck as qo,bm as gt,cl as Pr,bf as Qi,cm as Ml,a5 as Ki,aP as La,aO as Vl,aU as e0,cn as t0,co as a0,cp as Tr,cq as s0,cr as l0,cs as n0,ct as o0,cu as r0,cv as ho,cw as i0,cx as c0,cy as x0,cz as Uo,cA as u0,ac as d0,ah as m0}from"./stepForm.0777f393.js";import{e as p0,n as We,o as f0,m as at,p as wl}from"./eventListForm.ca95c969.js";function Ot(n,a){let e=a!==""?JSON.parse(n.translations)[a]:JSON.parse(n.translations);if(qs in e)return e[qs];let s=Object.keys(e),l=Object.keys(e).map(r=>r.length>2?r.slice(0,2):r),o="";for(let r=0;r<l.length;r++){if(Ii===s[r]&&e[s[r]]){o=e[s[r]];break}l[r]===qs&&e[s[r]]&&(o=e[s[r]])}return o}function In(n,a){return n.translations&&JSON.parse(n.translations)[a]&&Ot(n,a)?Ot(n,a):n[a]}function qt(n){return n.translations&&JSON.parse(n.translations).name&&Ot(n,"name")?Ot(n,"name"):n.name}function g0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.name}function IC(n){return n.translations&&Ot(n,"")?Ot(n,""):n.content}function h0(n){return n.translations&&Ot(n,"name")?Ot(n,"name"):n.label}function v0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.label}function ia(n){return n.translations&&JSON.parse(n.translations).description&&Ot(n,"description")?Ot(n,"description"):n.description}function $C(n){n.services&&n.services.length&&n.services.forEach(a=>{a.name=qt(a),a.description=ia(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ia(e)})}),n.locations&&n.locations.length&&n.locations.forEach(a=>{a.name=qt(a),a.description=ia(a)}),n.packages&&n.packages.length&&n.packages.forEach(a=>{a.name=qt(a),a.description=ia(a),a.bookable.forEach(e=>{e.service.name=qt(e.service),e.service.description=ia(e.service),"extras"in e.service&&e.service.extras.forEach(s=>{s.name=qt(s),s.description=ia(s)})})}),n.categories&&n.categories.length&&n.categories.forEach(a=>{a.name=qt(a),a.serviceList.forEach(e=>{e.name=qt(e),e.description=ia(e),e.extras.forEach(s=>{s.name=qt(s),s.description=ia(s)})})}),n.events&&n.events.length&&n.events.forEach(a=>{a.name=qt(a),a.description=ia(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ia(e)})}),n.customFields&&n.customFields.length&&n.customFields.forEach(a=>{a.label=h0(a),a.options.forEach(e=>{e.label=v0(e)})}),n.employees&&n.employees.length&&n.employees.forEach(a=>{a.firstName=In(a,"firstName"),a.lastName=In(a,"lastName"),a.description=In(a,"description")})}const E0={props:{ready:{type:Boolean,default:!0}},setup(n){let a=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),e=b(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":K(a.value.colorMainText,.15)}));return(s,l)=>(u(),A("div",{class:"am-caph__main",style:Be(t(e))},[yr(s.$slots,"default")],4))}};const _0={key:0},C0={key:1},y0={key:2},b0={name:"MainProfileFooter"},B0=Object.assign(b0,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(n){const a=n,e=U("labels");function s(m){return Object.keys(a.customizedLabels).length&&a.customizedLabels[m]?a.customizedLabels[m]:e[m]}const l=U("settings");let o=U("deleteProfileDialog",V(!1)),r=U("saveProfileChanges",()=>{}),i=U("saveCustomerCustomFields",()=>{}),c=U("changeProfilePassword",()=>{}),x=U("amColors"),g=b(()=>({"--am-c-cappf-bgr":x.value.colorMainBgr,"--am-c-cappf-text":x.value.colorMainText,"--am-c-cappf-text-op15":K(x.value.colorMainText,.15)}));return(m,p)=>(u(),A("div",{class:"am-cappf",style:Be(t(g))},[d("div",{class:j(["am-cappf__options",{"am-only-one":n.display==="second"||!t(l).roles.allowCustomerDeleteProfile}])},[n.display==="first"&&t(l).roles.allowCustomerDeleteProfile?(u(),A("div",_0,[N(ke,{category:"danger",size:t(a).parentWidth<=360?"small":"default",type:t(a).deleteFooterType,class:"am-cappf__delete",disabled:n.loading,onClick:p[0]||(p[0]=y=>Fe(o)?o.value=!0:o=!0)},{default:S(()=>[ue(w(s("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):$("",!0),n.display==="first"||n.display==="third"?(u(),A("div",C0,[N(ke,{type:t(a).saveFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:p[1]||(p[1]=y=>n.display==="first"?t(r)():t(i)())},{default:S(()=>[ue(w(s("save_changes")),1)]),_:1},8,["type","size","disabled"])])):$("",!0),n.display==="second"?(u(),A("div",y0,[N(ke,{type:t(a).passFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:p[2]||(p[2]=y=>t(c)())},{default:S(()=>[ue(w(s("change_password")),1)]),_:1},8,["type","size","disabled"])])):$("",!0)],2)],4))}});const A0={key:0,class:"am-date-picker__input-date"},F0={key:1,class:"am-date-picker__input-start"},k0={key:2,class:"am-date-picker__input-end"},ea={props:{modelValue:{type:[String,Array,Object,Number]},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:""},startPlaceholder:{type:String},endPlaceholder:{type:String},type:{type:String,default:"date",validator(n){return["year","years","month","months","date","dates","datetime","week","datetimerange","daterange","monthrange","yearrange"].includes(n)}},format:{type:String},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>{}},rangeSeparator:{type:String,default:"-"},defaultValue:{type:[String,Array,Object,Number]},defaultTime:{type:[String,Array,Object,Number]},valueFormat:{type:String},id:{type:[String,Array]},name:{type:[String,Array]},unlinkPanels:{type:Boolean,default:!1},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="calendar"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="close"/>'})},validateEvent:{type:Boolean,default:!0},disabledDate:{type:Function,default:()=>{}},shortcuts:{type:Array,default:()=>[]},cellClassName:{type:Function},teleported:{type:Boolean,default:!0},emptyValues:{type:[String,Array]},valueOnClear:{type:[String,Number,Boolean,Function],default:""},fallbackPlacements:{type:Array},placement:{type:String,default:"bottom",validator(n){return["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(n)}},lang:{type:String,default:""}},emits:["update:modelValue","change","blur","focus","clear","calendar-change","panel-change","visible-change"],setup(n,{emit:a}){const e=n;let{modelValue:s}=ro(e),l=b({get:()=>s.value,set:x=>{a("update:modelValue",x)}});const o=V(null);function r(){o.value&&o.value.focus()}let i=U("amColors"),c=b(()=>({"--am-c-primary":i.value.colorPrimary,"--am-c-inp-bgr":i.value.colorInpBgr,"--am-c-inp-border":i.value.colorInpBorder,"--am-c-inp-text":i.value.colorInpText,"--am-c-inp-text-op03":K(i.value.colorInpText,.03),"--am-c-inp-text-op05":K(i.value.colorInpText,.05),"--am-c-inp-text-op40":K(i.value.colorInpText,.4),"--am-c-inp-text-op60":K(i.value.colorInpText,.6),"--am-c-inp-placeholder":i.value.colorInpPlaceHolder,"--am-c-drop-bgr":i.value.colorDropBgr,"--am-c-drop-text":i.value.colorDropText,"--am-c-drop-text-op03":K(i.value.colorDropText,.03),"--am-c-drop-text-op10":K(i.value.colorDropText,.1),"--am-c-drop-text-op30":K(i.value.colorDropText,.3),"--am-c-drop-text-op50":K(i.value.colorDropText,.5),"--am-c-drop-text-op70":K(i.value.colorDropText,.7),"--am-c-drop-text-op80":K(i.value.colorDropText,.8),"--am-c-drop-border":i.value.colorDropBorder,"--am-c-skeleton-op20":K(i.value.colorMainText,.2),"--am-c-skeleton-op60":K(i.value.colorMainText,.6),"--am-c-skeleton-sb-op20":K(i.value.colorSbText,.2),"--am-c-skeleton-sb-op60":K(i.value.colorSbText,.6)}));return(x,g)=>{const m=$i,p=Ni;return u(),A("div",{class:j(["am-date-picker__wrapper",{"is-disabled":e.disabled}]),style:Be(t(c))},[d("div",{class:j(["am-date-picker__input",[`am-${e.type}`,{"is-disabled":e.disabled}]]),onClick:r},[e.type==="date"&&t(l)?(u(),A("div",A0,w(t(it)(t(Ae)(t(l)).format("YYYY-MM-DD"))),1)):$("",!0),e.type==="daterange"&&t(l)[0]?(u(),A("div",F0,w(t(it)(t(Ae)(t(l)[0]).format("YYYY-MM-DD"))),1)):$("",!0),e.type==="daterange"&&t(l)[1]?(u(),A("div",k0,w(t(it)(t(Ae)(t(l)[1]).format("YYYY-MM-DD"))),1)):$("",!0)],2),N(p,{locale:t(p0)(e.lang)},{default:S(()=>[N(m,{id:n.id,ref_key:"amDatePicker",ref:o,modelValue:t(l),"onUpdate:modelValue":g[0]||(g[0]=y=>Fe(l)?l.value=y:l=y),readonly:e.readonly,disabled:e.disabled,editable:e.editable,clearable:e.clearable,placeholder:e.placeholder,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,type:e.type,format:e.format,"popper-class":e.popperClass,"popper-options":e.popperOptions,"popper-style":t(c),"range-separator":e.rangeSeparator,"default-value":e.defaultValue,"default-time":e.defaultTime,"value-format":e.valueFormat,"unlink-panels":e.unlinkPanels,"prefix-icon":e.prefixIcon,"clear-icon":e.clearIcon,"validate-event":e.validateEvent,"disabled-date":n.disabledDate,shortcuts:e.shortcuts,"cell-class-name":e.cellClassName,teleported:e.teleported,"empty-values":e.emptyValues,"value-on-clear":e.valueOnClear,"fallback-placements":e.fallbackPlacements,placement:e.placement,class:j(["am-date-picker",[`am-date-picker--${n.size}`,{"am-date-picker--disabled":e.disabled}]]),onChange:g[1]||(g[1]=y=>x.$emit("change",y)),onBlur:g[2]||(g[2]=y=>x.$emit("blur",y)),onFocus:g[3]||(g[3]=y=>x.$emit("focus",y)),onClear:g[4]||(g[4]=y=>x.$emit("clear",y)),onCalendarChange:g[5]||(g[5]=y=>x.$emit("calendar-change",y)),onPanelChange:g[6]||(g[6]=y=>x.$emit("panel-change",y)),onVisibleChange:g[7]||(g[7]=y=>x.$emit("visible-change",y))},null,8,["id","modelValue","readonly","disabled","editable","clearable","placeholder","start-placeholder","end-placeholder","type","format","popper-class","popper-options","popper-style","range-separator","default-value","default-time","value-format","unlink-panels","prefix-icon","clear-icon","validate-event","disabled-date","shortcuts","cell-class-name","teleported","empty-values","value-on-clear","fallback-placements","placement","class"])]),_:1},8,["locale"])],6)}}};function D0(n,a,e){let s={};return n.forEach(l=>{a===""&&l.periods.forEach(g=>{g.periodStart=Al(g.periodStart),g.periodEnd=Al(g.periodEnd)});let r=Ae(l.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),i=e.getters.getSettings.general.usedLanguages.map(g=>g.length>2?g.slice(0,2):g);(e.getters.getSettings.general.usedLanguages.indexOf(e.getters.getLocalLanguage)!==-1||i.indexOf(e.getters.getLocalLanguage.split("_")[0])!==-1)&&(l.name=qt(l),l.customTickets.forEach(g=>{g.name=g0(g)})),l.recurring&&l.recurring.until&&(l.recurring.until=l.recurring.until.split(" ")[0]),r in s||(s[r]={date:r,events:[]});let x=l.bookings.some(g=>g.status==="waiting");if(l.full&&l.status==="approved"?l.status="full":l.upcoming&&l.status==="approved"&&(l.status="upcoming"),x&&(l.status="waiting"),e.getters["auth/getProfile"].type==="provider"){let g=JSON.parse(JSON.stringify(l));s[r].events.push(g)}else l.bookings.forEach(g=>{let m=JSON.parse(JSON.stringify(l));m.bookings=[g],s[r].events.push(m)})}),s}function Lr(n){let a=0;return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)){let s=0;if(e.ticketsData.length>0)for(let o=0;o<e.ticketsData.length;o++)s+=e.ticketsData[o].persons*e.ticketsData[o].price;else s+=n.price*e.persons;let l=io(n,e.coupon,e.tax?e.tax[0]:null,s,!1);a+=l.price-l.discount+l.tax}}),a>=0?a:0}function w0(n){let a=[];return n.forEach(e=>{let s=Ae(e.periodStart.split(" ")[0],"YYYY-MM-DD"),l=Ae(e.periodEnd.split(" ")[0],"YYYY-MM-DD"),o=e.periodStart.split(" ")[1].slice(0,5),r=e.periodEnd.split(" ")[1].slice(0,5);r==="00:00"&&(r="24:00",l.subtract(1,"days"));let i=[];for(;s.isSameOrBefore(l);)i.push(s.format("YYYY-MM-DD")),s.add(1,"days");i.forEach(c=>{a.push({date:c,startTime:o,endTime:r,periodStart:c+" "+o,periodEnd:c+" "+r,zoomLink:n.length>1&&e.zoomMeeting?e.zoomMeeting.joinUrl:"",lessonSpaceLink:n.length>1&&e.lessonSpace?e.lessonSpace:"",googleMeetLink:n.length>1&&e.googleMeetUrl?e.googleMeetUrl:"",microsoftTeamsLink:n.length>1&&e.microsoftTeamsUrl?e.microsoftTeamsUrl:""})})}),a}function P0(n){let a={};return n.bookings.forEach(e=>{["approved","pending"].includes(e.status)&&e.ticketsData&&e.ticketsData.length&&e.ticketsData.forEach(s=>{s.eventTicketId in a||(a[s.eventTicketId]={persons:0,price:s.price,name:n.customTickets.find(l=>l.id===s.eventTicketId).name}),a[s.eventTicketId].persons=a[s.eventTicketId].persons+s.persons})}),a}function T0(n,a){let e=n.getters["entities/getLocations"];if(a.locationId&&e.length){let s=e.find(l=>l.id===a.locationId);return typeof s<"u"?s:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}function L0(n){let a=[];return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)&&e.qrCodes){let s=JSON.parse(e.qrCodes);s=s.map(l=>({...l,bookingId:e.id,eventId:n.id})),a=a.concat(s)}}),a}const S0={class:"am-msd__item-wrapper"},I0={class:"am-msd__item-inner"},$0=d("div",{class:"am-msd__item-icon"},[d("span",{class:"am-icon-close"})],-1),N0=["onClick"],O0={class:"am-msd__item-inner"},M0={class:"am-msd__item-icon"},V0={key:1,class:"am-msd__item-divider"},R0={class:"am-msd__item-inner"},q0=d("div",{class:"am-msd__item-icon"},[d("span",{class:"am-icon-logout"})],-1),U0={class:"am-msd__item-heading"},z0={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(n){return["right","left","top","bottom"].includes(n)}}},emits:["click","update:visibility","logout"],setup(n,{emit:a}){const e=n;let s=U("labels");const l=Oe();let o=b(()=>document?document.documentElement.dir==="rtl":!1);function r(g,m){a("click",{step:g,index:m}),a("update:visibility",!1)}function i(){a("update:visibility",!1)}function c(g){return Object.keys(e.customizedLabels).length&&e.customizedLabels[g]?e.customizedLabels[g]:s[g]}let x=b(()=>({"--am-mw-msd":`${e.width}px`}));return(g,m)=>(u(),Y(Sa,{visibility:n.visibility,position:n.position,"custom-class":"am-msd","close-outside":!0,"custom-css":{...n.customCss,...t(x)},"onUpdate:visibility":m[1]||(m[1]=p=>t(a)("update:visibility",!1))},{footer:S(()=>[d("div",{class:"am-msd__item",onClick:m[0]||(m[0]=()=>t(a)("logout"))},[d("div",R0,[q0,d("p",U0,w(c("log_out")),1)])])]),default:S(()=>[d("div",S0,[d("div",{class:"am-msd__item",onClick:i},[d("div",I0,[N(ga,{name:"fade"},{default:S(()=>[d("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},w(c("menu_title")),3)]),_:1}),N(ga,{name:"fade"},{default:S(()=>[$0]),_:1})])]),(u(!0),A(ne,null,ve(n.menuItems,(p,y)=>(u(),A(ne,{key:p.key},[p.key!=="packages"||t(l).getters["entities/getPackages"].length?(u(),A("div",{key:0,class:j(["am-msd__item",{selected:n.monitor===p.key}]),onClick:T=>r(p,y)},[d("div",O0,[d("div",M0,[d("span",{class:j(`am-icon-${p.icon}`)},null,2)]),N(ga,{name:"fade"},{default:S(()=>[d("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},w(p.label),3)]),_:2},1024),N(ga,{name:"fade"},{default:S(()=>[d("div",{class:j(["am-msd__item-indicator",{"am-rtl":t(o)}])},[d("span",{class:j(t(o)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2)]),_:1})])],10,N0)):$("",!0),y===0?(u(),A("div",V0)):$("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const Wn={props:{size:{type:String,default:"default"}},setup(n){const a=n,e=$l().cookies,s=U("settings");let l=U("cabinetType"),{bookingsCounterChanger:o}=U("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const r=Oe();let i=b({get:()=>r.getters["cabinet/getTimeZone"],set:E=>{r.commit("cabinet/setTimeZone",E||"")}}),c=b(()=>r.getters["appointment/getActive"]||r.getters["event/getActive"]||r.getters["attendee/getActive"]);const x=U("timeZone"),g=U("timeZones");let m=V("");function p(E){m.value=E.toLowerCase()}let y=b(()=>m.value?g.filter(E=>E.toLowerCase().includes(m.value)):g);function T(){let E;s.general.showClientTimeZone?E=zs():E=x.value,e.set("ameliaUserTimeZone",E,s.roles[l.value+"Cabinet"].tokenValidTime),o(),r.commit("cabinet/setTimeZone",E)}function F(E){e.set("ameliaUserTimeZone",E,s.roles[l.value+"Cabinet"].tokenValidTime),o()}return(E,P)=>t(c)?$("",!0):(u(),Y(Je,{key:0,modelValue:t(i),"onUpdate:modelValue":P[0]||(P[0]=L=>Fe(i)?i.value=L:i=L),filterable:!0,placeholder:t(zs)(),clearable:!0,size:t(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch","filter-method":p,onClear:T,onChange:F},{default:S(()=>[(u(!0),A(ne,null,ve(t(y),(L,D)=>(u(),Y(Ye,{key:D,label:L,value:L},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function Sr(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function Ue(n){let a=n.getters["auth/getToken"];return a&&!Sr()?{headers:{Authorization:"Bearer "+a}}:{}}const j0={key:0,class:"el-skeleton-item-wrapper-title"},Y0={name:"AuthSkeleton"},Wt=Object.assign(Y0,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Nl,o=Ol;return u(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",t(a).mainClass])},{template:S(()=>[t(a).centerFirst?(u(),A("div",j0,[N(l,{variant:"rect"})])):$("",!0),(u(!0),A(ne,null,ve(new Array(t(a).count),r=>(u(),A("div",{key:r,class:"el-skeleton-item-wrapper"},[N(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});function W0(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"scope");$e.post("/google/authorization/token",{authCode:n,userId:Fl(window.location.href).state,redirectUri:e}).then(()=>{history.pushState(null,null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function H0(n){const a=n.getters.getSettings;n.getters["auth/getGoogleLoading"]||(n.commit("auth/setGoogleLoading",!0),a.googleCalendar.accessToken||$e.get("/google/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(e=>{window.location.href=e.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(e=>{console.log(e),n.commit("auth/setGoogleLoading",!1)}),a.googleCalendar.accessToken&&$e.get("/google-calendar/authorization/url/"+n.getters["employee/getId"],{params:{redirectUri:window.location.href}}).then(e=>{window.location.href=e.data.data.authUrl}).catch(e=>{console.log(e),n.commit("auth/setGoogleLoading",!1)}))}async function G0(n){n.commit("auth/setGoogleLoading",!0),await $e.post("/google/disconnect/"+n.getters["employee/getId"]).then(async()=>{n.commit("employee/setGoogleId",null),n.commit("employee/setGoogleCalendarId",""),n.commit("employee/setGoogleToken",null),n.commit("auth/setGoogleCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setGoogleLoading",!1)})}function Z0(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"type");$e.post("/outlook/authorization/token",{authCode:n,userId:Fl(window.location.href).state.split("amelia-outlook-calendar-auth-")[1],redirectUri:window.location.href.split("?")[0]}).then(()=>{history.pushState({},null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function J0(n){n.getters["auth/getOutlookLoading"]||(n.commit("auth/setOutlookLoading",!0),$e.get("/outlook/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(a=>{window.location.href=a.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(a=>{console.log(a),n.commit("auth/setGoogleLoading",!1)}))}function X0(n){n.commit("auth/setOutlookLoading",!0),$e.post("/outlook/disconnect/"+n.getters["employee/getId"]).then(()=>{n.commit("employee/setOutlookId",""),n.commit("employee/setOutlookCalendarId",""),n.commit("employee/setOutlookToken",null),n.commit("auth/setOutlookCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setOutlookLoading",!1)})}function Q0(n){n.commit("auth/setZoomLoading",!0),$e.get("/zoom/users",Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(a=>{"data"in a.data&&"users"in a.data.data&&n.commit("auth/setZoomUsers",a.data.data?.users?a.data.data.users:[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setZoomLoading",!1)})}function K0(n){n.commit("auth/setStripeLoading",!0),$e.get("/stripe/accounts/"+n.getters["employee/getId"],Object.assign({},Ue(n))).then(a=>{a.data.data.account&&(n.commit("auth/setStripeProvider",a.data.data.account),n.getters["employee/getStripeConnect"]||n.commit("employee/setStripeConnect",{id:a.data.data.account.id,amount:null}))}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function ec(n,a){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/onboard/"+n.getters["auth/getProfile"].id,Object.assign({returnUrl:window.location.href,accountType:a},Ue(n))).then(e=>{window.location.href=e.data.data.url}).catch(e=>{n.commit("auth/setStripeLoading",!1),console.log("response"in e&&"data"in e.response&&"message"in e.response.data?e.response.data.message:e.message)})}function tc(n){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/disconnect/"+n.getters["auth/getProfile"].id,Ue(n)).then(()=>{n.commit("auth/setStripeProvider",{id:"",email:"",type:"",completed:!1}),n.commit("employee/setStripeConnect",null)}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function ac(n){let a=n.getters["auth/getStripeProvider"];n.commit("auth/setStripeLoading",!0),a.type==="standard"?(window.open("https://dashboard.stripe.com/"+a.id,"_blank"),n.commit("auth/setStripeLoading",!1)):a.type==="express"&&$e.post("/stripe/dashboard/"+n.getters["auth/getProfile"].id,Ue(n)).then(e=>{e.data.data.url&&window.open(e.data.data.url,"_blank")}).catch(e=>{console.log(e)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}let Aa=V(!1);function Hn(n){n.commit("auth/setAppleLoading",!0),$e.get("/apple/calendar-list/"+n.getters["employee/getId"],Ue(n)).then(a=>{n.commit("auth/setAppleCalendars",a.data.data?.calendarList?a.data.data.calendarList:[]),n.getters["auth/getAppleCalendars"].map(e=>e.id).indexOf(n.getters["employee/getAppleCalendarId"])===-1&&n.commit("employee/setAppleCalendarId",""),n.commit("employee/setAppleCalendarId",a.data.data?.appleCalendarId),Aa.value=a.data.data.isEmployeeConnectedToPersonalAppleCalendar}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setAppleLoading",!1)})}const sc={class:"am-asi__top"},lc={class:"am-asi__header"},nc={class:"am-asi__text"},oc={key:0},rc={class:"am-asi__social-wrapper"},ic={class:"am-asi__social-divider"},cc={class:"par-sm"},xc={class:"am-asi__footer"},uc={class:"am-asi__footer-text"},dc={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},mc={name:"AuthSignIn"},pc=Object.assign(mc,{setup(n){let a=U("licence"),e=Oe();const s=$l().cookies,l=U("settings");let o=U("amCustomize");const r=U("labels"),i=U("localLanguage");let c=b(()=>l.general.usedLanguages.includes(i.value)),x=b(()=>{let I=tt({...r}),W=o.value.signIn.translations;return W&&Object.keys(W).forEach(Q=>{W[Q][i.value]&&c.value?I[Q]=W[Q][i.value]:W[Q].default&&(I[Q]=W[Q].default)}),I}),g={components:{IconComponent:Ze},template:'<IconComponent icon="email"></IconComponent>'},m={components:{IconComponent:Ze},template:'<IconComponent icon="password"></IconComponent>'},p=V("");const y=Oi.factory($e,Mi);function T({provider:I,credentials:W}){e.commit("setLoading",!0);const Q=`/users/authentication/${I}`,ee={};p=I,ee.cabinetType=R.value,I==="facebook"&&(ee.redirectUri=y.options.providers[I].redirectUri,y.options.providers[I].url=`${Q}`,e.commit("setLoading",!1),y.authenticate(I,ee).then(G=>{C.value.email=G.data.data.user.email,F(G,!0)}).catch(G=>{y.isAuthenticated()||(H.value=!0,z.value="User is not authenticated.",e.commit("setLoading",!1)),G.response?.data&&(H.value=!0,z.value=G.response.data.message),e.commit("setLoading",!1)})),I==="google"&&(ee.code=W,$e.post(`${Q}`,ee).then(G=>{C.value.email=G.data.data.user.email,F(G,!0)}).catch(G=>{if(!("data"in G.response.data)&&"message"in G.response.data){H.value=!0,z.value=G.response.data.message;return}"invalid_credentials"in G.response.data.data&&(H.value=!0,z.value=x.value.invalid_credentials)}).finally(()=>{e.commit("setLoading",!1)}))}function F(I,W){if("token"in I.data.data){const ee=window.location.protocol==="https:";s.set("ameliaToken",I.data.data.token,l.roles[R.value+"Cabinet"].tokenValidTime,null,null,ee),s.set("ameliaUserEmail",I.data.data.user.email,l.roles[R.value+"Cabinet"].tokenValidTime,null,null,ee),e.commit("auth/setToken",I.data.data.token)}"user"in I.data.data&&I.data.data.user.type==="provider"&&oe(I),e.commit("auth/setProfile",I.data.data.user),I.data.data.user.timeZone&&e.commit("cabinet/setTimeZone",I.data.data.user.timeZone),!I.data.data.user.countryPhoneIso&&l.general.phoneDefaultCountryCode&&l.general.phoneDefaultCountryCode!=="auto"&&e.commit("auth/setProfileCountryPhoneIso",l.general.phoneDefaultCountryCode),W&&e.commit("auth/setAuthenticated",W);let Q=R.value==="customer"?l.roles.customerCabinet.tokenValidTime*1e3:l.roles.providerCabinet.tokenValidTime*1e3;Q>0&&Q<18144e5&&setTimeout(()=>{e.dispatch("auth/logout")},Q),window?.ameliaBooking?.cabinet?.userLoggedIn&&window.ameliaBooking.cabinet.userLoggedIn(I.data.data.user)}let E=V(null),P=V(!1),L=V(null);function D(){P.value=!1,H.value=!0,z.value=x.value.recaptcha_invalid_error}function v(I){P.value=!0,L.value=I,l.general.googleRecaptcha.invisible&&te()}let f=V(null),C=V({email:b({get:()=>e.getters["auth/getEmail"],set:I=>{e.commit("auth/setEmail",I||"")}}),password:b({get:()=>e.getters["auth/getPassword"],set:I=>{e.commit("auth/setPassword",I||"")}})}),B=V({email:[{required:!0,message:x.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:x.value.enter_password_warning,trigger:"submit"}]}),_=V({email:{template:We.text,props:{itemName:"email",label:x.value.email_or_username,prefixIcon:Qe(g),placeholder:"",class:"am-asi__item"}},password:{template:We.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:x.value.password,prefixIcon:Qe(m),placeholder:"",class:"am-asi__item"}}}),k=U("pageKey"),R=U("cabinetType"),M=b(()=>e.getters.getLoading),O=b(()=>e.getters["auth/getProfileDeleted"]),H=V(!1),z=V("");function J(I,W){let Q=Mo("token");I?X(I,!1,!1,!1):Q?X(Q,!0,!1,W):X("",!1,!0,!1)}function oe(I){let W={id:I.data.data.user.id,firstName:I.data.data.user.firstName,lastName:I.data.data.user.lastName,email:I.data.data.user.email,phone:I.data.data.user.phone,countryPhoneIso:I.data.data.user.countryPhoneIso,googleCalendar:{id:"id"in I.data.data.user.googleCalendar?I.data.data.user.googleCalendar.id:null,calendarId:I.data.data.user.googleCalendar.calendarId?I.data.data.user.googleCalendar.calendarId:"",token:"token"in I.data.data.user.googleCalendar?I.data.data.user.googleCalendar.token:null},outlookCalendar:{id:"id"in I.data.data.user.outlookCalendar?I.data.data.user.outlookCalendar.id:null,calendarId:I.data.data.user.outlookCalendar.calendarId?I.data.data.user.outlookCalendar.calendarId:"",token:"token"in I.data.data.user.outlookCalendar?I.data.data.user.outlookCalendar.token:null},appleCalendarId:I.data.data.user.appleCalendarId?I.data.data.user.appleCalendarId:"",googleCalendarId:I.data.data.user.googleCalendarId?I.data.data.user.googleCalendarId:"",stripeConnect:I.data.data.user.stripeConnect,zoomUserId:I.data.data.user.zoomUserId?I.data.data.user.zoomUserId:"",locationId:I.data.data.user.locationId,pictureFullPath:I.data.data.user.pictureFullPath,pictureThumbPath:I.data.data.user.pictureThumbPath,description:I.data.data.user.description,weekDayList:I.data.data.user.weekDayList,specialDayList:I.data.data.user.specialDayList,dayOffList:I.data.data.user.dayOffList,serviceList:I.data.data.user.serviceList};W.serviceList.forEach(Q=>{Ri(Q,!0)}),e.commit("employee/setSavedSpecialDayList",JSON.parse(JSON.stringify(I.data.data.user.specialDayList))),e.commit("employee/setSavedDayOffList",JSON.parse(JSON.stringify(I.data.data.user.dayOffList))),W.serviceList.forEach(Q=>{qi(Q)}),e.getters["entities/getReady"]&&(e.commit("entities/setEmployees",[JSON.parse(JSON.stringify(W))]),W.serviceList=Br(e,W.serviceList)),e.commit("employee/setEmployee",Ui(e,W)),e.commit("auth/setOutlookCalendars",I.data.data.user.outlookCalendar?.calendarList?I.data.data.user.outlookCalendar.calendarList:[]),e.commit("auth/setGoogleCalendars",I.data.data.user.googleCalendar?.calendarList?I.data.data.user.googleCalendar.calendarList:[]),l.appleCalendar&&!a.isLite&&!a.isStarter&&Hn(e),l.payments.stripe.enabled&&l.payments.stripe.connect.enabled&&!a.isLite&&!a.isStarter&&!a.isBasic&&K0(e),l.zoom.enabled&&!a.isLite&&!a.isStarter&&Q0(e)}function X(I,W,Q,ee){let G={cabinetType:R.value,changePass:ee};L.value!==null&&(G.recaptcha=L.value),Q&&(G.checkIfWpUser=!0);let ae=e.getters["auth/getPassword"],_e=e.getters["auth/getEmail"];!I&&ae&&_e&&(G.password=ae,G.email=_e),W&&(G.token=I),$e.post("/users/authenticate",G,I!==null&&!Sr()?{headers:{Authorization:"Bearer "+I}}:{}).then(ce=>{if("authentication_required"in ce.data.data){l.roles[R.value+"Cabinet"].loginEnabled||(k.value="sendAccessLink");return}F(ce,!1),Mo("token")&&window.history.replaceState(null,null,ja(window.location.href,"token")),"set_password"in ce.data.data&&ce.data.data.set_password||"change_password"in ce.data.data&&ce.data.data.change_password?k.value="setPassword":e.commit("auth/setAuthenticated",!0)}).catch(ce=>{if(!("data"in ce.response.data)&&"message"in ce.response.data){H.value=!0,z.value=ce.response.data.message;return}"invalid_credentials"in ce.response.data.data&&(H.value=!0,z.value=x.value.invalid_credentials),"recaptcha_error"in ce.response.data.data&&(H.value=!0,z.value=x.value.recaptcha_error)}).finally(()=>{e.commit("setLoading",!1)})}function re(){f.value.validate(I=>{if(I)if(l.general.googleRecaptcha.enabled&&l.roles[R.value+"Cabinet"].googleRecaptcha)if(l.general.googleRecaptcha.invisible)E.value.execute();else if(P.value)te();else return H.value=!0,z.value=x.value.recaptcha_error,!1;else te();else return!1})}function te(){e.commit("setLoading",!0),X(null,!1,!1,!1)}function pe(){J(s.get("ameliaToken"),"changePass"in Fl(window.location.href))}Zs(()=>{e.commit("setLoading",!0)}),Ge(()=>{if(e.getters["auth/getLoggedOut"])l.roles[R.value+"Cabinet"].loginEnabled||(k.value="sendAccessLink"),e.commit("setLoading",!1);else{let I=Fl(window.location.href);l.googleCalendar.enabled&&R.value==="provider"&&I&&I.code&&I.scope?W0(I.code,pe):l.outlookCalendar.enabled&&R.value==="provider"&&I&&I.code&&I.state?Z0(I.code,pe):pe()}});let le=U("containerWidth"),Ee=b(()=>ot(le.value)),de=U("amFonts"),ie=U("amColors"),Ce=b(()=>({"--am-c-primary":ie.value.colorPrimary,"--am-c-success":ie.value.colorSuccess,"--am-c-error":ie.value.colorError,"--am-c-warning":ie.value.colorWarning,"--am-c-main-bgr":ie.value.colorMainBgr,"--am-c-main-heading-text":ie.value.colorMainHeadingText,"--am-c-main-text":ie.value.colorMainText,"--am-c-main-text-op70":K(ie.value.colorMainText,.7),"--am-c-main-text-op60":K(ie.value.colorMainText,.6),"--am-c-main-text-op40":K(ie.value.colorMainText,.4),"--am-c-main-text-op25":K(ie.value.colorMainText,.25),"--am-c-inp-bgr":ie.value.colorInpBgr,"--am-c-inp-border":ie.value.colorInpBorder,"--am-c-inp-text":ie.value.colorInpText,"--am-c-inp-placeholder":ie.value.colorInpPlaceHolder,"--am-c-btn-prim":ie.value.colorBtnPrim,"--am-c-btn-prim-text":ie.value.colorBtnPrimText,"--am-c-skeleton-op20":K(ie.value.colorMainText,.2),"--am-c-skeleton-op60":K(ie.value.colorMainText,.6),"--am-font-family":de.value.fontFamily,"--am-c-scroll-op30":K(ie.value.colorPrimary,.3),"--am-c-scroll-op10":K(ie.value.colorPrimary,.1)}));return(I,W)=>{const Q=st;return t(M)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(u(),A("div",{key:0,class:"am-asi",style:Be(t(Ce))},[d("div",sc,[t(O)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:t(x).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:W[0]||(W[0]=ee=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):$("",!0),t(H)?(u(),Y(bt,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(z),description:"","show-icon":!0,closable:!0,onClose:W[1]||(W[1]=ee=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):$("",!0),d("div",lc,w(t(x).welcome_back),1),d("div",nc,w(t(x).enter_credentials),1)]),t(lt).socialLogin.googleLoginEnabled&&t(lt).general.googleClientId||t(lt).socialLogin.facebookLoginEnabled&&t(lt).socialLogin.facebookCredentialsEnabled?(u(),A("div",oc,[d("div",rc,[N(Vi,{provider:t(p),onSocialAction:T},null,8,["provider"])]),d("div",ic,[d("span",cc,w(t(x).or_enter_details_below),1)])])):$("",!0),N(Q,{ref_key:"authFormRef",ref:f,model:t(C),rules:t(B),"label-position":"top",class:j(["am-asi__form",t(Ee)])},{default:S(()=>[(u(!0),A(ne,null,ve(t(_),(ee,G)=>(u(),Y(ft(ee.template),Dt({key:G,ref_for:!0,ref:"customerCollectorRef",modelValue:t(C)[G],"onUpdate:modelValue":ae=>t(C)[G]=ae},ee.props,{onEnter:re}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(ke,{class:"am-asi__btn",type:t(o).signIn.options.signInBtn.buttonType,onClick:re},{default:S(()=>[ue(w(t(x).sign_in),1)]),_:1},8,["type"]),d("div",xc,[d("span",uc,w(t(x).forgot_your_password),1),d("span",{class:"am-asi__footer-link",onClick:W[2]||(W[2]=ee=>Fe(k)?k.value="sendAccessLink":k="sendAccessLink")},w(t(x).reset_password),1)]),t(l).general.googleRecaptcha.enabled&&t(l).roles[t(R)+"Cabinet"].googleRecaptcha?(u(),A("div",dc,[N(t(br),{ref_key:"recaptchaRef",ref:E,size:t(l).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(l).general.googleRecaptcha.siteKey,onVerify:v,onExpired:D},null,8,["size","sitekey"])])):$("",!0)],4))}}});const fc={class:"am-asi__top"},gc={class:"am-asi__header"},hc={class:"am-asi__text"},vc={key:0,class:"am-asi__footer"},Ec={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},_c={name:"AuthReset"},Cc=Object.assign(_c,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=b(()=>e.general.usedLanguages.includes(o.value)),i=b(()=>{let H=tt({...l}),z=s.value.accessLink.translations;return z&&Object.keys(z).forEach(J=>{z[J][o.value]&&r.value?H[J]=z[J][o.value]:z[J].default&&(H[J]=z[J].default)}),H}),c=V(!1),x=V(""),g=V(null),m=V(!1),p=V(null);function y(){m.value=!1,c.value=!0,x.value=i.value.recaptcha_invalid_error}function T(H){m.value=!0,p.value=H,e.general.googleRecaptcha.invisible&&B()}let F=V(null),E=V({email:b({get:()=>a.getters["auth/getEmail"],set:H=>{a.commit("auth/setEmail",H||"")}})}),P=V({email:[{required:!0,message:i.value.enter_email_warning,trigger:"submit"}]}),L=V({email:{template:We.text,props:{itemName:"email",itemType:"email",label:i.value.email,placeholder:"",class:"am-asi__item"}}}),D=U("pageKey"),v=U("cabinetType"),f=b(()=>a.getters.getLoading);function C(){F.value.validate(H=>{if(H)if(e.general.googleRecaptcha.enabled&&e.roles[v.value+"Cabinet"].googleRecaptcha)if(e.general.googleRecaptcha.invisible)g.value.execute();else if(m.value)B();else return c.value=!0,x.value=i.value.recaptcha_error,!1;else B();else return!1})}function B(){a.commit("setLoading",!0);let H={email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:v.value};p.value!==null&&(H.recaptcha=p.value),$e.post("/users/customers/reauthorize",H).then(()=>{D.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}let _=U("containerWidth"),k=b(()=>ot(_.value)),R=U("amFonts"),M=U("amColors"),O=b(()=>({"--am-c-primary":M.value.colorPrimary,"--am-c-success":M.value.colorSuccess,"--am-c-error":M.value.colorError,"--am-c-warning":M.value.colorWarning,"--am-c-main-bgr":M.value.colorMainBgr,"--am-c-main-heading-text":M.value.colorMainHeadingText,"--am-c-main-text":M.value.colorMainText,"--am-c-main-text-op70":K(M.value.colorMainText,.7),"--am-c-main-text-op60":K(M.value.colorMainText,.6),"--am-c-main-text-op40":K(M.value.colorMainText,.4),"--am-c-main-text-op25":K(M.value.colorMainText,.25),"--am-c-inp-bgr":M.value.colorInpBgr,"--am-c-inp-border":M.value.colorInpBorder,"--am-c-inp-text":M.value.colorInpText,"--am-c-inp-placeholder":M.value.colorInpPlaceHolder,"--am-c-btn-prim":M.value.colorBtnPrim,"--am-c-btn-prim-text":M.value.colorBtnPrimText,"--am-c-skeleton-op20":K(M.value.colorMainText,.2),"--am-c-skeleton-op60":K(M.value.colorMainText,.6),"--am-font-family":R.value.fontFamily,"--am-c-scroll-op30":K(M.value.colorPrimary,.3),"--am-c-scroll-op10":K(M.value.colorPrimary,.1)}));return(H,z)=>{const J=st;return t(f)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),A("div",{key:0,class:"am-asi",style:Be(t(O))},[d("div",fc,[t(c)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(x),description:"","show-icon":!0,closable:!0},null,8,["title"])):$("",!0),d("div",gc,w(t(i).access_link_send),1),d("div",hc,w(t(i).access_link_send_description),1)]),N(J,{ref_key:"authFormRef",ref:F,model:t(E),rules:t(P),"label-position":"top",class:j(["am-asi__form",t(k)])},{default:S(()=>[(u(!0),A(ne,null,ve(t(L),(oe,X)=>(u(),Y(ft(oe.template),Dt({key:X,ref_for:!0,ref:"customerCollectorRef",modelValue:t(E)[X],"onUpdate:modelValue":re=>t(E)[X]=re},oe.props,{onEnter:C}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(ke,{class:"am-asi__btn",type:t(s).accessLink.options.sendBtn.buttonType,onClick:C},{default:S(()=>[ue(w(t(i).send),1)]),_:1},8,["type"]),t(e).roles[t(v)+"Cabinet"].loginEnabled?(u(),A("div",vc,[d("span",{class:"am-asi__footer-link",onClick:z[0]||(z[0]=oe=>Fe(D)?D.value="signIn":D="signIn")},w(t(i).sign_in),1)])):$("",!0),t(e).general.googleRecaptcha.enabled&&t(e).roles[t(v)+"Cabinet"].googleRecaptcha?(u(),A("div",Ec,[N(t(br),{ref_key:"recaptchaRef",ref:g,size:t(e).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(e).general.googleRecaptcha.siteKey,onVerify:T,onExpired:y},null,8,["size","sitekey"])])):$("",!0)],4))}}});const yc={class:"am-asi__top"},bc={class:"am-asi__header"},Bc={class:"am-asi__text"},Ac={class:"am-asi__email"},Fc={class:"am-asi__footer"},kc={class:"am-asi__footer-text"},Dc={name:"AuthResetProcess"},wc=Object.assign(Dc,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=b(()=>e.general.usedLanguages.includes(o.value)),i=b(()=>{let y=tt({...l}),T=s.value.accessLinkSuccess.translations;return T&&Object.keys(T).forEach(F=>{T[F][o.value]&&r.value?y[F]=T[F][o.value]:T[F].default&&(y[F]=T[F].default)}),y}),c=b(()=>a.getters["auth/getEmail"]),x=U("pageKey"),g=U("amFonts"),m=U("amColors"),p=b(()=>({"--am-c-primary":m.value.colorPrimary,"--am-c-success":m.value.colorSuccess,"--am-c-error":m.value.colorError,"--am-c-warning":m.value.colorWarning,"--am-c-main-bgr":m.value.colorMainBgr,"--am-c-main-heading-text":m.value.colorMainHeadingText,"--am-c-main-text":m.value.colorMainText,"--am-c-main-text-op70":K(m.value.colorMainText,.7),"--am-c-main-text-op60":K(m.value.colorMainText,.6),"--am-c-main-text-op40":K(m.value.colorMainText,.4),"--am-c-main-text-op25":K(m.value.colorMainText,.25),"--am-c-inp-bgr":m.value.colorInpBgr,"--am-c-inp-border":m.value.colorInpBorder,"--am-c-inp-text":m.value.colorInpText,"--am-c-inp-placeholder":m.value.colorInpPlaceHolder,"--am-c-btn-prim":m.value.colorBtnPrim,"--am-c-btn-prim-text":m.value.colorBtnPrimText,"--am-c-skeleton-op20":K(m.value.colorMainText,.2),"--am-c-skeleton-op60":K(m.value.colorMainText,.6),"--am-font-family":g.value.fontFamily,"--am-c-scroll-op30":K(m.value.colorPrimary,.3),"--am-c-scroll-op10":K(m.value.colorPrimary,.1)}));return(y,T)=>(u(),A("div",{class:"am-asi",style:Be(t(p))},[d("div",yc,[d("div",bc,w(t(i).access_link_send_check),1),d("div",Bc,w(t(i).access_link_send_click),1),d("div",Ac,w(t(c)),1)]),d("div",Fc,[d("span",kc,w(t(i).access_link_send_inbox),1),d("span",{class:"am-asi__footer-link",onClick:T[0]||(T[0]=F=>Fe(x)?x.value="sendAccessLink":x="sendAccessLink")},w(t(i).access_link_send_retry),1)])],4))}});const Pc={class:"am-asi__top"},Tc={class:"am-asi__header"},Lc={class:"am-asi__text"},Sc={name:"AuthNewPass"},Ic=Object.assign(Sc,{setup(n){let a=Oe();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=b(()=>e.general.usedLanguages.includes(o.value)),i=b(()=>{let v=tt({...l}),f=s.value.setPass.translations;return f&&Object.keys(f).forEach(C=>{f[C][o.value]&&r.value?v[C]=f[C][o.value]:f[C].default&&(v[C]=f[C].default)}),v}),c=V(null),x=V({newPassword:b({get:()=>a.getters["auth/getNewPassword"],set:v=>{a.commit("auth/setNewPassword",v||"")}}),confirmPassword:b({get:()=>a.getters["auth/getConfirmPassword"],set:v=>{a.commit("auth/setConfirmPassword",v||"")}})}),g=V({newPassword:[{required:!0,message:i.value.new_password_required,trigger:"submit"},{min:4,message:i.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:i.value.new_password_required,trigger:"submit"},{min:4,message:i.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:i.value.passwords_not_match,trigger:"submit"}]}),m=V({newPassword:{template:We.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:i.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:We.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:i.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),p=U("cabinetType"),y=b(()=>a.getters.getLoading);function T(){c.value.validate(v=>{if(v&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let f=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+p.value+"s/"+f.id,{password:a.getters["auth/getNewPassword"]},Object.assign(Ue(a),{params:{source:"cabinet-"+p.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let F=U("containerWidth"),E=b(()=>ot(F.value)),P=U("amFonts"),L=U("amColors"),D=b(()=>({"--am-c-primary":L.value.colorPrimary,"--am-c-success":L.value.colorSuccess,"--am-c-error":L.value.colorError,"--am-c-warning":L.value.colorWarning,"--am-c-main-bgr":L.value.colorMainBgr,"--am-c-main-heading-text":L.value.colorMainHeadingText,"--am-c-main-text":L.value.colorMainText,"--am-c-main-text-op70":K(L.value.colorMainText,.7),"--am-c-main-text-op60":K(L.value.colorMainText,.6),"--am-c-main-text-op40":K(L.value.colorMainText,.4),"--am-c-main-text-op25":K(L.value.colorMainText,.25),"--am-c-inp-bgr":L.value.colorInpBgr,"--am-c-inp-border":L.value.colorInpBorder,"--am-c-inp-text":L.value.colorInpText,"--am-c-inp-placeholder":L.value.colorInpPlaceHolder,"--am-c-btn-prim":L.value.colorBtnPrim,"--am-c-btn-prim-text":L.value.colorBtnPrimText,"--am-c-skeleton-op20":K(L.value.colorMainText,.2),"--am-c-skeleton-op60":K(L.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":K(L.value.colorPrimary,.3),"--am-c-scroll-op10":K(L.value.colorPrimary,.1)}));return(v,f)=>{const C=st;return t(y)?(u(),Y(t(Wt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(u(),A("div",{key:0,class:"am-asi",style:Be(t(D))},[d("div",Pc,[d("div",Tc,w(t(i).new_password_set),1),d("div",Lc,w(t(i).new_password_set_description),1)]),N(C,{ref_key:"authFormRef",ref:c,model:t(x),rules:t(g),"label-position":"top",class:j(["am-asi__form",t(E)])},{default:S(()=>[(u(!0),A(ne,null,ve(t(m),(B,_)=>(u(),Y(ft(B.template),Dt({key:_,ref_for:!0,ref:"customerCollectorRef",modelValue:t(x)[_],"onUpdate:modelValue":k=>t(x)[_]=k},B.props,{onEnter:T}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),N(ke,{class:"am-asi__btn",type:t(s).setPass.options.newPassBtn.buttonType,onClick:T},{default:S(()=>[ue(w(t(i).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const $c={class:"am-asi__top"},Nc=d("div",{class:"am-asi__img"},[d("span",{class:"am-icon-check"})],-1),Oc={class:"am-asi__header"},Mc={class:"am-asi__text"},Vc={name:"ChangePassSuccess"},Rc=Object.assign(Vc,{setup(n){const a=U("settings");let e=U("amCustomize");const s=U("labels"),l=U("localLanguage");let o=b(()=>a.general.usedLanguages.includes(l.value)),r=b(()=>{let m=tt({...s}),p=e.value.setPassSuccess.translations;return p&&Object.keys(p).forEach(y=>{p[y][l.value]&&o.value?m[y]=p[y][l.value]:p[y].default&&(m[y]=p[y].default)}),m}),i=U("pageKey"),c=U("amFonts"),x=U("amColors"),g=b(()=>({"--am-c-primary":x.value.colorPrimary,"--am-c-success":x.value.colorSuccess,"--am-c-error":x.value.colorError,"--am-c-warning":x.value.colorWarning,"--am-c-main-bgr":x.value.colorMainBgr,"--am-c-main-heading-text":x.value.colorMainHeadingText,"--am-c-main-text":x.value.colorMainText,"--am-c-main-text-op70":K(x.value.colorMainText,.7),"--am-c-main-text-op60":K(x.value.colorMainText,.6),"--am-c-main-text-op40":K(x.value.colorMainText,.4),"--am-c-main-text-op25":K(x.value.colorMainText,.25),"--am-c-btn-prim":x.value.colorBtnPrim,"--am-c-btn-prim-text":x.value.colorBtnPrimText,"--am-c-skeleton-op20":K(x.value.colorMainText,.2),"--am-c-skeleton-op60":K(x.value.colorMainText,.6),"--am-font-family":c.value.fontFamily,"--am-c-scroll-op30":K(x.value.colorPrimary,.3),"--am-c-scroll-op10":K(x.value.colorPrimary,.1)}));return(m,p)=>(u(),A("div",{class:"am-asi",style:Be(t(g))},[d("div",$c,[Nc,d("div",Oc,w(t(r).new_password_changed),1),d("div",Mc,w(t(r).new_password_changed_description),1)]),N(ke,{class:"am-asi__btn",type:t(e).setPassSuccess.options.signInBtn.buttonType,onClick:p[0]||(p[0]=y=>Fe(i)?i.value="signIn":i="signIn")},{default:S(()=>[ue(w(t(r).sign_in),1)]),_:1},8,["type"])],4))}}),qc={name:"AuthWrapper"},Uc=Object.assign(qc,{setup(n){const a=U("settings");let e=V({signIn:Qe(pc),sendAccessLink:Qe(Cc),sendAccessLinkProcess:Qe(wc),setPassword:Qe(Ic),changeSuccess:Qe(Rc)}),s=U("originKey"),l=V("signIn");ze("pageKey",l);const o=V(a.customizedData?a.customizedData.fonts:kl.fonts);ze("amFonts",o);let r=b(()=>a.customizedData&&s.value in a.customizedData?a.customizedData[s.value].colors:kl[s.value].colors);return ze("amColors",r),(i,c)=>(u(),Y(ft(t(e)[t(l)])))}});const zc={class:"am-csd__inner"},jc={class:"am-csd__header"},Yc={class:"am-csd__header-text"},Wc={class:"am-csd__content"},Hc={class:"am-csd__footer"},Gc={name:"DeleteProfile"},Zc=Object.assign(Gc,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(n,{emit:a}){const e=n;let s=U("containerWidth");const l=U("labels");function o(x){return Object.keys(e.customizedLabels).length&&e.customizedLabels[x]?e.customizedLabels[x]:l[x]}let r=U("amFonts"),i=U("amColors"),c=b(()=>({"--am-c-csd-text":i.value.colorMainText,"--am-c-csd-bgr":i.value.colorMainBgr,"--am-c-csd-text-op10":K(i.value.colorMainText,.1),"--am-font-family":r.value.fontFamily}));return(x,g)=>(u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Be(t(c)),position:"center"},{footer:S(()=>[d("div",Hc,[N(ke,{category:"secondary",size:t(s)<=360?"small":"default",type:t(e).customizedOptions.closeBtn.buttonType,onClick:g[1]||(g[1]=()=>{a("close")})},{default:S(()=>[ue(w(o("close")),1)]),_:1},8,["size","type"]),N(ke,{category:"danger",size:t(s)<=360?"small":"default","loading-icon":"loading",type:t(e).customizedOptions.confirmBtn.buttonType,onClick:g[2]||(g[2]=()=>{a("deleteProfile")})},{default:S(()=>[ue(w(o("delete")),1)]),_:1},8,["size","type"])])]),default:S(()=>[d("div",zc,[d("div",jc,[d("div",Yc,w(o("delete_profile")),1),d("div",{class:"am-csd__header-btn",onClick:g[0]||(g[0]=()=>{a("close")})},[N(Ze,{icon:"close"})])]),d("div",Wc,[d("p",null,w(o("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Bl={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(n){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(n)}}},setup(n){const a=n;let e=b(()=>ot(a.pageWidth)),s=U("amColors"),l=b(()=>({"--am-c-skeleton-op20":K(s.value.colorMainText,.2),"--am-c-skeleton-op60":K(s.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(o,r)=>{const i=Nl,c=Ol;return u(),Y(c,{animated:"",class:"am-cps",style:Be(t(l))},{template:S(()=>[(u(!0),A(ne,null,ve(new Array(t(a).count),x=>(u(),A("div",{key:x,class:j(["am-cps__item",t(e)])},[N(i,{class:"am-cps__item-label",variant:"rect"}),N(i,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const Jc={class:"am-capi__inner"},Xc=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),Qc={name:"CabinetProfile",key:"profile"},Kc=Object.assign(Qc,{setup(n){let a=Oe(),e=b(()=>a.getters.getLoading),s=V(null),l=V(0),o=U("sidebarCollapsed");window.addEventListener("resize",r);function r(){s.value&&(l.value=s.value.offsetWidth)}xt(o,se=>{se?setTimeout(()=>{i()},1500):setTimeout(()=>{i()},500)});function i(){l.value=s.value.offsetWidth}Ge(()=>{co(()=>{l.value=s.value.offsetWidth}),ae()});let c=b(()=>ot(l.value));const x=U("settings");let g=U("cabinetType"),m=U("amCustomize");const p=U("labels"),y=U("localLanguage");let T=b(()=>x.general.usedLanguages.includes(y.value));function F(se,ye){return ye&&Object.keys(ye).forEach(De=>{ye[De][y.value]&&T.value?se[De]=ye[De][y.value]:ye[De].default&&(se[De]=ye[De].default)}),se}let E=b(()=>{let se=tt({...p}),ye=m.value.profile.translations;return F(se,ye)});function P(se){let ye={},De=m.value[se].translations;return F(ye,De)}let L=b(()=>m.value.profile.options),D=V("first"),v=V("");function f(){X.value=!1,v.value=""}let C=V(null),B=V(!1),_=V({firstName:b({get:()=>a.getters["auth/getProfile"].firstName,set:se=>{a.commit("auth/setProfileFirstName",se||"")}}),lastName:b({get:()=>a.getters["auth/getProfile"].lastName,set:se=>{a.commit("auth/setProfileLastName",se||"")}}),email:b({get:()=>a.getters["auth/getProfile"].email,set:se=>{a.commit("auth/setProfileEmail",se||"")}}),phone:b({get:()=>a.getters["auth/getProfile"].phone,set:se=>{a.commit("auth/setProfilePhone",se||"")}}),birthday:b({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:se=>{a.commit("auth/setProfileBirthday",se?Ae(se).format("YYYY-MM-DD"):"")}})}),k=V({firstName:{template:We.text,props:{itemName:"firstName",label:E.value.first_name_colon,placeholder:E.value.enter_first_name,class:b(()=>`am-capi__item ${c.value}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:E.value.last_name_colon,placeholder:E.value.enter_last_name,class:b(()=>`am-capi__item ${c.value}`)}},email:{template:We.text,props:{itemName:"email",label:E.value.email_colon,placeholder:E.value.enter_email,class:b(()=>`am-capi__item ${c.value}`)}},phone:{countryPhoneIso:b({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:se=>{a.commit("auth/setProfileCountryPhoneIso",se?se.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:E.value.phone_colon,placeholder:E.value.enter_phone,defaultCode:b(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:b(()=>B.value),whatsAppLabel:E.value.whatsapp_opt_in_text,isWhatsApp:x.notifications.whatsAppEnabled&&x.notifications.whatsAppAccessToken&&x.notifications.whatsAppBusinessID&&x.notifications.whatsAppPhoneID,class:b(()=>`am-capi__item ${c.value}`)}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:E.value.date_of_birth,placeholder:E.value.enter_date_of_birth,clearable:!0,readonly:!1,class:b(()=>`am-capi__item am-capi__item-birthday ${c.value}`)}}}),R=V({firstName:[{required:!0,message:E.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:L.value.lastName.required,message:E.value.enter_last_name_warning,trigger:"submit"}],email:[{required:L.value.email.required,type:"email",message:E.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:L.value.phone.required,message:E.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:L.value.birthday.required,message:E.value.enter_date_of_birth_warning,trigger:"submit"}]}),M=V(!1);ze("deleteProfileDialog",M);function O(){a.commit("auth/setProfileFirstName",_.value.firstName?_.value.firstName.trim():""),a.commit("auth/setProfileLastName",_.value.lastName?_.value.lastName.trim():""),a.commit("auth/setProfileEmail",_.value.email?_.value.email.trim():""),C.value.validate(se=>{if(se){v.value=E.value.profile_data_success;let ye=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+g.value+"s/"+ye.id,ye,Ue(a)).finally(()=>{a.commit("setLoading",!1),X.value=!0,L.value.phone.required&&_.value.phone&&(B.value=!1)})}else return L.value.phone.required&&!_.value.phone&&(B.value=!0),!1})}ze("saveProfileChanges",O);let H=V(null),z=V({newPass:b({get:()=>a.getters["auth/getNewPassword"],set:se=>{a.commit("auth/setNewPassword",se||"")}}),confirmPass:b({get:()=>a.getters["auth/getConfirmPassword"],set:se=>{a.commit("auth/setConfirmPassword",se||"")}})}),J=V({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:E.value.new_password_colon,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${c.value}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:E.value.new_password_colon_retype,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${c.value}`)}}}),oe=V({newPass:[{required:!0,message:E.value.new_password_required,trigger:"submit"},{min:4,message:E.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:E.value.new_password_required,trigger:"submit"},{min:4,message:E.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:E.value.passwords_not_match,trigger:"submit"}]}),X=V(!1);function re(){X.value=!1}function te(){H.value.validate(se=>{if(se){let ye=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/customers/"+ye.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{v.value=E.value.password_success,a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),X.value=!0})}else return!1})}ze("changeProfilePassword",te);function pe(){M.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function le(se,ye){if(se){for(const De in W)if(W[De].id===ye){W[De].components=zi(se);break}}}function Ee(){a.commit("setLoading",!0);let se=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!se)return;let ye={email:"",firstName:E.value.customer,lastName:se,phone:"",birthday:"",gender:"",externalId:"",password:""};const De=$l().cookies;$e.post("/users/customers/"+se,Object.assign(Ue(a),ye)).then(()=>{a.commit("auth/setProfile",{}),De.remove("ameliaUserEmail"),a.commit("setLoading",!1),pe()}).catch(Me=>{a.commit("setLoading",!1),console.log(Me)})}const de=V(null),ie=tt({}),Ce=tt({}),I=tt({}),W=tt({});function Q(se,ye,De){ie[ye]=De??""}function ee(se,ye){if(I[ye]={template:We[se.type],props:{id:ye,itemName:ye.toString(),label:se.label,options:se.options,class:`am-capei-att-cf__item am-cf-width-${se.width}`}},se.type==="text-area"&&(I[ye].props.itemType="textarea"),se.type==="datepicker"&&(I[ye].props.weekStartsFromDay=x.wordpress.startOfWeek),se.type==="file"){let De=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;I[ye].props={...I[ye].props,btnLabel:E.value.upload_file_here,isUpload:!0,bookingId:De,source:"cabinet-customer"}}}function G(se){Ce[se.id]=[{message:E.value.required_field,required:se.required,trigger:["submit","change"]}]}function ae(){const se=a.getters["entities/getCustomFields"],ye=JSON.parse(a.getters["auth/getProfile"].customFields||"{}");se.filter(De=>De.saveType==="customer"&&De.type!=="content").sort((De,Me)=>De.position-Me.position).forEach((De,Me)=>{const{id:Le}=De,be=ye[Le]?.value;W[Me]={...De,value:be??(De.type==="checkbox"||De.type==="file"?[]:"")},De.type==="address"&&ye[Le]?.components&&(W[Me].components=ye[Le]?.components),Q(De,Le,W[Me].value),ee(De,Le),G(De)})}function _e(){de.value.validate(se=>{if(se){const ye=a.getters["auth/getProfile"],De={};for(const Le in W){const be=W[Le],me=ie[be.id];De[be.id]={label:be.label,type:be.type,value:typeof me=="string"?me.trim():me},be.type==="address"&&be.components&&(De[be.id].components=be.components)}const Me={...ye,customFields:JSON.stringify(De)};a.commit("setLoading",!0),$e.post(`/users/${g.value}s/${ye.id}`,Me,Ue(a)).finally(()=>{a.commit("setLoading",!1),v.value=E.value.profile_data_success,X.value=!0})}else return!1})}ze("saveCustomerCustomFields",_e);let ce=U("amColors"),Pe=b(()=>({"--am-c-capi-primary":ce.value.colorPrimary,"--am-c-capi-text":ce.value.colorMainText,"--am-c-capi-text-op10":K(ce.value.colorMainText,.1)}));return(se,ye)=>{const De=st,Me=_a,Le=Ca;return u(),A("div",{ref_key:"pageContainer",ref:s,class:"am-capi",style:Be(t(Pe))},[d("div",Jc,[t(X)?(u(),Y(bt,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:f,onTriggerClose:f},{title:S(()=>[Xc,ue(" "+w(t(v)),1)]),_:1})):$("",!0),N(Le,{modelValue:t(D),"onUpdate:modelValue":ye[0]||(ye[0]=be=>Fe(D)?D.value=be:D=be),class:"am-capi__tabs",onTabClick:re},{default:S(()=>[N(Me,{class:"am-capi__tabs-item",label:t(E).personal_info,name:"first"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,count:5,"page-width":t(l)},null,8,["page-width"])):(u(),A(ne,{key:0},[t(a).getters["auth/getProfile"]?(u(),Y(De,{key:0,ref_key:"infoFormRef",ref:C,model:t(_),rules:t(R),"label-position":"top",class:j(["am-capi__form",t(c)])},{default:S(()=>[(u(!0),A(ne,null,ve(t(m).profile.order,be=>(u(),A(ne,{key:be.id},[!t(L)[be.id]||t(L)[be.id].visibility?(u(),Y(ft(t(k)[be.id].template),Dt({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:t(_)[be.id],"onUpdate:modelValue":me=>t(_)[be.id]=me,countryPhoneIso:t(k)[be.id].countryPhoneIso,"onUpdate:countryPhoneIso":me=>t(k)[be.id].countryPhoneIso=me},t(k)[be.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):$("",!0)],64))),128))]),_:1},8,["model","rules","class"])):$("",!0)],64))]),_:1},8,["label"]),Object.keys(t(W)).length?(u(),Y(Me,{key:0,label:t(E).custom_fields,name:"third"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,count:Object.keys(t(W)).length,"page-width":t(l)},null,8,["count","page-width"])):(u(),Y(De,{key:0,ref_key:"customFieldsFormRef",ref:de,model:t(ie),rules:t(Ce),"label-position":"top",class:j(["am-capei-att-cf__form",t(c)])},{default:S(()=>[(u(!0),A(ne,null,ve(Object.values(t(W)),be=>(u(),A(ne,{key:be.id},[be.id in t(ie)?(u(),Y(ft(t(I)[be.id]?.template),Dt({key:0,modelValue:t(ie)[be.id],"onUpdate:modelValue":me=>t(ie)[be.id]=me},t(I)[be.id]?.props,{onAddressSelected:me=>le(me,be.id)}),null,16,["modelValue","onUpdate:modelValue","onAddressSelected"])):$("",!0)],64))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])):$("",!0),N(Me,{class:"am-capi__tabs-item",label:t(E).password_tab,name:"second"},{default:S(()=>[t(e)?(u(),Y(Bl,{key:1,"item-direction":"column",count:2,"page-width":t(l)},null,8,["page-width"])):(u(),Y(De,{key:0,ref_key:"passFormRef",ref:H,model:t(z),rules:t(oe),"label-position":"top",class:j(["am-capi__form",t(c)])},{default:S(()=>[(u(!0),A(ne,null,ve(t(J),(be,me)=>(u(),Y(ft(be.template),Dt({key:be.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(z)[me],"onUpdate:modelValue":xe=>t(z)[me]=xe},be.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),N(Zc,{visibility:t(M),"customized-labels":P("deleteProfile"),"customized-options":t(m).deleteProfile.options,onClose:ye[1]||(ye[1]=be=>Fe(M)?M.value=!1:M=!1),onDeleteProfile:Ee},null,8,["visibility","customized-labels","customized-options"]),N(B0,{loading:t(e),display:t(D),"parent-width":t(l),"customized-labels":t(E),"save-footer-button":t(L).saveFooterButton.buttonType,"delete-footer-type":t(L).deleteFooterButton.buttonType,"pass-footer-button":t(L).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])])],4)}}});var Ie=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Ie||{});class ca{constructor(a,e,s={}){this.attrName=a,this.keyName=e;const l=Ie.TYPE&Ie.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Ie.LEVEL|l:Ie.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(a){return Array.from(a.attributes).map(e=>e.name)}add(a,e){return this.canAdd(a,e)?(a.setAttribute(this.keyName,e),!0):!1}canAdd(a,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(a){a.removeAttribute(this.keyName)}value(a){const e=a.getAttribute(this.keyName);return this.canAdd(a,e)&&e?e:""}}class ps extends Error{constructor(a){a="[Parchment] "+a,super(a),this.message=a,this.name=this.constructor.name}}const Ir=class Gn{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(a,e=!1){if(a==null)return null;if(this.blots.has(a))return this.blots.get(a)||null;if(e){let s=null;try{s=a.parentNode}catch{return null}return this.find(s,e)}return null}create(a,e,s){const l=this.query(e);if(l==null)throw new ps(`Unable to create ${e} blot`);const o=l,r=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(s),i=new o(a,r,s);return Gn.blots.set(i.domNode,i),i}find(a,e=!1){return Gn.find(a,e)}query(a,e=Ie.ANY){let s;return typeof a=="string"?s=this.types[a]||this.attributes[a]:a instanceof Text||a.nodeType===Node.TEXT_NODE?s=this.types.text:typeof a=="number"?a&Ie.LEVEL&Ie.BLOCK?s=this.types.block:a&Ie.LEVEL&Ie.INLINE&&(s=this.types.inline):a instanceof Element&&((a.getAttribute("class")||"").split(/\s+/).some(l=>(s=this.classes[l],!!s)),s=s||this.tags[a.tagName]),s==null?null:"scope"in s&&e&Ie.LEVEL&s.scope&&e&Ie.TYPE&s.scope?s:null}register(...a){return a.map(e=>{const s="blotName"in e,l="attrName"in e;if(!s&&!l)throw new ps("Invalid definition");if(s&&e.blotName==="abstract")throw new ps("Cannot register abstract class");const o=s?e.blotName:l?e.attrName:void 0;return this.types[o]=e,l?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(r=>r.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(r=>{(this.tags[r]==null||e.className==null)&&(this.tags[r]=e)}))),e})}};Ir.blots=new WeakMap;let Es=Ir;function zo(n,a){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${a}-`)===0)}class ex extends ca{static keys(a){return(a.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(a,e){return this.canAdd(a,e)?(this.remove(a),a.classList.add(`${this.keyName}-${e}`),!0):!1}remove(a){zo(a,this.keyName).forEach(e=>{a.classList.remove(e)}),a.classList.length===0&&a.removeAttribute("class")}value(a){const e=(zo(a,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(a,e)?e:""}}const sa=ex;function $n(n){const a=n.split("-"),e=a.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return a[0]+e}class tx extends ca{static keys(a){return(a.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(a,e){return this.canAdd(a,e)?(a.style[$n(this.keyName)]=e,!0):!1}remove(a){a.style[$n(this.keyName)]="",a.getAttribute("style")||a.removeAttribute("style")}value(a){const e=a.style[$n(this.keyName)];return this.canAdd(a,e)?e:""}}const Ia=tx;class ax{constructor(a){this.attributes={},this.domNode=a,this.build()}attribute(a,e){e?a.add(this.domNode,e)&&(a.value(this.domNode)!=null?this.attributes[a.attrName]=a:delete this.attributes[a.attrName]):(a.remove(this.domNode),delete this.attributes[a.attrName])}build(){this.attributes={};const a=Es.find(this.domNode);if(a==null)return;const e=ca.keys(this.domNode),s=sa.keys(this.domNode),l=Ia.keys(this.domNode);e.concat(s).concat(l).forEach(o=>{const r=a.scroll.query(o,Ie.ATTRIBUTE);r instanceof ca&&(this.attributes[r.attrName]=r)})}copy(a){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);a.format(e,s)})}move(a){this.copy(a),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((a,e)=>(a[e]=this.attributes[e].value(this.domNode),a),{})}}const Rl=ax,$r=class{constructor(a,e){this.scroll=a,this.domNode=e,Es.blots.set(e,this),this.prev=null,this.next=null}static create(a){if(this.tagName==null)throw new ps("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof a=="string"?(s=a.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof a=="number"&&(s=a),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const a=this.domNode.cloneNode(!1);return this.scroll.create(a)}detach(){this.parent!=null&&this.parent.removeChild(this),Es.blots.delete(this.domNode)}deleteAt(a,e){this.isolate(a,e).remove()}formatAt(a,e,s,l){const o=this.isolate(a,e);if(this.scroll.query(s,Ie.BLOT)!=null&&l)o.wrap(s,l);else if(this.scroll.query(s,Ie.ATTRIBUTE)!=null){const r=this.scroll.create(this.statics.scope);o.wrap(r),r.format(s,l)}}insertAt(a,e,s){const l=s==null?this.scroll.create("text",e):this.scroll.create(e,s),o=this.split(a);this.parent.insertBefore(l,o||void 0)}isolate(a,e){const s=this.split(a);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(a=this.parent){return this.parent==null||this===a?0:this.parent.children.offset(this)+this.parent.offset(a)}optimize(a){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(a,e){return a===0?this:this.next}update(a,e){}wrap(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new ps(`Cannot wrap ${a}`);return s.appendChild(this),s}};$r.blotName="abstract";let Nr=$r;const Or=class extends Nr{static value(a){return!0}index(a,e){return this.domNode===a||this.domNode.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(a,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return a>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Or.scope=Ie.INLINE_BLOT;let sx=Or;const kt=sx;class lx{constructor(){this.head=null,this.tail=null,this.length=0}append(...a){if(this.insertBefore(a[0],null),a.length>1){const e=a.slice(1);this.append(...e)}}at(a){const e=this.iterator();let s=e();for(;s&&a>0;)a-=1,s=e();return s}contains(a){const e=this.iterator();let s=e();for(;s;){if(s===a)return!0;s=e()}return!1}indexOf(a){const e=this.iterator();let s=e(),l=0;for(;s;){if(s===a)return l;l+=1,s=e()}return-1}insertBefore(a,e){a!=null&&(this.remove(a),a.next=e,e!=null?(a.prev=e.prev,e.prev!=null&&(e.prev.next=a),e.prev=a,e===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)}offset(a){let e=0,s=this.head;for(;s!=null;){if(s===a)return e;e+=s.length(),s=s.next}return-1}remove(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)}iterator(a=this.head){return()=>{const e=a;return a!=null&&(a=a.next),e}}find(a,e=!1){const s=this.iterator();let l=s();for(;l;){const o=l.length();if(a<o||e&&a===o&&(l.next==null||l.next.length()!==0))return[l,a];a-=o,l=s()}return[null,0]}forEach(a){const e=this.iterator();let s=e();for(;s;)a(s),s=e()}forEachAt(a,e,s){if(e<=0)return;const[l,o]=this.find(a);let r=a-o;const i=this.iterator(l);let c=i();for(;c&&r<a+e;){const x=c.length();a>r?s(c,a-r,Math.min(e,r+x-a)):s(c,0,Math.min(x,a+e-r)),r+=x,c=i()}}map(a){return this.reduce((e,s)=>(e.push(a(s)),e),[])}reduce(a,e){const s=this.iterator();let l=s();for(;l;)e=a(e,l),l=s();return e}}function jo(n,a){const e=a.find(n);if(e)return e;try{return a.create(n)}catch{const s=a.create(Ie.INLINE);return Array.from(n.childNodes).forEach(l=>{s.domNode.appendChild(l)}),n.parentNode&&n.parentNode.replaceChild(s.domNode,n),s.attach(),s}}const Mr=class Fa extends Nr{constructor(a,e){super(a,e),this.uiNode=null,this.build()}appendChild(a){this.insertBefore(a)}attach(){super.attach(),this.children.forEach(a=>{a.attach()})}attachUI(a){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=a,Fa.uiClass&&this.uiNode.classList.add(Fa.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new lx,Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).reverse().forEach(a=>{try{const e=jo(a,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof ps)return;throw e}})}deleteAt(a,e){if(a===0&&e===this.length())return this.remove();this.children.forEachAt(a,e,(s,l,o)=>{s.deleteAt(l,o)})}descendant(a,e=0){const[s,l]=this.children.find(e);return a.blotName==null&&a(s)||a.blotName!=null&&s instanceof a?[s,l]:s instanceof Fa?s.descendant(a,l):[null,-1]}descendants(a,e=0,s=Number.MAX_VALUE){let l=[],o=s;return this.children.forEachAt(e,s,(r,i,c)=>{(a.blotName==null&&a(r)||a.blotName!=null&&r instanceof a)&&l.push(r),r instanceof Fa&&(l=l.concat(r.descendants(a,i,o))),o-=c}),l}detach(){this.children.forEach(a=>{a.detach()}),super.detach()}enforceAllowedChildren(){let a=!1;this.children.forEach(e=>{a||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===Ie.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),a=!0):e instanceof Fa?e.unwrap():e.remove())})}formatAt(a,e,s,l){this.children.forEachAt(a,e,(o,r,i)=>{o.formatAt(r,i,s,l)})}insertAt(a,e,s){const[l,o]=this.children.find(a);if(l)l.insertAt(o,e,s);else{const r=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(r)}}insertBefore(a,e){a.parent!=null&&a.parent.children.remove(a);let s=null;this.children.insertBefore(a,e||null),a.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==a.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(a.domNode,s),a.attach()}length(){return this.children.reduce((a,e)=>a+e.length(),0)}moveChildren(a,e){this.children.forEach(s=>{a.insertBefore(s,e)})}optimize(a){if(super.optimize(a),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(a,e=!1){const[s,l]=this.children.find(a,e),o=[[this,a]];return s instanceof Fa?o.concat(s.path(l,e)):(s!=null&&o.push([s,l]),o)}removeChild(a){this.children.remove(a)}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return s instanceof Fa&&this.moveChildren(s),super.replaceWith(s)}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(a,this.length(),(l,o,r)=>{const i=l.split(o,e);i!=null&&s.appendChild(i)}),s}splitAfter(a){const e=this.clone();for(;a.next!=null;)e.appendChild(a.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(a,e){const s=[],l=[];a.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),l.push(...o.removedNodes))}),l.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const r=this.scroll.find(o);r!=null&&(r.domNode.parentNode==null||r.domNode.parentNode===this.domNode)&&r.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,r)=>o===r?0:o.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let r=null;o.nextSibling!=null&&(r=this.scroll.find(o.nextSibling));const i=jo(o,this.scroll);(i.next!==r||i.next==null)&&(i.parent!=null&&i.parent.removeChild(this),this.insertBefore(i,r||void 0))}),this.enforceAllowedChildren()}};Mr.uiClass="";let nx=Mr;const ta=nx;function ox(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const e in n)if(n[e]!==a[e])return!1;return!0}const rs=class is extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(is.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new Rl(this.domNode)}format(a,e){if(a===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof is||(s=s.wrap(is.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(a,Ie.INLINE);if(s==null)return;s instanceof ca?this.attributes.attribute(s,e):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e)}}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.formats()[s]!=null||this.scroll.query(s,Ie.ATTRIBUTE)?this.isolate(a,e).format(s,l):super.formatAt(a,e,s,l)}optimize(a){super.optimize(a);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const s=this.next;s instanceof is&&s.prev===this&&ox(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(a,e){const s=super.wrap(a,e);return s instanceof is&&this.attributes.move(s),s}};rs.allowedChildren=[rs,kt],rs.blotName="inline",rs.scope=Ie.INLINE_BLOT,rs.tagName="SPAN";let rx=rs;const vo=rx,cs=class Zn extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(Zn.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new Rl(this.domNode)}format(a,e){const s=this.scroll.query(a,Ie.BLOCK);s!=null&&(s instanceof ca?this.attributes.attribute(s,e):a===this.statics.blotName&&!e?this.replaceWith(Zn.blotName):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e))}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.scroll.query(s,Ie.BLOCK)!=null?this.format(s,l):super.formatAt(a,e,s,l)}insertAt(a,e,s){if(s==null||this.scroll.query(e,Ie.INLINE)!=null)super.insertAt(a,e,s);else{const l=this.split(a);if(l!=null){const o=this.scroll.create(e,s);l.parent.insertBefore(o,l)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};cs.blotName="block",cs.scope=Ie.BLOCK_BLOT,cs.tagName="P",cs.allowedChildren=[vo,cs,kt];let ix=cs;const js=ix,Jn=class extends ta{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(a,e){super.deleteAt(a,e),this.enforceAllowedChildren()}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.enforceAllowedChildren()}insertAt(a,e,s){super.insertAt(a,e,s),this.enforceAllowedChildren()}optimize(a){super.optimize(a),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Jn.blotName="container",Jn.scope=Ie.BLOCK_BLOT;let cx=Jn;const ql=cx;class xx extends kt{static formats(a,e){}format(a,e){super.formatAt(0,this.length(),a,e)}formatAt(a,e,s,l){a===0&&e===this.length()?this.format(s,l):super.formatAt(a,e,s,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Rt=xx,ux={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},dx=100,xs=class extends ta{constructor(a,e){super(null,e),this.registry=a,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,ux),this.attach()}create(a,e){return this.registry.create(this,a,e)}find(a,e=!1){const s=this.registry.find(a,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(a,e=Ie.ANY){return this.registry.query(a,e)}register(...a){return this.registry.register(...a)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(a,e){this.update(),a===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(a,e)}formatAt(a,e,s,l){this.update(),super.formatAt(a,e,s,l)}insertAt(a,e,s){this.update(),super.insertAt(a,e,s)}optimize(a=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)a.push(l.pop());const o=(c,x=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(s.has(c.domNode)||s.set(c.domNode,[]),x&&o(c.parent))},r=c=>{s.has(c.domNode)&&(c instanceof ta&&c.children.forEach(r),s.delete(c.domNode),c.optimize(e))};let i=a;for(let c=0;i.length>0;c+=1){if(c>=dx)throw new Error("[Parchment] Maximum optimize iterations reached");for(i.forEach(x=>{const g=this.find(x.target,!0);g!=null&&(g.domNode===x.target&&(x.type==="childList"?(o(this.find(x.previousSibling,!1)),Array.from(x.addedNodes).forEach(m=>{const p=this.find(m,!1);o(p,!1),p instanceof ta&&p.children.forEach(y=>{o(y,!1)})})):x.type==="attributes"&&o(g.prev)),o(g))}),this.children.forEach(r),i=Array.from(this.observer.takeRecords()),l=i.slice();l.length>0;)a.push(l.pop())}}update(a,e={}){a=a||this.observer.takeRecords();const s=new WeakMap;a.map(l=>{const o=this.find(l.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(l),null):(s.set(o.domNode,[l]),o)}).forEach(l=>{l!=null&&l!==this&&s.has(l.domNode)&&l.update(s.get(l.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(a,e)}};xs.blotName="scroll",xs.defaultChild=js,xs.allowedChildren=[js,ql],xs.scope=Ie.BLOCK_BLOT,xs.tagName="DIV";let mx=xs;const Eo=mx,Xn=class Vr extends kt{static create(a){return document.createTextNode(a)}static value(a){return a.data}constructor(a,e){super(a,e),this.text=this.statics.value(this.domNode)}deleteAt(a,e){this.domNode.data=this.text=this.text.slice(0,a)+this.text.slice(a+e)}index(a,e){return this.domNode===a?e:-1}insertAt(a,e,s){s==null?(this.text=this.text.slice(0,a)+e+this.text.slice(a),this.domNode.data=this.text):super.insertAt(a,e,s)}length(){return this.text.length}optimize(a){super.optimize(a),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Vr&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(a,e=!1){return[this.domNode,a]}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(a));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(a,e){a.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Xn.blotName="text",Xn.scope=Ie.INLINE_BLOT;let px=Xn;const Pl=px;var fx=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ca,AttributorStore:Rl,BlockBlot:js,ClassAttributor:sa,ContainerBlot:ql,EmbedBlot:Rt,InlineBlot:vo,LeafBlot:kt,ParentBlot:ta,Registry:Es,Scope:Ie,ScrollBlot:Eo,StyleAttributor:Ia,TextBlot:Pl},Symbol.toStringTag,{value:"Module"})),Nt={exports:{}},Vt=-1,Tt=1,pt=0;function Ys(n,a,e,s,l){if(n===a)return n?[[pt,n]]:[];if(e!=null){var o=Bx(n,a,e);if(o)return o}var r=_o(n,a),i=n.substring(0,r);n=n.substring(r),a=a.substring(r),r=Ul(n,a);var c=n.substring(n.length-r);n=n.substring(0,n.length-r),a=a.substring(0,a.length-r);var x=gx(n,a);return i&&x.unshift([pt,i]),c&&x.push([pt,c]),Co(x,l),s&&Ex(x),x}function gx(n,a){var e;if(!n)return[[Tt,a]];if(!a)return[[Vt,n]];var s=n.length>a.length?n:a,l=n.length>a.length?a:n,o=s.indexOf(l);if(o!==-1)return e=[[Tt,s.substring(0,o)],[pt,l],[Tt,s.substring(o+l.length)]],n.length>a.length&&(e[0][0]=e[2][0]=Vt),e;if(l.length===1)return[[Vt,n],[Tt,a]];var r=vx(n,a);if(r){var i=r[0],c=r[1],x=r[2],g=r[3],m=r[4],p=Ys(i,x),y=Ys(c,g);return p.concat([[pt,m]],y)}return hx(n,a)}function hx(n,a){for(var e=n.length,s=a.length,l=Math.ceil((e+s)/2),o=l,r=2*l,i=new Array(r),c=new Array(r),x=0;x<r;x++)i[x]=-1,c[x]=-1;i[o+1]=0,c[o+1]=0;for(var g=e-s,m=g%2!==0,p=0,y=0,T=0,F=0,E=0;E<l;E++){for(var P=-E+p;P<=E-y;P+=2){var L=o+P,D;P===-E||P!==E&&i[L-1]<i[L+1]?D=i[L+1]:D=i[L-1]+1;for(var v=D-P;D<e&&v<s&&n.charAt(D)===a.charAt(v);)D++,v++;if(i[L]=D,D>e)y+=2;else if(v>s)p+=2;else if(m){var f=o+g-P;if(f>=0&&f<r&&c[f]!==-1){var C=e-c[f];if(D>=C)return Yo(n,a,D,v)}}}for(var B=-E+T;B<=E-F;B+=2){var f=o+B,C;B===-E||B!==E&&c[f-1]<c[f+1]?C=c[f+1]:C=c[f-1]+1;for(var _=C-B;C<e&&_<s&&n.charAt(e-C-1)===a.charAt(s-_-1);)C++,_++;if(c[f]=C,C>e)F+=2;else if(_>s)T+=2;else if(!m){var L=o+g-B;if(L>=0&&L<r&&i[L]!==-1){var D=i[L],v=o+D-L;if(C=e-C,D>=C)return Yo(n,a,D,v)}}}}return[[Vt,n],[Tt,a]]}function Yo(n,a,e,s){var l=n.substring(0,e),o=a.substring(0,s),r=n.substring(e),i=a.substring(s),c=Ys(l,o),x=Ys(r,i);return c.concat(x)}function _o(n,a){if(!n||!a||n.charAt(0)!==a.charAt(0))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(o,l)==a.substring(o,l)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return Rr(n.charCodeAt(l-1))&&l--,l}function Wo(n,a){var e=n.length,s=a.length;if(e==0||s==0)return 0;e>s?n=n.substring(e-s):e<s&&(a=a.substring(0,e));var l=Math.min(e,s);if(n==a)return l;for(var o=0,r=1;;){var i=n.substring(l-r),c=a.indexOf(i);if(c==-1)return o;r+=c,(c==0||n.substring(l-r)==a.substring(0,r))&&(o=r,r++)}}function Ul(n,a){if(!n||!a||n.slice(-1)!==a.slice(-1))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(n.length-l,n.length-o)==a.substring(a.length-l,a.length-o)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return qr(n.charCodeAt(n.length-l))&&l--,l}function vx(n,a){var e=n.length>a.length?n:a,s=n.length>a.length?a:n;if(e.length<4||s.length*2<e.length)return null;function l(y,T,F){for(var E=y.substring(F,F+Math.floor(y.length/4)),P=-1,L="",D,v,f,C;(P=T.indexOf(E,P+1))!==-1;){var B=_o(y.substring(F),T.substring(P)),_=Ul(y.substring(0,F),T.substring(0,P));L.length<_+B&&(L=T.substring(P-_,P)+T.substring(P,P+B),D=y.substring(0,F-_),v=y.substring(F+B),f=T.substring(0,P-_),C=T.substring(P+B))}return L.length*2>=y.length?[D,v,f,C,L]:null}var o=l(e,s,Math.ceil(e.length/4)),r=l(e,s,Math.ceil(e.length/2)),i;if(!o&&!r)return null;r?o?i=o[4].length>r[4].length?o:r:i=r:i=o;var c,x,g,m;n.length>a.length?(c=i[0],x=i[1],g=i[2],m=i[3]):(g=i[0],m=i[1],c=i[2],x=i[3]);var p=i[4];return[c,x,g,m,p]}function Ex(n){for(var a=!1,e=[],s=0,l=null,o=0,r=0,i=0,c=0,x=0;o<n.length;)n[o][0]==pt?(e[s++]=o,r=c,i=x,c=0,x=0,l=n[o][1]):(n[o][0]==Tt?c+=n[o][1].length:x+=n[o][1].length,l&&l.length<=Math.max(r,i)&&l.length<=Math.max(c,x)&&(n.splice(e[s-1],0,[Vt,l]),n[e[s-1]+1][0]=Tt,s--,s--,o=s>0?e[s-1]:-1,r=0,i=0,c=0,x=0,l=null,a=!0)),o++;for(a&&Co(n),yx(n),o=1;o<n.length;){if(n[o-1][0]==Vt&&n[o][0]==Tt){var g=n[o-1][1],m=n[o][1],p=Wo(g,m),y=Wo(m,g);p>=y?(p>=g.length/2||p>=m.length/2)&&(n.splice(o,0,[pt,m.substring(0,p)]),n[o-1][1]=g.substring(0,g.length-p),n[o+1][1]=m.substring(p),o++):(y>=g.length/2||y>=m.length/2)&&(n.splice(o,0,[pt,g.substring(0,y)]),n[o-1][0]=Tt,n[o-1][1]=m.substring(0,m.length-y),n[o+1][0]=Vt,n[o+1][1]=g.substring(y),o++),o++}o++}}var Ho=/[^a-zA-Z0-9]/,Go=/\s/,Zo=/[\r\n]/,_x=/\n\r?\n$/,Cx=/^\r?\n\r?\n/;function yx(n){function a(y,T){if(!y||!T)return 6;var F=y.charAt(y.length-1),E=T.charAt(0),P=F.match(Ho),L=E.match(Ho),D=P&&F.match(Go),v=L&&E.match(Go),f=D&&F.match(Zo),C=v&&E.match(Zo),B=f&&y.match(_x),_=C&&T.match(Cx);return B||_?5:f||C?4:P&&!D&&v?3:D||v?2:P||L?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==pt&&n[e+1][0]==pt){var s=n[e-1][1],l=n[e][1],o=n[e+1][1],r=Ul(s,l);if(r){var i=l.substring(l.length-r);s=s.substring(0,s.length-r),l=i+l.substring(0,l.length-r),o=i+o}for(var c=s,x=l,g=o,m=a(s,l)+a(l,o);l.charAt(0)===o.charAt(0);){s+=l.charAt(0),l=l.substring(1)+o.charAt(0),o=o.substring(1);var p=a(s,l)+a(l,o);p>=m&&(m=p,c=s,x=l,g=o)}n[e-1][1]!=c&&(c?n[e-1][1]=c:(n.splice(e-1,1),e--),n[e][1]=x,g?n[e+1][1]=g:(n.splice(e+1,1),e--))}e++}}function Co(n,a){n.push([pt,""]);for(var e=0,s=0,l=0,o="",r="",i;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Tt:l++,r+=n[e][1],e++;break;case Vt:s++,o+=n[e][1],e++;break;case pt:var c=e-l-s-1;if(a){if(c>=0&&zr(n[c][1])){var x=n[c][1].slice(-1);if(n[c][1]=n[c][1].slice(0,-1),o=x+o,r=x+r,!n[c][1]){n.splice(c,1),e--;var g=c-1;n[g]&&n[g][0]===Tt&&(l++,r=n[g][1]+r,g--),n[g]&&n[g][0]===Vt&&(s++,o=n[g][1]+o,g--),c=g}}if(Ur(n[e][1])){var x=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),o+=x,r+=x}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(o.length>0||r.length>0){o.length>0&&r.length>0&&(i=_o(r,o),i!==0&&(c>=0?n[c][1]+=r.substring(0,i):(n.splice(0,0,[pt,r.substring(0,i)]),e++),r=r.substring(i),o=o.substring(i)),i=Ul(r,o),i!==0&&(n[e][1]=r.substring(r.length-i)+n[e][1],r=r.substring(0,r.length-i),o=o.substring(0,o.length-i)));var m=l+s;o.length===0&&r.length===0?(n.splice(e-m,m),e=e-m):o.length===0?(n.splice(e-m,m,[Tt,r]),e=e-m+1):r.length===0?(n.splice(e-m,m,[Vt,o]),e=e-m+1):(n.splice(e-m,m,[Vt,o],[Tt,r]),e=e-m+2)}e!==0&&n[e-1][0]===pt?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,l=0,s=0,o="",r="";break}}n[n.length-1][1]===""&&n.pop();var p=!1;for(e=1;e<n.length-1;)n[e-1][0]===pt&&n[e+1][0]===pt&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),p=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),p=!0)),e++;p&&Co(n,a)}function Rr(n){return n>=55296&&n<=56319}function qr(n){return n>=56320&&n<=57343}function Ur(n){return qr(n.charCodeAt(0))}function zr(n){return Rr(n.charCodeAt(n.length-1))}function bx(n){for(var a=[],e=0;e<n.length;e++)n[e][1].length>0&&a.push(n[e]);return a}function Nn(n,a,e,s){return zr(n)||Ur(s)?null:bx([[pt,n],[Vt,a],[Tt,e],[pt,s]])}function Bx(n,a,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,l=typeof e=="number"?null:e.newRange,o=n.length,r=a.length;if(s.length===0&&(l===null||l.length===0)){var i=s.index,c=n.slice(0,i),x=n.slice(i),g=l?l.index:null;e:{var m=i+r-o;if(g!==null&&g!==m||m<0||m>r)break e;var p=a.slice(0,m),y=a.slice(m);if(y!==x)break e;var T=Math.min(i,m),F=c.slice(0,T),E=p.slice(0,T);if(F!==E)break e;var P=c.slice(T),L=p.slice(T);return Nn(F,P,L,x)}e:{if(g!==null&&g!==i)break e;var D=i,p=a.slice(0,D),y=a.slice(D);if(p!==c)break e;var v=Math.min(o-D,r-D),f=x.slice(x.length-v),C=y.slice(y.length-v);if(f!==C)break e;var P=x.slice(0,x.length-v),L=y.slice(0,y.length-v);return Nn(c,P,L,f)}}if(s.length>0&&l&&l.length===0){e:{var F=n.slice(0,s.index),f=n.slice(s.index+s.length),T=F.length,v=f.length;if(r<T+v)break e;var E=a.slice(0,T),C=a.slice(r-v);if(F!==E||f!==C)break e;var P=n.slice(T,o-v),L=a.slice(T,r-v);return Nn(F,P,L,f)}}return null}function zl(n,a,e,s){return Ys(n,a,e,s,!0)}zl.INSERT=Tt;zl.DELETE=Vt;zl.EQUAL=pt;var Ax=zl,Tl={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=9007199254740991,o="[object Arguments]",r="[object Array]",i="[object Boolean]",c="[object Date]",x="[object Error]",g="[object Function]",m="[object GeneratorFunction]",p="[object Map]",y="[object Number]",T="[object Object]",F="[object Promise]",E="[object RegExp]",P="[object Set]",L="[object String]",D="[object Symbol]",v="[object WeakMap]",f="[object ArrayBuffer]",C="[object DataView]",B="[object Float32Array]",_="[object Float64Array]",k="[object Int8Array]",R="[object Int16Array]",M="[object Int32Array]",O="[object Uint8Array]",H="[object Uint8ClampedArray]",z="[object Uint16Array]",J="[object Uint32Array]",oe=/[\\^$.*+?()[\]{}|]/g,X=/\w*$/,re=/^\[object .+?Constructor\]$/,te=/^(?:0|[1-9]\d*)$/,pe={};pe[o]=pe[r]=pe[f]=pe[C]=pe[i]=pe[c]=pe[B]=pe[_]=pe[k]=pe[R]=pe[M]=pe[p]=pe[y]=pe[T]=pe[E]=pe[P]=pe[L]=pe[D]=pe[O]=pe[H]=pe[z]=pe[J]=!0,pe[x]=pe[g]=pe[v]=!1;var le=typeof ha=="object"&&ha&&ha.Object===Object&&ha,Ee=typeof self=="object"&&self&&self.Object===Object&&self,de=le||Ee||Function("return this")(),ie=a&&!a.nodeType&&a,Ce=ie&&!0&&n&&!n.nodeType&&n,I=Ce&&Ce.exports===ie;function W(h,q){return h.set(q[0],q[1]),h}function Q(h,q){return h.add(q),h}function ee(h,q){for(var Z=-1,fe=h?h.length:0;++Z<fe&&q(h[Z],Z,h)!==!1;);return h}function G(h,q){for(var Z=-1,fe=q.length,qe=h.length;++Z<fe;)h[qe+Z]=q[Z];return h}function ae(h,q,Z,fe){var qe=-1,Ne=h?h.length:0;for(fe&&Ne&&(Z=h[++qe]);++qe<Ne;)Z=q(Z,h[qe],qe,h);return Z}function _e(h,q){for(var Z=-1,fe=Array(h);++Z<h;)fe[Z]=q(Z);return fe}function ce(h,q){return h?.[q]}function Pe(h){var q=!1;if(h!=null&&typeof h.toString!="function")try{q=!!(h+"")}catch{}return q}function se(h){var q=-1,Z=Array(h.size);return h.forEach(function(fe,qe){Z[++q]=[qe,fe]}),Z}function ye(h,q){return function(Z){return h(q(Z))}}function De(h){var q=-1,Z=Array(h.size);return h.forEach(function(fe){Z[++q]=fe}),Z}var Me=Array.prototype,Le=Function.prototype,be=Object.prototype,me=de["__core-js_shared__"],xe=function(){var h=/[^.]+$/.exec(me&&me.keys&&me.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),je=Le.toString,he=be.hasOwnProperty,we=be.toString,Ve=RegExp("^"+je.call(he).replace(oe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=I?de.Buffer:void 0,Re=de.Symbol,$a=de.Uint8Array,ut=ye(Object.getPrototypeOf,Object),tl=Object.create,al=be.propertyIsEnumerable,Zl=Me.splice,As=Object.getOwnPropertySymbols,Qa=Ke?Ke.isBuffer:void 0,sl=ye(Object.keys,Object),Ka=Gt(de,"DataView"),Na=Gt(de,"Map"),Ht=Gt(de,"Promise"),es=Gt(de,"Set"),Fs=Gt(de,"WeakMap"),Oa=Gt(Object,"create"),ks=wt(Ka),Ma=wt(Na),Ds=wt(Ht),ws=wt(es),Ps=wt(Fs),ba=Re?Re.prototype:void 0,ll=ba?ba.valueOf:void 0;function ua(h){var q=-1,Z=h?h.length:0;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function Jl(){this.__data__=Oa?Oa(null):{}}function Xl(h){return this.has(h)&&delete this.__data__[h]}function Ql(h){var q=this.__data__;if(Oa){var Z=q[h];return Z===s?void 0:Z}return he.call(q,h)?q[h]:void 0}function nl(h){var q=this.__data__;return Oa?q[h]!==void 0:he.call(q,h)}function Ts(h,q){var Z=this.__data__;return Z[h]=Oa&&q===void 0?s:q,this}ua.prototype.clear=Jl,ua.prototype.delete=Xl,ua.prototype.get=Ql,ua.prototype.has=nl,ua.prototype.set=Ts;function Et(h){var q=-1,Z=h?h.length:0;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function Kl(){this.__data__=[]}function en(h){var q=this.__data__,Z=as(q,h);if(Z<0)return!1;var fe=q.length-1;return Z==fe?q.pop():Zl.call(q,Z,1),!0}function tn(h){var q=this.__data__,Z=as(q,h);return Z<0?void 0:q[Z][1]}function an(h){return as(this.__data__,h)>-1}function sn(h,q){var Z=this.__data__,fe=as(Z,h);return fe<0?Z.push([h,q]):Z[fe][1]=q,this}Et.prototype.clear=Kl,Et.prototype.delete=en,Et.prototype.get=tn,Et.prototype.has=an,Et.prototype.set=sn;function Bt(h){var q=-1,Z=h?h.length:0;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function ln(){this.__data__={hash:new ua,map:new(Na||Et),string:new ua}}function nn(h){return Ra(this,h).delete(h)}function on(h){return Ra(this,h).get(h)}function rn(h){return Ra(this,h).has(h)}function cn(h,q){return Ra(this,h).set(h,q),this}Bt.prototype.clear=ln,Bt.prototype.delete=nn,Bt.prototype.get=on,Bt.prototype.has=rn,Bt.prototype.set=cn;function St(h){this.__data__=new Et(h)}function xn(){this.__data__=new Et}function un(h){return this.__data__.delete(h)}function dn(h){return this.__data__.get(h)}function mn(h){return this.__data__.has(h)}function pn(h,q){var Z=this.__data__;if(Z instanceof Et){var fe=Z.__data__;if(!Na||fe.length<e-1)return fe.push([h,q]),this;Z=this.__data__=new Bt(fe)}return Z.set(h,q),this}St.prototype.clear=xn,St.prototype.delete=un,St.prototype.get=dn,St.prototype.has=mn,St.prototype.set=pn;function ts(h,q){var Z=$s(h)||ls(h)?_e(h.length,String):[],fe=Z.length,qe=!!fe;for(var Ne in h)(q||he.call(h,Ne))&&!(qe&&(Ne=="length"||Dn(Ne,fe)))&&Z.push(Ne);return Z}function ol(h,q,Z){var fe=h[q];(!(he.call(h,q)&&ul(fe,Z))||Z===void 0&&!(q in h))&&(h[q]=Z)}function as(h,q){for(var Z=h.length;Z--;)if(ul(h[Z][0],q))return Z;return-1}function na(h,q){return h&&Is(q,Os(q),h)}function Ls(h,q,Z,fe,qe,Ne,He){var Xe;if(fe&&(Xe=Ne?fe(h,qe,Ne,He):fe(h)),Xe!==void 0)return Xe;if(!ra(h))return h;var dt=$s(h);if(dt){if(Xe=Fn(h),!q)return bn(h,Xe)}else{var et=ma(h),At=et==g||et==m;if(dl(h))return ss(h,q);if(et==T||et==o||At&&!Ne){if(Pe(h))return Ne?h:{};if(Xe=oa(At?{}:h),!q)return Bn(h,na(Xe,h))}else{if(!pe[et])return Ne?h:{};Xe=kn(h,et,Ls,q)}}He||(He=new St);var It=He.get(h);if(It)return It;if(He.set(h,Xe),!dt)var mt=Z?An(h):Os(h);return ee(mt||h,function(Ft,_t){mt&&(_t=Ft,Ft=h[_t]),ol(Xe,_t,Ls(Ft,q,Z,fe,_t,h,He))}),Xe}function fn(h){return ra(h)?tl(h):{}}function gn(h,q,Z){var fe=q(h);return $s(h)?fe:G(fe,Z(h))}function hn(h){return we.call(h)}function vn(h){if(!ra(h)||Pn(h))return!1;var q=Ns(h)||Pe(h)?Ve:re;return q.test(wt(h))}function En(h){if(!cl(h))return sl(h);var q=[];for(var Z in Object(h))he.call(h,Z)&&Z!="constructor"&&q.push(Z);return q}function ss(h,q){if(q)return h.slice();var Z=new h.constructor(h.length);return h.copy(Z),Z}function Ss(h){var q=new h.constructor(h.byteLength);return new $a(q).set(new $a(h)),q}function Va(h,q){var Z=q?Ss(h.buffer):h.buffer;return new h.constructor(Z,h.byteOffset,h.byteLength)}function rl(h,q,Z){var fe=q?Z(se(h),!0):se(h);return ae(fe,W,new h.constructor)}function il(h){var q=new h.constructor(h.source,X.exec(h));return q.lastIndex=h.lastIndex,q}function _n(h,q,Z){var fe=q?Z(De(h),!0):De(h);return ae(fe,Q,new h.constructor)}function Cn(h){return ll?Object(ll.call(h)):{}}function yn(h,q){var Z=q?Ss(h.buffer):h.buffer;return new h.constructor(Z,h.byteOffset,h.length)}function bn(h,q){var Z=-1,fe=h.length;for(q||(q=Array(fe));++Z<fe;)q[Z]=h[Z];return q}function Is(h,q,Z,fe){Z||(Z={});for(var qe=-1,Ne=q.length;++qe<Ne;){var He=q[qe],Xe=fe?fe(Z[He],h[He],He,Z,h):void 0;ol(Z,He,Xe===void 0?h[He]:Xe)}return Z}function Bn(h,q){return Is(h,da(h),q)}function An(h){return gn(h,Os,da)}function Ra(h,q){var Z=h.__data__;return wn(q)?Z[typeof q=="string"?"string":"hash"]:Z.map}function Gt(h,q){var Z=ce(h,q);return vn(Z)?Z:void 0}var da=As?ye(As,Object):Ln,ma=hn;(Ka&&ma(new Ka(new ArrayBuffer(1)))!=C||Na&&ma(new Na)!=p||Ht&&ma(Ht.resolve())!=F||es&&ma(new es)!=P||Fs&&ma(new Fs)!=v)&&(ma=function(h){var q=we.call(h),Z=q==T?h.constructor:void 0,fe=Z?wt(Z):void 0;if(fe)switch(fe){case ks:return C;case Ma:return p;case Ds:return F;case ws:return P;case Ps:return v}return q});function Fn(h){var q=h.length,Z=h.constructor(q);return q&&typeof h[0]=="string"&&he.call(h,"index")&&(Z.index=h.index,Z.input=h.input),Z}function oa(h){return typeof h.constructor=="function"&&!cl(h)?fn(ut(h)):{}}function kn(h,q,Z,fe){var qe=h.constructor;switch(q){case f:return Ss(h);case i:case c:return new qe(+h);case C:return Va(h,fe);case B:case _:case k:case R:case M:case O:case H:case z:case J:return yn(h,fe);case p:return rl(h,fe,Z);case y:case L:return new qe(h);case E:return il(h);case P:return _n(h,fe,Z);case D:return Cn(h)}}function Dn(h,q){return q=q??l,!!q&&(typeof h=="number"||te.test(h))&&h>-1&&h%1==0&&h<q}function wn(h){var q=typeof h;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?h!=="__proto__":h===null}function Pn(h){return!!xe&&xe in h}function cl(h){var q=h&&h.constructor,Z=typeof q=="function"&&q.prototype||be;return h===Z}function wt(h){if(h!=null){try{return je.call(h)}catch{}try{return h+""}catch{}}return""}function xl(h){return Ls(h,!0,!0)}function ul(h,q){return h===q||h!==h&&q!==q}function ls(h){return Tn(h)&&he.call(h,"callee")&&(!al.call(h,"callee")||we.call(h)==o)}var $s=Array.isArray;function ns(h){return h!=null&&ml(h.length)&&!Ns(h)}function Tn(h){return pl(h)&&ns(h)}var dl=Qa||Sn;function Ns(h){var q=ra(h)?we.call(h):"";return q==g||q==m}function ml(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=l}function ra(h){var q=typeof h;return!!h&&(q=="object"||q=="function")}function pl(h){return!!h&&typeof h=="object"}function Os(h){return ns(h)?ts(h):En(h)}function Ln(){return[]}function Sn(){return!1}n.exports=xl})(Tl,Tl.exports);var Ll={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=1,o=2,r=9007199254740991,i="[object Arguments]",c="[object Array]",x="[object AsyncFunction]",g="[object Boolean]",m="[object Date]",p="[object Error]",y="[object Function]",T="[object GeneratorFunction]",F="[object Map]",E="[object Number]",P="[object Null]",L="[object Object]",D="[object Promise]",v="[object Proxy]",f="[object RegExp]",C="[object Set]",B="[object String]",_="[object Symbol]",k="[object Undefined]",R="[object WeakMap]",M="[object ArrayBuffer]",O="[object DataView]",H="[object Float32Array]",z="[object Float64Array]",J="[object Int8Array]",oe="[object Int16Array]",X="[object Int32Array]",re="[object Uint8Array]",te="[object Uint8ClampedArray]",pe="[object Uint16Array]",le="[object Uint32Array]",Ee=/[\\^$.*+?()[\]{}|]/g,de=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,Ce={};Ce[H]=Ce[z]=Ce[J]=Ce[oe]=Ce[X]=Ce[re]=Ce[te]=Ce[pe]=Ce[le]=!0,Ce[i]=Ce[c]=Ce[M]=Ce[g]=Ce[O]=Ce[m]=Ce[p]=Ce[y]=Ce[F]=Ce[E]=Ce[L]=Ce[f]=Ce[C]=Ce[B]=Ce[R]=!1;var I=typeof ha=="object"&&ha&&ha.Object===Object&&ha,W=typeof self=="object"&&self&&self.Object===Object&&self,Q=I||W||Function("return this")(),ee=a&&!a.nodeType&&a,G=ee&&!0&&n&&!n.nodeType&&n,ae=G&&G.exports===ee,_e=ae&&I.process,ce=function(){try{return _e&&_e.binding&&_e.binding("util")}catch{}}(),Pe=ce&&ce.isTypedArray;function se(h,q){for(var Z=-1,fe=h==null?0:h.length,qe=0,Ne=[];++Z<fe;){var He=h[Z];q(He,Z,h)&&(Ne[qe++]=He)}return Ne}function ye(h,q){for(var Z=-1,fe=q.length,qe=h.length;++Z<fe;)h[qe+Z]=q[Z];return h}function De(h,q){for(var Z=-1,fe=h==null?0:h.length;++Z<fe;)if(q(h[Z],Z,h))return!0;return!1}function Me(h,q){for(var Z=-1,fe=Array(h);++Z<h;)fe[Z]=q(Z);return fe}function Le(h){return function(q){return h(q)}}function be(h,q){return h.has(q)}function me(h,q){return h?.[q]}function xe(h){var q=-1,Z=Array(h.size);return h.forEach(function(fe,qe){Z[++q]=[qe,fe]}),Z}function je(h,q){return function(Z){return h(q(Z))}}function he(h){var q=-1,Z=Array(h.size);return h.forEach(function(fe){Z[++q]=fe}),Z}var we=Array.prototype,Ve=Function.prototype,Ke=Object.prototype,Re=Q["__core-js_shared__"],$a=Ve.toString,ut=Ke.hasOwnProperty,tl=function(){var h=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),al=Ke.toString,Zl=RegExp("^"+$a.call(ut).replace(Ee,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),As=ae?Q.Buffer:void 0,Qa=Q.Symbol,sl=Q.Uint8Array,Ka=Ke.propertyIsEnumerable,Na=we.splice,Ht=Qa?Qa.toStringTag:void 0,es=Object.getOwnPropertySymbols,Fs=As?As.isBuffer:void 0,Oa=je(Object.keys,Object),ks=da(Q,"DataView"),Ma=da(Q,"Map"),Ds=da(Q,"Promise"),ws=da(Q,"Set"),Ps=da(Q,"WeakMap"),ba=da(Object,"create"),ll=wt(ks),ua=wt(Ma),Jl=wt(Ds),Xl=wt(ws),Ql=wt(Ps),nl=Qa?Qa.prototype:void 0,Ts=nl?nl.valueOf:void 0;function Et(h){var q=-1,Z=h==null?0:h.length;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function Kl(){this.__data__=ba?ba(null):{},this.size=0}function en(h){var q=this.has(h)&&delete this.__data__[h];return this.size-=q?1:0,q}function tn(h){var q=this.__data__;if(ba){var Z=q[h];return Z===s?void 0:Z}return ut.call(q,h)?q[h]:void 0}function an(h){var q=this.__data__;return ba?q[h]!==void 0:ut.call(q,h)}function sn(h,q){var Z=this.__data__;return this.size+=this.has(h)?0:1,Z[h]=ba&&q===void 0?s:q,this}Et.prototype.clear=Kl,Et.prototype.delete=en,Et.prototype.get=tn,Et.prototype.has=an,Et.prototype.set=sn;function Bt(h){var q=-1,Z=h==null?0:h.length;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function ln(){this.__data__=[],this.size=0}function nn(h){var q=this.__data__,Z=ss(q,h);if(Z<0)return!1;var fe=q.length-1;return Z==fe?q.pop():Na.call(q,Z,1),--this.size,!0}function on(h){var q=this.__data__,Z=ss(q,h);return Z<0?void 0:q[Z][1]}function rn(h){return ss(this.__data__,h)>-1}function cn(h,q){var Z=this.__data__,fe=ss(Z,h);return fe<0?(++this.size,Z.push([h,q])):Z[fe][1]=q,this}Bt.prototype.clear=ln,Bt.prototype.delete=nn,Bt.prototype.get=on,Bt.prototype.has=rn,Bt.prototype.set=cn;function St(h){var q=-1,Z=h==null?0:h.length;for(this.clear();++q<Z;){var fe=h[q];this.set(fe[0],fe[1])}}function xn(){this.size=0,this.__data__={hash:new Et,map:new(Ma||Bt),string:new Et}}function un(h){var q=Gt(this,h).delete(h);return this.size-=q?1:0,q}function dn(h){return Gt(this,h).get(h)}function mn(h){return Gt(this,h).has(h)}function pn(h,q){var Z=Gt(this,h),fe=Z.size;return Z.set(h,q),this.size+=Z.size==fe?0:1,this}St.prototype.clear=xn,St.prototype.delete=un,St.prototype.get=dn,St.prototype.has=mn,St.prototype.set=pn;function ts(h){var q=-1,Z=h==null?0:h.length;for(this.__data__=new St;++q<Z;)this.add(h[q])}function ol(h){return this.__data__.set(h,s),this}function as(h){return this.__data__.has(h)}ts.prototype.add=ts.prototype.push=ol,ts.prototype.has=as;function na(h){var q=this.__data__=new Bt(h);this.size=q.size}function Ls(){this.__data__=new Bt,this.size=0}function fn(h){var q=this.__data__,Z=q.delete(h);return this.size=q.size,Z}function gn(h){return this.__data__.get(h)}function hn(h){return this.__data__.has(h)}function vn(h,q){var Z=this.__data__;if(Z instanceof Bt){var fe=Z.__data__;if(!Ma||fe.length<e-1)return fe.push([h,q]),this.size=++Z.size,this;Z=this.__data__=new St(fe)}return Z.set(h,q),this.size=Z.size,this}na.prototype.clear=Ls,na.prototype.delete=fn,na.prototype.get=gn,na.prototype.has=hn,na.prototype.set=vn;function En(h,q){var Z=ls(h),fe=!Z&&ul(h),qe=!Z&&!fe&&ns(h),Ne=!Z&&!fe&&!qe&&pl(h),He=Z||fe||qe||Ne,Xe=He?Me(h.length,String):[],dt=Xe.length;for(var et in h)(q||ut.call(h,et))&&!(He&&(et=="length"||qe&&(et=="offset"||et=="parent")||Ne&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||kn(et,dt)))&&Xe.push(et);return Xe}function ss(h,q){for(var Z=h.length;Z--;)if(xl(h[Z][0],q))return Z;return-1}function Ss(h,q,Z){var fe=q(h);return ls(h)?fe:ye(fe,Z(h))}function Va(h){return h==null?h===void 0?k:P:Ht&&Ht in Object(h)?ma(h):cl(h)}function rl(h){return ra(h)&&Va(h)==i}function il(h,q,Z,fe,qe){return h===q?!0:h==null||q==null||!ra(h)&&!ra(q)?h!==h&&q!==q:_n(h,q,Z,fe,il,qe)}function _n(h,q,Z,fe,qe,Ne){var He=ls(h),Xe=ls(q),dt=He?c:oa(h),et=Xe?c:oa(q);dt=dt==i?L:dt,et=et==i?L:et;var At=dt==L,It=et==L,mt=dt==et;if(mt&&ns(h)){if(!ns(q))return!1;He=!0,At=!1}if(mt&&!At)return Ne||(Ne=new na),He||pl(h)?Is(h,q,Z,fe,qe,Ne):Bn(h,q,dt,Z,fe,qe,Ne);if(!(Z&l)){var Ft=At&&ut.call(h,"__wrapped__"),_t=It&&ut.call(q,"__wrapped__");if(Ft||_t){var Ba=Ft?h.value():h,pa=_t?q.value():q;return Ne||(Ne=new na),qe(Ba,pa,Z,fe,Ne)}}return mt?(Ne||(Ne=new na),An(h,q,Z,fe,qe,Ne)):!1}function Cn(h){if(!ml(h)||wn(h))return!1;var q=dl(h)?Zl:de;return q.test(wt(h))}function yn(h){return ra(h)&&Ns(h.length)&&!!Ce[Va(h)]}function bn(h){if(!Pn(h))return Oa(h);var q=[];for(var Z in Object(h))ut.call(h,Z)&&Z!="constructor"&&q.push(Z);return q}function Is(h,q,Z,fe,qe,Ne){var He=Z&l,Xe=h.length,dt=q.length;if(Xe!=dt&&!(He&&dt>Xe))return!1;var et=Ne.get(h);if(et&&Ne.get(q))return et==q;var At=-1,It=!0,mt=Z&o?new ts:void 0;for(Ne.set(h,q),Ne.set(q,h);++At<Xe;){var Ft=h[At],_t=q[At];if(fe)var Ba=He?fe(_t,Ft,At,q,h,Ne):fe(Ft,_t,At,h,q,Ne);if(Ba!==void 0){if(Ba)continue;It=!1;break}if(mt){if(!De(q,function(pa,qa){if(!be(mt,qa)&&(Ft===pa||qe(Ft,pa,Z,fe,Ne)))return mt.push(qa)})){It=!1;break}}else if(!(Ft===_t||qe(Ft,_t,Z,fe,Ne))){It=!1;break}}return Ne.delete(h),Ne.delete(q),It}function Bn(h,q,Z,fe,qe,Ne,He){switch(Z){case O:if(h.byteLength!=q.byteLength||h.byteOffset!=q.byteOffset)return!1;h=h.buffer,q=q.buffer;case M:return!(h.byteLength!=q.byteLength||!Ne(new sl(h),new sl(q)));case g:case m:case E:return xl(+h,+q);case p:return h.name==q.name&&h.message==q.message;case f:case B:return h==q+"";case F:var Xe=xe;case C:var dt=fe&l;if(Xe||(Xe=he),h.size!=q.size&&!dt)return!1;var et=He.get(h);if(et)return et==q;fe|=o,He.set(h,q);var At=Is(Xe(h),Xe(q),fe,qe,Ne,He);return He.delete(h),At;case _:if(Ts)return Ts.call(h)==Ts.call(q)}return!1}function An(h,q,Z,fe,qe,Ne){var He=Z&l,Xe=Ra(h),dt=Xe.length,et=Ra(q),At=et.length;if(dt!=At&&!He)return!1;for(var It=dt;It--;){var mt=Xe[It];if(!(He?mt in q:ut.call(q,mt)))return!1}var Ft=Ne.get(h);if(Ft&&Ne.get(q))return Ft==q;var _t=!0;Ne.set(h,q),Ne.set(q,h);for(var Ba=He;++It<dt;){mt=Xe[It];var pa=h[mt],qa=q[mt];if(fe)var Oo=He?fe(qa,pa,mt,q,h,Ne):fe(pa,qa,mt,h,q,Ne);if(!(Oo===void 0?pa===qa||qe(pa,qa,Z,fe,Ne):Oo)){_t=!1;break}Ba||(Ba=mt=="constructor")}if(_t&&!Ba){var fl=h.constructor,gl=q.constructor;fl!=gl&&"constructor"in h&&"constructor"in q&&!(typeof fl=="function"&&fl instanceof fl&&typeof gl=="function"&&gl instanceof gl)&&(_t=!1)}return Ne.delete(h),Ne.delete(q),_t}function Ra(h){return Ss(h,Os,Fn)}function Gt(h,q){var Z=h.__data__;return Dn(q)?Z[typeof q=="string"?"string":"hash"]:Z.map}function da(h,q){var Z=me(h,q);return Cn(Z)?Z:void 0}function ma(h){var q=ut.call(h,Ht),Z=h[Ht];try{h[Ht]=void 0;var fe=!0}catch{}var qe=al.call(h);return fe&&(q?h[Ht]=Z:delete h[Ht]),qe}var Fn=es?function(h){return h==null?[]:(h=Object(h),se(es(h),function(q){return Ka.call(h,q)}))}:Ln,oa=Va;(ks&&oa(new ks(new ArrayBuffer(1)))!=O||Ma&&oa(new Ma)!=F||Ds&&oa(Ds.resolve())!=D||ws&&oa(new ws)!=C||Ps&&oa(new Ps)!=R)&&(oa=function(h){var q=Va(h),Z=q==L?h.constructor:void 0,fe=Z?wt(Z):"";if(fe)switch(fe){case ll:return O;case ua:return F;case Jl:return D;case Xl:return C;case Ql:return R}return q});function kn(h,q){return q=q??r,!!q&&(typeof h=="number"||ie.test(h))&&h>-1&&h%1==0&&h<q}function Dn(h){var q=typeof h;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?h!=="__proto__":h===null}function wn(h){return!!tl&&tl in h}function Pn(h){var q=h&&h.constructor,Z=typeof q=="function"&&q.prototype||Ke;return h===Z}function cl(h){return al.call(h)}function wt(h){if(h!=null){try{return $a.call(h)}catch{}try{return h+""}catch{}}return""}function xl(h,q){return h===q||h!==h&&q!==q}var ul=rl(function(){return arguments}())?rl:function(h){return ra(h)&&ut.call(h,"callee")&&!Ka.call(h,"callee")},ls=Array.isArray;function $s(h){return h!=null&&Ns(h.length)&&!dl(h)}var ns=Fs||Sn;function Tn(h,q){return il(h,q)}function dl(h){if(!ml(h))return!1;var q=Va(h);return q==y||q==T||q==x||q==v}function Ns(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=r}function ml(h){var q=typeof h;return h!=null&&(q=="object"||q=="function")}function ra(h){return h!=null&&typeof h=="object"}var pl=Pe?Le(Pe):yn;function Os(h){return $s(h)?En(h):bn(h)}function Ln(){return[]}function Sn(){return!1}n.exports=Tn})(Ll,Ll.exports);var yo={};Object.defineProperty(yo,"__esModule",{value:!0});const Fx=Tl.exports,kx=Ll.exports;var Qn;(function(n){function a(o={},r={},i=!1){typeof o!="object"&&(o={}),typeof r!="object"&&(r={});let c=Fx(r);i||(c=Object.keys(c).reduce((x,g)=>(c[g]!=null&&(x[g]=c[g]),x),{}));for(const x in o)o[x]!==void 0&&r[x]===void 0&&(c[x]=o[x]);return Object.keys(c).length>0?c:void 0}n.compose=a;function e(o={},r={}){typeof o!="object"&&(o={}),typeof r!="object"&&(r={});const i=Object.keys(o).concat(Object.keys(r)).reduce((c,x)=>(kx(o[x],r[x])||(c[x]=r[x]===void 0?null:r[x]),c),{});return Object.keys(i).length>0?i:void 0}n.diff=e;function s(o={},r={}){o=o||{};const i=Object.keys(r).reduce((c,x)=>(r[x]!==o[x]&&o[x]!==void 0&&(c[x]=r[x]),c),{});return Object.keys(o).reduce((c,x)=>(o[x]!==r[x]&&r[x]===void 0&&(c[x]=null),c),i)}n.invert=s;function l(o,r,i=!1){if(typeof o!="object")return r;if(typeof r!="object")return;if(!i)return r;const c=Object.keys(r).reduce((x,g)=>(o[g]===void 0&&(x[g]=r[g]),x),{});return Object.keys(c).length>0?c:void 0}n.transform=l})(Qn||(Qn={}));yo.default=Qn;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});var Kn;(function(n){function a(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=a})(Kn||(Kn={}));jl.default=Kn;var bo={};Object.defineProperty(bo,"__esModule",{value:!0});const Jo=jl;class Dx{constructor(a){this.ops=a,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(a){a||(a=1/0);const e=this.ops[this.index];if(e){const s=this.offset,l=Jo.default.length(e);if(a>=l-s?(a=l-s,this.index+=1,this.offset=0):this.offset+=a,typeof e.delete=="number")return{delete:a};{const o={};return e.attributes&&(o.attributes=e.attributes),typeof e.retain=="number"?o.retain=a:typeof e.retain=="object"&&e.retain!==null?o.retain=e.retain:typeof e.insert=="string"?o.insert=e.insert.substr(s,a):o.insert=e.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Jo.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const a=this.ops[this.index];return a?typeof a.delete=="number"?"delete":typeof a.retain=="number"||typeof a.retain=="object"&&a.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const a=this.offset,e=this.index,s=this.next(),l=this.ops.slice(this.index);return this.offset=a,this.index=e,[s].concat(l)}}else return[]}}bo.default=Dx;(function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.AttributeMap=a.OpIterator=a.Op=void 0;const e=Ax,s=Tl.exports,l=Ll.exports,o=yo;a.AttributeMap=o.default;const r=jl;a.Op=r.default;const i=bo;a.OpIterator=i.default;const c=String.fromCharCode(0),x=(m,p)=>{if(typeof m!="object"||m===null)throw new Error(`cannot retain a ${typeof m}`);if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);const y=Object.keys(m)[0];if(!y||y!==Object.keys(p)[0])throw new Error(`embed types not matched: ${y} != ${Object.keys(p)[0]}`);return[y,m[y],p[y]]};class g{constructor(p){Array.isArray(p)?this.ops=p:p!=null&&Array.isArray(p.ops)?this.ops=p.ops:this.ops=[]}static registerEmbed(p,y){this.handlers[p]=y}static unregisterEmbed(p){delete this.handlers[p]}static getHandler(p){const y=this.handlers[p];if(!y)throw new Error(`no handlers for embed type "${p}"`);return y}insert(p,y){const T={};return typeof p=="string"&&p.length===0?this:(T.insert=p,y!=null&&typeof y=="object"&&Object.keys(y).length>0&&(T.attributes=y),this.push(T))}delete(p){return p<=0?this:this.push({delete:p})}retain(p,y){if(typeof p=="number"&&p<=0)return this;const T={retain:p};return y!=null&&typeof y=="object"&&Object.keys(y).length>0&&(T.attributes=y),this.push(T)}push(p){let y=this.ops.length,T=this.ops[y-1];if(p=s(p),typeof T=="object"){if(typeof p.delete=="number"&&typeof T.delete=="number")return this.ops[y-1]={delete:T.delete+p.delete},this;if(typeof T.delete=="number"&&p.insert!=null&&(y-=1,T=this.ops[y-1],typeof T!="object"))return this.ops.unshift(p),this;if(l(p.attributes,T.attributes)){if(typeof p.insert=="string"&&typeof T.insert=="string")return this.ops[y-1]={insert:T.insert+p.insert},typeof p.attributes=="object"&&(this.ops[y-1].attributes=p.attributes),this;if(typeof p.retain=="number"&&typeof T.retain=="number")return this.ops[y-1]={retain:T.retain+p.retain},typeof p.attributes=="object"&&(this.ops[y-1].attributes=p.attributes),this}}return y===this.ops.length?this.ops.push(p):this.ops.splice(y,0,p),this}chop(){const p=this.ops[this.ops.length-1];return p&&typeof p.retain=="number"&&!p.attributes&&this.ops.pop(),this}filter(p){return this.ops.filter(p)}forEach(p){this.ops.forEach(p)}map(p){return this.ops.map(p)}partition(p){const y=[],T=[];return this.forEach(F=>{(p(F)?y:T).push(F)}),[y,T]}reduce(p,y){return this.ops.reduce(p,y)}changeLength(){return this.reduce((p,y)=>y.insert?p+r.default.length(y):y.delete?p-y.delete:p,0)}length(){return this.reduce((p,y)=>p+r.default.length(y),0)}slice(p=0,y=1/0){const T=[],F=new i.default(this.ops);let E=0;for(;E<y&&F.hasNext();){let P;E<p?P=F.next(p-E):(P=F.next(y-E),T.push(P)),E+=r.default.length(P)}return new g(T)}compose(p){const y=new i.default(this.ops),T=new i.default(p.ops),F=[],E=T.peek();if(E!=null&&typeof E.retain=="number"&&E.attributes==null){let L=E.retain;for(;y.peekType()==="insert"&&y.peekLength()<=L;)L-=y.peekLength(),F.push(y.next());E.retain-L>0&&T.next(E.retain-L)}const P=new g(F);for(;y.hasNext()||T.hasNext();)if(T.peekType()==="insert")P.push(T.next());else if(y.peekType()==="delete")P.push(y.next());else{const L=Math.min(y.peekLength(),T.peekLength()),D=y.next(L),v=T.next(L);if(v.retain){const f={};if(typeof D.retain=="number")f.retain=typeof v.retain=="number"?L:v.retain;else if(typeof v.retain=="number")D.retain==null?f.insert=D.insert:f.retain=D.retain;else{const B=D.retain==null?"insert":"retain",[_,k,R]=x(D[B],v.retain),M=g.getHandler(_);f[B]={[_]:M.compose(k,R,B==="retain")}}const C=o.default.compose(D.attributes,v.attributes,typeof D.retain=="number");if(C&&(f.attributes=C),P.push(f),!T.hasNext()&&l(P.ops[P.ops.length-1],f)){const B=new g(y.rest());return P.concat(B).chop()}}else typeof v.delete=="number"&&(typeof D.retain=="number"||typeof D.retain=="object"&&D.retain!==null)&&P.push(v)}return P.chop()}concat(p){const y=new g(this.ops.slice());return p.ops.length>0&&(y.push(p.ops[0]),y.ops=y.ops.concat(p.ops.slice(1))),y}diff(p,y){if(this.ops===p.ops)return new g;const T=[this,p].map(D=>D.map(v=>{if(v.insert!=null)return typeof v.insert=="string"?v.insert:c;const f=D===p?"on":"with";throw new Error("diff() called "+f+" non-document")}).join("")),F=new g,E=e(T[0],T[1],y,!0),P=new i.default(this.ops),L=new i.default(p.ops);return E.forEach(D=>{let v=D[1].length;for(;v>0;){let f=0;switch(D[0]){case e.INSERT:f=Math.min(L.peekLength(),v),F.push(L.next(f));break;case e.DELETE:f=Math.min(v,P.peekLength()),P.next(f),F.delete(f);break;case e.EQUAL:f=Math.min(P.peekLength(),L.peekLength(),v);const C=P.next(f),B=L.next(f);l(C.insert,B.insert)?F.retain(f,o.default.diff(C.attributes,B.attributes)):F.push(B).delete(f);break}v-=f}}),F.chop()}eachLine(p,y=`
`){const T=new i.default(this.ops);let F=new g,E=0;for(;T.hasNext();){if(T.peekType()!=="insert")return;const P=T.peek(),L=r.default.length(P)-T.peekLength(),D=typeof P.insert=="string"?P.insert.indexOf(y,L)-L:-1;if(D<0)F.push(T.next());else if(D>0)F.push(T.next(D));else{if(p(F,T.next(1).attributes||{},E)===!1)return;E+=1,F=new g}}F.length()>0&&p(F,{},E)}invert(p){const y=new g;return this.reduce((T,F)=>{if(F.insert)y.delete(r.default.length(F));else{if(typeof F.retain=="number"&&F.attributes==null)return y.retain(F.retain),T+F.retain;if(F.delete||typeof F.retain=="number"){const E=F.delete||F.retain;return p.slice(T,T+E).forEach(L=>{F.delete?y.push(L):F.retain&&F.attributes&&y.retain(r.default.length(L),o.default.invert(F.attributes,L.attributes))}),T+E}else if(typeof F.retain=="object"&&F.retain!==null){const E=p.slice(T,T+1),P=new i.default(E.ops).next(),[L,D,v]=x(F.retain,P.insert),f=g.getHandler(L);return y.retain({[L]:f.invert(D,v)},o.default.invert(F.attributes,P.attributes)),T+1}}return T},0),y.chop()}transform(p,y=!1){if(y=!!y,typeof p=="number")return this.transformPosition(p,y);const T=p,F=new i.default(this.ops),E=new i.default(T.ops),P=new g;for(;F.hasNext()||E.hasNext();)if(F.peekType()==="insert"&&(y||E.peekType()!=="insert"))P.retain(r.default.length(F.next()));else if(E.peekType()==="insert")P.push(E.next());else{const L=Math.min(F.peekLength(),E.peekLength()),D=F.next(L),v=E.next(L);if(D.delete)continue;if(v.delete)P.push(v);else{const f=D.retain,C=v.retain;let B=typeof C=="object"&&C!==null?C:L;if(typeof f=="object"&&f!==null&&typeof C=="object"&&C!==null){const _=Object.keys(f)[0];if(_===Object.keys(C)[0]){const k=g.getHandler(_);k&&(B={[_]:k.transform(f[_],C[_],y)})}}P.retain(B,o.default.transform(D.attributes,v.attributes,y))}}return P.chop()}transformPosition(p,y=!1){y=!!y;const T=new i.default(this.ops);let F=0;for(;T.hasNext()&&F<=p;){const E=T.peekLength(),P=T.peekType();if(T.next(),P==="delete"){p-=Math.min(E,p-F);continue}else P==="insert"&&(F<p||!y)&&(p+=E);F+=E}return p}}g.Op=r.default,g.OpIterator=i.default,g.AttributeMap=o.default,g.handlers={},a.default=g,n.exports=g,n.exports.default=g})(Nt,Nt.exports);var Se=Ar(Nt.exports);class la extends Rt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}la.blotName="break";la.tagName="BR";class aa extends Pl{}const wx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Yl(n){return n.replace(/[&<>"']/g,a=>wx[a])}class Pt extends vo{static allowedChildren=[Pt,la,Rt,aa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(a,e){const s=Pt.order.indexOf(a),l=Pt.order.indexOf(e);return s>=0||l>=0?s-l:a===e?0:a<e?-1:1}formatAt(a,e,s,l){if(Pt.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Ie.BLOT)){const o=this.isolate(a,e);l&&o.wrap(s,l)}else super.formatAt(a,e,s,l)}optimize(a){if(super.optimize(a),this.parent instanceof Pt&&Pt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}const Xo=1;class yt extends js{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=jr(this)),this.cache.delta}deleteAt(a,e){super.deleteAt(a,e),this.cache={}}formatAt(a,e,s,l){e<=0||(this.scroll.query(s,Ie.BLOCK)?a+e===this.length()&&this.format(s,l):super.formatAt(a,Math.min(e,this.length()-a-1),s,l),this.cache={})}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s),this.cache={};return}if(e.length===0)return;const l=e.split(`
`),o=l.shift();o.length>0&&(a<this.length()-1||this.children.tail==null?super.insertAt(Math.min(a,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let r=this;l.reduce((i,c)=>(r=r.split(i,!0),r.insertAt(0,c),c.length),a+o.length)}insertBefore(a,e){const{head:s}=this.children;super.insertBefore(a,e),s instanceof la&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Xo),this.cache.length}moveChildren(a,e){super.moveChildren(a,e),this.cache={}}optimize(a){super.optimize(a),this.cache={}}path(a){return super.path(a,!0)}removeChild(a){super.removeChild(a),this.cache={}}split(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(a===0||a>=this.length()-Xo)){const l=this.clone();return a===0?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const s=super.split(a,e);return this.cache={},s}}yt.blotName="block";yt.tagName="P";yt.defaultChild=la;yt.allowedChildren=[la,Pt,Rt,aa];class Yt extends Rt{attach(){super.attach(),this.attributes=new Rl(this.domNode)}delta(){return new Se().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(a,e){const s=this.scroll.query(a,Ie.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(a,e,s,l){this.format(s,l)}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s);return}const l=e.split(`
`),o=l.pop(),r=l.map(c=>{const x=this.scroll.create(yt.blotName);return x.insertAt(0,c),x}),i=this.split(a);r.forEach(c=>{this.parent.insertBefore(c,i)}),o&&this.parent.insertBefore(this.scroll.create("text",o),i)}}Yt.scope=Ie.BLOCK_BLOT;function jr(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(kt).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),zt(s,{},a)),new Se).insert(`
`,zt(n))}function zt(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(a={...a,...n.formats()},e&&delete a["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?a:zt(n.parent,a,e)}class Jt extends Rt{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(a,e,s){super(a,e),this.selection=s,this.textNode=document.createTextNode(Jt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(a,e){if(this.savedLength!==0){super.format(a,e);return}let s=this,l=0;for(;s!=null&&s.statics.scope!==Ie.BLOCK_BLOT;)l+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=Jt.CONTENTS.length,s.optimize(),s.formatAt(l,Jt.CONTENTS.length,a,e),this.savedLength=0)}index(a,e){return a===this.textNode?0:super.index(a,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const a=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof aa?this.prev:null,s=e?e.length():0,l=this.next instanceof aa?this.next:null,o=l?l.text:"",{textNode:r}=this,i=r.data.split(Jt.CONTENTS).join("");r.data=Jt.CONTENTS;let c;if(e)c=e,(i||l)&&(e.insertAt(e.length(),i+o),l&&l.remove());else if(l)c=l,l.insertAt(0,i);else{const x=document.createTextNode(i);c=this.scroll.create(x),this.parent.insertBefore(c,this)}if(this.remove(),a){const x=(p,y)=>e&&p===e.domNode?y:p===r?s+y-1:l&&p===l.domNode?s+i.length+y:null,g=x(a.start.node,a.start.offset),m=x(a.end.node,a.end.offset);if(g!==null&&m!==null)return{startNode:c.domNode,startOffset:g,endNode:c.domNode,endOffset:m}}return null}update(a,e){if(a.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(e.range=s)}}optimize(a){super.optimize(a);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Jt.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}var Yr={exports:{}};(function(n){var a=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function l(c,x,g){this.fn=c,this.context=x,this.once=g||!1}function o(c,x,g,m,p){if(typeof g!="function")throw new TypeError("The listener must be a function");var y=new l(g,m||c,p),T=e?e+x:x;return c._events[T]?c._events[T].fn?c._events[T]=[c._events[T],y]:c._events[T].push(y):(c._events[T]=y,c._eventsCount++),c}function r(c,x){--c._eventsCount===0?c._events=new s:delete c._events[x]}function i(){this._events=new s,this._eventsCount=0}i.prototype.eventNames=function(){var x=[],g,m;if(this._eventsCount===0)return x;for(m in g=this._events)a.call(g,m)&&x.push(e?m.slice(1):m);return Object.getOwnPropertySymbols?x.concat(Object.getOwnPropertySymbols(g)):x},i.prototype.listeners=function(x){var g=e?e+x:x,m=this._events[g];if(!m)return[];if(m.fn)return[m.fn];for(var p=0,y=m.length,T=new Array(y);p<y;p++)T[p]=m[p].fn;return T},i.prototype.listenerCount=function(x){var g=e?e+x:x,m=this._events[g];return m?m.fn?1:m.length:0},i.prototype.emit=function(x,g,m,p,y,T){var F=e?e+x:x;if(!this._events[F])return!1;var E=this._events[F],P=arguments.length,L,D;if(E.fn){switch(E.once&&this.removeListener(x,E.fn,void 0,!0),P){case 1:return E.fn.call(E.context),!0;case 2:return E.fn.call(E.context,g),!0;case 3:return E.fn.call(E.context,g,m),!0;case 4:return E.fn.call(E.context,g,m,p),!0;case 5:return E.fn.call(E.context,g,m,p,y),!0;case 6:return E.fn.call(E.context,g,m,p,y,T),!0}for(D=1,L=new Array(P-1);D<P;D++)L[D-1]=arguments[D];E.fn.apply(E.context,L)}else{var v=E.length,f;for(D=0;D<v;D++)switch(E[D].once&&this.removeListener(x,E[D].fn,void 0,!0),P){case 1:E[D].fn.call(E[D].context);break;case 2:E[D].fn.call(E[D].context,g);break;case 3:E[D].fn.call(E[D].context,g,m);break;case 4:E[D].fn.call(E[D].context,g,m,p);break;default:if(!L)for(f=1,L=new Array(P-1);f<P;f++)L[f-1]=arguments[f];E[D].fn.apply(E[D].context,L)}}return!0},i.prototype.on=function(x,g,m){return o(this,x,g,m,!1)},i.prototype.once=function(x,g,m){return o(this,x,g,m,!0)},i.prototype.removeListener=function(x,g,m,p){var y=e?e+x:x;if(!this._events[y])return this;if(!g)return r(this,y),this;var T=this._events[y];if(T.fn)T.fn===g&&(!p||T.once)&&(!m||T.context===m)&&r(this,y);else{for(var F=0,E=[],P=T.length;F<P;F++)(T[F].fn!==g||p&&!T[F].once||m&&T[F].context!==m)&&E.push(T[F]);E.length?this._events[y]=E.length===1?E[0]:E:r(this,y)}return this},i.prototype.removeAllListeners=function(x){var g;return x?(g=e?e+x:x,this._events[g]&&r(this,g)):(this._events=new s,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=e,i.EventEmitter=i,n.exports=i})(Yr);var Px=Yr.exports,eo=new WeakMap;const to=["error","warn","log","info"];let ao="warn";function Wr(n){if(ao&&to.indexOf(n)<=to.indexOf(ao)){for(var a=arguments.length,e=new Array(a>1?a-1:0),s=1;s<a;s++)e[s-1]=arguments[s];console[n](...e)}}function ya(n){return to.reduce((a,e)=>(a[e]=Wr.bind(console,e,n),a),{})}ya.level=n=>{ao=n};Wr.level=ya.level;const On=ya("quill:events"),Tx=["selectionchange","mousedown","mouseup","click"];Tx.forEach(n=>{document.addEventListener(n,function(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(l=>{const o=eo.get(l);o&&o.emitter&&o.emitter.handleDOM(...e)})})});class Te extends Px{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",On.error)}emit(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];return On.log.call(On,...e),super.emit(...e)}handleDOM(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),l=1;l<e;l++)s[l-1]=arguments[l];(this.domListeners[a.type]||[]).forEach(o=>{let{node:r,handler:i}=o;(a.target===r||r.contains(a.target))&&i(a,...s)})}listenDOM(a,e,s){this.domListeners[a]||(this.domListeners[a]=[]),this.domListeners[a].push({node:e,handler:s})}}const Mn=ya("quill:selection");class Ya{constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=a,this.length=e}}class Lx{constructor(a,e){this.emitter=e,this.scroll=a,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ya(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,Te.sources.USER),1)}),this.emitter.on(Te.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(Te.events.SCROLL_UPDATE,(l,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const r=o.some(i=>i.type==="characterData"||i.type==="childList"||i.type==="attributes"&&i.target===this.root);this.update(r?Te.sources.SILENT:l)}catch{}})}),this.emitter.on(Te.events.SCROLL_OPTIMIZE,(s,l)=>{if(l.range){const{startNode:o,startOffset:r,endNode:i,endOffset:c}=l.range;this.setNativeRange(o,r,i,c),this.update(Te.sources.SILENT)}}),this.update(Te.sources.SILENT)}handleComposition(){this.emitter.on(Te.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(Te.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const a=this.cursor.restore();if(!a)return;setTimeout(()=>{this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(Te.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(a,e){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(a,Ie.BLOCK))){if(s.start.node!==this.cursor.textNode){const l=this.scroll.find(s.start.node,!1);if(l==null)return;if(l instanceof kt){const o=l.split(s.start.offset);l.parent.insertBefore(this.cursor,o)}else l.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(a,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();a=Math.min(a,s-1),e=Math.min(a+e,s-1)-a;let l,[o,r]=this.scroll.leaf(a);if(o==null)return null;if(e>0&&r===o.length()){const[g]=this.scroll.leaf(a+1);if(g){const[m]=this.scroll.line(a),[p]=this.scroll.line(a+1);m===p&&(o=g,r=0)}}[l,r]=o.position(r,!0);const i=document.createRange();if(e>0)return i.setStart(l,r),[o,r]=this.scroll.leaf(a+e),o==null?null:([l,r]=o.position(r,!0),i.setEnd(l,r),i.getBoundingClientRect());let c="left",x;if(l instanceof Text){if(!l.data.length)return null;r<l.data.length?(i.setStart(l,r),i.setEnd(l,r+1)):(i.setStart(l,r-1),i.setEnd(l,r),c="right"),x=i.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;x=o.domNode.getBoundingClientRect(),r>0&&(c="right")}return{bottom:x.top+x.height,height:x.height,left:x[c],right:x[c],top:x.top,width:0}}getNativeRange(){const a=document.getSelection();if(a==null||a.rangeCount<=0)return null;const e=a.getRangeAt(0);if(e==null)return null;const s=this.normalizeNative(e);return Mn.info("getNativeRange",s),s}getRange(){const a=this.scroll.domNode;if("isConnected"in a&&!a.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Vn(this.root,document.activeElement)}normalizedToRange(a){const e=[[a.start.node,a.start.offset]];a.native.collapsed||e.push([a.end.node,a.end.offset]);const s=e.map(r=>{const[i,c]=r,x=this.scroll.find(i,!0),g=x.offset(this.scroll);return c===0?g:x instanceof kt?g+x.index(i,c):g+x.length()}),l=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(l,...s);return new Ya(o,l-o)}normalizeNative(a){if(!Vn(this.root,a.startContainer)||!a.collapsed&&!Vn(this.root,a.endContainer))return null;const e={start:{node:a.startContainer,offset:a.startOffset},end:{node:a.endContainer,offset:a.endOffset},native:a};return[e.start,e.end].forEach(s=>{let{node:l,offset:o}=s;for(;!(l instanceof Text)&&l.childNodes.length>0;)if(l.childNodes.length>o)l=l.childNodes[o],o=0;else if(l.childNodes.length===o)l=l.lastChild,l instanceof Text?o=l.data.length:l.childNodes.length>0?o=l.childNodes.length:o=l.childNodes.length+1;else break;s.node=l,s.offset=o}),e}rangeToNative(a){const e=this.scroll.length(),s=(l,o)=>{l=Math.min(e-1,l);const[r,i]=this.scroll.leaf(l);return r?r.position(i,o):[null,-1]};return[...s(a.index,!1),...s(a.index+a.length,!0)]}setNativeRange(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Mn.info("setNativeRange",a,e,s,l),a!=null&&(this.root.parentNode==null||a.parentNode==null||s.parentNode==null))return;const r=document.getSelection();if(r!=null)if(a!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:i}=this.getNativeRange()||{};if(i==null||o||a!==i.startContainer||e!==i.startOffset||s!==i.endContainer||l!==i.endOffset){a instanceof Element&&a.tagName==="BR"&&(e=Array.from(a.parentNode.childNodes).indexOf(a),a=a.parentNode),s instanceof Element&&s.tagName==="BR"&&(l=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const c=document.createRange();c.setStart(a,e),c.setEnd(s,l),r.removeAllRanges(),r.addRange(c)}}else r.removeAllRanges(),this.root.blur()}setRange(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;if(typeof e=="string"&&(s=e,e=!1),Mn.info("setRange",a),a!=null){const l=this.rangeToNative(a);this.setNativeRange(...l,e)}else this.setNativeRange(null);this.update(s)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const e=this.lastRange,[s,l]=this.getRange();if(this.lastRange=s,this.lastNative=l,this.lastRange!=null&&(this.savedRange=this.lastRange),!xo(e,this.lastRange)){if(!this.composing&&l!=null&&l.native.collapsed&&l.start.node!==this.cursor.textNode){const r=this.cursor.restore();r&&this.setNativeRange(r.startNode,r.startOffset,r.endNode,r.endOffset)}const o=[Te.events.SELECTION_CHANGE,ms(this.lastRange),ms(e),a];this.emitter.emit(Te.events.EDITOR_CHANGE,...o),a!==Te.sources.SILENT&&this.emitter.emit(...o)}}}function Vn(n,a){try{a.parentNode}catch{return!1}return n.contains(a)}const Sx=/^[ -~]*$/;class Ix{constructor(a){this.scroll=a,this.delta=this.getDelta()}applyDelta(a){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const s=Qo(a),l=new Se;return Nx(s.ops.slice()).reduce((r,i)=>{const c=Nt.exports.Op.length(i);let x=i.attributes||{},g=!1,m=!1;if(i.insert!=null){if(l.retain(c),typeof i.insert=="string"){const T=i.insert;m=!T.endsWith(`
`)&&(e<=r||!!this.scroll.descendant(Yt,r)[0]),this.scroll.insertAt(r,T);const[F,E]=this.scroll.line(r);let P=wa({},zt(F));if(F instanceof yt){const[L]=F.descendant(kt,E);L&&(P=wa(P,zt(L)))}x=Nt.exports.AttributeMap.diff(P,x)||{}}else if(typeof i.insert=="object"){const T=Object.keys(i.insert)[0];if(T==null)return r;const F=this.scroll.query(T,Ie.INLINE)!=null;if(F)(e<=r||!!this.scroll.descendant(Yt,r)[0])&&(m=!0);else if(r>0){const[E,P]=this.scroll.descendant(kt,r-1);E instanceof aa?E.value()[P]!==`
`&&(g=!0):E instanceof Rt&&E.statics.scope===Ie.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(r,T,i.insert[T]),F){const[E]=this.scroll.descendant(kt,r);if(E){const P=wa({},zt(E));x=Nt.exports.AttributeMap.diff(P,x)||{}}}}e+=c}else if(l.push(i),i.retain!==null&&typeof i.retain=="object"){const T=Object.keys(i.retain)[0];if(T==null)return r;this.scroll.updateEmbedAt(r,T,i.retain[T])}Object.keys(x).forEach(T=>{this.scroll.formatAt(r,c,T,x[T])});const p=g?1:0,y=m?1:0;return e+=p+y,l.retain(p),l.delete(y),r+c+p+y},0),l.reduce((r,i)=>typeof i.delete=="number"?(this.scroll.deleteAt(r,i.delete),r):r+Nt.exports.Op.length(i),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(a,e){return this.scroll.deleteAt(a,e),this.update(new Se().retain(a).delete(e))}formatLine(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(a,Math.max(e,1)).forEach(r=>{r.format(o,s[o])})}),this.scroll.optimize();const l=new Se().retain(a).retain(e,ms(s));return this.update(l)}formatText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(a,e,o,s[o])});const l=new Se().retain(a).retain(e,ms(s));return this.update(l)}getContents(a,e){return this.delta.slice(a,a+e)}getDelta(){return this.scroll.lines().reduce((a,e)=>a.concat(e.delta()),new Se)}getFormat(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],l=[];e===0?this.scroll.path(a).forEach(i=>{const[c]=i;c instanceof yt?s.push(c):c instanceof kt&&l.push(c)}):(s=this.scroll.lines(a,e),l=this.scroll.descendants(kt,a,e));const[o,r]=[s,l].map(i=>{const c=i.shift();if(c==null)return{};let x=zt(c);for(;Object.keys(x).length>0;){const g=i.shift();if(g==null)return x;x=$x(zt(g),x)}return x});return{...o,...r}}getHTML(a,e){const[s,l]=this.scroll.line(a);if(s){const o=s.length();return s.length()>=l+e&&!(l===0&&e===o)?Ws(s,l,e,!0):Ws(this.scroll,a,e,!0)}return""}getText(a,e){return this.getContents(a,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(a,e){const s=Qo(e),l=new Se().retain(a).concat(s);return this.scroll.insertContents(a,s),this.update(l)}insertEmbed(a,e,s){return this.scroll.insertAt(a,e,s),this.update(new Se().retain(a).insert({[e]:s}))}insertText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(a,e),Object.keys(s).forEach(l=>{this.scroll.formatAt(a,e.length,l,s[l])}),this.update(new Se().retain(a).insert(e,ms(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const a=this.scroll.children.head;if(a?.statics.blotName!==yt.blotName)return!1;const e=a;return e.children.length>1?!1:e.children.head instanceof la}removeFormat(a,e){const s=this.getText(a,e),[l,o]=this.scroll.line(a+e);let r=0,i=new Se;l!=null&&(r=l.length()-o,i=l.delta().slice(o,o+r-1).insert(`
`));const x=this.getContents(a,e+r).diff(new Se().insert(s).concat(i)),g=new Se().retain(a).concat(x);return this.applyDelta(g)}update(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const l=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(Sx)&&this.scroll.find(e[0].target)){const o=this.scroll.find(e[0].target),r=zt(o),i=o.offset(this.scroll),c=e[0].oldValue.replace(Jt.CONTENTS,""),x=new Se().insert(c),g=new Se().insert(o.value()),m=s&&{oldRange:Ko(s.oldRange,-i),newRange:Ko(s.newRange,-i)};a=new Se().retain(i).concat(x.diff(g,m)).reduce((y,T)=>T.insert?y.insert(T.insert,r):y.push(T),new Se),this.delta=l.compose(a)}else this.delta=this.getDelta(),(!a||!xo(l.compose(a),this.delta))&&(a=l.diff(this.delta,s));return a}}function us(n,a,e){if(n.length===0){const[y]=Rn(e.pop());return a<=0?`</li></${y}>`:`</li></${y}>${us([],a-1,e)}`}const[{child:s,offset:l,length:o,indent:r,type:i},...c]=n,[x,g]=Rn(i);if(r>a)return e.push(i),r===a+1?`<${x}><li${g}>${Ws(s,l,o)}${us(c,r,e)}`:`<${x}><li>${us(n,a+1,e)}`;const m=e[e.length-1];if(r===a&&i===m)return`</li><li${g}>${Ws(s,l,o)}${us(c,r,e)}`;const[p]=Rn(e.pop());return`</li></${p}>${us(n,a-1,e)}`}function Ws(n,a,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(a,e);if(n instanceof aa)return Yl(n.value().slice(a,a+e)).replaceAll(" ","&nbsp;");if(n instanceof ta){if(n.statics.blotName==="list-container"){const x=[];return n.children.forEachAt(a,e,(g,m,p)=>{const y="formats"in g&&typeof g.formats=="function"?g.formats():{};x.push({child:g,offset:m,length:p,indent:y.indent||0,type:y.list})}),us(x,-1,[])}const l=[];if(n.children.forEachAt(a,e,(x,g,m)=>{l.push(Ws(x,g,m))}),s||n.statics.blotName==="list")return l.join("");const{outerHTML:o,innerHTML:r}=n.domNode,[i,c]=o.split(`>${r}<`);return i==="<table"?`<table style="border: 1px solid #000;">${l.join("")}<${c}`:`${i}>${l.join("")}<${c}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function $x(n,a){return Object.keys(a).reduce((e,s)=>{if(n[s]==null)return e;const l=a[s];return l===n[s]?e[s]=l:Array.isArray(l)?l.indexOf(n[s])<0?e[s]=l.concat([n[s]]):e[s]=l:e[s]=[l,n[s]],e},{})}function Rn(n){const a=n==="ordered"?"ol":"ul";switch(n){case"checked":return[a,' data-list="checked"'];case"unchecked":return[a,' data-list="unchecked"'];default:return[a,""]}}function Qo(n){return n.reduce((a,e)=>{if(typeof e.insert=="string"){const s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return a.insert(s,e.attributes)}return a.push(e)},new Se)}function Ko(n,a){let{index:e,length:s}=n;return new Ya(e+a,s)}function Nx(n){const a=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((l,o)=>{o&&a.push({insert:`
`,attributes:e.attributes}),l&&a.push({insert:l,attributes:e.attributes})}):a.push(e)}),a}class xa{static DEFAULTS={};constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=a,this.options=e}}const hl="\uFEFF";class Bo extends Rt{constructor(a,e){super(a,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(hl),this.rightGuard=document.createTextNode(hl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(a,e){return a===this.leftGuard?0:a===this.rightGuard?1:super.index(a,e)}restore(a){let e=null,s;const l=a.data.split(hl).join("");if(a===this.leftGuard)if(this.prev instanceof aa){const o=this.prev.length();this.prev.insertAt(o,l),e={startNode:this.prev.domNode,startOffset:o+l.length}}else s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:l.length};else a===this.rightGuard&&(this.next instanceof aa?(this.next.insertAt(0,l),e={startNode:this.next.domNode,startOffset:l.length}):(s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:l.length}));return a.data=hl,e}update(a,e){a.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const l=this.restore(s.target);l&&(e.range=l)}})}}class Ox{isComposing=!1;constructor(a,e){this.scroll=a,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",a=>{this.isComposing||this.handleCompositionStart(a)}),this.scroll.domNode.addEventListener("compositionend",a=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(a)})})}handleCompositionStart(a){const e=a.target instanceof Node?this.scroll.find(a.target,!0):null;e&&!(e instanceof Bo)&&(this.emitter.emit(Te.events.COMPOSITION_BEFORE_START,a),this.scroll.batchStart(),this.emitter.emit(Te.events.COMPOSITION_START,a),this.isComposing=!0)}handleCompositionEnd(a){this.emitter.emit(Te.events.COMPOSITION_BEFORE_END,a),this.scroll.batchEnd(),this.emitter.emit(Te.events.COMPOSITION_END,a),this.isComposing=!1}}class Bs{static DEFAULTS={modules:{}};static themes={default:Bs};modules={};constructor(a,e){this.quill=a,this.options=e}init(){Object.keys(this.options.modules).forEach(a=>{this.modules[a]==null&&this.addModule(a)})}addModule(a){const e=this.quill.constructor.import(`modules/${a}`);return this.modules[a]=new e(this.quill,this.options.modules[a]||{}),this.modules[a]}}const Mx=n=>n.parentElement||n.getRootNode().host||null,Vx=n=>{const a=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(a.width)/n.offsetWidth||1,s="offsetHeight"in n&&Math.abs(a.height)/n.offsetHeight||1;return{top:a.top,right:a.left+n.clientWidth*e,bottom:a.top+n.clientHeight*s,left:a.left}},vl=n=>{const a=parseInt(n,10);return Number.isNaN(a)?0:a},er=(n,a,e,s,l,o)=>n<e&&a>s?0:n<e?-(e-n+l):a>s?a-n>s-e?n+l-e:a-s+o:0,Rx=(n,a)=>{const e=n.ownerDocument;let s=a,l=n;for(;l;){const o=l===e.body,r=o?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:Vx(l),i=getComputedStyle(l),c=er(s.left,s.right,r.left,r.right,vl(i.scrollPaddingLeft),vl(i.scrollPaddingRight)),x=er(s.top,s.bottom,r.top,r.bottom,vl(i.scrollPaddingTop),vl(i.scrollPaddingBottom));if(c||x)if(o)e.defaultView?.scrollBy(c,x);else{const{scrollLeft:g,scrollTop:m}=l;x&&(l.scrollTop+=x),c&&(l.scrollLeft+=c);const p=l.scrollLeft-g,y=l.scrollTop-m;s={left:s.left-p,top:s.top-y,right:s.right-p,bottom:s.bottom-y}}l=o||i.position==="fixed"?null:Mx(l)}},qx=100,Ux=["block","break","cursor","inline","scroll","text"],zx=(n,a,e)=>{const s=new Es;return Ux.forEach(l=>{const o=a.query(l);o&&s.register(o)}),n.forEach(l=>{let o=a.query(l);o||e.error(`Cannot register "${l}" specified in "formats" config. Are you sure it was registered?`);let r=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,r+=1,r>qx){e.error(`Cycle detected in registering blot requiredContainer: "${l}"`);break}}),s},fs=ya("quill"),El=new Es;ta.uiClass="ql-ui";class ge{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:El,theme:"default"};static events=Te.events;static sources=Te.sources;static version="2.0.3";static imports={delta:Se,parchment:fx,"core/module":xa,"core/theme":Bs};static debug(a){a===!0&&(a="log"),ya.level(a)}static find(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return eo.get(a)||El.find(a,e)}static import(a){return this.imports[a]==null&&fs.error(`Cannot import ${a}. Are you sure it was registered?`),this.imports[a]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const a=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in a?a.attrName:a.blotName;typeof s=="string"?this.register(`formats/${s}`,a,e):Object.keys(a).forEach(l=>{this.register(l,a[l],e)})}else{const a=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[a]!=null&&!s&&fs.warn(`Overwriting ${a} with`,e),this.imports[a]=e,(a.startsWith("blots/")||a.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&El.register(e),typeof e.register=="function"&&e.register(El)}}constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=jx(a,e),this.container=this.options.container,this.container==null){fs.error("Invalid Quill container",a);return}this.options.debug&&ge.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",eo.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new Te;const l=Eo.blotName,o=this.options.registry.query(l);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${l}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Ix(this.scroll),this.selection=new Lx(this.scroll,this.emitter),this.composition=new Ox(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(Te.events.EDITOR_CHANGE,r=>{r===Te.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(Te.events.SCROLL_UPDATE,(r,i)=>{const c=this.selection.lastRange,[x]=this.selection.getRange(),g=c&&x?{oldRange:c,newRange:x}:void 0;Zt.call(this,()=>this.editor.update(null,i,g),r)}),this.emitter.on(Te.events.SCROLL_EMBED_UPDATE,(r,i)=>{const c=this.selection.lastRange,[x]=this.selection.getRange(),g=c&&x?{oldRange:c,newRange:x}:void 0;Zt.call(this,()=>{const m=new Se().retain(r.offset(this)).retain({[r.statics.blotName]:i});return this.editor.update(m,[],g)},ge.sources.USER)}),s){const r=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(r)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof a=="string"){const s=a;a=document.createElement("div"),a.classList.add(s)}return this.container.insertBefore(a,e),a}blur(){this.selection.setRange(null)}deleteText(a,e,s){return[a,e,,s]=fa(a,e,s),Zt.call(this,()=>this.editor.deleteText(a,e),s,a,-1*e)}disable(){this.enable(!1)}editReadOnly(a){this.allowReadOnlyEdits=!0;const e=a();return this.allowReadOnlyEdits=!1,e}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(a),this.container.classList.toggle("ql-disabled",!a)}focus(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),a.preventScroll||this.scrollSelectionIntoView()}format(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Te.sources.API;return Zt.call(this,()=>{const l=this.getSelection(!0);let o=new Se;if(l==null)return o;if(this.scroll.query(a,Ie.BLOCK))o=this.editor.formatLine(l.index,l.length,{[a]:e});else{if(l.length===0)return this.selection.format(a,e),o;o=this.editor.formatText(l.index,l.length,{[a]:e})}return this.setSelection(l,Te.sources.SILENT),o},s)}formatLine(a,e,s,l,o){let r;return[a,e,r,o]=fa(a,e,s,l,o),Zt.call(this,()=>this.editor.formatLine(a,e,r),o,a,0)}formatText(a,e,s,l,o){let r;return[a,e,r,o]=fa(a,e,s,l,o),Zt.call(this,()=>this.editor.formatText(a,e,r),o,a,0)}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof a=="number"?s=this.selection.getBounds(a,e):s=this.selection.getBounds(a.index,a.length),!s)return null;const l=this.container.getBoundingClientRect();return{bottom:s.bottom-l.top,height:s.height,left:s.left-l.left,right:s.right-l.left,top:s.top-l.top,width:s.width}}getContents(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-a;return[a,e]=fa(a,e),this.editor.getContents(a,e)}getFormat(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof a=="number"?this.editor.getFormat(a,e):this.editor.getFormat(a.index,a.length)}getIndex(a){return a.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(a){return this.scroll.leaf(a)}getLine(a){return this.scroll.line(a)}getLines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof a!="number"?this.scroll.lines(a.index,a.length):this.scroll.lines(a,e)}getModule(a){return this.theme.modules[a]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getHTML(a,e)}getText(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getText(a,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(a,e,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:ge.sources.API;return Zt.call(this,()=>this.editor.insertEmbed(a,e,s),l,a)}insertText(a,e,s,l,o){let r;return[a,,r,o]=fa(a,0,s,l,o),Zt.call(this,()=>this.editor.insertText(a,e,r),o,a,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(a,e,s){return[a,e,,s]=fa(a,e,s),Zt.call(this,()=>this.editor.removeFormat(a,e),s,a)}scrollRectIntoView(a){Rx(this.root,a)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const a=this.selection.lastRange,e=a&&this.selection.getBounds(a.index,a.length);e&&this.scrollRectIntoView(e)}setContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Zt.call(this,()=>{a=new Se(a);const s=this.getLength(),l=this.editor.deleteText(0,s),o=this.editor.insertContents(0,a),r=this.editor.deleteText(this.getLength()-1,1);return l.compose(o).compose(r)},e)}setSelection(a,e,s){a==null?this.selection.setRange(null,e||ge.sources.API):([a,e,,s]=fa(a,e,s),this.selection.setRange(new Ya(Math.max(0,a),e),s),s!==Te.sources.SILENT&&this.scrollSelectionIntoView())}setText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;const s=new Se().insert(a);return this.setContents(s,e)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Te.sources.USER;const e=this.scroll.update(a);return this.selection.update(a),e}updateContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te.sources.API;return Zt.call(this,()=>(a=new Se(a),this.editor.applyDelta(a)),e,!0)}}function tr(n){return typeof n=="string"?document.querySelector(n):n}function qn(n){return Object.entries(n??{}).reduce((a,e)=>{let[s,l]=e;return{...a,[s]:l===!0?{}:l}},{})}function ar(n){return Object.fromEntries(Object.entries(n).filter(a=>a[1]!==void 0))}function jx(n,a){const e=tr(n);if(!e)throw new Error("Invalid Quill container");const l=!a.theme||a.theme===ge.DEFAULTS.theme?Bs:ge.import(`themes/${a.theme}`);if(!l)throw new Error(`Invalid theme ${a.theme}. Did you register it?`);const{modules:o,...r}=ge.DEFAULTS,{modules:i,...c}=l.DEFAULTS;let x=qn(a.modules);x!=null&&x.toolbar&&x.toolbar.constructor!==Object&&(x={...x,toolbar:{container:x.toolbar}});const g=wa({},qn(o),qn(i),x),m={...r,...ar(c),...ar(a)};let p=a.registry;return p?a.formats&&fs.warn('Ignoring "formats" option because "registry" is specified'):p=a.formats?zx(a.formats,m.registry,fs):m.registry,{...m,registry:p,container:e,theme:l,modules:Object.entries(g).reduce((y,T)=>{let[F,E]=T;if(!E)return y;const P=ge.import(`modules/${F}`);return P==null?(fs.error(`Cannot load ${F} module. Are you sure you registered it?`),y):{...y,[F]:wa({},P.DEFAULTS||{},E)}},{}),bounds:tr(m.bounds)}}function Zt(n,a,e,s){if(!this.isEnabled()&&a===Te.sources.USER&&!this.allowReadOnlyEdits)return new Se;let l=e==null?null:this.getSelection();const o=this.editor.delta,r=n();if(l!=null&&(e===!0&&(e=l.index),s==null?l=sr(l,r,a):s!==0&&(l=sr(l,e,s,a)),this.setSelection(l,Te.sources.SILENT)),r.length()>0){const i=[Te.events.TEXT_CHANGE,r,o,a];this.emitter.emit(Te.events.EDITOR_CHANGE,...i),a!==Te.sources.SILENT&&this.emitter.emit(...i)}return r}function fa(n,a,e,s,l){let o={};return typeof n.index=="number"&&typeof n.length=="number"?typeof a!="number"?(l=s,s=e,e=a,a=n.length,n=n.index):(a=n.length,n=n.index):typeof a!="number"&&(l=s,s=e,e=a,a=0),typeof e=="object"?(o=e,l=s):typeof e=="string"&&(s!=null?o[e]=s:l=e),l=l||Te.sources.API,[n,a,o,l]}function sr(n,a,e,s){const l=typeof e=="number"?e:0;if(n==null)return null;let o,r;return a&&typeof a.transformPosition=="function"?[o,r]=[n.index,n.index+n.length].map(i=>a.transformPosition(i,s!==Te.sources.USER)):[o,r]=[n.index,n.index+n.length].map(i=>i<a||i===a&&s===Te.sources.USER?i:l>=0?i+l:Math.max(a,i+l)),new Ya(o,r-o)}class Za extends ql{}function lr(n){return n instanceof yt||n instanceof Yt}function nr(n){return typeof n.updateContent=="function"}class Yx extends Eo{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=yt;static allowedChildren=[yt,Yt,Za];constructor(a,e,s){let{emitter:l}=s;super(a,e),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const a=this.batch;this.batch=!1,this.update(a)}emitMount(a){this.emitter.emit(Te.events.SCROLL_BLOT_MOUNT,a)}emitUnmount(a){this.emitter.emit(Te.events.SCROLL_BLOT_UNMOUNT,a)}emitEmbedUpdate(a,e){this.emitter.emit(Te.events.SCROLL_EMBED_UPDATE,a,e)}deleteAt(a,e){const[s,l]=this.line(a),[o]=this.line(a+e);if(super.deleteAt(a,e),o!=null&&s!==o&&l>0){if(s instanceof Yt||o instanceof Yt){this.optimize();return}const r=o.children.head instanceof la?null:o.children.head;s.moveChildren(o,r),s.remove()}this.optimize()}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",a?"true":"false")}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.optimize()}insertAt(a,e,s){if(a>=this.length())if(s==null||this.scroll.query(e,Ie.BLOCK)==null){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),s==null&&e.endsWith(`
`)?l.insertAt(0,e.slice(0,-1),s):l.insertAt(0,e,s)}else{const l=this.scroll.create(e,s);this.appendChild(l)}else super.insertAt(a,e,s);this.optimize()}insertBefore(a,e){if(a.statics.scope===Ie.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(a),super.insertBefore(s,e)}else super.insertBefore(a,e)}insertContents(a,e){const s=this.deltaToRenderBlocks(e.concat(new Se().insert(`
`))),l=s.pop();if(l==null)return;this.batchStart();const o=s.shift();if(o){const c=o.type==="block"&&(o.delta.length()===0||!this.descendant(Yt,a)[0]&&a<this.length()),x=o.type==="block"?o.delta:new Se().insert({[o.key]:o.value});Un(this,a,x);const g=o.type==="block"?1:0,m=a+x.length()+g;c&&this.insertAt(m-1,`
`);const p=zt(this.line(a)[0]),y=Nt.exports.AttributeMap.diff(p,o.attributes)||{};Object.keys(y).forEach(T=>{this.formatAt(m-1,1,T,y[T])}),a=m}let[r,i]=this.children.find(a);if(s.length&&(r&&(r=r.split(i),i=0),s.forEach(c=>{if(c.type==="block"){const x=this.createBlock(c.attributes,r||void 0);Un(x,0,c.delta)}else{const x=this.create(c.key,c.value);this.insertBefore(x,r||void 0),Object.keys(c.attributes).forEach(g=>{x.format(g,c.attributes[g])})}})),l.type==="block"&&l.delta.length()){const c=r?r.offset(r.scroll)+i:this.length();Un(this,c,l.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(a){const e=this.path(a).pop();if(!e)return[null,-1];const[s,l]=e;return s instanceof kt?[s,l]:[null,-1]}line(a){return a===this.length()?this.line(a-1):this.descendant(lr,a)}lines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(l,o,r)=>{let i=[],c=r;return l.children.forEachAt(o,r,(x,g,m)=>{lr(x)?i.push(x):x instanceof ql&&(i=i.concat(s(x,g,c))),c-=m}),i};return s(this,a,e)}optimize(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(a,e),a.length>0&&this.emitter.emit(Te.events.SCROLL_OPTIMIZE,a,e))}path(a){return super.path(a).slice(1)}remove(){}update(a){if(this.batch){Array.isArray(a)&&(this.batch=this.batch.concat(a));return}let e=Te.sources.USER;typeof a=="string"&&(e=a),Array.isArray(a)||(a=this.observer.takeRecords()),a=a.filter(s=>{let{target:l}=s;const o=this.find(l,!0);return o&&!nr(o)}),a.length>0&&this.emitter.emit(Te.events.SCROLL_BEFORE_UPDATE,e,a),super.update(a.concat([])),a.length>0&&this.emitter.emit(Te.events.SCROLL_UPDATE,e,a)}updateEmbedAt(a,e,s){const[l]=this.descendant(o=>o instanceof Yt,a);l&&l.statics.blotName===e&&nr(l)&&l.updateContent(s)}handleDragStart(a){a.preventDefault()}deltaToRenderBlocks(a){const e=[];let s=new Se;return a.forEach(l=>{const o=l?.insert;if(!!o)if(typeof o=="string"){const r=o.split(`
`);r.slice(0,-1).forEach(c=>{s.insert(c,l.attributes),e.push({type:"block",delta:s,attributes:l.attributes??{}}),s=new Se});const i=r[r.length-1];i&&s.insert(i,l.attributes)}else{const r=Object.keys(o)[0];if(!r)return;this.query(r,Ie.INLINE)?s.push(l):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new Se,e.push({type:"blockEmbed",key:r,value:o[r],attributes:l.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(a,e){let s;const l={};Object.entries(a).forEach(i=>{let[c,x]=i;this.query(c,Ie.BLOCK&Ie.BLOT)!=null?s=c:l[c]=x});const o=this.create(s||this.statics.defaultChild.blotName,s?a[s]:void 0);this.insertBefore(o,e||void 0);const r=o.length();return Object.entries(l).forEach(i=>{let[c,x]=i;o.formatAt(0,r,c,x)}),o}}function Un(n,a,e){e.reduce((s,l)=>{const o=Nt.exports.Op.length(l);let r=l.attributes||{};if(l.insert!=null){if(typeof l.insert=="string"){const i=l.insert;n.insertAt(s,i);const[c]=n.descendant(kt,s),x=zt(c);r=Nt.exports.AttributeMap.diff(x,r)||{}}else if(typeof l.insert=="object"){const i=Object.keys(l.insert)[0];if(i==null)return s;if(n.insertAt(s,i,l.insert[i]),n.scroll.query(i,Ie.INLINE)!=null){const[x]=n.descendant(kt,s),g=zt(x);r=Nt.exports.AttributeMap.diff(g,r)||{}}}}return Object.keys(r).forEach(i=>{n.formatAt(s,o,i,r[i])}),s+o},a)}const Ao={scope:Ie.BLOCK,whitelist:["right","center","justify"]},Wx=new ca("align","align",Ao),Hr=new sa("align","ql-align",Ao),Gr=new Ia("align","text-align",Ao);class Zr extends Ia{value(a){let e=super.value(a);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(l=>`00${parseInt(l,10).toString(16)}`.slice(-2)).join("")}`):e}}const Hx=new sa("color","ql-color",{scope:Ie.INLINE}),Fo=new Zr("color","color",{scope:Ie.INLINE}),Gx=new sa("background","ql-bg",{scope:Ie.INLINE}),ko=new Zr("background","background-color",{scope:Ie.INLINE});class Ja extends Za{static create(a){const e=super.create(a);return e.setAttribute("spellcheck","false"),e}code(a,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(a,a+e)}html(a,e){return`<pre>
${Yl(this.code(a,e))}
</pre>`}}class Lt extends yt{static TAB="  ";static register(){ge.register(Ja)}}class Do extends Pt{}Do.blotName="code";Do.tagName="CODE";Lt.blotName="code-block";Lt.className="ql-code-block";Lt.tagName="DIV";Ja.blotName="code-block-container";Ja.className="ql-code-block-container";Ja.tagName="DIV";Ja.allowedChildren=[Lt];Lt.allowedChildren=[aa,la,Jt];Lt.requiredContainer=Ja;const wo={scope:Ie.BLOCK,whitelist:["rtl"]},Jr=new ca("direction","dir",wo),Xr=new sa("direction","ql-direction",wo),Qr=new Ia("direction","direction",wo),Kr={scope:Ie.INLINE,whitelist:["serif","monospace"]},ei=new sa("font","ql-font",Kr);class Zx extends Ia{value(a){return super.value(a).replace(/["']/g,"")}}const ti=new Zx("font","font-family",Kr),ai=new sa("size","ql-size",{scope:Ie.INLINE,whitelist:["small","large","huge"]}),si=new Ia("size","font-size",{scope:Ie.INLINE,whitelist:["10px","18px","32px"]}),Jx=ya("quill:keyboard"),Xx=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Wl extends xa{static match(a,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==a[s]&&e[s]!==null)?!1:e.key===a.key||e.key===a.which}constructor(a,e){super(a,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=Kx(a);if(l==null){Jx.warn("Attempted to add invalid keyboard binding",l);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(l.key)?l.key:[l.key]).forEach(r=>{const i={...l,key:r,...e,...s};this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)})}listen(){this.quill.root.addEventListener("keydown",a=>{if(a.defaultPrevented||a.isComposing||a.keyCode===229&&(a.key==="Enter"||a.key==="Backspace"))return;const l=(this.bindings[a.key]||[]).concat(this.bindings[a.which]||[]).filter(P=>Wl.match(a,P));if(l.length===0)return;const o=ge.find(a.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const r=this.quill.getSelection();if(r==null||!this.quill.hasFocus())return;const[i,c]=this.quill.getLine(r.index),[x,g]=this.quill.getLeaf(r.index),[m,p]=r.length===0?[x,g]:this.quill.getLeaf(r.index+r.length),y=x instanceof Pl?x.value().slice(0,g):"",T=m instanceof Pl?m.value().slice(p):"",F={collapsed:r.length===0,empty:r.length===0&&i.length()<=1,format:this.quill.getFormat(r),line:i,offset:c,prefix:y,suffix:T,event:a};l.some(P=>{if(P.collapsed!=null&&P.collapsed!==F.collapsed||P.empty!=null&&P.empty!==F.empty||P.offset!=null&&P.offset!==F.offset)return!1;if(Array.isArray(P.format)){if(P.format.every(L=>F.format[L]==null))return!1}else if(typeof P.format=="object"&&!Object.keys(P.format).every(L=>P.format[L]===!0?F.format[L]!=null:P.format[L]===!1?F.format[L]==null:xo(P.format[L],F.format[L])))return!1;return P.prefix!=null&&!P.prefix.test(F.prefix)||P.suffix!=null&&!P.suffix.test(F.suffix)?!1:P.handler.call(this,r,F,P)!==!0})&&a.preventDefault()})}handleBackspace(a,e){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(a.index===0||this.quill.getLength()<=1)return;let l={};const[o]=this.quill.getLine(a.index);let r=new Se().retain(a.index-s).delete(s);if(e.offset===0){const[i]=this.quill.getLine(a.index-1);if(i&&!(i.statics.blotName==="block"&&i.length()<=1)){const x=o.formats(),g=this.quill.getFormat(a.index-1,1);if(l=Nt.exports.AttributeMap.diff(x,g)||{},Object.keys(l).length>0){const m=new Se().retain(a.index+o.length()-2).retain(1,l);r=r.compose(m)}}}this.quill.updateContents(r,ge.sources.USER),this.quill.focus()}handleDelete(a,e){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(a.index>=this.quill.getLength()-s)return;let l={};const[o]=this.quill.getLine(a.index);let r=new Se().retain(a.index).delete(s);if(e.offset>=o.length()-1){const[i]=this.quill.getLine(a.index+1);if(i){const c=o.formats(),x=this.quill.getFormat(a.index,1);l=Nt.exports.AttributeMap.diff(c,x)||{},Object.keys(l).length>0&&(r=r.retain(i.length()-1).retain(1,l))}}this.quill.updateContents(r,ge.sources.USER),this.quill.focus()}handleDeleteRange(a){Po({range:a,quill:this.quill}),this.quill.focus()}handleEnter(a,e){const s=Object.keys(e.format).reduce((o,r)=>(this.quill.scroll.query(r,Ie.BLOCK)&&!Array.isArray(e.format[r])&&(o[r]=e.format[r]),o),{}),l=new Se().retain(a.index).delete(a.length).insert(`
`,s);this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(a.index+1,ge.sources.SILENT),this.quill.focus()}}const Qx={bindings:{bold:zn("bold"),italic:zn("italic"),underline:zn("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","+1",ge.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","-1",ge.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,a){a.format.indent!=null?this.quill.format("indent","-1",ge.sources.USER):a.format.list!=null&&this.quill.format("list",!1,ge.sources.USER)}},"indent code-block":or(!0),"outdent code-block":or(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,ge.sources.USER)}},tab:{key:"Tab",handler(n,a){if(a.format.table)return!0;this.quill.history.cutoff();const e=new Se().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,ge.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,ge.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,a){const e={list:!1};a.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,ge.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[a,e]=this.quill.getLine(n.index),s={...a.formats(),list:"checked"},l=new Se().retain(n.index).insert(`
`,s).retain(a.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(n.index+1,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,a){const[e,s]=this.quill.getLine(n.index),l=new Se().retain(n.index).insert(`
`,a.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(n.index+1,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const a=this.quill.getModule("table");if(a){const[e,s,l,o]=a.getTable(n),r=eu(e,s,l,o);if(r==null)return;let i=e.offset();if(r<0){const c=new Se().retain(i).insert(`
`);this.quill.updateContents(c,ge.sources.USER),this.quill.setSelection(n.index+1,n.length,ge.sources.SILENT)}else if(r>0){i+=e.length();const c=new Se().retain(i).insert(`
`);this.quill.updateContents(c,ge.sources.USER),this.quill.setSelection(i,ge.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,a){const{event:e,line:s}=a,l=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(l-1,ge.sources.USER):this.quill.setSelection(l+s.length(),ge.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,a){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=a.prefix,[s,l]=this.quill.getLine(n.index);if(l>e)return!0;let o;switch(a.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(n.index," ",ge.sources.USER),this.quill.history.cutoff();const r=new Se().retain(n.index-l).delete(e+1).retain(s.length()-2-l).retain(1,{list:o});return this.quill.updateContents(r,ge.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,ge.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[a,e]=this.quill.getLine(n.index);let s=2,l=a;for(;l!=null&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,s-=1,s<=0){const o=new Se().retain(n.index+a.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,ge.sources.USER),this.quill.setSelection(n.index-1,ge.sources.SILENT),!1}return!0}},"embed left":_l("ArrowLeft",!1),"embed left shift":_l("ArrowLeft",!0),"embed right":_l("ArrowRight",!1),"embed right shift":_l("ArrowRight",!0),"table down":rr(!1),"table up":rr(!0)}};Wl.DEFAULTS=Qx;function or(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(a,e){let{event:s}=e;const l=this.quill.scroll.query("code-block"),{TAB:o}=l;if(a.length===0&&!s.shiftKey){this.quill.insertText(a.index,o,ge.sources.USER),this.quill.setSelection(a.index+o.length,ge.sources.SILENT);return}const r=a.length===0?this.quill.getLines(a.index,1):this.quill.getLines(a);let{index:i,length:c}=a;r.forEach((x,g)=>{n?(x.insertAt(0,o),g===0?i+=o.length:c+=o.length):x.domNode.textContent.startsWith(o)&&(x.deleteAt(0,o.length),g===0?i-=o.length:c-=o.length)}),this.quill.update(ge.sources.USER),this.quill.setSelection(i,c,ge.sources.SILENT)}}}function _l(n,a){return{key:n,shiftKey:a,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:l}=s;n==="ArrowRight"&&(l+=s.length+1);const[o]=this.quill.getLeaf(l);return o instanceof Rt?(n==="ArrowLeft"?a?this.quill.setSelection(s.index-1,s.length+1,ge.sources.USER):this.quill.setSelection(s.index-1,ge.sources.USER):a?this.quill.setSelection(s.index,s.length+1,ge.sources.USER):this.quill.setSelection(s.index+s.length+1,ge.sources.USER),!1):!0}}}function zn(n){return{key:n[0],shortKey:!0,handler(a,e){this.quill.format(n,!e.format[n],ge.sources.USER)}}}function rr(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(a,e){const s=n?"prev":"next",l=e.line,o=l.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let r=o.children.head,i=l;for(;i.prev!=null;)i=i.prev,r=r.next;const c=r.offset(this.quill.scroll)+Math.min(e.offset,r.length()-1);this.quill.setSelection(c,0,ge.sources.USER)}}else{const r=l.table()[s];r!=null&&(n?this.quill.setSelection(r.offset(this.quill.scroll)+r.length()-1,0,ge.sources.USER):this.quill.setSelection(r.offset(this.quill.scroll),0,ge.sources.USER))}return!1}}}function Kx(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=ms(n);else return null;return n.shortKey&&(n[Xx]=n.shortKey,delete n.shortKey),n}function Po(n){let{quill:a,range:e}=n;const s=a.getLines(e);let l={};if(s.length>1){const o=s[0].formats(),r=s[s.length-1].formats();l=Nt.exports.AttributeMap.diff(r,o)||{}}a.deleteText(e,ge.sources.USER),Object.keys(l).length>0&&a.formatLine(e.index,1,l,ge.sources.USER),a.setSelection(e.index,ge.sources.SILENT)}function eu(n,a,e,s){return a.prev==null&&a.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:a.prev==null?-1:a.next==null?1:null}const tu=/font-weight:\s*normal/,au=["P","OL","UL"],ir=n=>n&&au.includes(n.tagName),su=n=>{Array.from(n.querySelectorAll("br")).filter(a=>ir(a.previousElementSibling)&&ir(a.nextElementSibling)).forEach(a=>{a.parentNode?.removeChild(a)})},lu=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(a=>a.getAttribute("style")?.match(tu)).forEach(a=>{const e=n.createDocumentFragment();e.append(...a.childNodes),a.parentNode?.replaceChild(e,a)})};function nu(n){n.querySelector('[id^="docs-internal-guid-"]')&&(lu(n),su(n))}const ou=/\bmso-list:[^;]*ignore/i,ru=/\bmso-list:[^;]*\bl(\d+)/i,iu=/\bmso-list:[^;]*\blevel(\d+)/i,cu=(n,a)=>{const e=n.getAttribute("style"),s=e?.match(ru);if(!s)return null;const l=Number(s[1]),o=e?.match(iu),r=o?Number(o[1]):1,i=new RegExp(`@list l${l}:level${r}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=a.match(i),x=c&&c[1]==="bullet"?"bullet":"ordered";return{id:l,indent:r,type:x,element:n}},xu=n=>{const a=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],s=[];a.forEach(r=>{(r.getAttribute("style")||"").match(ou)?e.push(r):s.push(r)}),e.forEach(r=>r.parentNode?.removeChild(r));const l=n.documentElement.innerHTML,o=s.map(r=>cu(r,l)).filter(r=>r);for(;o.length;){const r=[];let i=o.shift();for(;i;)r.push(i),i=o.length&&o[0]?.element===i.element.nextElementSibling&&o[0].id===i.id?o.shift():null;const c=document.createElement("ul");r.forEach(m=>{const p=document.createElement("li");p.setAttribute("data-list",m.type),m.indent>1&&p.setAttribute("class",`ql-indent-${m.indent-1}`),p.innerHTML=m.element.innerHTML,c.appendChild(p)});const x=r[0]?.element,{parentNode:g}=x??{};x&&g?.replaceChild(c,x),r.slice(1).forEach(m=>{let{element:p}=m;g?.removeChild(p)})}};function uu(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&xu(n)}const du=[uu,nu],mu=n=>{n.documentElement&&du.forEach(a=>{a(n)})},pu=ya("quill:clipboard"),fu=[[Node.TEXT_NODE,Du],[Node.TEXT_NODE,xr],["br",Cu],[Node.ELEMENT_NODE,xr],[Node.ELEMENT_NODE,_u],[Node.ELEMENT_NODE,Eu],[Node.ELEMENT_NODE,Fu],["li",Bu],["ol, ul",Au],["pre",yu],["tr",ku],["b",jn("bold")],["i",jn("italic")],["strike",jn("strike")],["style",bu]],gu=[Wx,Jr].reduce((n,a)=>(n[a.keyName]=a,n),{}),cr=[Gr,ko,Fo,Qr,ti,si].reduce((n,a)=>(n[a.keyName]=a,n),{});class hu extends xa{static DEFAULTS={matchers:[]};constructor(a,e){super(a,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],fu.concat(this.options.matchers??[]).forEach(s=>{let[l,o]=s;this.addMatcher(l,o)})}addMatcher(a,e){this.matchers.push([a,e])}convert(a){let{html:e,text:s}=a,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l[Lt.blotName])return new Se().insert(s||"",{[Lt.blotName]:l[Lt.blotName]});if(!e)return new Se().insert(s||"",l);const o=this.convertHTML(e);return Xs(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||l.table)?o.compose(new Se().retain(o.length()-1).delete(1)):o}normalizeHTML(a){mu(a)}convertHTML(a){const e=new DOMParser().parseFromString(a,"text/html");this.normalizeHTML(e);const s=e.body,l=new WeakMap,[o,r]=this.prepareMatching(s,l);return To(this.quill.scroll,s,o,r,l)}dangerouslyPasteHTML(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ge.sources.API;if(typeof a=="string"){const l=this.convert({html:a,text:""});this.quill.setContents(l,e),this.quill.setSelection(0,ge.sources.SILENT)}else{const l=this.convert({html:e,text:""});this.quill.updateContents(new Se().retain(a).concat(l),s),this.quill.setSelection(a+l.length(),ge.sources.SILENT)}}onCaptureCopy(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a.defaultPrevented)return;a.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:l,text:o}=this.onCopy(s,e);a.clipboardData?.setData("text/plain",o),a.clipboardData?.setData("text/html",l),e&&Po({range:s,quill:this.quill})}normalizeURIList(a){return a.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(a){if(a.defaultPrevented||!this.quill.isEnabled())return;a.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const s=a.clipboardData?.getData("text/html");let l=a.clipboardData?.getData("text/plain");if(!s&&!l){const r=a.clipboardData?.getData("text/uri-list");r&&(l=this.normalizeURIList(r))}const o=Array.from(a.clipboardData?.files||[]);if(!s&&o.length>0){this.quill.uploader.upload(e,o);return}if(s&&o.length>0){const r=new DOMParser().parseFromString(s,"text/html");if(r.body.childElementCount===1&&r.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:s,text:l})}onCopy(a){const e=this.quill.getText(a);return{html:this.quill.getSemanticHTML(a),text:e}}onPaste(a,e){let{text:s,html:l}=e;const o=this.quill.getFormat(a.index),r=this.convert({text:s,html:l},o);pu.log("onPaste",r,{text:s,html:l});const i=new Se().retain(a.index).delete(a.length).concat(r);this.quill.updateContents(i,ge.sources.USER),this.quill.setSelection(i.length()-a.length,ge.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(a,e){const s=[],l=[];return this.matchers.forEach(o=>{const[r,i]=o;switch(r){case Node.TEXT_NODE:l.push(i);break;case Node.ELEMENT_NODE:s.push(i);break;default:Array.from(a.querySelectorAll(r)).forEach(c=>{e.has(c)?e.get(c)?.push(i):e.set(c,[i])});break}}),[s,l]}}function Xa(n,a,e,s){return s.query(a)?n.reduce((l,o)=>{if(!o.insert)return l;if(o.attributes&&o.attributes[a])return l.push(o);const r=e?{[a]:e}:{};return l.insert(o.insert,{...r,...o.attributes})},new Se):n}function Xs(n,a){let e="";for(let s=n.ops.length-1;s>=0&&e.length<a.length;--s){const l=n.ops[s];if(typeof l.insert!="string")break;e=l.insert+e}return e.slice(-1*a.length)===a}function ka(n,a){if(!(n instanceof Element))return!1;const e=a.query(n);return e&&e.prototype instanceof Rt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function vu(n,a){return n.previousElementSibling&&n.nextElementSibling&&!ka(n.previousElementSibling,a)&&!ka(n.nextElementSibling,a)}const Cl=new WeakMap;function li(n){return n==null?!1:(Cl.has(n)||(n.tagName==="PRE"?Cl.set(n,!0):Cl.set(n,li(n.parentNode))),Cl.get(n))}function To(n,a,e,s,l){return a.nodeType===a.TEXT_NODE?s.reduce((o,r)=>r(a,o,n),new Se):a.nodeType===a.ELEMENT_NODE?Array.from(a.childNodes||[]).reduce((o,r)=>{let i=To(n,r,e,s,l);return r.nodeType===a.ELEMENT_NODE&&(i=e.reduce((c,x)=>x(r,c,n),i),i=(l.get(r)||[]).reduce((c,x)=>x(r,c,n),i)),o.concat(i)},new Se):new Se}function jn(n){return(a,e,s)=>Xa(e,n,!0,s)}function Eu(n,a,e){const s=ca.keys(n),l=sa.keys(n),o=Ia.keys(n),r={};return s.concat(l).concat(o).forEach(i=>{let c=e.query(i,Ie.ATTRIBUTE);c!=null&&(r[c.attrName]=c.value(n),r[c.attrName])||(c=gu[i],c!=null&&(c.attrName===i||c.keyName===i)&&(r[c.attrName]=c.value(n)||void 0),c=cr[i],c!=null&&(c.attrName===i||c.keyName===i)&&(c=cr[i],r[c.attrName]=c.value(n)||void 0))}),Object.entries(r).reduce((i,c)=>{let[x,g]=c;return Xa(i,x,g,e)},a)}function _u(n,a,e){const s=e.query(n);if(s==null)return a;if(s.prototype instanceof Rt){const l={},o=s.value(n);if(o!=null)return l[s.blotName]=o,new Se().insert(l,s.formats(n,e))}else if(s.prototype instanceof js&&!Xs(a,`
`)&&a.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Xa(a,s.blotName,s.formats(n,e),e);return a}function Cu(n,a){return Xs(a,`
`)||a.insert(`
`),a}function yu(n,a,e){const s=e.query("code-block"),l=s&&"formats"in s&&typeof s.formats=="function"?s.formats(n,e):!0;return Xa(a,"code-block",l,e)}function bu(){return new Se}function Bu(n,a,e){const s=e.query(n);if(s==null||s.blotName!=="list"||!Xs(a,`
`))return a;let l=-1,o=n.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(l+=1),o=o.parentNode;return l<=0?a:a.reduce((r,i)=>i.insert?i.attributes&&typeof i.attributes.indent=="number"?r.push(i):r.insert(i.insert,{indent:l,...i.attributes||{}}):r,new Se)}function Au(n,a,e){const s=n;let l=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(l=o==="true"?"checked":"unchecked"),Xa(a,"list",l,e)}function xr(n,a,e){if(!Xs(a,`
`)){if(ka(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return a.insert(`
`);if(a.length()>0&&n.nextSibling){let s=n.nextSibling;for(;s!=null;){if(ka(s,e))return a.insert(`
`);const l=e.query(s);if(l&&l.prototype instanceof Yt)return a.insert(`
`);s=s.firstChild}}}return a}function Fu(n,a,e){const s={},l=n.style||{};return l.fontStyle==="italic"&&(s.italic=!0),l.textDecoration==="underline"&&(s.underline=!0),l.textDecoration==="line-through"&&(s.strike=!0),(l.fontWeight?.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(s.bold=!0),a=Object.entries(s).reduce((o,r)=>{let[i,c]=r;return Xa(o,i,c,e)},a),parseFloat(l.textIndent||0)>0?new Se().insert("	").concat(a):a}function ku(n,a,e){const s=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(s!=null){const o=Array.from(s.querySelectorAll("tr")).indexOf(n)+1;return Xa(a,"table",o,e)}return a}function Du(n,a,e){let s=n.data;if(n.parentElement?.tagName==="O:P")return a.insert(s.trim());if(!li(n)){if(s.trim().length===0&&s.includes(`
`)&&!vu(n,e))return a;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&ka(n.parentElement,e)||n.previousSibling instanceof Element&&ka(n.previousSibling,e))&&(s=s.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&ka(n.parentElement,e)||n.nextSibling instanceof Element&&ka(n.nextSibling,e))&&(s=s.replace(/ $/,"")),s=s.replaceAll("\xA0"," ")}return a.insert(s)}class wu extends xa{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(a,e){super(a,e),this.quill.on(ge.events.EDITOR_CHANGE,(s,l,o,r)=>{s===ge.events.SELECTION_CHANGE?l&&r!==ge.sources.SILENT&&(this.currentRange=l):s===ge.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||r===ge.sources.USER?this.record(l,o):this.transform(l)),this.currentRange=so(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(a,e){if(this.stack[a].length===0)return;const s=this.stack[a].pop();if(!s)return;const l=this.quill.getContents(),o=s.delta.invert(l);this.stack[e].push({delta:o,range:so(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,ge.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(a,e){if(a.ops.length===0)return;this.stack.redo=[];let s=a.invert(e),l=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const r=this.stack.undo.pop();r&&(s=s.compose(r.delta),l=r.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(a){ur(this.stack.undo,a),ur(this.stack.redo,a)}undo(){this.change("undo","redo")}restoreSelection(a){if(a.range)this.quill.setSelection(a.range,ge.sources.USER);else{const e=Tu(this.quill.scroll,a.delta);this.quill.setSelection(e,ge.sources.USER)}}}function ur(n,a){let e=a;for(let s=n.length-1;s>=0;s-=1){const l=n[s];n[s]={delta:e.transform(l.delta,!0),range:l.range&&so(l.range,e)},e=l.delta.transform(e),n[s].delta.length()===0&&n.splice(s,1)}}function Pu(n,a){const e=a.ops[a.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>n.query(s,Ie.BLOCK)!=null):!1}function Tu(n,a){const e=a.reduce((l,o)=>l+(o.delete||0),0);let s=a.length()-e;return Pu(n,a)&&(s-=1),s}function so(n,a){if(!n)return n;const e=a.transformPosition(n.index),s=a.transformPosition(n.index+n.length);return{index:e,length:s-e}}class ni extends xa{constructor(a,e){super(a,e),a.root.addEventListener("drop",s=>{s.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const r=document.caretPositionFromPoint(s.clientX,s.clientY);l=document.createRange(),l.setStart(r.offsetNode,r.offset),l.setEnd(r.offsetNode,r.offset)}const o=l&&a.selection.normalizeNative(l);if(o){const r=a.selection.normalizedToRange(o);s.dataTransfer?.files&&this.upload(r,s.dataTransfer.files)}})}upload(a,e){const s=[];Array.from(e).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&s.push(l)}),s.length>0&&this.options.handler.call(this,a,s)}}ni.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,a){if(!this.quill.scroll.query("image"))return;const e=a.map(s=>new Promise(l=>{const o=new FileReader;o.onload=()=>{l(o.result)},o.readAsDataURL(s)}));Promise.all(e).then(s=>{const l=s.reduce((o,r)=>o.insert({image:r}),new Se().retain(n.index).delete(n.length));this.quill.updateContents(l,Te.sources.USER),this.quill.setSelection(n.index+s.length,Te.sources.SILENT)})}};const Lu=["insertText","insertReplacementText"];class Su extends xa{constructor(a,e){super(a,e),a.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||a.on(ge.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(a){Po({range:a,quill:this.quill})}replaceText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(a.length===0)return!1;if(e){const s=this.quill.getFormat(a.index,1);this.deleteRange(a),this.quill.updateContents(new Se().retain(a.index).insert(e,s),ge.sources.USER)}else this.deleteRange(a);return this.quill.setSelection(a.index+e.length,0,ge.sources.SILENT),!0}handleBeforeInput(a){if(this.quill.composition.isComposing||a.defaultPrevented||!Lu.includes(a.inputType))return;const e=a.getTargetRanges?a.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const s=Iu(a);if(s==null)return;const l=this.quill.selection.normalizeNative(e),o=l?this.quill.selection.normalizedToRange(l):null;o&&this.replaceText(o,s)&&a.preventDefault()}handleCompositionStart(){const a=this.quill.getSelection();a&&this.replaceText(a)}}function Iu(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const $u=/Mac/i.test(navigator.platform),Nu=100,Ou=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||$u&&n.key==="a"&&n.ctrlKey===!0);class Mu extends xa{isListening=!1;selectionChangeDeadline=0;constructor(a,e){super(a,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(a,e){let{line:s,event:l}=e;if(!(s instanceof ta)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&l.key!=="ArrowRight"||!o&&l.key!=="ArrowLeft"?!0:(this.quill.setSelection(a.index-1,a.length+(l.shiftKey?1:0),ge.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",a=>{!a.defaultPrevented&&Ou(a)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+Nu,this.isListening)return;this.isListening=!0;const a=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",a,{once:!0})}handleSelectionChange(){const a=document.getSelection();if(!a)return;const e=a.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;const s=this.quill.scroll.find(e.startContainer);if(!(s instanceof ta)||!s.uiNode)return;const l=document.createRange();l.setStartAfter(s.uiNode),l.setEndAfter(s.uiNode),a.removeAllRanges(),a.addRange(l)}}ge.register({"blots/block":yt,"blots/block/embed":Yt,"blots/break":la,"blots/container":Za,"blots/cursor":Jt,"blots/embed":Bo,"blots/inline":Pt,"blots/scroll":Yx,"blots/text":aa,"modules/clipboard":hu,"modules/history":wu,"modules/keyboard":Wl,"modules/uploader":ni,"modules/input":Su,"modules/uiNode":Mu});class Vu extends sa{add(a,e){let s=0;if(e==="+1"||e==="-1"){const l=this.value(a)||0;s=e==="+1"?l+1:l-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(a),!0):super.add(a,s.toString())}canAdd(a,e){return super.canAdd(a,e)||super.canAdd(a,parseInt(e,10))}value(a){return parseInt(super.value(a),10)||void 0}}const Ru=new Vu("indent","ql-indent",{scope:Ie.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class qu extends yt{static blotName="blockquote";static tagName="blockquote"}class Uu extends yt{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(a){return this.tagName.indexOf(a.tagName)+1}}class Qs extends Za{}Qs.blotName="list-container";Qs.tagName="OL";class Ks extends yt{static create(a){const e=super.create();return e.setAttribute("data-list",a),e}static formats(a){return a.getAttribute("data-list")||void 0}static register(){ge.register(Qs)}constructor(a,e){super(a,e);const s=e.ownerDocument.createElement("span"),l=o=>{if(!a.isEnabled())return;const r=this.statics.formats(e,a);r==="checked"?(this.format("list","unchecked"),o.preventDefault()):r==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",l),s.addEventListener("touchstart",l),this.attachUI(s)}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(a,e)}}Ks.blotName="list";Ks.tagName="LI";Qs.allowedChildren=[Ks];Ks.requiredContainer=Qs;class Lo extends Pt{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(a){super.optimize(a),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class zu extends Lo{static blotName="italic";static tagName=["EM","I"]}class Sl extends Pt{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(a){const e=super.create(a);return e.setAttribute("href",this.sanitize(a)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(a){return a.getAttribute("href")}static sanitize(a){return oi(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}format(a,e){a!==this.statics.blotName||!e?super.format(a,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}function oi(n,a){const e=document.createElement("a");e.href=n;const s=e.href.slice(0,e.href.indexOf(":"));return a.indexOf(s)>-1}class ju extends Pt{static blotName="script";static tagName=["SUB","SUP"];static create(a){return a==="super"?document.createElement("sup"):a==="sub"?document.createElement("sub"):super.create(a)}static formats(a){if(a.tagName==="SUB")return"sub";if(a.tagName==="SUP")return"super"}}class Yu extends Lo{static blotName="strike";static tagName=["S","STRIKE"]}class Wu extends Pt{static blotName="underline";static tagName="U"}class Hu extends Bo{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(a){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(a);return typeof a=="string"&&(window.katex.render(a,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",a)),e}static value(a){return a.getAttribute("data-value")}html(){const{formula:a}=this.value();return`<span>${a}</span>`}}const dr=["alt","height","width"];class Gu extends Rt{static blotName="image";static tagName="IMG";static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("src",this.sanitize(a)),e}static formats(a){return dr.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static match(a){return/\.(jpe?g|gif|png)$/.test(a)||/^data:image\/.+;base64/.test(a)}static sanitize(a){return oi(a,["http","https","data"])?a:"//:0"}static value(a){return a.getAttribute("src")}format(a,e){dr.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}}const mr=["height","width"];class Zu extends Yt{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(a){const e=super.create(a);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(a)),e}static formats(a){return mr.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static sanitize(a){return Sl.sanitize(a)}static value(a){return a.getAttribute("src")}format(a,e){mr.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}html(){const{video:a}=this.value();return`<a href="${a}">${a}</a>`}}const Vs=new sa("code-token","hljs",{scope:Ie.INLINE});class va extends Pt{static formats(a,e){for(;a!=null&&a!==e.domNode;){if(a.classList&&a.classList.contains(Lt.className))return super.formats(a,e);a=a.parentNode}}constructor(a,e,s){super(a,e,s),Vs.add(this.domNode,s)}format(a,e){a!==va.blotName?super.format(a,e):e?Vs.add(this.domNode,e):(Vs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vs.value(this.domNode)||this.unwrap()}}va.blotName="code-token";va.className="ql-token";class jt extends Lt{static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("data-language",a),e}static formats(a){return a.getAttribute("data-language")||"plain"}static register(){}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(a,e)}replaceWith(a,e){return this.formatAt(0,this.length(),va.blotName,!1),super.replaceWith(a,e)}}class Us extends Ja{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(a,e){a===jt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(a,e)}))}formatAt(a,e,s,l){s===jt.blotName&&(this.forceNext=!0),super.formatAt(a,e,s,l)}highlight(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const l=`${Array.from(this.domNode.childNodes).filter(r=>r!==this.uiNode).map(r=>r.textContent).join(`
`)}
`,o=jt.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==l){if(l.trim().length>0||this.cachedText==null){const r=this.children.reduce((c,x)=>c.concat(jr(x,!1)),new Se),i=a(l,o);r.diff(i).reduce((c,x)=>{let{retain:g,attributes:m}=x;return g?(m&&Object.keys(m).forEach(p=>{[jt.blotName,va.blotName].includes(p)&&this.formatAt(c,g,p,m[p])}),c+g):c},0)}this.cachedText=l,this.forceNext=!1}}html(a,e){const[s]=this.children.find(a);return`<pre data-language="${s?jt.formats(s.domNode):"plain"}">
${Yl(this.code(a,e))}
</pre>`}optimize(a){if(super.optimize(a),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=jt.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Us.allowedChildren=[jt];jt.requiredContainer=Us;jt.allowedChildren=[va,Jt,aa,la];const Ju=(n,a,e)=>{if(typeof n.versionString=="string"){const s=n.versionString.split(".")[0];if(parseInt(s,10)>=11)return n.highlight(e,{language:a}).value}return n.highlight(a,e).value};class ri extends xa{static register(){ge.register(va,!0),ge.register(jt,!0),ge.register(Us,!0)}constructor(a,e){if(super(a,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,l)=>{let{key:o}=l;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(ge.events.SCROLL_BLOT_MOUNT,a=>{if(!(a instanceof Us))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:l,label:o}=s;const r=e.ownerDocument.createElement("option");r.textContent=o,r.setAttribute("value",l),e.appendChild(r)}),e.addEventListener("change",()=>{a.format(jt.blotName,e.value),this.quill.root.focus(),this.highlight(a,!0)}),a.uiNode==null&&(a.attachUI(e),a.children.head&&(e.value=jt.formats(a.children.head.domNode)))})}initTimer(){let a=null;this.quill.on(ge.events.SCROLL_OPTIMIZE,()=>{a&&clearTimeout(a),a=setTimeout(()=>{this.highlight(),a=null},this.options.interval)})}highlight(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(ge.sources.USER);const s=this.quill.getSelection();(a==null?this.quill.scroll.descendants(Us):[a]).forEach(o=>{o.highlight(this.highlightBlot,e)}),this.quill.update(ge.sources.SILENT),s!=null&&this.quill.setSelection(s,ge.sources.SILENT)}highlightBlot(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Yl(a).split(`
`).reduce((l,o,r)=>(r!==0&&l.insert(`
`,{[Lt.blotName]:e}),l.insert(o)),new Se);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Lt.className),s.innerHTML=Ju(this.options.hljs,e,a),To(this.quill.scroll,s,[(l,o)=>{const r=Vs.value(l);return r?o.compose(new Se().retain(o.length(),{[va.blotName]:r})):o}],[(l,o)=>l.data.split(`
`).reduce((r,i,c)=>(c!==0&&r.insert(`
`,{[Lt.blotName]:e}),r.insert(i)),o)],new WeakMap)}}ri.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Xt extends yt{static blotName="table";static tagName="TD";static create(a){const e=super.create();return a?e.setAttribute("data-row",a):e.setAttribute("data-row",So()),e}static formats(a){if(a.hasAttribute("data-row"))return a.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(a,e){a===Xt.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(a,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Wa extends Za{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const a=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),l=this.next.children.tail.formats();return a.table===e.table&&a.table===s.table&&a.table===l.table}return!1}optimize(a){super.optimize(a),this.children.forEach(e=>{if(e.next==null)return;const s=e.formats(),l=e.next.formats();if(s.table!==l.table){const o=this.splitAfter(e);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Pa extends Za{static blotName="table-body";static tagName="TBODY"}class Il extends Za{static blotName="table-container";static tagName="TABLE";balanceCells(){const a=this.descendants(Wa),e=a.reduce((s,l)=>Math.max(l.children.length,s),0);a.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let l;s.children.head!=null&&(l=Xt.formats(s.children.head.domNode));const o=this.scroll.create(Xt.blotName,l);s.appendChild(o),o.optimize()})})}cells(a){return this.rows().map(e=>e.children.at(a))}deleteColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a);l?.remove()})}insertColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a),o=Xt.formats(s.children.head.domNode),r=this.scroll.create(Xt.blotName,o);s.insertBefore(r,l)})}insertRow(a){const[e]=this.descendant(Pa);if(e==null||e.children.head==null)return;const s=So(),l=this.scroll.create(Wa.blotName);e.children.head.children.forEach(()=>{const r=this.scroll.create(Xt.blotName,s);l.appendChild(r)});const o=e.children.at(a);e.insertBefore(l,o)}rows(){const a=this.children.head;return a==null?[]:a.children.map(e=>e)}}Il.allowedChildren=[Pa];Pa.requiredContainer=Il;Pa.allowedChildren=[Wa];Wa.requiredContainer=Pa;Wa.allowedChildren=[Xt];Xt.requiredContainer=Wa;function So(){return`row-${Math.random().toString(36).slice(2,6)}`}class Xu extends xa{static register(){ge.register(Xt),ge.register(Wa),ge.register(Pa),ge.register(Il)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Il).forEach(a=>{a.balanceCells()})}deleteColumn(){const[a,,e]=this.getTable();e!=null&&(a.deleteColumn(e.cellOffset()),this.quill.update(ge.sources.USER))}deleteRow(){const[,a]=this.getTable();a!=null&&(a.remove(),this.quill.update(ge.sources.USER))}deleteTable(){const[a]=this.getTable();if(a==null)return;const e=a.offset();a.remove(),this.quill.update(ge.sources.USER),this.quill.setSelection(e,ge.sources.SILENT)}getTable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(a==null)return[null,null,null,-1];const[e,s]=this.quill.getLine(a.index);if(e==null||e.statics.blotName!==Xt.blotName)return[null,null,null,-1];const l=e.parent;return[l.parent.parent,l,e,s]}insertColumn(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const r=o.cellOffset();s.insertColumn(r+a),this.quill.update(ge.sources.USER);let i=l.rowOffset();a===0&&(i+=1),this.quill.setSelection(e.index+i,e.length,ge.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const r=l.rowOffset();s.insertRow(r+a),this.quill.update(ge.sources.USER),a>0?this.quill.setSelection(e,ge.sources.SILENT):this.quill.setSelection(e.index+l.children.length,e.length,ge.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(a,e){const s=this.quill.getSelection();if(s==null)return;const l=new Array(a).fill(0).reduce(o=>{const r=new Array(e).fill(`
`).join("");return o.insert(r,{table:So()})},new Se().retain(s.index));this.quill.updateContents(l,ge.sources.USER),this.quill.setSelection(s.index,ge.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(ge.events.SCROLL_OPTIMIZE,a=>{a.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(ge.events.TEXT_CHANGE,(s,l,o)=>{o===ge.sources.USER&&this.balanceTables()}),!0):!1)})}}const pr=ya("quill:toolbar");class Io extends xa{constructor(a,e){if(super(a,e),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Qu(s,this.options.container),a.container?.parentNode?.insertBefore(s,a.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){pr.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const l=this.options.handlers?.[s];l&&this.addHandler(s,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(ge.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(a,e){this.handlers[a]=e}attach(a){let e=Array.from(a.classList).find(l=>l.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),a.tagName==="BUTTON"&&a.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){pr.warn("ignoring attaching to nonexistent format",e,a);return}const s=a.tagName==="SELECT"?"change":"click";a.addEventListener(s,l=>{let o;if(a.tagName==="SELECT"){if(a.selectedIndex<0)return;const i=a.options[a.selectedIndex];i.hasAttribute("selected")?o=!1:o=i.value||!1}else a.classList.contains("ql-active")?o=!1:o=a.value||!a.hasAttribute("value"),l.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof Rt){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new Se().retain(r.index).delete(r.length).insert({[e]:o}),ge.sources.USER)}else this.quill.format(e,o,ge.sources.USER);this.update(r)}),this.controls.push([e,a])}update(a){const e=a==null?{}:this.quill.getFormat(a);this.controls.forEach(s=>{const[l,o]=s;if(o.tagName==="SELECT"){let r=null;if(a==null)r=null;else if(e[l]==null)r=o.querySelector("option[selected]");else if(!Array.isArray(e[l])){let i=e[l];typeof i=="string"&&(i=i.replace(/"/g,'\\"')),r=o.querySelector(`option[value="${i}"]`)}r==null?(o.value="",o.selectedIndex=-1):r.selected=!0}else if(a==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const r=e[l],i=r===o.getAttribute("value")||r!=null&&r.toString()===o.getAttribute("value")||r==null&&!o.getAttribute("value");o.classList.toggle("ql-active",i),o.setAttribute("aria-pressed",i.toString())}else{const r=e[l]!=null;o.classList.toggle("ql-active",r),o.setAttribute("aria-pressed",r.toString())}})}}Io.DEFAULTS={};function fr(n,a,e){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${a}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${a}: ${e}`)):s.setAttribute("aria-label",a),n.appendChild(s)}function Qu(n,a){Array.isArray(a[0])||(a=[a]),a.forEach(e=>{const s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(l=>{if(typeof l=="string")fr(s,l);else{const o=Object.keys(l)[0],r=l[o];Array.isArray(r)?Ku(s,o,r):fr(s,o,r)}}),n.appendChild(s)})}function Ku(n,a,e){const s=document.createElement("select");s.classList.add(`ql-${a}`),e.forEach(l=>{const o=document.createElement("option");l!==!1?o.setAttribute("value",String(l)):o.setAttribute("selected","selected"),s.appendChild(o)}),n.appendChild(s)}Io.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const a=this.quill.getFormat();Object.keys(a).forEach(e=>{this.quill.scroll.query(e,Ie.INLINE)!=null&&this.quill.format(e,!1,ge.sources.USER)})}else this.quill.removeFormat(n.index,n.length,ge.sources.USER)},direction(n){const{align:a}=this.quill.getFormat();n==="rtl"&&a==null?this.quill.format("align","right",ge.sources.USER):!n&&a==="right"&&this.quill.format("align",!1,ge.sources.USER),this.quill.format("direction",n,ge.sources.USER)},indent(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a),s=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let l=n==="+1"?1:-1;e.direction==="rtl"&&(l*=-1),this.quill.format("indent",s+l,ge.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,ge.sources.USER)},list(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,ge.sources.USER):this.quill.format("list","unchecked",ge.sources.USER):this.quill.format("list",n,ge.sources.USER)}}};const ed='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',td='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',ad='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',sd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',ld='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',nd='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',od='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',rd='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',gr='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',id='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',cd='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',xd='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',ud='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',dd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',md='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',pd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',fd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',gd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',hd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',vd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',Ed='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',_d='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',Cd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',yd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',bd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',Bd='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Ad='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Fd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',kd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Dd='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',wd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',Pd='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Td='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>';var Hs={align:{"":ed,center:td,right:ad,justify:sd},background:ld,blockquote:nd,bold:od,clean:rd,code:gr,"code-block":gr,color:id,direction:{"":cd,rtl:xd},formula:ud,header:{"1":dd,"2":md,"3":pd,"4":fd,"5":gd,"6":hd},italic:vd,image:Ed,indent:{"+1":_d,"-1":Cd},link:yd,list:{bullet:bd,check:Bd,ordered:Ad},script:{sub:Fd,super:kd},strike:Dd,table:wd,underline:Pd,video:Td};const Ld='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let hr=0;function vr(n,a){n.setAttribute(a,`${n.getAttribute(a)!=="true"}`)}class Hl{constructor(a){this.select=a,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),vr(this.label,"aria-expanded"),vr(this.options,"aria-hidden")}buildItem(a){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const s=a.getAttribute("value");return s&&e.setAttribute("data-value",s),a.textContent&&e.setAttribute("data-label",a.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",l=>{switch(l.key){case"Enter":this.selectItem(e,!0),l.preventDefault();break;case"Escape":this.escape(),l.preventDefault();break}}),e}buildLabel(){const a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=Ld,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}buildOptions(){const a=document.createElement("span");a.classList.add("ql-picker-options"),a.setAttribute("aria-hidden","true"),a.tabIndex="-1",a.id=`ql-picker-options-${hr}`,hr+=1,this.label.setAttribute("aria-controls",a.id),this.options=a,Array.from(this.select.options).forEach(e=>{const s=this.buildItem(e);a.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(a)}buildPicker(){Array.from(this.select.attributes).forEach(a=>{this.container.setAttribute(a.name,a.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");a!==s&&(s?.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=Array.from(a.parentNode.children).indexOf(a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let a;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const e=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class ii extends Hl{constructor(a,e){super(a),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(a){const e=super.buildItem(a);return e.style.backgroundColor=a.getAttribute("value")||"",e}selectItem(a,e){super.selectItem(a,e);const s=this.label.querySelector(".ql-color-label"),l=a&&a.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=l:s.style.fill=l)}}class ci extends Hl{constructor(a,e){super(a),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(a,e){super.selectItem(a,e);const s=a||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Sd=n=>{const{overflowY:a}=getComputedStyle(n,null);return a!=="visible"&&a!=="clip"};class xi{constructor(a,e){this.quill=a,this.boundsContainer=e||document.body,this.root=a.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Sd(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(a){const e=a.left+a.width/2-this.root.offsetWidth/2,s=a.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const l=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let r=0;if(o.right>l.right&&(r=l.right-o.right,this.root.style.left=`${e+r}px`),o.left<l.left&&(r=l.left-o.left,this.root.style.left=`${e+r}px`),o.bottom>l.bottom){const i=o.bottom-o.top,c=a.bottom-a.top+i;this.root.style.top=`${s-c}px`,this.root.classList.add("ql-flip")}return r}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Id=[!1,"center","right","justify"],$d=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Nd=[!1,"serif","monospace"],Od=["1","2","3",!1],Md=["small",!1,"large","huge"];class el extends Bs{constructor(a,e){super(a,e);const s=l=>{if(!document.body.contains(a.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(l.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(l.target)||o.close()})};a.emitter.listenDOM("click",document.body,s)}addModule(a){const e=super.addModule(a);return a==="toolbar"&&this.extendToolbar(e),e}buildButtons(a,e){Array.from(a).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(!!o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")s.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")s.innerHTML=e[o];else{const r=s.value||"";r!=null&&e[o][r]&&(s.innerHTML=e[o][r])}})})}buildPickers(a,e){this.pickers=Array.from(a).map(l=>{if(l.classList.contains("ql-align")&&(l.querySelector("option")==null&&Ms(l,Id),typeof e.align=="object"))return new ci(l,e.align);if(l.classList.contains("ql-background")||l.classList.contains("ql-color")){const o=l.classList.contains("ql-background")?"background":"color";return l.querySelector("option")==null&&Ms(l,$d,o==="background"?"#ffffff":"#000000"),new ii(l,e[o])}return l.querySelector("option")==null&&(l.classList.contains("ql-font")?Ms(l,Nd):l.classList.contains("ql-header")?Ms(l,Od):l.classList.contains("ql-size")&&Ms(l,Md)),new Hl(l)});const s=()=>{this.pickers.forEach(l=>{l.update()})};this.quill.on(Te.events.EDITOR_CHANGE,s)}}el.DEFAULTS=wa({},Bs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const a=this.quill.getSelection(!0);this.quill.uploader.upload(a,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class ui extends xi{constructor(a,e){super(a,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",a=>{a.key==="Enter"?(this.save(),a.preventDefault()):a.key==="Escape"&&(this.cancel(),a.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:a!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${a}`)||""),this.root.setAttribute("data-mode",a)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:a}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",a,Te.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",a,Te.sources.USER)),this.quill.root.scrollTop=e;break}case"video":a=Vd(a);case"formula":{if(!a)break;const e=this.quill.getSelection(!0);if(e!=null){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),a,Te.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",Te.sources.USER),this.quill.setSelection(s+2,Te.sources.USER)}break}}this.textbox.value="",this.hide()}}function Vd(n){let a=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return a?`${a[1]||"https"}://www.youtube.com/embed/${a[2]}?showinfo=0`:(a=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${a[1]||"https"}://player.vimeo.com/video/${a[2]}/`:n}function Ms(n,a){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;a.forEach(s=>{const l=document.createElement("option");s===e?l.setAttribute("selected","selected"):l.setAttribute("value",String(s)),n.appendChild(l)})}const Rd=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class qd extends ui{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(a,e){super(a,e),this.quill.on(Te.events.EDITOR_CHANGE,(s,l,o,r)=>{if(s===Te.events.SELECTION_CHANGE)if(l!=null&&l.length>0&&r===Te.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const i=this.quill.getLines(l.index,l.length);if(i.length===1){const c=this.quill.getBounds(l);c!=null&&this.position(c)}else{const c=i[i.length-1],x=this.quill.getIndex(c),g=Math.min(c.length()-1,l.index+l.length-x),m=this.quill.getBounds(new Ya(x,g));m!=null&&this.position(m)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(Te.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const a=this.quill.getSelection();if(a!=null){const e=this.quill.getBounds(a);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(a){const e=super.position(a),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}}class di extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Rd),super(a,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(a){this.tooltip=new qd(this.quill,this.options.bounds),a.container!=null&&(this.tooltip.root.appendChild(a.container),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs))}}di.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,ge.sources.USER)}}}}});const Ud=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class zd extends ui{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",a=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),a.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",a=>{if(this.linkRange!=null){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,Te.sources.USER),delete this.linkRange}a.preventDefault(),this.hide()}),this.quill.on(Te.events.SELECTION_CHANGE,(a,e,s)=>{if(a!=null){if(a.length===0&&s===Te.sources.USER){const[l,o]=this.quill.scroll.descendant(Sl,a.index);if(l!=null){this.linkRange=new Ya(a.index-o,l.length());const r=Sl.formats(l.domNode);this.preview.textContent=r,this.preview.setAttribute("href",r),this.show();const i=this.quill.getBounds(this.linkRange);i!=null&&this.position(i);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class mi extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Ud),super(a,e),this.quill.container.classList.add("ql-snow")}extendToolbar(a){a.container!=null&&(a.container.classList.add("ql-snow"),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs),this.tooltip=new zd(this.quill,this.options.bounds),a.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{a.handlers.link.call(a,!s.format.link)}))}}mi.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const a=this.quill.getSelection();if(a==null||a.length===0)return;let e=this.quill.getText(a);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,ge.sources.USER)}}}}});ge.register({"attributors/attribute/direction":Jr,"attributors/class/align":Hr,"attributors/class/background":Gx,"attributors/class/color":Hx,"attributors/class/direction":Xr,"attributors/class/font":ei,"attributors/class/size":ai,"attributors/style/align":Gr,"attributors/style/background":ko,"attributors/style/color":Fo,"attributors/style/direction":Qr,"attributors/style/font":ti,"attributors/style/size":si},!0);ge.register({"formats/align":Hr,"formats/direction":Xr,"formats/indent":Ru,"formats/background":ko,"formats/color":Fo,"formats/font":ei,"formats/size":ai,"formats/blockquote":qu,"formats/code-block":Lt,"formats/header":Uu,"formats/list":Ks,"formats/bold":Lo,"formats/code":Do,"formats/italic":zu,"formats/link":Sl,"formats/script":ju,"formats/strike":Yu,"formats/underline":Wu,"formats/formula":Hu,"formats/image":Gu,"formats/video":Zu,"modules/syntax":ri,"modules/table":Xu,"modules/toolbar":Io,"themes/bubble":di,"themes/snow":mi,"ui/icons":Hs,"ui/picker":Hl,"ui/icon-picker":ci,"ui/color-picker":ii,"ui/tooltip":xi},!0);const jd={props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},emits:["ready","change","input","blur","focus","update:value"],setup(n,{emit:a}){const e=n,s={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert content here ...",readOnly:!1},l=g=>{const m=new MutationObserver(p=>{p.forEach(()=>{})});return m.observe(g,{childList:!0,subtree:!0}),m},o=V(null);let r=null,i="";const c=(g,m)=>{for(const p in m)!g[p]||p!=="modules"?g[p]=m[p]:c(g[p],m[p]);return g},x=()=>{if(o.value){const g=c(s,e.options);g.readOnly=!!e.disabled,r=new ge(o.value,g),e.value&&r.clipboard.dangerouslyPasteHTML(e.value),r.on("selection-change",m=>{a(m?"focus":"blur",r)}),r.on("text-change",()=>{e.disabled&&r.enable(!1);let m=o.value.children[0].innerHTML;const p=r.getText();m==="<p><br></p>"&&(m=""),i=m,a("update:value",i),a("change",{html:m,text:p,quill:r})}),a("ready",r)}};return xt(()=>e.value,g=>{r&&g!==i?(i=g,r.clipboard.dangerouslyPasteHTML(g)):g||r.setText("")}),xt(()=>e.disabled,g=>{r&&r.enable(!g)}),Ge(()=>{if(x(),o.value){const g=l(o.value);Yn(()=>{g.disconnect()})}}),ji(()=>{const g=o.value.previousSibling;g&&g.nodeType===1&&g.className.indexOf("ql-toolbar")>-1&&g.parentNode.removeChild(g)}),Yn(()=>{r=null}),(g,m)=>(u(),A("section",{ref_key:"editor",ref:o},null,512))}};const Yd={class:"am-desc-editor__header"},Wd={class:"am-desc-editor__header-warning"},Hd=d("span",{class:"am-icon-triangle-info"},null,-1),Gd={key:1,class:"am-quill-wrapper"},pi={props:{modelValue:{type:String,default:""},mode:{type:String,default:"html"}},emits:["update:modelValue","setMode"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=V(e.mode),o=b({get:()=>e.modelValue,set:m=>{a("update:modelValue",m)}});function r(){l.value="text",a("setMode","text")}function i(){l.value="html",a("setMode","html")}const c={theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},readOnly:!1};let x=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),g=b(()=>({"--am-c-desce-text-op03":K(x.value.colorMainText,.03),"--am-c-desce-warn-op10":K(x.value.colorWarning,.1)}));return(m,p)=>t(l)?(u(),A("div",{key:0,class:"am-desc-editor",style:Be(t(g))},[d("div",Yd,[N(Yi,null,{default:S(()=>[N(ke,{category:t(l)==="text"?"primary":"secondary",type:t(l)==="text"?"filled":"plain",size:"small",onClick:r},{default:S(()=>[ue(w(t(s).text_mode),1)]),_:1},8,["category","type"]),N(ke,{category:t(l)==="html"?"primary":"secondary",type:t(l)==="html"?"filled":"plain",size:"small",onClick:i},{default:S(()=>[ue(w(t(s).html_mode),1)]),_:1},8,["category","type"])]),_:1}),d("div",Wd,[Hd,ue(" "+w(t(s).content_mode_tooltip),1)])]),t(l)==="html"?(u(),Y(ct,{key:0,modelValue:t(o),"onUpdate:modelValue":p[0]||(p[0]=y=>Fe(o)?o.value=y:o=y),type:"textarea",rows:3,style:{width:"100%"}},null,8,["modelValue"])):$("",!0),t(l)==="text"?(u(),A("div",Gd,[N(jd,{value:t(o),"onUpdate:value":p[1]||(p[1]=y=>Fe(o)?o.value=y:o=y),options:c},null,8,["value"])])):$("",!0)],4)):$("",!0)}};const Zd=["innerHTML"],Jd={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Oe(),l=U("settings");let o=U("amLabels"),r=b(()=>s.getters["entities/getEmployee"](s.getters["employee/getId"])),i=b(()=>s.getters["entities/getLocations"]),c=b(()=>i.value.map(F=>({value:F.id,label:F.name}))),x=V(null),g=V(!1),m=V({firstName:b({get:()=>s.getters["employee/getFirstName"],set:F=>{s.commit("employee/setFirstName",F||"")}}),lastName:b({get:()=>s.getters["employee/getLastName"],set:F=>{s.commit("employee/setLastName",F||"")}}),email:b({get:()=>s.getters["employee/getEmail"],set:F=>{s.commit("employee/setEmail",F||"")}}),phone:b({get:()=>s.getters["employee/getPhone"],set:F=>{s.commit("employee/setPhone",F||"")}}),locationId:b({get:()=>s.getters["employee/getLocationId"],set:F=>{s.commit("employee/setLocationId",F||"")}}),description:b({get:()=>s.getters["employee/getDescription"],set:F=>{s.commit("employee/setDescription",F||"")}})}),p=b(()=>({firstName:[{required:!0,message:o.enter_first_name_warning,trigger:["submit","change"]}],lastName:[{required:!0,message:o.enter_last_name_warning,trigger:["submit","change"]}],email:[{required:!0,message:o.enter_email_warning,trigger:["submit","change"]}],locationId:[{required:i.value.filter(F=>F.status==="visible").length>0,message:o.enter_location_warning,trigger:["submit","change"]}]})),y=V({firstName:{template:We.text,props:{itemName:"firstName",label:o.first_name_colon,placeholder:o.enter_first_name,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:o.last_name_colon,placeholder:o.enter_last_name,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},email:{template:We.text,props:{itemName:"email",label:o.email_colon,placeholder:o.enter_email,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}},phone:{countryPhoneIso:b({get:()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:"",set:F=>{s.commit("auth/setProfileCountryPhoneIso",F?F.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:o.phone_colon,placeholder:o.enter_phone,defaultCode:b(()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:""),phoneError:b(()=>g.value),whatsAppLabel:o.whatsapp_opt_in_text,isWhatsApp:l.notifications.whatsAppEnabled&&l.notifications.whatsAppAccessToken&&l.notifications.whatsAppBusinessID&&l.notifications.whatsAppPhoneID,class:b(()=>`am-caepif__item ${e.responsiveClass}`)}}}),T=V({locationId:{template:We.select,props:{itemName:"locationId",label:`${o.location}:`,placeholder:o.select_location,class:b(()=>`am-caepif__item ${e.responsiveClass} ${l.zoom.enabled||"am-w-100"}`),options:c.value}}});return Zs(()=>{i.value.length||delete T.value.locationId}),a({employeeFormRef:x}),(F,E)=>{const P=vt,L=st;return u(),Y(L,{ref_key:"employeeFormRef",ref:x,model:t(m),rules:t(p),"label-position":"top",class:j(["am-caepif",e.responsiveClass])},{default:S(()=>[d("div",{class:j(["am-caepif__block",[{"am-w-70":t(r).pictureFullPath},e.responsiveClass]])},[(u(!0),A(ne,null,ve(t(y),(D,v)=>(u(),Y(ft(D.template),Dt({key:v,ref_for:!0,ref:"customerCollectorRef",modelValue:t(m)[v],"onUpdate:modelValue":f=>t(m)[v]=f,countryPhoneIso:D.countryPhoneIso,"onUpdate:countryPhoneIso":f=>D.countryPhoneIso=f},D.props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))],2),t(r).pictureFullPath?(u(),A("div",{key:0,class:j(["am-caepif__block am-w-30",e.responsiveClass])},[d("div",{class:"am-caepif__img",style:Be({backgroundImage:`url(${t(r).pictureFullPath})`})},null,4)],2)):$("",!0),d("div",{class:j(["am-caepif__block",e.responsiveClass])},[(u(!0),A(ne,null,ve(t(T),(D,v)=>(u(),Y(ft(D.template),Dt({key:v,ref_for:!0,ref:"customerCollectorRef",modelValue:t(m)[v],"onUpdate:modelValue":f=>t(m)[v]=f},D.props,uo(D.handlers?D.handlers:{})),{default:S(()=>[D.slots&&D.slots.default?(u(),A("div",{key:0,innerHTML:D.slots.default},null,8,Zd)):$("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128)),N(P,{label:t(o).description_colon},{default:S(()=>[N(pi,{modelValue:t(m).description,"onUpdate:modelValue":E[0]||(E[0]=D=>t(m).description=D),mode:t(s).getters["employee/getDescriptionMode"],onSetMode:E[1]||(E[1]=D=>t(s).commit("employee/setDescriptionMode",D))},null,8,["modelValue","mode"])]),_:1},8,["label"])],2)]),_:1},8,["model","rules","class"])}}};const Xd={class:"am-caes__category-header"},Qd={class:"am-caes__category-header__text"},Kd={class:"am-caes__service-header"},em={class:"am-caes__service-header__text"},tm={class:"am-caes__service-content"},am={class:"am-caes__service-content__text"},sm={class:"am-caes__service-content__text"},lm={class:"am-caes__service-content__text"},nm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},om={class:"am-caes__service-content__text"},rm={class:"am-caes__service-content__text"},im={class:"am-caes__service-content__inner am-caes__service-content__disabled"},cm={class:"am-caes__service-content__text"},xm={class:"am-caes__service-content__text"},um={class:"am-caes__service-content__inner am-caes__service-content__disabled"},dm={class:"am-caes__service-content__text"},mm={class:"am-caes__service__week-days"},pm={class:"am-caes__service__week-periods"},fm={class:"am-caes__service__week-periods-item-range"},gm=ue(" - "),hm={class:"am-caes__service__date"},vm=d("span",{class:"am-icon-calendar"},null,-1),Em={class:"am-caes__service__week-periods"},_m={class:"am-caes__service__week-periods-item-range"},Cm=ue(" - "),ym={name:"CabinetEmployeeProfileServices"},bm=Object.assign(ym,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=U("licence"),s=Oe(),l=U("amLabels"),o=V(""),r={components:{IconComponent:Ze},template:'<IconComponent icon="search"/>'},i=V([{label:"Mon",labelFull:"Monday",value:0},{label:"Tue",labelFull:"Tuesday",value:1},{label:"Wed",labelFull:"Wednesday",value:2},{label:"Thu",labelFull:"Thursday",value:3},{label:"Fri",labelFull:"Friday",value:4},{label:"Sat",labelFull:"Saturday",value:5},{label:"Sun",labelFull:"Sunday",value:6}]),c=V({}),x=b(()=>s.getters["employee/getEmployee"]),g=b(()=>s.getters["entities/getCategories"].filter(L=>L.status==="visible"&&L.serviceList.length>0&&(!o.value.trim()||L.serviceList.filter(D=>D.name.toLowerCase().includes(o.value.toLowerCase().trim())).length))),m=V(g.value.length===1?"category_"+g.value[0].id:null),p=V(0);function y(L){const D=L.serviceList.filter(v=>x.value.serviceList[L.id][v.id].enabled);return D.length>0&&D.length<L.serviceList.length}function T(L){const D=L.serviceList.filter(v=>x.value.serviceList[L.id][v.id].enabled);c.value[L.id]=D.length!==0}function F(L,D){D.serviceList.forEach(v=>{s.commit("employee/setServiceEnabled",{categoryId:D.id,serviceId:v.id,value:L})})}Ge(()=>{qs&&(i.value=i.value.map((L,D)=>({...L,label:Fr[D],labelFull:kr[D]}))),g.value.forEach(L=>{c.value[L.id]=L.serviceList.filter(D=>x.value.serviceList[L.id][D.id].enabled).length!==0})});let E=U("amColors"),P=b(()=>({"--am-c-caes-primary":E.value.colorPrimary,"--am-c-caes-primary-op03":K(E.value.colorPrimary,.3),"--am-c-caes-text":E.value.colorMainText,"--am-c-caes-text-op03":K(E.value.colorMainText,.03),"--am-c-caes-text-op50":K(E.value.colorMainText,.5),"--am-c-caes-inp-bgr-op03":K(E.value.colorInpBgr,.03),"--am-c-caes-border":E.value.colorInpBorder}));return(L,D)=>{const v=_a,f=Ca,C=Cs,B=ys;return u(),A("div",null,[d("div",null,[N(ct,{modelValue:t(o),"onUpdate:modelValue":D[0]||(D[0]=_=>Fe(o)?o.value=_:o=_),"prefix-icon":t(r),"aria-label":"Search"},null,8,["modelValue","prefix-icon"])]),N(B,{modelValue:t(m),"onUpdate:modelValue":D[2]||(D[2]=_=>Fe(m)?m.value=_:m=_),class:"am-caes",style:Be(t(P))},{default:S(()=>[(u(!0),A(ne,null,ve(t(g),_=>(u(),Y(C,{key:"category_"+_.id,name:"category_"+_.id,class:"am-caes__category"},{title:S(()=>[d("div",Xd,[N(ht,{modelValue:t(c)[_.id],"onUpdate:modelValue":k=>t(c)[_.id]=k,indeterminate:y(_),onClick:k=>{k.stopPropagation(),Fe(m)?m.value=`category_${_.id}`:m=`category_${_.id}`},onChange:k=>F(k,_),onKeydown:Vo(k=>{k.stopPropagation(),Fe(m)?m.value=`category_${_.id}`:m=`category_${_.id}`,t(c)[_.id]=!t(c)[_.id],F(t(c)[_.id],_)},["enter"])},null,8,["modelValue","onUpdate:modelValue","indeterminate","onClick","onChange","onKeydown"]),d("div",Qd,w(_.name),1)])]),default:S(()=>[N(B,{modelValue:t(p),"onUpdate:modelValue":D[1]||(D[1]=k=>Fe(p)?p.value=k:p=k),class:"am-caes__inner"},{default:S(()=>[(u(!0),A(ne,null,ve(t(g).find(k=>k.id===_.id).serviceList.filter(k=>!t(o).trim()||k.name.toLowerCase().includes(t(o).toLowerCase())),k=>(u(),Y(C,{key:`service_${k.id}`,name:`service_${k.id}`,class:"am-caes__service"},{title:S(()=>[d("div",Kd,[N(ht,{modelValue:t(x).serviceList[_.id][k.id].enabled,"onUpdate:modelValue":R=>t(x).serviceList[_.id][k.id].enabled=R,onClick:R=>{R.stopPropagation(),Fe(p)?p.value=`service_${k.id}`:p=`service_${k.id}`},onChange:R=>T(_),onKeydown:Vo(R=>{R.stopPropagation(),Fe(p)?p.value=`service_${k.id}`:p=`service_${k.id}`,t(x).serviceList[_.id][k.id].enabled=!t(x).serviceList[_.id][k.id].enabled,T(_)},["enter"])},null,8,["modelValue","onUpdate:modelValue","onClick","onChange","onKeydown"]),d("div",em,w(k.name),1)])]),default:S(()=>[d("div",tm,[d("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",am,w(t(l).minimum_capacity),1),N(Ct,{modelValue:t(x).serviceList[_.id][k.id].minCapacity,"onUpdate:modelValue":R=>t(x).serviceList[_.id][k.id].minCapacity=R,class:"am-caes__service-content__inner",min:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])],2),d("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",sm,w(t(l).maximum_capacity),1),N(Ct,{modelValue:t(x).serviceList[_.id][k.id].maxCapacity,"onUpdate:modelValue":R=>t(x).serviceList[_.id][k.id].maxCapacity=R,class:"am-caes__service-content__inner",min:t(x).serviceList[_.id][k.id].minCapacity,size:"small","aria-label":t(l).maximum_capacity},null,8,["modelValue","onUpdate:modelValue","min","aria-label"])],2),(u(!0),A(ne,null,ve(t(x).serviceList[_.id][k.id].customPricing.enabled==="duration"?t(x).serviceList[_.id][k.id].customPricing.durations:[],(R,M)=>(u(),A(ne,{key:M},[t(x).serviceList[_.id][k.id].customPricing.enabled==="duration"?(u(),A("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",lm,w(t(l).duration),1),d("div",nm,w(t(hs)(M,t(l).h,t(l).min)),1)],2)):$("",!0),d("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",om,w(t(l).price),1),N(ct,{modelValue:R.price,"onUpdate:modelValue":O=>R.price=O,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)],64))),128)),t(x).serviceList[_.id][k.id].customPricing.enabled==="period"||t(x).serviceList[_.id][k.id].customPricing.enabled===null?(u(),A("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",rm,w(t(l).duration),1),d("div",im,w(t(hs)(k.duration,t(l).h,t(l).min)),1)],2)):$("",!0),t(x).serviceList[_.id][k.id].customPricing.enabled==="period"||t(x).serviceList[_.id][k.id].customPricing.enabled===null?(u(),A("div",{key:1,class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",cm,w(t(l).price),1),N(ct,{modelValue:t(x).serviceList[_.id][k.id].price,"onUpdate:modelValue":R=>t(x).serviceList[_.id][k.id].price=R,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)):$("",!0),(u(!0),A(ne,null,ve(t(x).serviceList[_.id][k.id].customPricing.enabled==="person"?t(x).serviceList[_.id][k.id].customPricing.persons:[],(R,M)=>(u(),A(ne,{key:M},[d("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",xm,w(t(l).capacity),1),d("div",um,w(R.from)+" - "+w(M),1)],2),d("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[d("div",dm,w(t(l).price),1),N(ct,{modelValue:R.price,"onUpdate:modelValue":O=>R.price=O,class:"am-caes__service-content__inner",placeholder:"",size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue"])],2)],64))),128))]),t(x).serviceList[_.id][k.id].customPricing.enabled==="period"&&!t(e).isLite&&!t(e).isStarter&&!t(e).isBasic?(u(),Y(f,{key:0,class:"am-caes__service-tabs",stretch:!0},{default:S(()=>[t(x).serviceList[_.id][k.id].customPricing.periods.default.length?(u(),Y(v,{key:0,label:t(l).week_days},{default:S(()=>[(u(!0),A(ne,null,ve(t(x).serviceList[_.id][k.id].customPricing.periods.default,(R,M)=>(u(),A("div",{key:M,class:"am-caes__service__week"},[d("div",mm,[(u(!0),A(ne,null,ve(t(i),(O,H)=>(u(),A("div",{key:H,class:j(["am-caes__service__week-day",{"am-caes__service__week-day-selected":R.days.indexOf(O.value)!==-1}])},[d("span",null,w(O.label),1)],2))),128))]),d("div",pm,[(u(!0),A(ne,null,ve(R.ranges,(O,H)=>(u(),A("div",{key:H,class:"am-caes__service__week-periods-item"},[d("div",fm,[d("span",null,w(O.from),1),gm,d("span",null,w(O.to),1)]),d("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):$("",!0),t(x).serviceList[_.id][k.id].customPricing.periods.custom.length?(u(),Y(v,{key:1,label:t(l).custom_days},{default:S(()=>[(u(!0),A(ne,null,ve(t(x).serviceList[_.id][k.id].customPricing.periods.custom,(R,M)=>(u(),A("div",{key:M,class:"am-caes__service__week"},[d("div",hm,[vm,ue(w(t(it)(R.dates.start))+" - "+w(t(it)(R.dates.end)),1)]),d("div",Em,[(u(!0),A(ne,null,ve(R.ranges,(O,H)=>(u(),A("div",{key:H,class:"am-caes__service__week-periods-item"},[d("div",_m,[d("span",null,w(O.from),1),Cm,d("span",null,w(O.to),1)]),d("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):$("",!0)]),_:2},1024)):$("",!0)]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])])}}});const rt={props:{modelValue:{type:[Boolean,String,Number],default:!1},id:{type:String},name:{type:String},width:{type:[Number,String]},size:{type:String,default:"default",validator(n){return["large","default","small"].includes(n)}},validateEvent:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},activeText:{type:String},inactiveText:{type:String},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeIconClass:{type:String},inactiveIconClass:{type:String},activeIcon:{type:String},inactiveIcon:{type:String},beforeChange:{type:[Function,Boolean],default:()=>{}},borderColor:{type:String},inlinePrompt:{type:Boolean,default:!1},parentClass:{type:String},class:{type:String},ariaLabel:{type:String}},emits:["update:modelValue","change"],setup(n,{emit:a}){const e=n,{modelValue:s}=ro(e),l=b({get:()=>s.value,set:c=>a("update:modelValue",c)}),o=V(null),r=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF",colorBtnWaiting:"#CCA20C",colorBtnWaitingText:"#FFFFFF",colorBtnDanger:"#B4190F",colorBtnDangerText:"#FFFFFF"})),i=b(()=>({"--am-c-switch-bgr-active":r.value.colorPrimary,"--am-c-switch-bgr-inactive":r.value.colorInpBorder,"--am-c-switch-action":r.value.colorMainBgr,"--am-c-switch-text":r.value.colorMainText}));return(c,x)=>{const g=Wi;return u(),A("div",{class:j(["am-switch-wrapper",n.parentClass]),style:Be(t(i))},[N(g,{id:n.id,ref_key:"amSwitch",ref:o,modelValue:t(l),"onUpdate:modelValue":x[0]||(x[0]=m=>Fe(l)?l.value=m:null),class:j(["am-switch",e.class]),name:n.name,width:n.width,size:n.size,"validate-event":n.validateEvent,loading:n.loading,disabled:n.disabled,"active-color":n.activeColor,"inactive-color":n.inactiveColor,"active-text":n.activeText,"inactive-text":n.inactiveText,"active-value":n.activeValue,"inactive-value":n.inactiveValue,"active-icon-class":n.activeIconClass,"inactive-icon-class":n.inactiveIconClass,"active-icon":n.activeIcon,"inactive-icon":n.inactiveIcon,"before-change":n.beforeChange,"border-color":n.borderColor,"inline-prompt":n.inlinePrompt,"aria-label":n.ariaLabel,onChange:x[1]||(x[1]=m=>a("change",m))},null,8,["id","modelValue","class","name","width","size","validate-event","loading","disabled","active-color","inactive-color","active-text","inactive-text","active-value","inactive-value","active-icon-class","inactive-icon-class","active-icon","inactive-icon","before-change","border-color","inline-prompt","aria-label"])],6)}}};const Da={props:{modelValue:{type:String},id:{type:String,default:""},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},includeEndTime:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},placeholder:{type:String,default:""},name:{type:String},effect:{type:String,default:"light",validator(n){return["dark","light"].includes(n)}},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="clock"/>'})},suffixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="arrow-up"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="close"/>'})},start:{type:String,default:""},end:{type:String,default:""},step:{type:String,default:""},minTime:{type:String,default:""},maxTime:{type:String,default:""},format:{type:String,default:"HH:mm"},popperClass:{type:String,default:""},class:{type:String,default:""},parentClass:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:a}){const e=n,{modelValue:s}=ro(e),l=b({get:()=>s.value,set:x=>{a("update:modelValue",x)}}),o=V(null);let r=U("amFonts",V({fontFamily:"Amelia Roboto, sans-serif",fontUrl:"",customFontFamily:"",fontFormat:"",customFontSelected:!1})),i=U("amColors",V({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),c=b(()=>({"--am-c-timeselect-shadow":K(i.value.colorInpText,.05),"--am-c-timeselect-text-op60":K(i.value.colorInpText,.6),"--am-c-timeselect-text-op40":K(i.value.colorInpText,.4),"--am-c-timeselect-text-op10":K(i.value.colorInpText,.03),"--am-font-family":r.value.fontFamily}));return Ge(()=>{const x=document.querySelector("[id^='el-popper-container']");x.style.setProperty("--am-c-option-bgr",i.value.colorDropBgr),x.style.setProperty("--am-c-option-border",i.value.colorDropBorder),x.style.setProperty("--am-c-option-text",i.value.colorDropText),x.style.setProperty("--am-c-option-text-op65",K(i.value.colorDropText,.65)),x.style.setProperty("--am-c-option-text-op50",K(i.value.colorDropText,.5)),x.style.setProperty("--am-c-option-hover",K(i.value.colorDropText,.1)),x.style.setProperty("--am-c-option-selected",i.value.colorPrimary),x.style.setProperty("--am-c-option-selected-op10",K(i.value.colorPrimary,.1)),x.style.setProperty("--am-c-option-img-bgr",i.value.colorSuccess),x.style.setProperty("--am-c-option-img-text",i.value.colorMainBgr),x.style.setProperty("--am-font-family",r.value.fontFamily)}),(x,g)=>{const m=Hi;return u(),A("div",{class:j(["am-time-select__wrapper",n.parentClass]),style:Be(t(c))},[N(m,{id:e.id,ref_key:"amTimeSelect",ref:o,modelValue:t(l),"onUpdate:modelValue":g[0]||(g[0]=p=>Fe(l)?l.value=p:null),class:j(["am-time-select",[`am-time-select--${n.size}`,{"am-time-select--disabled":n.disabled},{"am-time-select--prefix":e.prefixIcon},{"am-time-select--suffix":e.suffixIcon||e.clearIcon&&x.pross.clearable},e.class]]),disabled:e.disabled,placeholder:e.placeholder,"clear-icon":e.clearIcon,clearable:e.clearable,editable:e.editable,name:e.name,"popper-class":`am-time-select__popper${e.popperClass?" "+e.popperClass:e.popperClass}`,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon,end:e.end,"max-time":e.maxTime,"min-time":e.minTime,start:e.start,step:e.step,format:e.format,"include-end-time":e.includeEndTime,effect:e.effect},null,8,["id","modelValue","class","disabled","placeholder","clear-icon","clearable","editable","name","popper-class","prefix-icon","suffix-icon","end","max-time","min-time","start","step","format","include-end-time","effect"])],6)}}};const Bm={class:"am-csd__period-header"},Am={class:"am-csd__period-content__inner"},Fm=d("span",{class:"am-icon-clearable"},null,-1),km={name:"WorkPeriod"},Dm=Object.assign(km,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},periodIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),r=U("pageWidth"),i=V(null),c=b(()=>e.visibility);const{width:x}=Ga(i),g=b(()=>ot(x.value));xt(c,J=>{J&&setTimeout(()=>{F.value=JSON.parse(JSON.stringify(C.value[e.periodIndex]))},300)});let m=V(!1),p=V(null),y=V("");function T(){m.value=!1,y.value=""}let F=V(null),E=V({startTime:b({get:()=>B.value.startTime,set:J=>{B.value.startTime=J}}),endTime:b({get:()=>B.value.endTime,set:J=>{B.value.endTime=J}}),periodServiceList:b({get:()=>B.value.periodServiceList,set:J=>{B.value.periodServiceList=J}}),periodLocationList:b({get:()=>B.value.periodLocationList,set:J=>{B.value.periodLocationList=J}})}),P=V(null),L=b(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),D=V();ze("formWrapper",D);let v=V(s.getters["entities/getLocations"]),f=b(()=>{let J=Dr(s),oe=B.value.periodServiceList.filter(X=>J.map(re=>re.id).indexOf(X)===-1);return J.concat(s.getters["entities/getServices"].filter(X=>oe.indexOf(X.id)!==-1))}),C=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),B=b(()=>e.periodIndex!==null?C.value[e.periodIndex]:null);function _(J){return Mt(Ut(J)-l.general.timeSlotLength)}function k(J){let oe=Mt(Ut(J)+l.general.timeSlotLength);return oe==="00:00"?null:oe}function R(){P.value.validate(J=>{J&&a("close")})}function M(){e.isNew?C.value.pop():C.value[e.periodIndex]=F.value,a("close")}let O=U("amFonts"),H=U("amColors"),z=b(()=>({"--am-c-csd-text":H.value.colorMainText,"--am-c-csd-bgr":H.value.colorMainBgr,"--am-c-csd-text-op10":K(H.value.colorMainText,.1),"--am-c-scroll-op30":K(H.value.colorPrimary,.3),"--am-c-scroll-op10":K(H.value.colorPrimary,.1),"--am-font-family":O.value.fontFamily}));return(J,oe)=>{const X=vt,re=st;return u(),Y(Sa,{visibility:t(e).visibility,style:Be(t(z)),"custom-class":`am-csd am-csd__period${t(r)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":M},wr({footer:S(()=>[d("div",{class:j(["am-csd__period-footer",t(g)])},[N(ke,{category:"secondary",type:"plain",size:t(r)>430?"default":"small",onClick:M},{default:S(()=>[ue(w(t(o).cancel),1)]),_:1},8,["size"]),N(ke,{size:t(r)>430?"default":"small",onClick:R},{default:S(()=>[ue(w(t(o).save),1)]),_:1},8,["size"])],2)]),default:S(()=>[t(B)?(u(),A("div",{key:0,ref_key:"popupPeriodRef",ref:i,class:"am-csd__period-content"},[d("div",Am,[t(m)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:p,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[Fm,ue(" "+w(t(y)),1)]),_:1},512)):$("",!0),N(re,{ref_key:"periodFormRef",ref:P,class:"am-csd__period-form",rules:t(L),model:t(E),"label-position":"top"},{default:S(()=>[N(X,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__period-form__item am-w-50",t(g)])},{default:S(()=>[N(Da,{modelValue:t(B).startTime,"onUpdate:modelValue":oe[0]||(oe[0]=te=>t(B).startTime=te),placeholder:t(o).from,start:"00:00",end:_("24:00"),"min-time":t(e).periodIndex===0?null:_(t(C)[t(e).periodIndex-1].endTime),"max-time":t(e).periodIndex===t(C).length-1?null:t(B).endTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","end","min-time","max-time","step"])]),_:1},8,["label","class"]),N(X,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__period-form__item am-w-50",t(g)])},{default:S(()=>[N(Da,{modelValue:t(B).endTime,"onUpdate:modelValue":oe[1]||(oe[1]=te=>t(B).endTime=te),placeholder:t(o).to_upper,disabled:!t(B).startTime,start:k("00:00"),end:"24:00","min-time":t(B).startTime,"max-time":t(e).periodIndex===t(C).length-1?null:k(t(C)[t(e).periodIndex+1].startTime),step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","min-time","max-time","step"])]),_:1},8,["label","class"]),N(X,{label:`${t(o).heading_services}:`,prop:"periodServiceList",class:"am-csd__period-form__item"},{default:S(()=>[N(Je,{modelValue:t(B).periodServiceList,"onUpdate:modelValue":oe[2]||(oe[2]=te=>t(B).periodServiceList=te),placeholder:`${t(o).all_services}`,multiple:"",clearable:""},{default:S(()=>[(u(!0),A(ne,null,ve(t(f),te=>(u(),Y(Ye,{key:te.id,value:te.id,label:te.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(v).length>0?(u(),Y(X,{key:0,label:`${t(o).location}:`,prop:"periodLocationList",class:"am-csd__period-form__item"},{default:S(()=>[N(Je,{modelValue:t(B).periodLocationList,"onUpdate:modelValue":oe[3]||(oe[3]=te=>t(B).periodLocationList=te),placeholder:`${t(o).all_locations}`,multiple:"",clearable:""},{default:S(()=>[(u(!0),A(ne,null,ve(t(v),te=>(u(),Y(Ye,{key:te.id,value:te.id,label:te.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0)]),_:1},8,["rules","model"])])],512)):$("",!0)]),_:2},[t(e).title?{name:"header",fn:S(()=>[d("div",Bm,w(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const wm={class:"am-csd__timeOut-header"},Pm={class:"am-csd__timeOut-content__inner"},Tm=d("span",{class:"am-icon-clearable"},null,-1),Lm={name:"WorkTimeOut"},Sm=Object.assign(Lm,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},timeOutIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),r=U("pageWidth"),i=V(null),c=b(()=>e.visibility);const{width:x}=Ga(i),g=b(()=>ot(x.value));xt(c,z=>{z&&setTimeout(()=>{F.value=JSON.parse(JSON.stringify(v.value[e.timeOutIndex]))},300)});let m=V(!1),p=V(null),y=V("");function T(){m.value=!1,y.value=""}let F=V(null),E=V({startTime:b({get:()=>C.value.startTime,set:z=>{C.value.startTime=z}}),endTime:b({get:()=>C.value.endTime,set:z=>{C.value.endTime=z}})}),P=V(null),L=b(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),D=V();ze("formWrapper",D);let v=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].timeOutList),f=b(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),C=b(()=>e.timeOutIndex!==null?v.value[e.timeOutIndex]:null);b(()=>f.value.length?_(f.value[0].startTime):"00:00"),b(()=>f.value.length?B(f.value[f.value.length-1].endTime):"00:00");function B(z){return Mt(Ut(z)-l.general.timeSlotLength)}function _(z){let J=Mt(Ut(z)+l.general.timeSlotLength);return J==="00:00"?null:J}function k(){P.value.validate(z=>{z&&a("close")})}function R(){e.isNew?v.value.pop():v.value[e.timeOutIndex]=F.value,a("close")}let M=U("amFonts"),O=U("amColors"),H=b(()=>({"--am-c-csd-text":O.value.colorMainText,"--am-c-csd-bgr":O.value.colorMainBgr,"--am-c-csd-text-op10":K(O.value.colorMainText,.1),"--am-c-scroll-op30":K(O.value.colorPrimary,.3),"--am-c-scroll-op10":K(O.value.colorPrimary,.1),"--am-font-family":M.value.fontFamily}));return(z,J)=>{const oe=vt,X=st;return u(),Y(Sa,{visibility:t(e).visibility,style:Be(t(H)),"custom-class":`am-csd am-csd__timeOut${t(r)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":R},wr({footer:S(()=>[d("div",{class:j(["am-csd__timeOut-footer",t(g)])},[N(ke,{category:"secondary",type:"plain",size:t(r)>430?"default":"small",onClick:R},{default:S(()=>[ue(w(t(o).cancel),1)]),_:1},8,["size"]),N(ke,{size:t(r)>430?"default":"small",onClick:k},{default:S(()=>[ue(w(t(o).save),1)]),_:1},8,["size"])],2)]),default:S(()=>[t(C)?(u(),A("div",{key:0,ref_key:"popupTimeOutRef",ref:i,class:"am-csd__timeOut-content"},[d("div",Pm,[t(m)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:p,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[Tm,ue(" "+w(t(y)),1)]),_:1},512)):$("",!0),N(X,{ref_key:"timeOutFormRef",ref:P,class:"am-csd__timeOut-form",rules:t(L),model:t(E),"label-position":"top"},{default:S(()=>[N(oe,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__timeOut-form__item am-w-50",t(g)])},{default:S(()=>[N(Da,{modelValue:t(C).startTime,"onUpdate:modelValue":J[0]||(J[0]=re=>t(C).startTime=re),placeholder:t(o).from,start:_(t(f)[0].startTime),end:B(t(f)[t(f).length-1].endTime),step:t(Mt)(t(l).general.timeSlotLength),"max-time":t(v)[t(e).timeOutIndex].endTime},null,8,["modelValue","placeholder","start","end","step","max-time"])]),_:1},8,["label","class"]),N(oe,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__timeOut-form__item am-w-50",t(g)])},{default:S(()=>[N(Da,{modelValue:t(C).endTime,"onUpdate:modelValue":J[1]||(J[1]=re=>t(C).endTime=re),placeholder:t(o).to_upper,disabled:!t(C).startTime,start:_(t(f)[0].startTime),end:B(t(f)[t(f).length-1].endTime),"min-time":t(v)[t(e).timeOutIndex].startTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","end","min-time","step"])]),_:1},8,["label","class"])]),_:1},8,["rules","model"])])],512)):$("",!0)]),_:2},[t(e).title?{name:"header",fn:S(()=>[d("div",wm,w(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const Im={class:"am-cc__edit"},$m=d("span",{class:"am-icon-edit"},null,-1),Nm={class:"am-cc__edit-text"},Om=d("span",{class:"am-icon-search"},null,-1),Mm={class:"am-cc__edit-text"},Vm=d("span",{class:"am-icon-clearable"},null,-1),Rm={class:"am-cc__edit-text"},qm=d("span",{class:"am-icon-clearable"},null,-1),Um={class:"am-cc__edit-text"},zm={name:"DotsPopup"},Ea=Object.assign(zm,{props:{index:{type:Number,default:0},referenceClass:{type:String,default:""},haveDuplicate:{type:Boolean,default:!1},haveDelete:{type:Boolean,default:!0},haveEdit:{type:Boolean,default:!0},haveView:{type:Boolean,default:!1}},emits:["remove","edit","duplicate"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=V(!1);function o(){l.value=!0}function r(){a("edit",e.index),x()}function i(){a("remove",e.index),x()}function c(){a("duplicate",e.index),x()}function x(){l.value=!1}let g=U("amFonts"),m=U("amColors"),p=b(()=>({"--am-c-cc-error":m.value.colorError,"--am-c-cc-error-op15":K(m.value.colorError,.15),"--am-c-cc-bgr":m.value.colorMainBgr,"--am-c-cc-text":m.value.colorMainText,"--am-c-cc-text-op10":K(m.value.colorMainText,.1),"--am-c-cc-text-op15":K(m.value.colorMainText,.15),"--am-font-family":g.value.fontFamily}));return(y,T)=>{const F=bs;return u(),Y(F,{ref:"editRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(p),trigger:"click"},{reference:S(()=>[d("span",{class:j(["am-cc__edit-btn am-icon-dots-vertical",t(e).referenceClass]),onClick:o},null,2)]),default:S(()=>[$t((u(),A("div",Im,[t(e).haveEdit?(u(),A("div",{key:0,class:"am-cc__edit-item",onClick:r},[$m,d("span",Nm,w(t(s).edit),1)])):$("",!0),t(e).haveView?(u(),A("div",{key:1,class:"am-cc__edit-item",onClick:r},[Om,d("span",Mm,w(t(s).view),1)])):$("",!0),t(e).haveDelete?(u(),A("div",{key:2,class:"am-cc__edit-item am-delete",onClick:i},[Vm,d("span",Rm,w(t(s).delete),1)])):$("",!0),t(e).haveDuplicate?(u(),A("div",{key:3,class:"am-cc__edit-item am-clone",onClick:c},[qm,d("span",Um,w(t(s).duplicate),1)])):$("",!0)])),[[t(Qt),x]])]),_:1},8,["visible","popper-style"])}}});const jm={class:"am-caeper__heading-item am-w-20"},Ym={class:"am-caeper__heading-item am-w-40"},Wm={class:"am-caeper__heading-item am-w-40"},Hm={key:1},Gm={class:"am-caeper__heading-item am-w-20"},Zm={key:0,class:"am-caeper__error"},Jm={name:"WorkPeriods"},fi=Object.assign(Jm,{props:{title:{type:String,default:""},type:{type:String,default:""},index:{type:Number,default:0},enabled:{type:Boolean,default:!1},headerVisible:{type:Boolean,default:!0},applyToAllDaysVisible:{type:Boolean,default:!0},footerVisible:{type:Boolean,default:!0},editVisible:{type:Boolean,default:!0},error:{type:String,default:""},responsiveClass:{type:String,default:""}},emits:["addPeriod"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels"),o=b(()=>s.getters["entities/getLocations"]),r=b(()=>s.getters["entities/getServices"]),i=b(()=>Dr(s)),c=b(()=>{let L=s.getters["employee/getEmployee"];switch(e.type){case"weekDayList":return L.weekDayList[e.index].periodList;case"specialDayList":return L.specialDayList[e.index].periodList}return[]}),x=b(()=>{let L=s.getters["employee/getEmployee"];return e.type==="weekDayList"?L.weekDayList[e.index].timeOutList:[]}),g=V(null),m=V(null),p=V(null);function y(){c.value.push({id:null,locationId:null,startTime:"",endTime:"",periodLocationList:[],periodServiceList:[],editing:!0}),p.value=!0,g.value=c.value.length-1,a("addPeriod")}function T(){let L=[];s.getters["employee/getEmployee"].weekDayList[e.index].periodList.forEach(D=>{L.push({id:null,locationId:null,startTime:D.startTime,endTime:D.endTime,periodLocationList:[...D.periodLocationList],periodServiceList:[...D.periodServiceList],editing:!1})}),s.getters["employee/getEmployee"].weekDayList.forEach((D,v)=>{v!==e.index&&(D.periodList=JSON.parse(JSON.stringify(L)))})}function F(){return!c.value.length||!c.value.filter(L=>L.startTime&&L.endTime).length||c.value[c.value.length-1].endTime!=="00:00"}let E=U("amColors"),P=b(()=>({"--am-c-caeper-bgr":E.value.colorMainBgr,"--am-c-caeper-text":E.value.colorMainText,"--am-c-caeper-text-op80":K(E.value.colorMainText,.8)}));return(L,D)=>$t((u(),A("div",{class:"am-caeper",style:Be(t(P))},[t(e).headerVisible&&t(c).length?(u(),A("div",{key:0,class:j(["am-caeper__heading",t(e).responsiveClass])},[d("div",jm,w(t(l).time),1),d("div",Ym,w(t(l).service_colon),1),d("div",Wm,w(t(l).location),1)],2)):$("",!0),(u(!0),A(ne,null,ve(t(c),(v,f)=>(u(),A("div",{key:f,class:"am-caeper__content"},[d("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},w(v.startTime?v.startTime.substring(0,5):"")+" - "+w(v.endTime?v.endTime.substring(0,5):""),3),d("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!v.periodServiceList.length}]])},w(v.periodServiceList.filter(C=>t(i).map(B=>B.id).indexOf(C)!==-1).map(C=>t(r).find(B=>B.id===C).name).join(", ")),3),d("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!v.periodLocationList.length}]])},w(v.periodLocationList.map(C=>t(o).find(B=>B.id===C).name).join(", ")),3),t(e).editVisible?(u(),Y(Ea,{key:0,index:f,onRemove:C=>t(c).splice(f,1),onEdit:C=>Fe(g)?g.value=f:g=f},null,8,["index","onRemove","onEdit"])):$("",!0)]))),128)),t(x).length?(u(),A("span",Hm,w(t(l).breaks),1)):$("",!0),t(e).headerVisible&&t(x).length?(u(),A("div",{key:2,class:j(["am-caeper__heading",t(e).responsiveClass])},[d("div",Gm,w(t(l).time),1)],2)):$("",!0),(u(!0),A(ne,null,ve(t(x),(v,f)=>(u(),A("div",{key:f,class:"am-caeper__content"},[d("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},w(v.startTime?v.startTime.substring(0,5):"")+" - "+w(v.endTime?v.endTime.substring(0,5):""),3),t(e).editVisible?(u(),Y(Ea,{key:0,index:f,onRemove:C=>t(x).splice(f,1),onEdit:C=>Fe(m)?m.value=f:m=f},null,8,["index","onRemove","onEdit"])):$("",!0)]))),128)),t(e).footerVisible?(u(),A("div",{key:3,class:j(["am-caeper__footer",[{"am-error":t(e).error},t(e).responsiveClass]])},[t(e).error?(u(),A("div",Zm,w(t(e).error),1)):$("",!0),F()?(u(),Y(ke,{key:1,prefix:"plus",size:"small",onClick:D[0]||(D[0]=v=>y())},{default:S(()=>[ue(w(t(l).add_period),1)]),_:1})):$("",!0),t(e).applyToAllDaysVisible?(u(),Y(ke,{key:2,size:"small",category:"secondary",type:"plain",onClick:T},{default:S(()=>[ue(w(t(l).apply_to_all_days),1)]),_:1})):$("",!0)],2)):$("",!0),N(Dm,{title:t(e).title,visibility:t(g)!==null,origin:t(e).type,"period-index":t(g),"origin-index":n.index,"is-new":t(p),onClose:D[1]||(D[1]=()=>{Fe(g)?g.value=null:g=null,Fe(p)?p.value=null:p=null})},null,8,["title","visibility","origin","period-index","origin-index","is-new"]),N(Sm,{title:t(l).break_hours,visibility:t(m)!==null,origin:t(e).type,"time-out-index":t(m),"origin-index":n.index,"is-new":!1,"is-break":!0,onClose:D[2]||(D[2]=()=>{Fe(m)?m.value=null:m=null})},null,8,["title","visibility","origin","time-out-index","origin-index"])],4)),[[mo,t(e).enabled]])}});const Xm={class:"am-caewh__header"},Qm={class:"am-caewh__header-text"},Km={class:"am-caewh__content"},ep={name:"WeekDays"},tp=Object.assign(ep,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=b(()=>e.getters["employee/getEmployee"]),o=V([{label:s.weekday_monday,value:"monday"},{label:s.weekday_tuesday,value:"tuesday"},{label:s.weekday_wednesday,value:"wednesday"},{label:s.weekday_thursday,value:"thursday"},{label:s.weekday_friday,value:"friday"},{label:s.weekday_saturday,value:"saturday"},{label:s.weekday_sunday,value:"sunday"}]),r=U("amColors"),i=b(()=>({"--am-c-caewh-primary":r.value.colorPrimary,"--am-c-caewh-bgr":r.value.colorMainBgr,"--am-c-caewh-text":r.value.colorMainText,"--am-c-caewh-text-op03":K(r.value.colorMainText,.03),"--am-c-caewh-bgr-op03":K(r.value.colorInpBgr,.03)}));return(c,x)=>(u(),A("div",{class:"am-caewh",style:Be(t(i))},[(u(!0),A(ne,null,ve(t(l).weekDayList,(g,m)=>(u(),A("div",{key:m,class:"am-caewh__item"},[d("div",Xm,[d("div",Qm,w(t(o)[m].label),1),N(rt,{modelValue:g.enabled,"onUpdate:modelValue":p=>g.enabled=p,size:"small","aria-label":t(o)[m].label},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),d("div",Km,[N(fi,{title:t(s).working_hours,enabled:g.enabled,index:m,type:"weekDayList","responsive-class":t(a).responsiveClass},null,8,["title","enabled","index","responsive-class"])])]))),128))],4))}});const ap={class:"am-caesd__item"},sp={class:"am-caesd__item-header"},lp={key:2},np={key:0,class:"am-caesd__footer"},op={name:"SpecialDays"},rp=Object.assign(op,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=U("localLanguage"),o=b(()=>e.getters["employee/getEmployee"].specialDayList),r=tt({data:null,index:null}),i=V({range:b({get:()=>e.getters["employee/getEmployee"].specialDayList[r.index].range,set:v=>{e.getters["employee/getEmployee"].specialDayList[r.index].range=v}})}),c=V([]),x=b(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}]}));function g(v){o.value.splice(v,1)}function m(v){r.index=v,r.data=JSON.parse(JSON.stringify(o.value[v]))}function p(v){let f=[];o.value[v].periodList.forEach(C=>{f.push({id:null,locationId:null,startTime:C.startTime,endTime:C.endTime,periodLocationList:[...C.periodLocationList],periodServiceList:[...C.periodServiceList],editing:!1})}),e.getters["employee/getEmployee"].specialDayList.push({id:null,range:[],periodList:f}),r.index=o.value.length-1,r.data={}}let y=V("");function T(v){let f=e.getters["employee/getEmployee"].specialDayList[v].periodList;c.value[v].validate(C=>{C&&f.length>0?(y.value="",r.index=null,r.data=null):y.value="Please add period to special day"})}function F(v){Object.keys(r.data).length===0?o.value.pop():o.value[v]=r.data,r.index=null,r.data=null,y.value=""}function E(){o.value.push({id:null,range:[],periodList:[]}),r.index=o.value.length-1,r.data={}}function P(v,f){v?c.value[f]=v:c.value.splice(f,1)}let L=U("amColors"),D=b(()=>({"--am-c-caesd-bgr":L.value.colorMainBgr,"--am-c-caesd-text":L.value.colorMainText,"--am-c-caesd-text-op03":K(L.value.colorMainText,.03),"--am-c-caesd-text-op80":K(L.value.colorMainText,.8)}));return(v,f)=>{const C=vt,B=st;return u(),A("div",{class:"am-caesd",style:Be(t(D))},[(u(!0),A(ne,null,ve(t(o),(_,k)=>(u(),A("div",{key:k,class:"am-caesd__content"},[d("div",ap,[d("div",sp,[t(r).index!==k?(u(),A(ne,{key:0},[d("div",null,w(_.range[0]?t(it)(t(Ae)(_.range[0]).format("YYYY-MM-DD")):"")+" - "+w(_.range[1]?t(it)(t(Ae)(_.range[1]).format("YYYY-MM-DD")):""),1),N(Ea,{index:k,"have-duplicate":!0,onRemove:R=>g(k),onEdit:R=>m(k),onDuplicate:R=>p(k)},null,8,["index","onRemove","onEdit","onDuplicate"])],64)):$("",!0),t(r).index===k?(u(),Y(B,{key:1,ref_for:!0,ref:R=>P(R,k),class:"am-caesd__form",rules:t(x),model:t(i),"label-position":"top"},{default:S(()=>[N(C,{prop:"range"},{default:S(()=>[N(ea,{modelValue:t(i).range,"onUpdate:modelValue":f[0]||(f[0]=R=>t(i).range=R),type:"daterange",size:"small","popper-class":"am-cap__datepicker-popper","prefix-icon":Qe({components:{IconComponent:Ze},template:"<IconComponent icon='calendar'/>"}),format:t(Kt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","prefix-icon","format","placeholder","lang"])]),_:1})]),_:2},1032,["rules","model"])):$("",!0),t(y)?(u(),A("div",lp)):$("",!0)]),d("div",{class:j(["am-caesd__item-inner",{"am-editable":t(r).index===k}])},[N(fi,{title:t(s).special_days,enabled:!0,index:k,type:"specialDayList","apply-to-all-days-visible":!1,"header-visible":t(r).index===k,"edit-visible":t(r).index===k,"footer-visible":t(r).index===k,error:t(r).index===k?t(y):"","responsive-class":t(a).responsiveClass,onAddPeriod:f[1]||(f[1]=()=>{Fe(y)?y.value="":y=""})},null,8,["title","index","header-visible","edit-visible","footer-visible","error","responsive-class"])],2)]),t(r).index===k?(u(),A("div",np,[N(ke,{category:"secondary",type:"plain",size:"small",onClick:R=>F(k)},{default:S(()=>[ue(w(t(s).cancel),1)]),_:2},1032,["onClick"]),N(ke,{size:"small",onClick:R=>T(k)},{default:S(()=>[ue(w(t(s).save),1)]),_:2},1032,["onClick"])])):$("",!0)]))),128)),t(o).length===0?(u(),Y(Ta,{key:0,heading:t(s).no_special_days_yet},null,8,["heading"])):$("",!0),t(r).index===null?(u(),A("div",{key:1,class:j(t(o).length===0?"add-btn":"")},[N(ke,{size:"small",onClick:f[2]||(f[2]=_=>E())},{default:S(()=>[ue(w(t(s).add_special_day),1)]),_:1})],2)):$("",!0)],4)}}});const ip={key:0,class:"am-caedo__title_emp"},cp={class:"am-caedo__heading-item am-w-50"},xp={class:"am-caedo__heading-item am-w-30"},up={class:"am-caedo__heading-item am-w-20"},dp={class:"am-caedo__content-item"},mp={key:0,class:"am-caedo__wrapper"},pp={class:"am-caedo__footer"},fp={key:4,class:"am-caedo__title_global"},gp={class:"am-caedo__heading-item am-w-50"},hp={class:"am-caedo__heading-item am-w-30"},vp={class:"am-caedo__heading-item am-w-20"},Ep={class:"am-caedo__content-item"},_p={name:"DaysOff"},Cp=Object.assign(_p,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=U("localLanguage");const o=U("settings");let r=b(()=>e.getters["employee/getEmployee"].dayOffList),i=V([]),c=tt({data:null,index:null}),x=V({range:b({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].range,set:f=>{e.getters["employee/getEmployee"].dayOffList[c.index].range=f}}),name:b({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].name,set:f=>{e.getters["employee/getEmployee"].dayOffList[c.index].name=f}}),repeat:b({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].repeat,set:f=>{e.getters["employee/getEmployee"].dayOffList[c.index].repeat=f}})}),g=V([]),m=b(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}],name:[{required:!0,message:s.days_off_name_warning,trigger:["submit","change"]}]}));function p(f){r.value.splice(f,1)}function y(f){c.index=f,c.data=JSON.parse(JSON.stringify(r.value[f]))}function T(f){g.value[f].validate(C=>{C&&(c.index=null,c.data=null)})}function F(f){Object.keys(c.data).length===0?r.value.pop():r.value[f]=c.data,c.index=null,c.data=null}function E(){r.value.push({id:null,name:"",repeat:!1,range:[]}),c.index=r.value.length-1,c.data={}}function P(f){let C=f.range[0]?it(Ae(f.range[0]).format("YYYY-MM-DD")):"",B=f.range[1]?it(Ae(f.range[1]).format("YYYY-MM-DD")):"";return`${C} - ${B}`}function L(f,C){f?g.value[C]=f:g.value.splice(C,1)}Ge(()=>{i.value=o.daysOff.map(f=>new Object({range:[f.startDate,f.endDate],name:f.name,repeat:f.repeat}))});let D=U("amColors"),v=b(()=>({"--am-c-caedo-bgr":D.value.colorMainBgr,"--am-c-caedo-text":D.value.colorMainText,"--am-c-caedo-text-op80":K(D.value.colorMainText,.8),"--am-c-caedo-text-op03":K(D.value.colorMainText,.03)}));return(f,C)=>{const B=vt,_=st;return u(),A("div",{class:"am-caedo",style:Be(t(v))},[t(i).length?(u(),A("span",ip,w(t(s).employee_days_off),1)):$("",!0),t(r).length||t(i).length?(u(),A("div",{key:1,class:j(["am-caedo__heading",t(a).responsiveClass])},[d("div",cp,w(t(s).date),1),d("div",xp,w(t(s).name),1),d("div",up,w(t(s).days_off_repeat_yearly),1)],2)):$("",!0),(u(!0),A(ne,null,ve(t(r),(k,R)=>(u(),A("div",{key:R,class:"am-caedo__content"},[d("div",dp,[d("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).date),3),ue(" "+w(P(k)),1)],2),d("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).name),3),ue(" "+w(k.name),1)],2),d("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).days_off_repeat_yearly),3),ue(" "+w(k.repeat?t(s).yes:t(s).no),1)],2),t(c).index===null?(u(),Y(Ea,{key:0,index:R,onRemove:M=>p(R),onEdit:M=>y(R)},null,8,["index","onRemove","onEdit"])):$("",!0)]),t(c).index===R?(u(),A("div",mp,[N(_,{ref_for:!0,ref:M=>L(M,R),class:"am-caedo__form",rules:t(m),model:t(x),"label-position":"top"},{default:S(()=>[N(B,{label:`${t(s).date}:`,prop:"range"},{default:S(()=>[N(ea,{modelValue:t(x).range,"onUpdate:modelValue":C[0]||(C[0]=M=>t(x).range=M),type:"daterange","popper-class":"am-cap__datepicker-popper",format:t(Kt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","format","placeholder","lang"])]),_:1},8,["label"]),N(B,{label:`${t(s).name}:`,prop:"name"},{default:S(()=>[N(ct,{modelValue:t(x).name,"onUpdate:modelValue":C[1]||(C[1]=M=>t(x).name=M)},null,8,["modelValue"])]),_:1},8,["label"]),N(B,{prop:"repeat"},{default:S(()=>[N(ht,{modelValue:t(x).repeat,"onUpdate:modelValue":C[2]||(C[2]=M=>t(x).repeat=M),label:t(s).days_off_repeat_yearly},null,8,["modelValue","label"])]),_:1})]),_:2},1032,["rules","model"]),d("div",pp,[N(ke,{category:"secondary",size:"small",type:"plain",onClick:M=>F(R)},{default:S(()=>[ue(w(t(s).cancel),1)]),_:2},1032,["onClick"]),N(ke,{size:"small",onClick:M=>T(R)},{default:S(()=>[ue(w(t(s).save),1)]),_:2},1032,["onClick"])])])):$("",!0)]))),128)),t(r).length===0&&t(i).length===0?(u(),Y(Ta,{key:2,heading:t(s).no_days_off_yet},null,8,["heading"])):$("",!0),t(c).index===null?(u(),A("div",{key:3,class:j(t(r).length===0&&t(i).length===0?"add-btn":"")},[N(ke,{size:"small",onClick:C[3]||(C[3]=k=>E())},{default:S(()=>[ue(w(t(s).add_day_off),1)]),_:1})],2)):$("",!0),t(i).length?(u(),A("span",fp,w(t(s).company_days_off),1)):$("",!0),t(i).length?(u(),A("div",{key:5,class:j(["am-caedo__heading",t(a).responsiveClass])},[d("div",gp,w(t(s).date),1),d("div",hp,w(t(s).name),1),d("div",vp,w(t(s).days_off_repeat_yearly),1)],2)):$("",!0),(u(!0),A(ne,null,ve(t(i),(k,R)=>(u(),A("div",{key:R,class:"am-caedo__content"},[d("div",Ep,[d("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).date),3),ue(" "+w(P(k)),1)],2),d("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).name),3),ue(" "+w(k.name),1)],2),d("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[d("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},w(t(s).days_off_repeat_yearly),3),ue(" "+w(k.repeat?t(s).yes:t(s).no),1)],2)])]))),128))],4)}}});const yp={class:"am-cc__edit"},bp={class:"am-cc__edit-text"},Bp={class:"am-cc__edit-text"},Ap={class:"am-cc__edit"},Fp={class:"am-cc__edit-text"},kp={class:"am-cc__edit-text"},Dp={class:"am-cc__edit"},wp={class:"am-cc__edit-text"},Pp={class:"am-cc__edit-text"},Tp={name:"StripeConnect"},Lp=Object.assign(Tp,{setup(n){let a=Oe(),e=U("amLabels"),s=b(()=>a.getters["auth/getStripeProvider"]),l=V(!1);function o(y){y.stopPropagation(),l.value=!l.value}function r(y){ec(a,y),x()}function i(){ac(a),x()}function c(){tc(a),x()}function x(){l.value=!1}let g=U("amFonts"),m=U("amColors"),p=b(()=>({"--am-c-cc-error":m.value.colorError,"--am-c-cc-error-op15":K(m.value.colorError,.15),"--am-c-cc-bgr":m.value.colorMainBgr,"--am-c-cc-text":m.value.colorMainText,"--am-c-cc-text-op10":K(m.value.colorMainText,.1),"--am-c-cc-text-op15":K(m.value.colorMainText,.15),"--am-font-family":g.value.fontFamily}));return(y,T)=>{const F=bs;return t(s)&&t(s).id&&t(s).completed?(u(),Y(F,{key:0,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(p),trigger:"click"},{reference:S(()=>[N(ke,{onClick:o},{default:S(()=>[ue(w(t(e).stripe_connect)+" "+w("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:S(()=>[$t((u(),A("div",yp,[d("div",{class:"am-cc__edit-item",onClick:T[0]||(T[0]=E=>i())},[d("span",bp,w(t(e).stripe_preview),1)]),d("div",{class:"am-cc__edit-item",onClick:T[1]||(T[1]=E=>c())},[d("span",Bp,w(t(e).disconnect),1)])])),[[t(Qt),x]])]),_:1},8,["visible","popper-style"])):t(s)&&t(s).id&&!t(s).completed?(u(),Y(F,{key:1,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(p),trigger:"click"},{reference:S(()=>[N(ke,{onClick:o},{default:S(()=>[ue(w(t(e).stripe_connect)+" "+w("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:S(()=>[$t((u(),A("div",Ap,[d("div",{class:"am-cc__edit-item",onClick:T[2]||(T[2]=E=>r(t(s).type))},[d("span",Fp,w(t(e).stripe_onboard),1)]),d("div",{class:"am-cc__edit-item",onClick:T[3]||(T[3]=E=>c())},[d("span",kp,w(t(e).disconnect),1)])])),[[t(Qt),x]])]),_:1},8,["visible","popper-style"])):(u(),Y(F,{key:2,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(p),trigger:"click"},{reference:S(()=>[N(ke,{onClick:o},{default:S(()=>[ue(w(t(e).stripe_connect),1)]),_:1})]),default:S(()=>[$t((u(),A("div",Dp,[d("div",{class:"am-cc__edit-item",onClick:T[4]||(T[4]=E=>r("standard"))},[d("span",wp,w(t(e).stripe_account_standard),1)]),d("div",{class:"am-cc__edit-item",onClick:T[5]||(T[5]=E=>r("express"))},[d("span",Pp,w(t(e).stripe_account_express),1)])])),[[t(Qt),x]])]),_:1},8,["visible","popper-style"]))}}});const Sp=["innerHTML"],Ip={key:2,class:"am-caedo__apple"},$p={class:"am-caedo__apple__connect"},Np={props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=V(""),s=V("error"),l=V(!1);function o(){l.value=!1,e.value=""}const r=Oe(),i=U("baseUrls"),c=U("settings");let x=U("amLabels"),g=b(()=>r.getters["auth/getGoogleLoading"]||r.getters["auth/getOutlookLoading"]||r.getters["auth/getAppleLoading"]||r.getters["auth/getStripeLoading"]||r.getters["auth/getZoomLoading"]),m=b(()=>{let B=r.getters["auth/getZoomUsers"];return B.length?B.map(_=>({value:_.id,label:`${_.first_name} ${_.last_name} (${_.email})`})):[]}),p=b(()=>{let B=r.getters["auth/getGoogleCalendars"];return B.length?B.map(_=>({value:_.calendarId?_.calendarId:_.id,label:_.summary})):[]}),y=b(()=>{let B=r.getters["auth/getOutlookCalendars"];return B.length?B.map(_=>({value:_.id,label:_.name})):[]}),T=b(()=>{let B=r.getters["auth/getAppleCalendars"];return B.length?B.map(_=>({value:_.id,label:_.name})):[]}),F=V(null),E=V({iCloudId:b({get:()=>r.getters["employee/getEmployeeAppleCalendarICloudId"],set:B=>{r.commit("employee/setEmployeeAppleCalendarICloudId",B||"")}}),appSpecificPassword:b({get:()=>r.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"],set:B=>{r.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",B||null)}})}),P=b(()=>r.getters["employee/getGoogleToken"]?x.google_sign_out:x.google_sign_in),L=b(()=>r.getters["employee/getOutlookToken"]?x.outlook_sign_out:x.outlook_sign_in),D=V({googleId:b({get:()=>r.getters["employee/getGoogleToken"]?r.getters["employee/getGoogleCalendarId"]:r.getters["employee/getUserTableGoogleCalendarId"],set:B=>{r.getters["employee/getGoogleToken"]?r.commit("employee/setGoogleCalendarId",B||""):r.commit("employee/setEmployeeGoogleCalendarId",B||"")}}),googleBtn:"",outlookId:b({get:()=>r.getters["employee/getOutlookCalendarId"],set:B=>{r.commit("employee/setOutlookCalendarId",B||"")}}),outlookBtn:"",zoomUserId:b({get:()=>r.getters["employee/getZoomUserId"],set:B=>{r.commit("employee/setZoomUserId",B||"")}}),appleId:b({get:()=>r.getters["employee/getAppleCalendarId"],set:B=>{r.commit("employee/setAppleCalendarId",B||"")}})}),v=V({googleId:{template:We.select,props:{itemName:"googleId",label:x.google_calendar,placeholder:"",class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:b(()=>!r.getters["employee/getGoogleToken"]),clearable:!1,options:p.value,loading:b(()=>r.getters["auth/getGoogleLoading"]),loadingIcon:"loading"}},googleBtn:{template:Qe(ke),props:{class:b(()=>`am-caepif__item am-google-calendar-button ${a.responsiveClass}`),category:b(()=>"primary"),disabled:b(()=>!!r.getters["employee/getUserTableGoogleCalendarId"])},slots:{default:b(()=>`<img src="${i.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/google-button.svg" alt="Google" />${P.value}`)},handlers:{click:()=>{r.getters["employee/getGoogleToken"]?G0(r):H0(r)}}},outlookId:{template:We.select,props:{itemName:"outlookId",label:x.outlook_calendar,placeholder:"",class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:b(()=>!r.getters["employee/getOutlookToken"]),clearable:!1,options:y.value,loading:b(()=>r.getters["auth/getOutlookLoading"]),loadingIcon:"loading"}},outlookBtn:{template:Qe(ke),props:{class:b(()=>`am-caepif__item am-outlook-button ${a.responsiveClass}`),category:b(()=>"primary")},slots:{default:b(()=>`<div class="am-outlook-img"><img src="${i.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/outlook-calendar.png" alt="Outlook"/></div>${L.value}`)},handlers:{click:()=>{r.getters["employee/getOutlookToken"]?X0(r):J0(r)}}},zoomUserId:{template:We.select,props:{itemName:"zoomUserId",label:x.zoom_user,placeholder:x.zoom_user_placeholder,class:b(()=>`am-caepif__item ${a.responsiveClass}`),options:m.value}},appleId:{template:We.select,props:{itemName:"appleId",label:x.apple_calendar,placeholder:x.apple_calendar_placeholder,class:b(()=>`am-caepif__item ${a.responsiveClass}`),disabled:!1,clearable:b(()=>!Aa.value),options:b(()=>T.value),loading:b(()=>r.getters["auth/getAppleLoading"]),loadingText:"Loading..."}}});Ge(()=>{c.appleCalendar&&F.value&&(F.value.contentVisibility=Aa.value)}),Zs(()=>{c.zoom.enabled||delete v.value.zoomUserId,!c.googleCalendar.enabled&&!c.googleCalendar.accessToken&&delete v.value.googleId,!c.googleCalendar.enabled&&!c.googleCalendar.accessToken&&delete v.value.googleBtn,c.outlookCalendar.enabled||(delete v.value.outlookId,delete v.value.outlookBtn),c.appleCalendar||delete v.value.appleId});function f(B){const _={iCloudId:B.getters["employee/getEmployeeAppleCalendarICloudId"],appSpecificPassword:B.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"]};$e.post("/apple/connect/"+B.getters["employee/getId"],{employeeAppleCalendar:_}).then(()=>{B.commit("employee/setEmployeeAppleCalendarICloudId",_.iCloudId),B.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",_.appSpecificPassword),Hn(B)}).catch(k=>{l.value=!0,e.value=k.response.data.message,s.value="error"}).finally(()=>{l.value=!0})}function C(B){B.commit("auth/setAppleLoading",!0),$e.post("/apple/disconnect-employee/"+B.getters["employee/getId"]).then(()=>{B.commit("employee/setEmployeeAppleCalendarICloudId",null),B.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",null),Aa.value=!1,Hn(B),T.value=B.getters["auth/getAppleCalendars"]}).catch(_=>{console.log(_)}).finally(()=>{B.commit("auth/setAppleLoading",!1)})}return(B,_)=>{const k=vt,R=st;return t(g)?(u(),Y(Wt,{key:1})):(u(),Y(R,{key:0,ref:"employeeFormRef",model:t(D),"label-position":"top",class:j(["am-caedo",a.responsiveClass])},{default:S(()=>[t(c).payments.stripe.enabled&&t(c).payments.stripe.connect.enabled?(u(),Y(Lp,{key:0})):$("",!0),d("div",{class:j(["am-caepif__block",a.responsiveClass])},[(u(!0),A(ne,null,ve(t(v),(M,O)=>(u(),Y(ft(M.template),Dt({key:O,ref_for:!0,ref:"customerCollectorRef",modelValue:t(D)[O],"onUpdate:modelValue":H=>t(D)[O]=H},M.props,uo(M.handlers?M.handlers:{})),{default:S(()=>[M.slots&&M.slots.default?(u(),A("div",{key:0,innerHTML:M.slots.default},null,8,Sp)):$("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))],2),t(l)?(u(),Y(bt,{key:1,type:"error","show-border":!0,"close-after":5e3,onClose:o,onTriggerClose:o},{default:S(()=>[ue(w(t(e)),1)]),_:1})):$("",!0),t(c).appleCalendar?(u(),A("div",Ip,[N(fo,null,{default:S(()=>[N(po,{ref_key:"appleVisibility",ref:F,side:!0,delay:500},{heading:S(()=>[ue(w(t(x).apple_calendar_personal),1)]),default:S(()=>[d("div",$p,[N(k,{label:t(x).apple_icloud_id,class:"am-caedo__apple__connect__item"},{default:S(()=>[N(ct,{modelValue:t(E).iCloudId,"onUpdate:modelValue":_[0]||(_[0]=M=>t(E).iCloudId=M),disabled:t(Aa),placeholder:t(x).apple_icloud_id},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),N(k,{label:t(x).apple_app_specific_password,class:"am-caedo__apple__connect__item"},{default:S(()=>[N(ct,{modelValue:t(E).appSpecificPassword,"onUpdate:modelValue":_[1]||(_[1]=M=>t(E).appSpecificPassword=M),type:"password","show-password":!0,disabled:t(Aa),placeholder:t(x).apple_app_specific_password},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),N(ke,{onClick:_[2]||(_[2]=M=>t(Aa)?C(t(r)):f(t(r)))},{default:S(()=>[ue(w(t(Aa)?t(x).apple_disconnect:t(x).apple_connect),1)]),_:1})])]),_:1},512)]),_:1})])):$("",!0)]),_:1},8,["model","class"]))}}};const Op={props:{tabActive:{type:String,required:!0},passwordActive:{type:Boolean,default:!1}},emits:["changePassword","savePassword","saveChanges"],setup(n,{emit:a}){const e=n;let s=U("amLabels");function l(){e.tabActive==="password"?a("savePassword"):a("saveChanges")}let o=U("amColors"),r=b(()=>({"--am-c-caepf-text-op15":K(o.value.colorMainText,.15)}));return(i,c)=>(u(),A("div",{class:j(["am-caepf",{"am-single-btn":e.tabActive!=="details"||e.passwordActive}]),style:Be(t(r))},[e.tabActive==="details"&&!e.passwordActive?(u(),Y(ke,{key:0,size:"medium",category:"secondary",type:"plain",onClick:c[0]||(c[0]=x=>a("changePassword"))},{default:S(()=>[ue(w(t(s).change_password),1)]),_:1})):$("",!0),N(ke,{size:"medium",onClick:l},{default:S(()=>[ue(w(e.tabActive!=="password"?t(s).save:t(s).change_password),1)]),_:1})],6))}},Mp={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Oe();let l=U("amLabels"),o=V(null),r=V({newPass:b({get:()=>s.getters["auth/getNewPassword"],set:x=>{s.commit("auth/setNewPassword",x||"")}}),confirmPass:b({get:()=>s.getters["auth/getConfirmPassword"],set:x=>{s.commit("auth/setConfirmPassword",x||"")}})}),i=V({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:l.new_password_colon,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${e.responsiveClass}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:l.new_password_colon_retype,placeholder:"",minLength:3,class:b(()=>`am-capp__item ${e.responsiveClass}`)}}}),c=V({newPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"},{validator:()=>s.getters["auth/getNewPassword"]===s.getters["auth/getConfirmPassword"],message:l.passwords_not_match,trigger:"submit"}]});return a({passFormRef:o}),(x,g)=>{const m=st;return u(),Y(m,{ref_key:"passFormRef",ref:o,model:t(r),rules:t(c),"label-position":"top",class:j(["am-capi__form",n.responsiveClass])},{default:S(()=>[(u(!0),A(ne,null,ve(t(i),(p,y)=>(u(),Y(ft(p.template),Dt({key:p.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(r)[y],"onUpdate:modelValue":T=>t(r)[y]=T},p.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"])}}};const Vp=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),Rp={name:"CabinetEmployeeProfile"},qp=Object.assign(Rp,{setup(n){let a=Oe();const e=U("settings");let s=U("amLabels"),l=V(null);const{width:o}=Ga(l);let r=b(()=>ot(o.value));ze("pageWidth",o);let i=b(()=>a.getters["entities/getReady"]);const c=V("details");let x=V(""),g=V("success"),m=V(!1);function p(){m.value=!1}function y(){m.value=!1,x.value=""}let T=V(null),F=b(()=>a.getters["employee/getEmployee"]),E=b(()=>a.getters["auth/getGoogleLoading"]||a.getters["auth/getOutlookLoading"]||a.getters["auth/getAppleLoading"]||a.getters["auth/getStripeLoading"]||a.getters["auth/getZoomLoading"]),P=V(!1),L=U("timeZone");function D(){T.value.employeeFormRef.validate(R=>{!R||(P.value=!0,$e.post("/users/providers/"+F.value.id,Gi(a,L.value),Object.assign(Ue(a),{params:{source:"cabinet-provider"}})).then(()=>{x.value=s.profile_data_success,g.value="success"}).catch(M=>{x.value=M.response.data.message,g.value="error"}).finally(()=>{m.value=!0,P.value=!1}))})}let v=V(null),f=V(!1);function C(){f.value=!0,c.value="password"}function B(){v.value.passFormRef.validate(R=>{if(R){let M=a.getters["auth/getProfile"];P.value=!0,$e.post("/users/providers/"+M.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{x.value=s.password_success,f.value=!1,c.value="details",a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{m.value=!0}).finally(()=>{P.value=!1})}})}let _=U("amColors"),k=b(()=>({"--am-c-caep-primary":_.value.colorPrimary,"--am-c-caep-text":_.value.colorMainText,"--am-c-caep-text-op10":K(_.value.colorMainText,.1)}));return(R,M)=>{const O=_a,H=Ca;return u(),A("div",{ref_key:"pageContainer",ref:l,class:"am-caep",style:Be(t(k))},[t(i)&&!t(P)&&!t(E)?(u(),A("div",{key:0,class:j(["am-caep__inner",t(r)])},[t(m)?(u(),Y(bt,{key:0,type:t(g),"show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:y,onTriggerClose:y},{title:S(()=>[Vp,ue(" "+w(t(x)),1)]),_:1},8,["type"])):$("",!0),N(H,{modelValue:c.value,"onUpdate:modelValue":M[0]||(M[0]=z=>c.value=z)},{default:S(()=>[N(O,{label:t(s).details,name:"details",onClick:p},{default:S(()=>[N(Jd,{ref_key:"detailsRef",ref:T,"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"]),t(e).roles.allowConfigureServices?(u(),Y(O,{key:0,label:t(s).heading_services,name:"services"},{default:S(()=>[N(bm,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(e).roles.allowConfigureSchedule?(u(),Y(O,{key:1,label:t(s).working_hours,name:"workingHours"},{default:S(()=>[N(tp,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(e).roles.allowConfigureSpecialDays?(u(),Y(O,{key:2,label:t(s).special_days,name:"specialDays"},{default:S(()=>[N(rp,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(e).roles.allowConfigureDaysOff?(u(),Y(O,{key:3,label:t(s).days_off,name:"daysOff"},{default:S(()=>[N(Cp,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(f)?(u(),Y(O,{key:4,label:t(s).password,name:"password"},{default:S(()=>[t(P)?(u(),Y(Bl,{key:1,"item-direction":"column",count:2})):(u(),Y(Mp,{key:0,ref_key:"changePassRef",ref:v},null,512))]),_:1},8,["label"])):$("",!0),t(e).zoom.enabled||t(e).googleCalendar.enabled||t(e).outlookCalendar.enabled||t(e).appleCalendar||t(e).payments.stripe.enabled&&t(e).payments.stripe.connect.enabled?(u(),Y(O,{key:5,label:t(s).integrations_settings,name:"integrations"},{default:S(()=>[N(Np,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0)]),_:1},8,["modelValue"]),N(Op,{"tab-active":c.value,"password-active":t(f),onChangePassword:C,onSavePassword:B,onSaveChanges:D},null,8,["tab-active","password-active"])],2)):(u(),Y(Wt,{key:1}))],4)}}});function gi(n,a){$e.get("/users/customers",{params:Js(n)}).then(e=>{a(e.data.data.users)}).catch(()=>{a([])})}function Gs(n,a="",e={},s=()=>{}){n.commit("customerInfo/setLoading",!0),setTimeout(()=>{gi(Object.assign({search:a,page:1,limit:lt.general.customersFilterLimit,skipCount:1},e),l=>{n.commit("customerInfo/setCustomers",l),n.commit("customerInfo/setLoading",!1),s()})},500)}function $o(n){n.getters["customerInfo/getCustomers"].length||Gs(n)}const Up={key:0,class:"am-capf__zone"},zp={class:"am-capf__menu"},jp=d("span",{class:"am-icon-filter"},null,-1),Yp={key:0},Wp={key:0,class:"am-capf__list"},Hp={name:"CabinetFilters"},No=Object.assign(Hp,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters","addAppointment"],setup(n,{emit:a}){const e=n;let s=Oe(),l=b(()=>s.getters["entities/getReady"]),o=b(()=>s.getters.getLoading),r=V({customers:!1,events:!1}),i=b(()=>e.stepKey==="packages"?"packagesList":e.stepKey);const c=U("shortcodeData"),x=U("settings");let g=U("amCustomize");const m=U("labels"),p=U("localLanguage");let y=b(()=>x.general.usedLanguages.includes(p.value)),T=b(()=>{let X=tt({...m});if(e.stepKey){let re=g.value[i.value].translations;re&&Object.keys(re).forEach(te=>{re[te][p.value]&&y.value?X[te]=re[te][p.value]:re[te].default&&(X[te]=re[te].default)})}return X});function F(X){return X==="customers"?"user":X==="services"?"service":X==="providers"?"employee":X==="locations"?"locations":X==="packages"?"shipment":X==="events"?"star-outline":""}function E(){a("changeFilters")}let P=U("containerWidth"),L={components:{IconComponent:Ze},template:'<IconComponent icon="filter"/>'},D=V(!1),v=V({dates:b({get:()=>s.getters["cabinetFilters/getDates"],set:X=>{Zi(X[0],X[1]),s.commit("cabinetFilters/setDates",X),a("changeFilters")}}),customers:b({get:()=>s.getters["cabinetFilters/getCustomers"],set:X=>{s.commit("cabinetFilters/setCustomers",X||[])}}),services:b({get:()=>s.getters["cabinetFilters/getServices"],set:X=>{s.commit("cabinetFilters/setServices",X)}}),providers:b({get:()=>s.getters["cabinetFilters/getProviders"],set:X=>{s.commit("cabinetFilters/setProviders",X)}}),locations:b({get:()=>s.getters["cabinetFilters/getLocations"],set:X=>{s.commit("cabinetFilters/setLocations",X)}}),packages:b({get:()=>s.getters["cabinetFilters/getPackages"],set:X=>{s.commit("cabinetFilters/setPackages",X)}}),events:b({get:()=>s.getters["cabinetFilters/getEvents"],set:X=>{s.commit("cabinetFilters/setEvents",X||[])}})}),f=b(()=>e.stepKey==="events"?s.getters["cabinetFilters/getEventFiltersOption"](c.value.cabinetType):e.stepKey==="packages"?s.getters["cabinetFilters/getPackageFilterOptions"]:s.getters["cabinetFilters/getAppointmentFilterOptions"](c.value.cabinetType)),C=b(()=>{let X=0;return Object.keys(f.value).forEach(re=>{g.value[i.value].options[`${re}Filter`].visibility&&(re==="customers"||re==="events"||f.value[re].length>0)&&X++}),X});function B(X,re){switch(X){case"customers":k(re);break;case"events":M(re);break}}function _(){c.value.cabinetType==="employee"&&k("",s.getters["auth/getPreloadedCustomers"])}function k(X="",re=[]){if(r.value.customers=!0,re.length){s.dispatch("cabinetFilters/injectCustomerOptions",re),r.value.customers=!1;return}setTimeout(()=>{gi({search:X,page:1,limit:lt.general.customersFilterLimit,skipCount:1},te=>{s.dispatch("cabinetFilters/injectCustomerOptions",te),s.getters["auth/getPreloadedCustomers"].length===0&&s.commit("auth/setPreloadedCustomers",te),r.value.customers=!1})},500)}const R=U("cabinetType");function M(X="",re=[]){if(r.value.events=!0,re.length){s.dispatch("cabinetFilters/injectEventsOptions",re),r.value.events=!1;return}setTimeout(()=>{f0({dates:[Ae().format("YYYY-MM-DD")],timeZone:s.getters["cabinet/getTimeZone"],group:!0,page:1,limit:x.general.itemsPerPage,search:X,source:"cabinet-"+R.value},te=>{s.dispatch("cabinetFilters/injectEventsOptions",te),r.value.events=!1})},500)}let O=b(()=>g.value[i.value].options),H=b(()=>e.stepKey==="appointments"?c.value.cabinetType==="employee"?O.value.servicesFilter.visibility||O.value.customersFilter.visibility||O.value.locationsFilter.visibility:O.value.servicesFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility:e.stepKey==="events"?c.value.cabinetType==="employee"?O.value.eventsFilter.visibility||O.value.customersFilter.visibility||O.value.locationsFilter.visibility:O.value.eventsFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility:O.value.packagesFilter.visibility||O.value.servicesFilter.visibility||O.value.providersFilter.visibility||O.value.locationsFilter.visibility),z=b(()=>e.stepKey==="appointments"?c.value.cabinetType==="employee"?!!(f.value.services.length||f.value.customers.length||f.value.locations.length):!!(f.value.services.length||f.value.providers.length||f.value.locations.length):e.stepKey==="events"?c.value.cabinetType==="employee"?!!(f.value.events.length||f.value.customers.length||f.value.locations.length):!!(f.value.events.length||f.value.providers.length||f.value.locations.length):!!(f.value.packages.length||f.value.services.length||f.value.providers.length||f.value.locations.length));Ge(()=>{_()});let J=U("amColors"),oe=b(()=>({"--am-c-capf-heading-text":J.value.colorMainText,"--am-c-capf-text":J.value.colorInpText,"--am-c-capf-text-op10":K(J.value.colorInpText,.1),"--am-c-select-border":J.value.colorInpBorder,"--am-c-select-bgr":J.value.colorInpBgr}));return(X,re)=>!t(o)&&t(l)?(u(),A("div",{key:0,class:"am-capf",style:Be(t(oe))},[t(P)<=480&&t(O).timeZone.visibility&&t(e).stepKey!=="packages"?(u(),A("div",Up,[t(x).featuresIntegrations.timezones.enabled?(u(),Y(Wn,{key:0,size:"small"})):$("",!0)])):$("",!0),d("div",zp,[t(x).featuresIntegrations.timezones.enabled&&t(P)<=480&&t(O).timeZone.visibility&&t(e).stepKey==="packages"?(u(),Y(Wn,{key:0,size:"small"})):$("",!0),t(e).stepKey!=="packages"?(u(),Y(ea,{key:1,modelValue:t(v).dates,"onUpdate:modelValue":re[0]||(re[0]=te=>t(v).dates=te),type:"daterange",editable:!1,size:"small",clearable:!1,format:t(Kt)(),style:Be(t(oe)),lang:t(p),class:j(["am-capf__menu-datepicker",t(e).responsiveClass]),"popper-class":"am-capf__menu-datepicker-popper","start-placeholder":t(T).start_date,"end-placeholder":t(T).end_date},null,8,["modelValue","format","style","lang","class","start-placeholder","end-placeholder"])):$("",!0),!t(e).empty&&t(H)&&t(z)?(u(),Y(ke,{key:2,icon:t(L),"icon-only":t(P)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary","aria-label":t(T).filters,type:t(O).filterBtn?t(O).filterBtn.buttonType:"filled",onClick:re[1]||(re[1]=te=>Fe(D)?D.value=!t(D):D=!t(D))},{default:S(()=>[jp,t(P)>700?(u(),A("span",Yp,w(t(T).filters),1)):$("",!0)]),_:1},8,["icon","icon-only","aria-label","type"])):$("",!0)]),N(ga,{name:"am-slide-fade"},{default:S(()=>[t(D)&&!t(e).empty?(u(),A("div",Wp,[(u(!0),A(ne,null,ve(Object.keys(t(f)),te=>(u(),A(ne,{key:te},[(t(f)[te].length>0||te==="customers"||te==="events")&&t(g)[t(i)].options[`${te}Filter`].visibility?(u(),A("span",{key:0,class:j(["am-capf__list-item",[{"am-selected":t(v)[te].length>0},`am-capf__list-item-${t(C)}`,t(e).responsiveClass]])},[N(Je,{id:`am-select-${te}`,modelValue:t(v)[te],"onUpdate:modelValue":pe=>t(v)[te]=pe,multiple:te!=="customers"&&te!=="events",loading:te!=="customers"&&te!=="events"?!1:t(r)[te],remote:"",clearable:"",filterable:te==="customers"||te==="events",placeholder:t(T)[te+(te==="customers"?"":"_dropdown")],"prefix-icon":F(te),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper","remote-method":pe=>{B(te,pe)},onChange:E,onClear:_},{default:S(()=>[(u(!0),A(ne,null,ve(t(f)[te],pe=>(u(),Y(Ye,{key:pe.id,value:pe.id,label:pe.firstName?pe.firstName+" "+pe.lastName:pe.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","multiple","loading","filterable","placeholder","prefix-icon","remote-method"])],2)):$("",!0)],64))),128))])):$("",!0)]),_:1})],4)):$("",!0)}});function Gp(n,a){let e=n.getters["entities/getService"](a.serviceId),s=0,l=0;return a.bookings.forEach(o=>{if(["approved","pending"].includes(o.status)){let r=o.duration?o.duration:e.duration;r>s&&(s=r);let i=0;o.extras.forEach(c=>{i+=e.extras.find(g=>g.id===c.extraId).duration*c.quantity}),i>l&&(l=i)}}),s+l}function hi(n,a,e){for(let s in n)n[s].appointments.forEach(l=>{let o={};l.bookings.forEach(i=>{i.customerId in o||(o[i.customerId]=[]),o[i.customerId][i.id]=i.status});let r={};for(let i in o)for(let c in o[i])(!(i in r)||o[i][c]==="approved"||o[i][c]==="pending")&&(r[i]=c);l.bookings.forEach(i=>{i.customerId in r&&parseInt(i.id)!==parseInt(r[i.customerId])||(a===""&&(l.bookingStart=Al(l.bookingStart),l.bookingEnd=Al(l.bookingEnd)),e||(l.bookings=[i]))})});if(a===""){let s={};for(let l in n)n[l].appointments.forEach(o=>{let r=o.bookingStart.split(" ")[0];r in s?s[r].appointments.push(o):s[r]={appointments:[o],date:r}});return s}return n}function vi(n,a){let e=[];return n.forEach(s=>{if(["approved","pending"].includes(s.status)&&s.customFields){let l=JSON.parse(s.customFields);Object.keys(l).forEach(o=>{if(l[o]){let r=l[o].type==="file"?l[o]?.value?l[o].value:"":l[o].value;(Array.isArray(r)?r.length:r)&&e.push({label:l[o].label,value:r})}})}}),a==="customer"?e:[...new Set(e.filter(s=>s.value).map(s=>s.label))].map(s=>new Object({label:s}))}function Zp(n,a){let e={};return n.forEach(s=>{["approved","pending"].includes(s.status)&&s.extras.forEach(l=>{l.extraId in e||(e[l.extraId]={quantity:0,price:l.price,name:a.extras.find(o=>o.id===l.extraId).name}),e[l.extraId].quantity=e[l.extraId].quantity+l.quantity})}),e}const Jp={class:"am-cc__periods-date"},Xp={class:"am-cc__periods-time"},Qp={key:0,class:"am-cc__periods-link__list"},Kp=["href"],ef=d("span",{class:"am-icon-link"},null,-1),tf=["href"],af=d("span",{class:"am-icon-link"},null,-1),sf=["href"],lf=d("span",{class:"am-icon-link"},null,-1),nf=["href"],of=d("span",{class:"am-icon-link"},null,-1),rf={name:"TemplatePeriods"},cf=Object.assign(rf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("settings");let l=U("containerWidth"),o=b(()=>ot(l.value));return(r,i)=>(u(),A("div",{class:j(["am-cc__periods",t(o)])},[(u(!0),A(ne,null,ve(t(a).data,(c,x)=>(u(),A("div",{key:x,class:"am-cc__periods-item"},[d("span",Jp,w(t(it)(c.date)),1),d("span",Xp,w(`${t(vs)(c.startTime)} - ${t(vs)(c.endTime)}`),1),t(s).featuresIntegrations.googleCalendar.enabled&&c.googleMeetLink||t(s).featuresIntegrations.zoom.enabled&&c.zoomLink||t(s).featuresIntegrations.lessonSpace.enabled&&c.lessonSpaceLink||t(s).featuresIntegrations.outlookCalendar.enabled&&c.microsoftTeamsLink?(u(),A("div",Qp,[t(s).featuresIntegrations.googleCalendar.enabled&&c.googleMeetLink?(u(),A("a",{key:0,class:"am-cc__periods-link",href:c.googleMeetLink,target:"_blank"},[ef,ue(" "+w(t(e).google_meet_link),1)],8,Kp)):$("",!0),t(s).featuresIntegrations.outlookCalendar.enabled&&c.microsoftTeamsLink?(u(),A("a",{key:1,class:"am-cc__periods-link",href:c.microsoftTeamsLink,target:"_blank"},[af,ue(" "+w(t(e).microsoft_teams_link),1)],8,tf)):$("",!0),t(s).featuresIntegrations.zoom.enabled&&c.zoomLink?(u(),A("a",{key:2,class:"am-cc__periods-link",href:c.zoomLink,target:"_blank"},[lf,ue(" "+w(t(e).zoom_link),1)],8,sf)):$("",!0),t(s).featuresIntegrations.lessonSpace.enabled&&c.lessonSpaceLink?(u(),A("a",{key:3,class:"am-cc__periods-link",href:c.lessonSpaceLink,target:"_blank"},[of,ue(" "+w(t(e).lesson_space_link),1)],8,nf)):$("",!0)])):$("",!0)]))),128))],2))}});const xf={class:"am-cc__extras-name"},uf={key:0,class:"am-cc__extras-duration"},df={key:1,class:"am-cc__extras-price"},mf={key:2,class:"am-cc__extras-quantity"},pf={name:"TemplateExtras"},ff=Object.assign(pf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=b(()=>ot(l.value));return(r,i)=>(u(),A("div",{class:j(["am-cc__extras",t(o)])},[(u(!0),A(ne,null,ve(t(a).data,(c,x)=>(u(),A("div",{key:x,class:"am-cc__extras-item"},[d("span",xf,w(c.name),1),c.duration||c.price||c.quantity?(u(),A("div",{key:0,class:j(["am-cc__extras-item__inner",[{"am-flex-space":!c.price&&c.duration},{"am-flex-end":!c.duration}]])},[c.duration?(u(),A("span",uf,w(t(hs)(c.duration,t(e).h,t(e).min)),1)):$("",!0),t(s).cabinetType==="customer"&&c.price?(u(),A("span",df,w(t(nt)(c.price)),1)):$("",!0),c.quantity?(u(),A("span",mf," x"+w(c.quantity),1)):$("",!0)],2)):$("",!0)]))),128))],2))}});const gf={class:"am-cc__tickets-item_inner"},hf={class:"am-cc__tickets-name"},vf={class:"am-cc__tickets-calc"},Ef={key:0,class:"am-cc__tickets-price"},_f={name:"TemplateTickets"},Cf=Object.assign(_f,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=b(()=>ot(l.value));return(r,i)=>(u(),A("div",{class:j(["am-cc__tickets",t(o)])},[(u(!0),A(ne,null,ve(t(a).data,(c,x)=>(u(),A("div",{key:x,class:"am-cc__tickets-item"},[d("div",gf,[d("span",hf,w(c.name),1),d("span",vf,w(`${c.persons} ${c.persons>1?t(e).event_tickets:t(e).event_ticket}${t(s).cabinetType==="customer"?" x "+t(nt)(c.price):""}`),1)]),t(s).cabinetType==="customer"?(u(),A("div",Ef,w(t(nt)(c.persons*c.price)),1)):$("",!0)]))),128))],2))}});const yf=["innerHTML"],bf={key:0,class:"am-cc__cf-value"},Bf={class:"am-cc__cf-value__inner"},Af={name:"TemplateCustomFields"},Ff=Object.assign(Af,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=b(()=>ot(e.value));function l(o){return o?Array.isArray(o)?o.length===0?"/":o.map(r=>typeof r=="object"&&r!==null&&!Array.isArray(r)?r.name||"/":r||"/").join(", "):o:"/"}return(o,r)=>(u(),A("div",{class:j(["am-cc__cf",t(s)])},[(u(!0),A(ne,null,ve(t(a).data,(i,c)=>(u(),A("div",{key:c,class:"am-cc__cf-item"},[d("span",{class:"am-cc__cf-name",innerHTML:i.label},null,8,yf),"value"in i?(u(),A("div",bf,[d("span",Bf,w(l(i.value)),1)])):$("",!0)]))),128))],2))}});const kf={class:"am-cc__employee-heading"},Df={class:"am-cc__employee-heading__inner"},wf={class:"am-cc__employee-name"},Pf=["innerHTML"],Tf={key:1,class:"am-cc__employee-wrapper"},Lf={class:"am-cc__employee-heading"},Sf={class:"am-cc__employee-heading__inner"},If={class:"am-cc__employee-name"},$f=["innerHTML"],Nf={name:"TemplateEmployee"},Of=Object.assign(Nf,{props:{data:{type:[Object,Array]}},setup(n){const a=n;let e=b(()=>!Array.isArray(a.data)),s=U("containerWidth"),l=b(()=>ot(s.value));function o(c){let x=c.firstName.charAt(0).toUpperCase(),g=c.lastName.charAt(0).toUpperCase();return`${x}${g}`}function r(c){return c.pictureThumbPath?{backgroundImage:`url(${c.pictureThumbPath})`}:{}}function i(c){return c&&c.includes("<!-- Content -->")?c.slice(16).length:c?c.length:!1}return(c,x)=>(u(),A("div",{class:j(["am-cc__employee",t(l)])},[t(e)?(u(),A(ne,{key:0},[d("div",kf,[d("span",{class:"am-cc__employee-img",style:Be(r(t(a).data))},[t(a).data.pictureThumbPath?$("",!0):(u(),A(ne,{key:0},[ue(w(o(t(a).data)),1)],64))],4),d("div",Df,[d("span",wf,w(`${t(a).data.firstName} ${t(a).data.lastName}`),1),t(a).data.badge?(u(),A("span",{key:0,class:"am-cc__employee-badge",style:Be({background:t(a).data.badge.color})},w(t(a).data.badge.content),5)):$("",!0)])]),t(a).data.description?(u(),A("div",{key:0,class:"am-cc__employee-desc ql-description",innerHTML:t(a).data.description},null,8,Pf)):$("",!0)],64)):(u(),A("div",Tf,[(u(!0),A(ne,null,ve(t(a).data,g=>(u(),A(ne,{key:g.id},[d("div",Lf,[d("span",{class:"am-cc__employee-img",style:Be(r(g))},[g.pictureThumbPath?$("",!0):(u(),A(ne,{key:0},[ue(w(o(g)),1)],64))],4),d("div",Sf,[d("span",If,w(`${g.firstName} ${g.lastName}`),1),g.badge?(u(),A("span",{key:0,class:"am-cc__employee-badge",style:Be({background:g.badge.color})},w(g.badge.content),5)):$("",!0)])]),i(g.description)?(u(),A("div",{key:0,class:"am-cc__employee-desc ql-description",innerHTML:g.description},null,8,$f)):$("",!0)],64))),128))]))],2))}});const Mf={class:"am-cc__customers-item_inner"},Vf={class:"am-cc__customers-name"},Rf={key:0,class:"am-icon-clock am-cc__customers-waiting"},qf={class:"am-cc__customers-info"},Uf={class:"am-cc__customers-info"},zf={name:"TemplateCustomers"},jf=Object.assign(zf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=b(()=>ot(e.value));return(l,o)=>(u(),A("div",{class:j(["am-cc__customers",t(s)])},[(u(!0),A(ne,null,ve(t(a).data,(r,i)=>(u(),A("div",{key:i,class:"am-cc__customers-item"},[d("div",Mf,[d("span",Vf,[r.bookingStatus==="waiting"?(u(),A("span",Rf)):$("",!0),ue(" "+w(r.firstName)+" "+w(r.lastName),1)]),d("span",qf,w(r.email),1),d("span",Uf,w(r.phone),1)])]))),128))],2))}});const Yf={class:"am-cc__qr-codes"},Wf={key:0,class:"am-cc__qr-codes__message"},Hf=d("span",{class:"am-icon-info-reverse"},null,-1),Gf=["onClick"],Zf={props:{data:{type:[Array]}},setup(n){const a=n,e=Oe();let s=V("");function l(r){$e.get("/etickets",Object.assign({params:{source:"cabinet-customer",timeZone:e.getters["cabinet/getTimeZone"],eventId:r.eventId,bookingId:r.bookingId,ticketManualCode:r.ticketManualCode}},Ue(e))).then(i=>{s.value="",window.open(o(i.data))}).catch(i=>{i.response&&i.response.data&&i.response.data.message?s.value=i.response.data.message:s.value="An error occurred while fetching the QR code."})}function o(r){const i=atob(r),c=new Array(i.length);for(let m=0;m<i.length;m++)c[m]=i.charCodeAt(m);const x=new Uint8Array(c),g=new Blob([x],{type:"application/pdf;base64"});return URL.createObjectURL(g)}return Ge(()=>{s.value=""}),(r,i)=>(u(),A("div",Yf,[t(s)?(u(),A("div",Wf,[Hf,ue(" "+w(t(s)),1)])):$("",!0),(u(!0),A(ne,null,ve(t(a).data,(c,x)=>(u(),A("div",{key:x,class:"am-cc__qr-codes__item",onClick:g=>l(c)},w(`${c.eventName} - ${c.type==="ticket"?"Single Ticket.pdf":"Group Ticket.pdf"}`),9,Gf))),128))]))}};const Jf={class:"am-cc__popover-inner"},Xf={key:0,class:"am-cc__popover-heading"},Qf={name:"CollapseCardPopoverTemplate"},Ua=Object.assign(Qf,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(n){const a=n;let e=V({period:Qe(cf),extras:Qe(ff),ticket:Qe(Cf),customField:Qe(Ff),employee:Qe(Of),customers:Qe(jf),qrCode:Qe(Zf)}),s=U("amFonts"),l=U("amColors"),o=b(()=>({"--am-c-cc-primary":l.value.colorPrimary,"--am-c-cc-primary-op70":K(l.value.colorPrimary,.7),"--am-c-cc-success":l.value.colorSuccess,"--am-c-cc-success-op15":K(l.value.colorSuccess,.15),"--am-c-cc-error":l.value.colorError,"--am-c-cc-error-op15":K(l.value.colorError,.15),"--am-c-cc-bgr":l.value.colorMainBgr,"--am-c-cc-text":l.value.colorMainText,"--am-c-cc-text-op10":K(l.value.colorMainText,.1),"--am-c-cc-text-op15":K(l.value.colorMainText,.15),"--am-c-cc-text-op70":K(l.value.colorMainText,.7),"--am-c-cc-text-op80":K(l.value.colorMainText,.8),"--am-c-cc-text-op90":K(l.value.colorMainText,.9),"--am-c-scroll-op30":K(l.value.colorPrimary,.3),"--am-c-scroll-op10":K(l.value.colorPrimary,.1),"--am-font-family":s.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(r,i)=>{const c=bs;return u(),Y(c,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":t(o),trigger:"click"},{reference:S(()=>[yr(r.$slots,"default")]),default:S(()=>[d("div",Jf,[t(a).headerText?(u(),A("div",Xf,w(t(a).headerText),1)):$("",!0),(u(),Y(ft(t(e)[t(a).type]),{class:"am-cc__popover-content",data:t(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function Kf(n){let a=io(null,n.coupon,n.tax?n.tax[0]:null,n.price-n.price/100*n.discount,!1);return a.price-a.discount+a.tax}const za=tt(window.wpAmeliaLabels);function Er(n,a,e){e.type==="package"&&n.commit("cabinet/setPackageLoading",!0),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!0),e.type==="event"&&n.commit("cabinet/setEventsLoading",!0),n.commit("cabinet/setPaymentLinkLoader",e.bookings?e.bookings[0].id:e.id);let s=JSON.parse(JSON.stringify(e)),l=JSON.parse(JSON.stringify(n.getters["auth/getProfile"]));l.birthday=null,s.customer=l,s.type!=="package"?(s[s.type]=e,s.booking=e.bookings[0],s.paymentId=e.bookings[0].payments[0].id):s=Object.assign(s,s.package),$e.post("/payments/link",{data:s,paymentMethod:a}).then(o=>{!o.data.data.error&&o.data.data.paymentLink?window.location.href=o.data.data.paymentLink:n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).catch(o=>{n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).finally(()=>{n.commit("cabinet/setPaymentLinkLoader",null),e.type==="package"&&n.commit("cabinet/setPackageLoading",!1),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!1),e.type==="event"&&n.commit("cabinet/setEventsLoading",!1)})}function lo(n,a){if(n.type!=="package"&&(!n.bookings||n.bookings.length===0))return!1;typeof a=="string"?a=JSON.parse(a):a||(a={});let e=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks&&"enabled"in a.payments.paymentLinks?a.payments.paymentLinks:lt.payments.paymentLinks;return no(lt).length&&lt&&e&&e.enabled}function no(n){typeof n=="string"?n=JSON.parse(n):n||(n={});let a=[];return n=n.payments,lt.payments.wc.enabled?a.push({value:"wc",label:za.wc}):lt.payments.mollie.enabled&&(!("mollie"in n)||n.mollie.enabled)?a.push({value:"mollie",label:za.on_line}):(lt.payments.payPal.enabled&&(!("payPal"in n)||n.payPal.enabled)&&a.push({value:"payPal",label:za.pay_pal}),lt.payments.stripe.enabled&&(!("stripe"in n)||n.stripe.enabled)&&a.push({value:"stripe",label:za.credit_card}),lt.payments.razorpay.enabled&&(!("razorpay"in n)||n.razorpay.enabled)&&a.push({value:"razorpay",label:za.razorpay}),lt.payments.square.enabled&&(!("square"in n)||n.square.enabled)&&a.push({value:"square",label:za.square}),lt.payments.barion.enabled&&(!("barion"in n)||n.barion.enabled)&&a.push({value:"barion",label:za.barion})),a}function yl(n,a){switch(a.type){case"appointment":{let e=go(n,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return e.total-e.discount+e.tax>a.bookings[0].payments.filter(s=>s.status!=="refunded"&&s.status!=="pending").reduce((s,l)=>s+l.amount,0)}case"event":return Lr(a)>a.bookings[0].payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0);case"package":return Kf(a)>a.payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0)}}const eg={class:"am-cc__edit"},tg=["onClick"],ag={class:"am-cc__edit-text"},sg={name:"PaymentButton"},Ei=Object.assign(sg,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(n){const a=n;let e=Oe();const s=U("amLabels");let l=b(()=>no(a.bookable.settings)),o=b(()=>e.getters["cabinet/getPaymentLinkLoader"]),r={components:{IconComponent:Ze},template:'<IconComponent icon="arrow-down"></IconComponent>'},i=V(!1);function c(F){F.stopPropagation(),l.value.length===1?Er(e,l.value[0].value,a.reservation):i.value=!i.value}function x(){i.value=!1}let g=V(!1);function m(){g.value=!1}let p=U("amFonts"),y=U("amColors"),T=b(()=>({"--am-c-cc-primary":y.value.colorPrimary,"--am-c-cc-primary-op70":K(y.value.colorPrimary,.7),"--am-c-cc-error":y.value.colorError,"--am-c-cc-error-op15":K(y.value.colorError,.15),"--am-c-cc-warning":y.value.colorWarning,"--am-c-cc-warning-op15":K(y.value.colorWarning,.15),"--am-c-cc-success":y.value.colorSuccess,"--am-c-cc-success-op15":K(y.value.colorSuccess,.15),"--am-c-cc-bgr":y.value.colorMainBgr,"--am-c-cc-text":y.value.colorMainText,"--am-c-cc-text-op10":K(y.value.colorMainText,.1),"--am-c-cc-text-op15":K(y.value.colorMainText,.15),"--am-c-cc-text-op70":K(y.value.colorMainText,.7),"--am-c-cc-text-op90":K(y.value.colorMainText,.9),"--am-font-family":p.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(F,E)=>{const P=bs;return t(lo)(t(a).reservation,t(a).bookable.settings)?(u(),Y(P,{key:0,ref:"payRef",visible:t(i),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":t(T),trigger:"click"},{reference:S(()=>[N(ke,{size:t(a).btnSize,type:t(a).type,suffix:t(l).length>1&&t(yl)(t(e),t(a).reservation)?t(r):"",class:j([{"am-button-single":t(l).length===1||!t(yl)(t(e),t(a).reservation)},t(a).class]),loading:!!t(o),"loading-icon":"loading",disabled:!t(yl)(t(e),t(a).reservation),onClick:c},{default:S(()=>[ue(w(t(yl)(t(e),t(a).reservation)?t(s).pay_now_btn:t(s).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:S(()=>[$t((u(),A("div",eg,[(u(!0),A(ne,null,ve(t(no)(t(a).bookable.settings),L=>$t((u(),A("div",{key:L.value,class:"am-cc__edit-item",onClick:D=>t(Er)(t(e),L.value,t(a).reservation)},[d("span",ag,w(L.label),1)],8,tg)),[[t(Qt),x]])),128))])),[[t(Qt),m]])]),_:1},8,["visible","popper-style"])):$("",!0)}}}),os=tt(window.wpAmeliaLabels);function _i(){return[{value:"approved",label:os.approved,icon:"check",color:"var(--am-c-success)"},{value:"pending",label:os.pending,icon:"refresh",color:"var(--am-c-warning)"},{value:"canceled",label:os.canceled,icon:"close",color:"var(--am-c-error)"},{value:"rejected",label:os.rejected,icon:"info-reverse",color:"var(--am-c-main-text)"},{value:"waiting",label:os.waiting,icon:"clock",color:"var(--am-c-warning)"},{value:"no-show",label:os["no-show"],icon:"no-show",color:"#808A90"}]}const lg={name:"CollapseCard"},_r=Object.assign(lg,{props:{id:{type:[Number],default:0},status:{type:String,default:""}},emits:["statusChange"],setup(n,{emit:a}){const e=n,s=U("shortcodeData");let l=U("amLabels"),o=Oe(),r=b(()=>_i().filter(g=>g.value!=="waiting"));function i(){c.value=!0,$e.post("/appointments/status/"+e.id,{status:x.value},Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(g=>{let m=l.value.appointment_status_changed+l.value[g.data.data.status].toLowerCase(),p="success";"maximumCapacityReached"in g.data.data&&g.data.data.maximumCapacityReached===!0&&(m=l.value.maximum_capacity_reached,p="error",x.value=e.status),a("statusChange",m,p),c.value=!1}).catch(g=>{let m=l.value.error,p="error";"response"in g&&"data"in g.response&&"data"in g.response.data&&"timeSlotUnavailable"in g.response.data.data&&g.response.data.data.timeSlotUnavailable===!0&&(m=l.value.time_slot_unavailable),x.value=e.status,a("statusChange",m,p),c.value=!1})}let c=V(!1),x=V("");return Ge(()=>{x.value=e.status}),(g,m)=>(u(),A("div",null,[t(x)&&t(s).cabinetType==="employee"?(u(),Y(Je,{key:0,modelValue:t(x),"onUpdate:modelValue":m[0]||(m[0]=p=>Fe(x)?x.value=p:x=p),"prefix-icon":t(r).find(p=>p.value===t(x)).icon,"prefix-icon-color":t(r).find(p=>p.value===t(x)).color,disabled:t(c),size:"small",onClick:m[1]||(m[1]=p=>p.stopPropagation()),onChange:i},{default:S(()=>[(u(!0),A(ne,null,ve(t(r),p=>(u(),Y(Ye,{key:p.value,value:p.value,label:p.label},{default:S(()=>[d("span",{class:j(`am-icon-${p.icon}`),style:Be(`color: ${p.color}`)},null,6),ue(" "+w(p.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","prefix-icon","prefix-icon-color","disabled"])):$("",!0)]))}});const ng={class:"am-cc__time"},og={key:0,class:"am-cc__name"},rg={key:0,class:"am-icon-clock am-cc__customer-waiting"},ig={key:0,class:"am-cc__name"},cg={key:1,class:"am-cc__places"},xg={key:2,class:"am-cc__customer"},ug={key:0,class:"am-icon-clock am-cc__customer-waiting"},dg={key:0,class:"am-cc__edit"},mg=d("span",{class:"am-icon-edit"},null,-1),pg={class:"am-cc__edit-text"},fg={key:0,class:"am-cc__edit"},gg=d("span",{class:"am-icon-users-plus"},null,-1),hg={class:"am-cc__edit-text"},vg={class:"am-cc__edit"},Eg=d("span",{class:"am-icon-user"},null,-1),_g={class:"am-cc__edit-text"},Cg={class:"am-cc__edit"},yg=d("span",{class:"am-icon-date-time"},null,-1),bg={class:"am-cc__edit-text"},Bg=d("span",{class:"am-icon-eye"},null,-1),Ag={class:"am-cc__edit-text"},Fg=d("span",{class:"am-icon-download"},null,-1),kg={class:"am-cc__edit-text"},Dg=d("span",{class:"am-icon-clearable"},null,-1),wg={class:"am-cc__edit-text"},Pg={class:"am-cc__content-inner"},Tg={class:"am-cc__data"},Lg=d("span",{class:"am-icon-user"},null,-1),Sg={class:"am-cc__data-text"},Ig={class:"am-cc__data"},$g=d("span",{class:"am-icon-user"},null,-1),Ng={class:"am-cc__data-text"},Og={key:2,class:"am-cc__data"},Mg=d("span",{class:"am-icon-payments"},null,-1),Vg={class:"am-cc__data-text"},Rg={key:3,class:"am-cc__data"},qg=d("span",{class:"am-icon-clock"},null,-1),Ug={class:"am-cc__data-text"},zg={class:"am-cc__data"},jg=d("span",{class:"am-icon-clock"},null,-1),Yg={class:"am-cc__data-text"},Wg={key:5,class:"am-cc__data link"},Hg=d("span",{class:"am-icon-link"},null,-1),Gg=["href"],Zg={key:6,class:"am-cc__data link"},Jg=d("span",{class:"am-icon-link"},null,-1),Xg=["href"],Qg={key:7,class:"am-cc__data link"},Kg=d("span",{class:"am-icon-link"},null,-1),e9=["href"],t9={key:8,class:"am-cc__data link"},a9=d("span",{class:"am-icon-link"},null,-1),s9=["href"],l9={class:"am-cc__data"},n9=d("span",{class:"am-icon-border-plus"},null,-1),o9={class:"am-cc__data-text"},r9={class:"am-cc__data"},i9=d("span",{class:"am-icon-file-text"},null,-1),c9={class:"am-cc__data-text"},x9={class:"am-cc__data"},u9=d("span",{class:"am-icon-tickets"},null,-1),d9={class:"am-cc__data-text"},m9=d("span",{class:"am-icon-locations"},null,-1),p9=["href"],f9={key:1,class:"am-cc__data-text"},g9={class:"am-cc__data"},h9=d("span",{class:"am-icon-tickets"},null,-1),v9={class:"am-cc__data-text"},E9={name:"CollapseCard"},Ci=Object.assign(E9,{props:{id:{type:Number,default:0},start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},customers:{type:[Array],default:()=>{}},location:{type:[String,Object],default:""},qrCodes:{type:Array,default:()=>[]},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Object,default:()=>{}},tickets:{type:Object,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},microsoftTeamsLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling","editAppointment","editEvent","addEventAttendee","listEventAttendees","statusChange","showQrCodes"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("shortcodeData"),o=U("settings");let r=U("originKey");const i=U("amLabels");let c=U("licence"),x=V(!1);function g(O){O.stopPropagation(),x.value=!x.value}function m(){return p()&&(!e.isPackageBooking&&e.booking.price>0&&lo(e.reservation,e.bookable.settings)||!!(e.reservation.cancelable||o.roles.allowCustomerReschedule&&e.reservation.reschedulable))}function p(){return e.booking&&e.booking.status==="approved"||e.booking.status==="pending"||e.booking.status==="waiting"}function y(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0),$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(O=>{window.open(Dl(O))}).catch(O=>{console.log(O.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function T(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0);const O=o.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:O},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(H=>{let z=Dl(H,O);const J=document.createElement("a");J.href=z,J.download=`Invoice.${O}`,document.body.appendChild(J),J.click(),document.body.removeChild(J)}).catch(H=>{console.log(H.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function F(){x.value=!1}function E(){a("cancelBooking",e.booking),x.value=!1}function P(O){a("edit"+O.charAt(0).toUpperCase()+O.slice(1),e.reservation),x.value=!1}function L(O){a("addEventAttendee",O),x.value=!1}function D(O){a("listEventAttendees",O),x.value=!1}function v(){a("rescheduling",e.reservation,e.booking),x.value=!1}function f(O){return Array.isArray(O)?i.value.event_staff:!Array.isArray(O)&&O.rank&&O.rank==="organizer"?i.value.event_organizer:`${e.employee.firstName} ${e.employee.lastName}`}let C=b(()=>e.reservation.type==="event"?e.reservation.maxCapacity-e.reservation.places+"/"+e.reservation.maxCapacity:""),B=b(()=>{if(e.reservation.type==="appointment")return{label:i.value[l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status],class:l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status};if(e.reservation.type==="event"){if(l.value.cabinetType==="customer")return e.reservation.status==="rejected"||e.reservation.status==="canceled"?{label:i.value.canceled,class:"canceled"}:{label:i.value[e.booking.status],class:e.booking.status};switch(e.reservation.status){case"rejected":case"canceled":return{label:i.value.canceled,class:"canceled"};case"full":return{label:i.value.full,class:"full"};case"waiting":return{label:i.value.waiting_list,class:"waiting"};case"upcoming":return{label:i.value.upcoming,class:"upcoming"};case"approved":if(e.reservation.closed)return{label:i.value.closed,class:"closed"};if(e.reservation.opened&&e.reservation.places>0)return{label:i.value.opened,class:"opened"}}}return{label:"",class:""}}),_=b(()=>e.reservation&&e.reservation.type==="appointment"&&l.value.cabinetType==="employee"&&o.roles.allowWriteAppointments?e.parentWidth<=440?"70px":e.parentWidth<=690?"130px":"160px":"auto"),k=U("amFonts"),R=U("amColors"),M=b(()=>({"--am-c-cc-primary":R.value.colorPrimary,"--am-c-cc-primary-op15":K(R.value.colorPrimary,.15),"--am-c-cc-primary-op70":K(R.value.colorPrimary,.7),"--am-c-cc-error":R.value.colorError,"--am-c-cc-error-op15":K(R.value.colorError,.15),"--am-c-cc-warning":R.value.colorWarning,"--am-c-cc-warning-op15":K(R.value.colorWarning,.15),"--am-c-cc-success":R.value.colorSuccess,"--am-c-cc-success-op15":K(R.value.colorSuccess,.15),"--am-c-cc-bgr":R.value.colorMainBgr,"--am-c-cc-text":R.value.colorMainText,"--am-c-cc-text-op03":K(R.value.colorMainText,.03),"--am-c-cc-text-op10":K(R.value.colorMainText,.1),"--am-c-cc-text-op15":K(R.value.colorMainText,.15),"--am-c-cc-text-op70":K(R.value.colorMainText,.7),"--am-c-cc-text-op90":K(R.value.colorMainText,.9),"--am-font-family":k.value.fontFamily,"--am-status-width":_.value,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(O,H)=>{const z=bs;return u(),A("div",{class:"am-cc",style:Be(t(M))},[N(fo,null,{default:S(()=>[N(po,{"heading-class":"am-cc__heading-wrapper",side:t(e).parentWidth>500},{heading:S(()=>[d("div",{class:j(["am-cc__heading",t(e).responsiveClass])},[d("div",{class:j(["am-cc__heading-info",t(e).responsiveClass])},[d("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[d("div",ng,w(t(e).start),1),t(e).parentWidth>650?(u(),A("div",og,w(t(e).name),1)):$("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth<=650?(u(),A("div",{key:1,class:j(["am-cc__places",t(e).responsiveClass])},w(t(C)),3)):$("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth<=650?(u(),A("div",{key:2,class:j(["am-cc__customer",t(e).responsiveClass])},[t(e).customers[0].bookingStatus==="waiting"?(u(),A("span",rg)):$("",!0),ue(" "+w(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),1)],2)):$("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth<=650?(u(),Y(_r,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[0]||(H[0]=(J,oe)=>t(a)("statusChange",J,oe))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth<=650?(u(),A("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(B).class}`])},w(t(B).label),3)):$("",!0)],2),d("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[t(e).parentWidth<=650?(u(),A("div",ig,w(t(e).name),1)):$("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth>650?(u(),A("div",cg,w(t(C)),1)):$("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth>650?(u(),A("div",xg,[t(e).customers[0].bookingStatus==="waiting"?(u(),A("span",ug)):$("",!0),ue(" "+w(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),1)])):$("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth>650?(u(),Y(_r,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[1]||(H[1]=(J,oe)=>t(a)("statusChange",J,oe))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth>650?(u(),A("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(B).class}`])},w(t(B).label),3)):$("",!0)],2)],2),t(l).cabinetType==="employee"?(u(),A("div",{key:0,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[t(e).reservation.type!=="appointment"||t(o).roles.allowWriteAppointments?(u(),Y(z,{key:0,ref:"editRef",visible:t(x),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(M),trigger:"click"},{reference:S(()=>[t(e).reservation?(u(),A("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:g})):$("",!0)]),default:S(()=>[t(e).reservation.type==="appointment"&&t(o).roles.allowWriteAppointments||t(e).reservation.type==="event"&&t(o).roles.allowWriteEvents?$t((u(),A("div",dg,[d("div",{class:"am-cc__edit-item am-edit",onClick:H[2]||(H[2]=J=>P(t(e).reservation.type))},[mg,d("span",pg,w(t(i).edit),1)])])),[[t(Qt),F]]):$("",!0),t(e).reservation.type==="event"?(u(),A(ne,{key:1},[t(o).roles.allowWriteEvents?$t((u(),A("div",fg,[d("div",{class:"am-cc__edit-item am-edit",onClick:H[3]||(H[3]=J=>L(t(e).reservation))},[gg,d("span",hg,w(t(i).event_add_attendee),1)])])),[[t(Qt),F]]):$("",!0),$t((u(),A("div",vg,[d("div",{class:"am-cc__edit-item am-edit",onClick:H[4]||(H[4]=J=>D(t(e).reservation))},[Eg,d("span",_g,w(t(i).attendees),1)])])),[[t(Qt),F]])],64)):$("",!0)]),_:1},8,["visible","popper-style"])):$("",!0)],2)):!t(c).isStarter||m()?(u(),A("div",{key:1,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[p()&&t(e).booking.status!=="waiting"&&!t(e).isPackageBooking&&!t(e).booking.packageCustomerService&&t(e).booking.price>0&&t(lo)(t(e).reservation,t(e).bookable.settings)?(u(),Y(Ei,{key:0,reservation:t(e).reservation,bookable:t(e).bookable},null,8,["reservation","bookable"])):$("",!0),!t(c).isStarter||p()&&(t(e).reservation.cancelable||t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable)?(u(),Y(z,{key:1,ref:"editRef",visible:t(x),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(M),trigger:"click"},{reference:S(()=>[t(e).booking?(u(),A("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:g})):$("",!0)]),default:S(()=>[$t((u(),A("div",Cg,[t(e).reservation.type==="appointment"&&p()&&t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable?(u(),A("div",{key:0,class:"am-cc__edit-item",onClick:v},[yg,d("span",bg,w(t(i).reschedule),1)])):$("",!0),!t(c).isStarter&&t(e).booking.status!=="waiting"&&t(o).featuresIntegrations.invoices.enabled?(u(),A("div",{key:1,class:"am-cc__edit-item",onClick:y},[Bg,d("span",Ag,w(t(i).preview_invoice),1)])):$("",!0),!t(c).isStarter&&t(e).booking.status!=="waiting"&&t(o).featuresIntegrations.invoices.enabled?(u(),A("div",{key:2,class:"am-cc__edit-item",onClick:T},[Fg,d("span",kg,w(t(i).download_invoice),1)])):$("",!0),t(e).reservation.cancelable&&p()?(u(),A("div",{key:3,class:"am-cc__edit-item am-delete",onClick:E},[Dg,d("span",wg,w(t(i).cancel),1)])):$("",!0)])),[[t(Qt),F]])]),_:1},8,["visible","popper-style"])):$("",!0)],2)):$("",!0)],2)]),default:S(()=>[d("div",{class:j(["am-cc__content",t(e).responsiveClass])},[d("div",Pg,[t(r)==="capc"&&n.customizedOptions.employee.visibility?(u(),A(ne,{key:0},[(Array.isArray(t(e).employee)?t(e).employee.length:Object.keys(t(e).employee).length)?(u(),Y(Ua,{key:0,"header-text":Array.isArray(t(e).employee)?t(i).view_employees:t(i).provider_profile,type:"employee","content-data":t(e).employee},{default:S(()=>[d("div",Tg,[Lg,d("span",Sg,w(f(t(e).employee)),1)])]),_:1},8,["header-text","content-data"])):$("",!0)],64)):$("",!0),t(r)==="cape"&&t(e).reservation.type==="appointment"&&t(e).customers.length>1&&t(e).customizedOptions.customer.visibility?(u(),A(ne,{key:1},[t(e).customers.length?(u(),Y(Ua,{key:0,"header-text":t(i).customers,type:"customers","content-data":t(e).customers},{default:S(()=>[d("div",Ig,[$g,d("span",Ng,w(t(i).customers),1)])]),_:1},8,["header-text","content-data"])):$("",!0)],64)):$("",!0),t(e).price&&t(e).customizedOptions.price.visibility?(u(),A("div",Og,[Mg,d("span",Vg,w(t(nt)(t(e).price)),1)])):$("",!0),t(e).duration?(u(),A("div",Rg,[qg,d("span",Ug,w(t(hs)(t(e).duration,t(i).h,t(i).min)),1)])):$("",!0),n.periods.length?(u(),Y(Ua,{key:4,"header-text":t(i).event_timetable,type:"period","content-data":t(e).periods},{default:S(()=>[d("div",zg,[jg,d("span",Yg,w(t(i).event_timetable),1)])]),_:1},8,["header-text","content-data"])):$("",!0),t(o).featuresIntegrations.googleCalendar.enabled&&t(e).googleMeetLink?(u(),A("div",Wg,[Hg,d("a",{class:"am-cc__data-text link",href:t(e).googleMeetLink,target:"_blank",tabindex:"-1"},w(t(i).google_meet_link),9,Gg)])):$("",!0),t(o).featuresIntegrations.outlookCalendar.enabled&&t(e).microsoftTeamsLink?(u(),A("div",Zg,[Jg,d("a",{class:"am-cc__data-text link",href:t(e).microsoftTeamsLink,target:"_blank",tabindex:"-1"},w(t(i).microsoft_teams_link),9,Xg)])):$("",!0),t(o).featuresIntegrations.zoom.enabled&&t(e).zoomLink?(u(),A("div",Qg,[Kg,d("a",{class:"am-cc__data-text link",href:t(e).zoomLink,target:"_blank",tabindex:"-1"},w(t(i).zoom_link),9,e9)])):$("",!0),t(o).featuresIntegrations.lessonSpace.enabled&&t(e).lessonSpaceLink?(u(),A("div",t9,[a9,d("a",{class:"am-cc__data-text link",href:t(e).lessonSpaceLink,target:"_blank",tabindex:"-1"},w(t(i).lesson_space_link),9,s9)])):$("",!0),Object.keys(t(e).extras).length?(u(),Y(Ua,{key:9,"header-text":`${Object.keys(t(e).extras).length} ${t(i).extras}`,type:"extras","content-data":t(e).extras},{default:S(()=>[d("div",l9,[n9,d("span",o9,w(`${Object.keys(t(e).extras).length} ${t(i).extras}`),1)])]),_:1},8,["header-text","content-data"])):$("",!0),t(e).customFields.length&&t(o).featuresIntegrations.customFields.enabled?(u(),Y(Ua,{key:10,"header-text":t(i).custom_fields,type:"customField","content-data":t(e).customFields},{default:S(()=>[d("div",r9,[i9,d("span",c9,w(t(i).custom_fields),1)])]),_:1},8,["header-text","content-data"])):$("",!0),Object.keys(t(e).tickets).length?(u(),Y(Ua,{key:11,"header-text":t(i).event_tickets,type:"ticket","content-data":t(e).tickets},{default:S(()=>[d("div",x9,[u9,d("span",d9,w(t(i).event_tickets),1)])]),_:1},8,["header-text","content-data"])):$("",!0),t(e).location?(u(),A("div",{key:12,class:j(["am-cc__data",{link:t(e).location.address}])},[m9,t(e).location.address?(u(),A("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${t(e).location.address}`,target:"_blank",tabindex:"-1"},w(t(e).location.name),9,p9)):(u(),A("span",f9,w(t(e).location.name),1))],2)):$("",!0),t(e).qrCodes.length?(u(),Y(Ua,{key:13,type:"qrCode","header-text":t(i).e_tickets,"content-data":t(e).qrCodes},{default:S(()=>[d("div",g9,[h9,d("span",v9,w(t(i).e_tickets),1)])]),_:1},8,["header-text","content-data"])):$("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const _9={class:"am-csd__header"},C9={class:"am-csd__header-text"},y9=d("span",{class:"am-icon-clearable"},null,-1),b9={class:"am-csd__footer"},B9={name:"AppointmentBooking"},yi=Object.assign(B9,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},isPackage:{type:Boolean,default:!1},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("settings");let o=V("");function r(me){o.value=me.toLowerCase()}let i=b(()=>o.value?e.employees.filter(me=>`${me.firstName} ${me.lastName}`.toLowerCase().includes(o.value)&&me.show):e.employees.filter(me=>me.show)),c=V("");function x(me){c.value=me.toLowerCase()}let g=b(()=>c.value?e.locations.filter(me=>me.name.toLowerCase().includes(c.value)):e.locations),m=U("amLabels"),p=V(null),y=V(null);xt(()=>e.appointment,me=>{setTimeout(()=>{O.value++},200);let xe=JSON.parse(JSON.stringify(me));xe&&xe.bookingStart&&(p.value=xe.bookingStart.split(" ")[0],y.value=xe.bookingStart.split(" ")[1].substring(0,5))});let T=V(null),F=V(0),E=U("sidebarCollapsed");window.addEventListener("resize",P);function P(){T.value&&(F.value=T.value.offsetWidth)}xt(E,me=>{me?setTimeout(()=>{L()},1500):setTimeout(()=>{L()},500)});function L(){F.value=T.value.offsetWidth}Ge(()=>{co(()=>{F.value=T.value.offsetWidth})});let D=b(()=>e.visibility);xt(D,me=>{me&&setTimeout(()=>{F.value=T.value.offsetWidth},300)});let v=b(()=>ot(F.value)),f=V(!1),C=V(null),B=V("");function _(){f.value=!1,B.value=""}let k=V(null),R=b(()=>k.value?k.value.calendarSlotsLoading:!0),M=U("cabinetType"),O=V(0),H=V(!1),z=V({employee:null,location:null}),J=V(!0),oe=V(!0),X=b(()=>e.appointment&&!e.appointment.id&&(e.employees.length||e.locations.length)&&(e.customizedOptions.employee.visibility||e.customizedOptions.location.visibility)&&(J.value||oe.value)),re=V(null),te=b(()=>X.value?{employee:[{required:"employee"in e.customizedOptions?e.customizedOptions.employee.required:!1,message:e.labels.please_select_employee,trigger:"submit"}],location:[{required:"location"in e.customizedOptions?e.customizedOptions.location.required:!1,message:e.labels.please_select_location,trigger:"submit"}]}:{}),pe=b(()=>{let me={};return z.value.employee?me.providerIds=[z.value.employee]:"providerIds"in e.slotsParams&&e.slotsParams.providerIds.length&&(me.providerIds=e.slotsParams.providerIds),z.value.location?me.locationId=z.value.location:"locationId"in e.slotsParams&&e.slotsParams.locationId?me.locationId=e.slotsParams.locationId:me.locationId=null,Object.assign({},e.slotsParams,me)});function le(){re.value&&re.value.clearValidate(),H.value=!0,O.value++,a("employee-selection",z.value.employee),a("location-selection",z.value.location)}function Ee(me){z.value.employee=me,le()}function de(){X.value&&(z.value.employee=null,z.value.location=null,J.value=!0,oe.value=!0,le()),a("close")}xt(D,me=>{me&&e.employees.length===1&&(z.value.employee=e.employees[0].id,J.value=!1),me&&e.locations.length===1&&(z.value.location=e.locations[0].id,oe.value=!1),me&&(e.locations.length===1||e.employees.length===1)&&le()});let ie=V();ze("formWrapper",ie);let Ce=b(()=>s.getters["entities/getService"](e.appointment.serviceId).duration);ze("calendarSlotDuration",Ce);let I=V(!0);ze("calendarChangeSideBar",I);let W=V(0);ze("calendarServiceDuration",W);function Q(){"id"in e.appointment?G():_e()}function ee(me){let xe=me?"UTC":s.getters["cabinet/getTimeZone"],je=p.value+" "+y.value,he=null,we=null;if(me){let Ve=qo(je);we=Ro(Ve),he=Ve}else he=je;return{utcOffset:we,bookingStart:he,timeZone:xe}}function G(){k.value.calendarSlotsLoading=!0;let me=ee(!1);zs()===s.getters["cabinet/getTimeZone"]&&l.general.showClientTimeZone&&(me.utcOffset=Ro(qo(p.value+" "+y.value))),$e.post("/bookings/reassign/"+e.appointment.bookings.filter(xe=>xe.status==="approved"||xe.status==="pending"||xe.status==="waiting")[0].id,me,Object.assign(Ue(s),{params:{source:"cabinet-"+M.value}})).then(()=>{k.value.calendarSlotsLoading=!1,a("success",{message:m.value.appointment_rescheduled})}).catch(xe=>{k.value.calendarSlotsLoading=!1,xe.response&&(!("data"in xe.response.data)&&"message"in xe.response.data&&(f.value=!0,B.value=xe.response.data.message,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"data"in xe.response&&"data"in xe.response.data&&"customerAlreadyBooked"in xe.response.data.data&&(f.value=!0,B.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"data"in xe.response&&"data"in xe.response.data&&"cancelBookingUnavailable"in xe.response.data.data&&(f.value=!0,B.value=e.labels.booking_cancel_exception,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"data"in xe.response&&"data"in xe.response.data&&"timeSlotUnavailable"in xe.response.data.data&&xe.response.data.data.timeSlotUnavailable===!0&&(f.value=!0,B.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"data"in xe.response&&"data"in xe.response.data&&"rescheduleBookingUnavailable"in xe.response.data.data&&xe.response.data.data.rescheduleBookingUnavailable===!0&&(f.value=!0,B.value=e.labels.booking_reschedule_exception,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500))),a("error")})}function ae(){k.value.calendarSlotsLoading=!0;let me=ee(l.general.showClientTimeZone&&s.getters["cabinet/getTimeZone"]===zs()),xe=JSON.parse(JSON.stringify(e.appointment));xe.bookingStart=me.bookingStart,xe.bookings[0].utcOffset=me.utcOffset,xe.bookings[0].timeZone=me.timeZone,xe.providerId=parseInt(ce.value),xe.locationId=parseInt(Pe.value),$e.post("/bookings",xe,Ue(s)).then(je=>{k.value.calendarSlotsLoading=!1,Qi(s,je),a("success",{message:m.value.booking_added_success})}).catch(je=>{k.value.calendarSlotsLoading=!1,je.response&&("customerAlreadyBooked"in je.response.data.data&&je.response.data.data.customerAlreadyBooked===!0&&(f.value=!0,B.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"timeSlotUnavailable"in je.response.data.data&&je.response.data.data.timeSlotUnavailable===!0&&(f.value=!0,B.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"packageBookingUnavailable"in je.response.data.data&&je.response.data.data.packageBookingUnavailable===!0&&(f.value=!0,B.value=e.labels.package_booking_unavailable,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500)),"customerBlocked"in je.response.data.data&&je.response.data.data.customerBlocked===!0&&(f.value=!0,B.value=e.labels.customer_blocked,setTimeout(function(){gt(ie.value,C.value.$el,0,300)},500))),a("error",je)})}function _e(){X.value?re.value.validate(me=>{me?ae():setTimeout(()=>{gt(ie.value,re.value.$el,0,300)},200)}):ae()}let ce=V(null),Pe=V(null),se=V(null);function ye(me,xe){if(se.value=xe,H.value=!1,!e.appointment.bookingStart){let he=Pr(Object.keys(xe));return{calendarStartDate:he[0],calendarEventSlots:[],calendarEventDate:he[0],calendarEventSlot:null}}let je=e.appointment.bookingStart.split(" ");return{calendarStartDate:je[0],calendarEventSlots:je[0]in xe?Object.keys(xe[je[0]]):[],calendarEventDate:je[0],calendarEventSlot:je[1].slice(0,5)}}ze("useSlotsCallback",ye),ze("useRange",()=>{if(!e.appointment.bookingStart)return{start:null,end:null};let me=e.appointment.bookingStart.split(" ")[0];return{start:Ae(me,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:Ae(me,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ze("useSelectedDuration",()=>{});function De(){let me=Object.keys(se.value[p.value]);me.length&&(ce.value=y.value&&se.value[p.value][y.value]?se.value[p.value][y.value][0].e:se.value[p.value][me[0]][0].e,Pe.value=y.value&&se.value[p.value][y.value]?se.value[p.value][y.value][0].l:se.value[p.value][me[0]][0].l)}ze("useBusySlots",()=>[]),ze("useSelectedDate",(me,xe)=>(p.value=xe,e.appointment&&e.appointment.bookingStart&&(y.value=e.appointment.bookingStart.split(" ")[1].substring(0,5)),De(),Object.keys(se.value[xe]))),ze("useSelectedTime",(me,xe)=>{y.value=xe.substring(0,5),p.value?De():e.appointment&&(p.value=e.appointment.bookingStart.split(" ")[0],De())}),ze("useDeselectedDate",()=>{p.value="",y.value="",ce.value=null,Pe.value=null});let Me=U("amFonts"),Le=U("amColors"),be=b(()=>({"--am-c-csd-text":Le.value.colorMainText,"--am-c-csd-bgr":Le.value.colorMainBgr,"--am-c-csd-text-op10":K(Le.value.colorMainText,.1),"--am-c-scroll-op30":K(Le.value.colorPrimary,.3),"--am-c-scroll-op10":K(Le.value.colorPrimary,.1),"--am-font-family":Me.value.fontFamily}));return(me,xe)=>{const je=vt,he=st;return u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__reschedule",style:Be(t(be)),position:"center"},{footer:S(()=>[d("div",b9,[N(ke,{category:"secondary",size:t(F)<=360?"small":"default",type:t(e).customizedOptions.cancelBtn.buttonType,disabled:t(H)||t(R),onClick:de},{default:S(()=>[ue(w(n.labels.cancel),1)]),_:1},8,["size","type","disabled"]),N(ke,{size:t(F)<=360?"small":"default",type:t(e).customizedOptions.continueBtn.buttonType,disabled:!!(t(H)||t(R)||!t(p)||!t(y)),onClick:Q},{default:S(()=>[ue(w(n.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:S(()=>[d("div",{ref_key:"popupInnerRef",ref:T,class:"am-csd__inner"},[d("div",_9,[d("div",C9,w(n.labels.no_selected_slot_requirements),1),d("div",{class:"am-csd__header-btn",onClick:de},[N(Ze,{icon:"close"})])]),d("div",{ref_key:"rescheduleRef",ref:ie,class:"am-csd__content"},[t(f)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:C,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:_,onTriggerClose:_},{title:S(()=>[y9,ue(" "+w(t(B)),1)]),_:1},512)):$("",!0),t(X)?(u(),Y(he,{key:1,ref_key:"packageFormRef",ref:re,class:"am-csd__filter-wrapper",rules:t(te),model:t(z),"label-position":"top"},{default:S(()=>[d("div",{class:j(["am-csd__filter am-csd__filter-employee",t(v)])},[t(e).employees.length&&t(J)&&t(e).customizedOptions.employee.visibility?(u(),Y(je,{key:0,class:j([{"am-csd__filter-full":!(t(e).locations.length&&t(oe)&&t(e).customizedOptions.location.visibility)},t(v)]),label:`${n.labels.package_appointment_employee}:`,prop:"employee"},{default:S(()=>[N(Je,{modelValue:t(z).employee,"onUpdate:modelValue":xe[0]||(xe[0]=we=>t(z).employee=we),clearable:"",filterable:t(e).customizedOptions.employee.filterable,placeholder:`${n.labels.package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:t(H),"filter-method":r,onChange:le},{default:S(()=>[(u(!0),A(ne,null,ve(t(i),we=>(u(),Y(Ye,{key:we.id,value:we.id,label:`${we.firstName} ${we.lastName}`},{default:S(()=>[N(Ji,{identifier:we.id,label:`${we.firstName} ${we.lastName}`,price:0,"image-thumb":we.pictureThumbPath,description:we.description,"dialog-title":n.labels.employee_information_package,"dialog-button-text":n.labels.select_this_employee_package,badge:we.badge,onClick:Ee},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):$("",!0),t(e).locations.length&&t(oe)&&t(e).customizedOptions.location.visibility?(u(),Y(je,{key:1,class:j([{"am-csd__filter-full":!(t(e).employees.length&&t(J)&&t(e).customizedOptions.employee.visibility)},t(v)]),label:`${n.labels.package_appointment_location}:`,prop:"location"},{default:S(()=>[N(Je,{modelValue:t(z).location,"onUpdate:modelValue":xe[1]||(xe[1]=we=>t(z).location=we),clearable:"",filterable:t(e).customizedOptions.location.filterable,placeholder:`${n.labels.package_select_location}...`,"fit-input-width":!0,disabled:t(H),"filter-method":x,onChange:le},{default:S(()=>[(u(!0),A(ne,null,ve(t(g),we=>(u(),Y(Ye,{key:we.id,value:we.id,label:we.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):$("",!0)],2)]),_:1},8,["rules","model"])):$("",!0),t(e).appointment!==null?(u(),Y(Xi,{key:2,id:0,ref_key:"calendarRef",ref:k,"preselect-slot":!1,"load-counter":t(O),"end-time":t(e).customizedOptions.endTimeVisibility.visibility,"time-zone":t(e).customizedOptions.timeZoneVisibility.visibility,"show-estimated-pricing":t(e).appointment.id&&"estimatedPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.estimatedPricingVisibility.visibility:!1,"show-indicator-pricing":t(e).appointment.id&&"indicatorPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.indicatorPricingVisibility.visibility:!1,"show-slot-pricing":t(e).appointment.id&&"slotPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.slotPricingVisibility.visibility:!1,"label-slots-selected":n.labels.date_time_slots_selected,"fetched-slots":null,"service-id":parseInt(t(e).appointment.serviceId),"is-package":t(e).appointment.bookings[0].packageCustomerService!==null,date:t(e).appointment&&t(e).appointment.bookingStart?t(e).appointment.bookingStart.split(" ")[0]:"","slots-params":t(pe)},null,8,["load-counter","end-time","time-zone","show-estimated-pricing","show-indicator-pricing","show-slot-pricing","label-slots-selected","service-id","is-package","date","slots-params"])):$("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const A9={class:"am-csd__inner"},F9={class:"am-csd__header"},k9={class:"am-csd__header-text"},D9={class:"am-csd__content"},w9={class:"am-ccpss__heading"},P9={class:"am-csd__footer"},T9={name:"CancelBooking"},Ha=Object.assign(T9,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm","decline"],setup(n,{emit:a}){const e=n;let s=U("containerWidth"),l=U("amFonts"),o=U("amColors"),r=b(()=>({"--am-c-csd-text":o.value.colorMainText,"--am-c-csd-bgr":o.value.colorMainBgr,"--am-font-family":l.value.fontFamily}));return(i,c)=>{const x=Nl,g=Ol;return u(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Be(t(r)),position:"center"},{footer:S(()=>[d("div",P9,[N(ke,{category:"secondary",size:t(s)<=360?"small":"default",type:n.customizedOptions.cancelBtn.buttonType,disabled:n.loading,onClick:c[1]||(c[1]=()=>{a("decline")})},{default:S(()=>[ue(w(t(e).closeBtnText),1)]),_:1},8,["size","type","disabled"]),N(ke,{category:"danger",size:t(s)<=360?"small":"default",type:n.customizedOptions.confirmBtn.buttonType,disabled:n.loading,onClick:c[2]||(c[2]=()=>{a("confirm")})},{default:S(()=>[ue(w(t(e).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:S(()=>[d("div",A9,[n.loading?(u(),Y(g,{key:1,animated:"",class:"am-ccpss"},{template:S(()=>[d("div",w9,[N(x,{variant:"rect"})]),(u(!0),A(ne,null,ve(new Array(t(e).count),m=>(u(),A("div",{key:m,class:"am-ccpss__text"},[N(x,{variant:"rect"})]))),128))]),_:1})):(u(),A(ne,{key:0},[d("div",F9,[d("div",k9,w(t(e).title),1),d("div",{class:"am-csd__header-btn",onClick:c[0]||(c[0]=()=>{a("close")})},[N(Ze,{icon:"close"})])]),d("div",D9,[d("p",null,w(t(e).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const L9={name:"CabinetAppointmentsList"},bi=Object.assign(L9,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled","editAppointment","statusChange"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("originKey");const o=U("settings");let r=U("amLabels"),i=U("cabinetType"),c=V(null),x=V(null),g=V(null);function m(R=null){x.value=null,a("booked",R)}let p=V(!1);function y(){p.value=!0,$e.post("/bookings/cancel/"+c.value.id,{type:"appointment"},Object.assign(Ue(s),{params:{source:"cabinet-"+i.value}})).then(()=>{c.value=null,a("canceled",{message:r.value.appointment_canceled})}).catch(R=>{console.log(R)}).finally(()=>{p.value=!1})}function T(R){let M={total:0,bookable:0,discount:0,tax:0};return R.bookings.forEach(O=>{if(O.status==="approved"||O.status==="pending"){let H=go(s,{price:O.price,persons:O.persons,aggregatedPrice:O.aggregatedPrice,extras:O.extras,tax:O.tax,coupon:O.coupon},!1);M.total+=H.total,M.bookable+=H.bookable,M.discount+=H.discount,M.tax+=H.tax}}),M.total-M.discount+M.tax}function F(R){let M=[],O=0,H=R;H.bookings.forEach(J=>{J.extras.forEach(oe=>{M.push({id:oe.extraId,quantity:oe.quantity})}),"duration"in J&&J.duration&&J.duration>O&&(J.status==="approved"||J.status==="pending")&&(O=J.duration)});let z={serviceId:H.serviceId,serviceDuration:O||null,locationId:H.locationId,providerIds:[H.providerId],extras:JSON.stringify(M),excludeAppointmentId:H.isGroup?null:H.id,group:1,timeZone:s.getters["cabinet/getTimeZone"],page:"cabinet",structured:!0};x.value=R,g.value=z}function E(R){return s.getters["entities/getEmployee"](R)}function P(R){return R.bookings.filter(M=>M.status!=="rejected"&&M.status!=="canceled").map(M=>{let O;return"info"in M&&M.info?(O="customer"in M?M.customer:{},O=Object.assign(O,JSON.parse(M.info))):O=M.customer,O.bookingStatus=M.status,O})}let L=U("amCustomize");const D=U("labels"),v=U("localLanguage");let f=b(()=>o.general.usedLanguages.includes(v.value));function C(R){let M=tt({...D}),O=L.value[R].translations;return O&&Object.keys(O).forEach(H=>{O[H][v.value]&&f.value?M[H]=O[H][v.value]:O[H].default&&(M[H]=O[H].default)}),M}function B(R){return L.value[R].options}let _=U("amColors"),k=b(()=>({"--am-c-capa-bgr":_.value.colorMainBgr,"--am-c-capa-text":_.value.colorMainText,"--am-c-capa-text-op70":K(_.value.colorMainText,.7),"--am-c-capa-text-op25":K(_.value.colorMainText,.25),"--am-c-capa-primary":_.value.colorPrimary}));return(R,M)=>(u(),A(ne,null,[d("div",{class:j(["am-capa__wrapper",[{"am-no-border":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]]),style:Be(t(k))},[(u(!0),A(ne,null,ve(t(e).groupedAppointments,(O,H)=>(u(),A("div",{key:H,class:"am-capa"},[d("div",{class:j(["am-capa__date",[{"am-today":t(it)(H)===t(it)(t(at)().format("YYYY-MM-DD"))},{"am-no-flag":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]])},w(t(it)(H)),3),(u(!0),A(ne,null,ve(O.appointments,(z,J)=>(u(),A(ne,{key:J},[t(s).getters["entities/getService"](z.serviceId)?(u(),Y(Ci,{key:0,start:t(vs)(z.bookingStart.split(" ")[1].slice(0,5)),name:t(s).getters["entities/getService"](z.serviceId).name,employee:E(z.provider.id),customers:P(z),price:T(z),duration:t(Gp)(t(s),z),periods:[],extras:t(Zp)(z.bookings,t(s).getters["entities/getService"](z.serviceId)),tickets:[],"custom-fields":t(vi)(z.bookings,t(i)),location:z.locationId?t(s).getters["entities/getLocation"](z.locationId):null,"google-meet-link":z.googleMeetUrl,"microsoft-teams-link":z.microsoftTeamsUrl,"zoom-link":z.zoomMeeting?z.zoomMeeting.joinUrl:"","lesson-space-link":z.lessonSpace,bookable:z.service,reservation:z,booking:z.bookings[0],"is-package-booking":t(e).isPackageBooking,"responsive-class":t(e).responsiveClass,"parent-width":t(e).pageWidth,"customized-options":B(t(e).stepKey),onCancelBooking:M[0]||(M[0]=oe=>{Fe(c)?c.value=oe:c=oe}),onRescheduling:F,onEditAppointment:M[1]||(M[1]=oe=>{t(a)("editAppointment",oe)}),onStatusChange:M[2]||(M[2]=(oe,X)=>t(a)("statusChange",oe,X))},null,8,["start","name","employee","customers","price","duration","extras","custom-fields","location","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):$("",!0)],64))),128))]))),128))],6),t(l)==="capc"?(u(),Y(Ha,{key:0,visibility:t(c)!==null,title:C("cancelAppointment").cancel_appointment,description:C("cancelAppointment").confirm_cancel_appointment,"close-btn-text":C("cancelAppointment").close,"confirm-btn-text":C("cancelAppointment").confirm,"customized-options":B("cancelAppointment"),loading:t(p),onClose:M[3]||(M[3]=O=>Fe(c)?c.value=null:c=null),onDecline:M[4]||(M[4]=O=>Fe(c)?c.value=null:c=null),onConfirm:y},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):$("",!0),t(l)==="capc"?(u(),Y(yi,{key:1,visibility:t(x)!==null,appointment:t(x),"slots-params":t(g),labels:C("rescheduleAppointment"),"customized-options":B("rescheduleAppointment"),onClose:M[5]||(M[5]=O=>Fe(x)?x.value=null:x=null),onSuccess:m,onError:M[6]||(M[6]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])):$("",!0)],64))}});const S9={style:{float:"right"}},I9={class:"am-capai-def__notify"},$9=["innerHTML"],N9={class:"am-capai-def__notify"},O9=["innerHTML"],M9={props:{slotsProps:{type:Object,required:!0},slotsLoading:{type:Boolean,required:!0},isDisabledDate:{type:Function,required:!0},freeSlots:{type:Object,required:!0},times:{type:Array,required:!0},getFreeTimes:{type:Function,required:!0}},emits:["removeSlots","fetchSlots","changedSlotCondition","getSelectedDatesTimes","filterOut","getFreeTimes","selectDate","selectTime"],setup(n,{expose:a,emit:e}){const s=n;let l=Oe(),o=U("amLabels"),r=U("localLanguage");const i=U("settings");let c=U("licence"),x=U("slotsPricing");function g(I){return""}let m=I=>{let W=Ae(I).format("YYYY-MM-DD");return W in x.value?"am-slots-"+x.value[W].type:""};const p=V(null);let{width:y}=Ga(p),T=b(()=>ot(y.value)),F=V({categoryId:b({get:()=>l.getters["appointment/getCategoryId"],set:I=>{l.commit("appointment/setCategoryId",I||null)}}),serviceId:b({get:()=>l.getters["appointment/getServiceId"],set:I=>{l.commit("appointment/setServiceId",I||null)}}),providerId:b({get:()=>l.getters["appointment/getProviderId"],set:I=>{l.commit("appointment/setProviderId",I||null)}}),locationId:b({get:()=>l.getters["appointment/getLocationId"],set:I=>{l.commit("appointment/setLocationId",I||null)}}),lessonSpace:b({get:()=>l.getters["appointment/getLessonSpace"],set:I=>{l.commit("appointment/setLessonSpace",I||"")}}),startDate:b({get:()=>l.getters["appointment/getStartDate"],set:I=>{l.commit("appointment/setStartDate",I||"")}}),startTime:b({get:()=>l.getters["appointment/getStartTime"],set:I=>{l.commit("appointment/setStartTime",I||"")}}),notifyParticipants:b({get:()=>l.getters["appointment/getNotifyParticipants"],set:I=>{l.commit("appointment/setNotifyParticipants",I)}}),createPaymentLinks:b({get:()=>l.getters["appointment/getCreatePaymentLinks"],set:I=>{l.commit("appointment/setCreatePaymentLinks",I)}}),internalNotes:b({get:()=>l.getters["appointment/getInternalNotes"],set:I=>{l.commit("appointment/setInternalNotes",I||"")}})}),E=b(()=>({serviceId:[{required:!0,message:o.value.please_select_service,trigger:["submit","change"]}],startDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],startTime:[{required:!0,message:o.value.select_time_warning,trigger:["submit","change"]}]})),P=b(()=>l.getters["entities/filteredCategories"](l.getters["appointment/getSelection"])),L=V(l.getters["entities/filteredCategories"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),D=V("");function v(I){D.value=I.toLowerCase()}let f=b(()=>D.value?L.value.filter(I=>I.name.toLowerCase().includes(D.value)):L.value),C=b(()=>l.getters["entities/filteredServices"](l.getters["appointment/getSelection"])),B=V(l.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null}));function _(I){let W=l.getters["entities/getService"](I),Q=W&&W.settings?JSON.parse(W.settings):null,ee=Q&&"payments"in Q&&Q.payments&&"paymentLinks"in Q.payments&&Q.payments.paymentLinks&&"enabled"in Q.payments.paymentLinks?Q.payments.paymentLinks:i.payments.paymentLinks;return ee&&ee.enabled}let k=V("");function R(I){k.value=I.toLowerCase()}let M=b(()=>k.value?B.value.filter(I=>I.name.toLowerCase().includes(k.value)):B.value),O=b(()=>l.getters["appointment/getId"]&&l.getters["appointment/getServiceId"]&&B.value.map(I=>I.id).indexOf(l.getters["appointment/getServiceId"])===-1?l.getters["entities/getService"](l.getters["appointment/getServiceId"]):null),H=b(()=>l.getters["entities/filteredLocations"](l.getters["appointment/getSelection"])),z=V(l.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),J=V("");function oe(I){J.value=I.toLowerCase()}let X=b(()=>J.value?z.value.filter(I=>I.name.toLowerCase().includes(J.value)):z.value),re=b(()=>l.getters["appointment/getId"]&&l.getters["appointment/getLocationId"]&&z.value.map(I=>I.id).indexOf(l.getters["appointment/getLocationId"])===-1?l.getters["entities/getLocation"](l.getters["appointment/getLocationId"]):null),te=V(l.getters["entities/getSpaces"]);function pe(){l.commit("appointment/setTargetedDate",null),l.commit("appointment/setStartDate",null),l.commit("appointment/setStartTime",null),e("removeSlots")}function le(I,W=null,Q=!1){let ee=l.getters["appointment/getTargetedDate"];!I&&!ee?I=Ae().toDate():!I&&ee&&(I=ee),l.commit("appointment/setTargetedDate",I&&Q?I:ee),F.value.serviceId&&e("fetchSlots",I,W,Q)}function Ee(){F.value.startDate&&le(F.value.startDate)}function de(I){e("selectTime",I)}function ie(I){I?e("selectDate",I):pe()}function Ce(I){I?(clearTimeout(this.searchSpacesTimer),l.commit("auth/setSpacesLoading",!0),$e.get("/entities",{params:{types:["spaces"],lessonSpaceSearch:I}}).then(W=>{te.value=W.data.data.spaces}).catch(W=>{console.log(W)}).finally(()=>{l.commit("auth/setSpacesLoading",!1)})):te.value=l.getters["entities/getSpaces"]}return xt(()=>F.value.serviceId,I=>{l.dispatch("appointment/updateEmployeeService",I||null),I&&(l.dispatch("appointment/recreateAllBookingCustomFields",{label:o.value.required_field}),Ee())}),Ge(()=>{B.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setServiceId",B.value[0].id),z.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setLocationId",z.value[0].id)}),a({detailsFormRef:p}),(I,W)=>{const Q=vt,ee=Ml,G=st;return u(),Y(G,{ref_key:"detailsFormRef",ref:p,model:t(F),rules:t(E),class:"am-capai-def"},{default:S(()=>[t(L).length>1?(u(),Y(Q,{key:0,label:`${t(o).category}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(F).categoryId,"onUpdate:modelValue":W[0]||(W[0]=ae=>t(F).categoryId=ae),clearable:"",filterable:"",placeholder:`${t(o).select_service_category}`,"filter-method":v},{default:S(()=>[(u(!0),A(ne,null,ve(t(f),ae=>(u(),Y(Ye,{key:ae.id,value:ae.id,label:ae.name,disabled:t(F).serviceId&&typeof t(P).find(_e=>_e.id===ae.id)>"u"},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),N(Q,{label:`${t(o).services_dropdown}`,prop:"serviceId",class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(F).serviceId,"onUpdate:modelValue":W[1]||(W[1]=ae=>t(F).serviceId=ae),disabled:t(B).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_service}`,"filter-method":R},{default:S(()=>[(u(!0),A(ne,null,ve(t(M),ae=>(u(),Y(Ye,{key:ae.id,value:ae.id,label:ae.name,disabled:typeof t(C).find(_e=>_e.id===ae.id)>"u"},null,8,["value","label","disabled"]))),128)),t(O)?(u(),Y(Ye,{key:t(O).id,value:t(O).id,label:t(O).name},null,8,["value","label"])):$("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),!t(c).isStarter&&t(z).length>1?(u(),Y(Q,{key:1,label:`${t(o).location}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(F).locationId,"onUpdate:modelValue":W[2]||(W[2]=ae=>t(F).locationId=ae),disabled:t(z).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_location}`,"filter-method":oe,onChange:Ee},{default:S(()=>[(u(!0),A(ne,null,ve(t(X),ae=>(u(),Y(Ye,{key:ae.id,value:ae.id,label:ae.name,disabled:t(re)===null&&typeof t(H).find(_e=>_e.id===ae.id)>"u"},null,8,["value","label","disabled"]))),128)),t(re)?(u(),Y(Ye,{key:t(re).id,value:t(re).id,label:t(re).name},null,8,["value","label"])):$("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])):$("",!0),t(i).lessonSpace.enabled?(u(),Y(Q,{key:2,label:`${t(o).lesson_space}`,class:"am-capai-def__item"},{default:S(()=>[N(Je,{modelValue:t(F).lessonSpace,"onUpdate:modelValue":W[3]||(W[3]=ae=>t(F).lessonSpace=ae),filterable:"",clearable:"",remote:"","remote-method":Ce,placeholder:`${t(o).select}`},{default:S(()=>[(u(),Y(Ye,{key:0,value:0,label:t(o).lesson_space_new_space},null,8,["label"])),(u(!0),A(ne,null,ve(t(te),ae=>(u(),Y(Ye,{key:ae.id,value:ae.id,label:ae.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),N(Q,{label:`${t(o).date}`,prop:"startDate",class:j(["am-capai-def__item am-w-50",t(T)])},{default:S(()=>[N(ea,{modelValue:t(F).startDate,"onUpdate:modelValue":W[4]||(W[4]=ae=>t(F).startDate=ae),type:"date",format:t(Kt)(),placeholder:t(o).select_date,clearable:!0,lang:t(r),disabled:!t(F).serviceId,"disabled-date":(ae,_e)=>t(s).isDisabledDate(ae,null,!0,_e),"popper-class":n.slotsLoading?"am-slots-loader":"","cell-class-name":t(m),onPanelChange:W[5]||(W[5]=ae=>{le(ae,null,!0)}),onChange:ie,onFocus:W[6]||(W[6]=ae=>t(F).serviceId&&!t(F).startDate?le(null,null,!0):!1)},null,8,["modelValue","format","placeholder","lang","disabled","disabled-date","popper-class","cell-class-name"])]),_:1},8,["label","class"]),N(Q,{label:`${t(o).time}`,prop:"startTime",class:j(["am-capai-def__item am-w-50",t(T)])},{default:S(()=>[N(Je,{modelValue:t(F).startTime,"onUpdate:modelValue":W[7]||(W[7]=ae=>t(F).startTime=ae),placeholder:`${t(o).select_time}`,disabled:!t(F).startDate,"prefix-icon":"clock",onChange:de},{default:S(()=>[(u(!0),A(ne,null,ve(t(s).getFreeTimes(null,{date:t(F).startDate,times:t(s).times,time:t(F).startTime},!0),ae=>(u(),Y(Ye,{key:ae,value:ae,label:ae},{default:S(()=>[ue(w(t(vs)(ae))+" ",1),d("span",S9,w(g()),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","class"]),N(Q,{class:"am-capai-def__item"},{default:S(()=>[d("div",I9,[N(ht,{modelValue:t(F).notifyParticipants,"onUpdate:modelValue":W[8]||(W[8]=ae=>t(F).notifyParticipants=ae),label:t(o).notify_customers},null,8,["modelValue","label"]),N(ee,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(o).notify_customers_tooltip},null,8,$9)]),default:S(()=>[N(Ze,{icon:"info-reverse"})]),_:1})])]),_:1}),t(F).notifyParticipants&&t(F).serviceId&&_(t(F).serviceId)?(u(),Y(Q,{key:3,class:"am-capai-def__item"},{default:S(()=>[d("div",N9,[N(ht,{modelValue:t(F).createPaymentLinks,"onUpdate:modelValue":W[9]||(W[9]=ae=>t(F).createPaymentLinks=ae),label:t(o).generate_payment_links},null,8,["modelValue","label"]),N(ee,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(o).generate_payment_links_tooltip},null,8,O9)]),default:S(()=>[N(Ze,{icon:"info-reverse"})]),_:1})])]),_:1})):$("",!0),N(Q,{label:`${t(o).note_internal}`,class:"am-capai-def__item"},{default:S(()=>[N(ct,{modelValue:t(F).internalNotes,"onUpdate:modelValue":W[10]||(W[10]=ae=>t(F).internalNotes=ae),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};function Bi(n,a){return Object.assign({},a,{gender:a.gender?a.gender:"",note:a.note?a.note:"",phone:a.phone?a.phone:"",birthday:a.birthday?Ae(a.birthday.date.split(" ")[0]).toDate():null,translations:a.translations?JSON.parse(a.translations):{defaultLanguage:""}})}function V9(n){let a=n.getters["customerInfo/getCustomer"];return Object.assign({},a,{birthday:a.birthday?Ae(a.birthday).format("YYYY-MM-DD"):null,translations:a.translations.defaultLanguage?JSON.stringify(a.translations):null})}const R9=d("span",{class:"am-icon-triangle-info"},null,-1),q9={key:0,class:"am-capai-warn__content"},U9={key:0,class:"am-capai-warn__heading"},z9={key:1,class:"am-capai-warn__text"},Ai={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(n){const a=n;let e=U("amColors"),s=b(()=>({"--am-c-warning":e.value.colorWarning,"--am-c-warning-op10":K(e.value.colorWarning,.1),"--am-c-main-text":e.value.colorMainText,"--am-c-main-text-op10":K(e.value.colorMainText,.1)}));return(l,o)=>(u(),A("div",{class:"am-capai-warn",style:Be(t(s))},[R9,a.heading||a.text?(u(),A("div",q9,[a.heading?(u(),A("div",U9,w(a.heading),1)):$("",!0),a.text?(u(),A("div",z9,w(a.text),1)):$("",!0)])):$("",!0)],4))}};const j9={class:"am-cap-aec__header"},Y9=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),Fi={props:{visibility:{type:Boolean,required:!0},customCss:{type:Object,default:()=>{}},responsiveClass:{type:String,default:""}},emits:["update:visibility","addedCustomer"],setup(n,{emit:a}){const e=n,s=U("settings");let l=U("amLabels");const o=Oe();let r=V("details"),i=V(null),c=V(!1),x=V("success"),g=V("");function m(){c.value=!1,o.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let p=b(()=>o.getters["customerInfo/getCustomerId"]),y=b(()=>{let z=[];return s.wordpress.locale in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[s.wordpress.locale].wp_locale,label:o.getters["entities/getSettings"].languages[s.wordpress.locale].name}),s.general.usedLanguages.forEach(J=>{J in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[J].wp_locale,label:o.getters["entities/getSettings"].languages[J].name})}),z}),T=V(null),F=V(!1),E=V({firstName:b({get:()=>o.getters["customerInfo/getCustomerFirstName"],set:z=>{o.commit("customerInfo/setCustomerFirstName",z||"")}}),lastName:b({get:()=>o.getters["customerInfo/getCustomerLastName"],set:z=>{o.commit("customerInfo/setCustomerLastName",z||"")}}),email:b({get:()=>o.getters["customerInfo/getCustomerEmail"],set:z=>{o.commit("customerInfo/setCustomerEmail",z||"")}}),phone:b({get:()=>o.getters["customerInfo/getCustomerPhone"],set:z=>{o.commit("customerInfo/setCustomerPhone",z||"")}}),language:b({get:()=>o.getters["customerInfo/getCustomerLanguage"],set:z=>{o.commit("customerInfo/setCustomerLanguage",z||"")}}),gender:b({get:()=>o.getters["customerInfo/getCustomerGender"],set:z=>{o.commit("customerInfo/setCustomerGender",z||"")}}),birthday:b({get:()=>o.getters["customerInfo/getCustomerBirthday"]||"",set:z=>{o.commit("customerInfo/setCustomerBirthday",z?Ae(z).format("YYYY-MM-DD"):"")}}),note:b({get:()=>o.getters["customerInfo/getCustomerNote"],set:z=>{o.commit("customerInfo/setCustomerNote",z||"")}})}),P=V({firstName:[{required:!0,message:l.value.enter_first_name_warning,trigger:["submit","blur"]}],lastName:[{required:!0,message:l.value.enter_last_name_warning,trigger:["submit","blur"]}]}),L=V({firstName:{template:We.text,props:{itemName:"firstName",label:l.value.first_name_colon,placeholder:l.value.enter_first_name,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="user"/>'})}},lastName:{template:We.text,props:{itemName:"lastName",label:l.value.last_name_colon,placeholder:l.value.enter_last_name,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="user"/>'})}},email:{template:We.text,props:{itemName:"email",label:l.value.email_colon,placeholder:l.value.enter_email,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ze},template:'<IconComponent icon="email"/>'})}},phone:{countryPhoneIso:b({get:()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]||"",set:z=>{o.commit("customerInfo/setCustomerCountryPhoneIso",z?z.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:l.value.phone_colon,placeholder:l.value.enter_phone,defaultCode:b(()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]?o.getters["customerInfo/getCustomerCountryPhoneIso"]:s.general.phoneDefaultCountryCode&&s.general.phoneDefaultCountryCode!=="auto"?s.general.phoneDefaultCountryCode:""),phoneError:b(()=>F.value),whatsAppLabel:l.value.whatsapp_opt_in_text,isWhatsApp:s.notifications.whatsAppEnabled&&s.notifications.whatsAppAccessToken&&s.notifications.whatsAppBusinessID&&s.notifications.whatsAppPhoneID,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},language:{template:We.select,props:{itemName:"language",label:l.value.notification_language,placeholder:l.value.language,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ze},template:`
          <IconComponent icon="pennant"/>`}),options:y.value}},gender:{template:We.select,props:{itemName:"gender",label:l.value.gender,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ze},template:`
          <IconComponent icon="gender"/>`}),options:[{label:l.value.female,value:"female"},{label:l.value.male,value:"male"}]}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:l.value.date_of_birth,placeholder:l.value.enter_date_of_birth,clearable:!0,readonly:!1,class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},note:{template:We["text-area"],props:{itemName:"note",label:l.value.note_internal,itemType:"textarea",class:b(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}}});function D(){o.dispatch("customerInfo/resetCustomer"),a("update:visibility",!1)}let v=b(()=>o.getters["customerInfo/getLoading"]);function f(){T.value.validate(z=>{if(!z){r.value="details";return}o.commit("customerInfo/setLoading",!0);let J=V9(o);const oe={};for(const X in k){const re=k[X],te=B[X];oe[X]={label:re.label,type:re.type,value:typeof te=="string"?te.trim():te}}J.customFields=JSON.stringify(oe),$e.post("/users/customers"+(J.id?"/"+J.id:""),J,Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(X=>{o.commit("auth/setPreloadedCustomers",o.getters["auth/getPreloadedCustomers"].concat([X.data.data.user]).sort((re,te)=>re.id-te.id)),a("addedCustomer",X.data.data.user),D()}).catch(X=>{"response"in X&&X.response&&(g.value=X.response.data.message,c.value=!0)}).finally(()=>{o.commit("customerInfo/setLoading",!1)})})}Ki(()=>{p.value!==null&&M()});const C=V(null),B=tt({}),_=tt({}),k=tt({});function R(z,J){if(_[J]={template:We[z.type],props:{id:J,itemName:J.toString(),label:z.label,options:z.options,class:`am-cap-aec-cf__item am-cf-width-${z.width}`}},z.type==="text-area"&&(_[J].props.itemType="textarea"),z.type==="datepicker"&&(_[J].props.weekStartsFromDay=s.wordpress.startOfWeek),z.type==="file"){let oe=o.getters["auth/getProfile"]?o.getters["auth/getProfile"].id:null;_[J].props={..._[J].props,btnLabel:l.value.upload_file_here,isUpload:!0,bookingId:oe,source:"cabinet-customer"}}}function M(){const z=o.getters["entities/getCustomFields"],J=b(()=>{const oe=o.getters["customerInfo/getCustomerCustomFields"];return oe?JSON.parse(oe):null});z.filter(oe=>oe.saveType==="customer"&&oe.type!=="content").forEach(oe=>{const{id:X}=oe,re=p.value&&J.value?J.value[X]?.value:null;k[X]={...oe,value:re??(oe.type==="checkbox"||oe.type==="file"?[]:"")},B[X]=k[X].value??"",R(oe,X)})}let O=U("amColors"),H=b(()=>({"--am-c-aec-text":O.value.colorMainText}));return(z,J)=>{const oe=st,X=_a,re=Ca;return u(),Y(Sa,{visibility:e.visibility,position:"center","custom-class":"am-slide-popup-aec","custom-css":{...n.customCss,...t(H)},"onUpdate:visibility":D},{header:S(()=>[d("div",j9,[t(p)?(u(),A(ne,{key:0},[ue(w(t(l).edit_customer),1)],64)):(u(),A(ne,{key:1},[ue(w(t(l).add_customer),1)],64))])]),footer:S(()=>[N(ke,{type:"plain",category:"secondary",onClick:D},{default:S(()=>[ue(w(t(l).cancel),1)]),_:1}),N(ke,{onClick:f},{default:S(()=>[ue(w(t(l).save),1)]),_:1})]),default:S(()=>[t(c)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:i,type:t(x),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:m,onTriggerClose:m},{title:S(()=>[Y9,ue(" "+w(t(g)),1)]),_:1},8,["type"])):$("",!0),t(v)?(u(),Y(Wt,{key:2})):(u(),Y(re,{key:1,modelValue:t(r),"onUpdate:modelValue":J[0]||(J[0]=te=>Fe(r)?r.value=te:r=te)},{default:S(()=>[N(X,{class:"am-cap__tabs-item",label:t(l).details,name:"details"},{default:S(()=>[N(oe,{ref_key:"customerFormRef",ref:T,model:t(E),rules:t(P),"label-position":"top",class:"am-cap-aec__form"},{default:S(()=>[(u(!0),A(ne,null,ve(t(L),(te,pe)=>(u(),Y(ft(te.template),Dt({key:pe},te.props,{modelValue:t(E)[pe],"onUpdate:modelValue":le=>t(E)[pe]=le,countryPhoneIso:te.countryPhoneIso,"onUpdate:countryPhoneIso":le=>te.countryPhoneIso=le}),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["label"]),Object.keys(t(k)).length?(u(),Y(X,{key:0,class:"am-cap__tabs-item",label:t(l).custom_fields,name:"customFields"},{default:S(()=>[t(v)?$("",!0):(u(),Y(oe,{key:0,ref_key:"customFieldsFormRef",ref:C,model:t(B),"label-position":"top",class:j(["am-cap-aec__form",n.responsiveClass])},{default:S(()=>[(u(!0),A(ne,null,ve(Object.keys(t(k)),te=>(u(),A(ne,{key:te},[te in t(B)?(u(),Y(ft(t(_)[te]?.template),Dt({key:0,modelValue:t(B)[te],"onUpdate:modelValue":pe=>t(B)[te]=pe},t(_)[te]?.props),null,16,["modelValue","onUpdate:modelValue"])):$("",!0)],64))),128))]),_:1},8,["model","class"]))]),_:1},8,["label"])):$("",!0)]),_:1},8,["modelValue"]))]),_:1},8,["visibility","custom-css"])}}};const W9={class:"am-cap__cust-option"},H9={class:"am-cap__cust-option__heading"},G9={key:0,class:"am-cap__cust-option__inner"},Z9={key:1,class:"am-cap__cust-option__inner"},J9={class:"am-capai-cuf__content"},X9={class:"am-capai-cuf__bulk-label"},Q9={key:0,class:"am-capai-customer__data"},K9=d("span",{class:"am-icon-phone"},null,-1),e8=["href"],t8={key:1,class:"am-capai-customer__data"},a8=d("span",{class:"am-icon-email"},null,-1),s8=["href"],l8={props:{responsiveClass:{type:String,default:""},capacityWarning:{type:String,default:""},appointmentCapacity:{type:Number,default:0},savedAppointment:{type:Object,default:()=>{}}},emits:["changedSlotCondition"],setup(n,{expose:a,emit:e}){const s=n;let l=Oe();const o=U("shortcodeData"),r=U("settings");let i=U("amCustomize"),c=U("amLabels"),x=U("pageWidth"),g=b(()=>l.getters["appointment/getEmployeeService"]),m=V(null),p=V({customersIds:b({get:()=>l.getters["customerInfo/getCustomersIds"],set:ee=>l.commit("customerInfo/setCustomersIds",ee)})}),y=V({customersIds:[{required:!0,message:c.value.select_customers,trigger:["submit","change"]}]}),T=b(()=>l.getters["customerInfo/getLoading"]),F=b(()=>l.getters["customerInfo/getCustomers"]),E=V(r.general.defaultAppointmentStatus);const P=b(()=>{try{return g.value?.settings?JSON.parse(g.value.settings):null}catch{return null}}),L=b(()=>!!(r.featuresIntegrations?.waitingListAppointments?.enabled&&P.value?.waitingList?.enabled)),D=b(()=>g.value?.maxCapacity||0),v=b(()=>L.value&&P.value?.waitingList?.maxCapacity||0),f=b(()=>(l.getters["appointment/getBookings"]||[]).filter(ee=>ee.status==="approved"||ee.status==="pending").reduce((ee,G)=>ee+(G.persons||1),0)),C=b(()=>(l.getters["appointment/getBookings"]||[]).filter(ee=>ee.status==="waiting").reduce((ee,G)=>ee+(G.persons||1),0));function B(ee){return p.value.customersIds.indexOf(ee)!==-1||f.value<D.value?!1:!_()}function _(){return L.value?C.value<v.value:!1}function k(ee){const G=!!l.getters["appointment/getId"],ae=_i(),_e=["approved","pending"].concat(L.value?["waiting"]:[]);let ce=ae;return G||(ce=ae.filter(Pe=>_e.includes(Pe.value))),(ee||!L.value)&&(ce=ce.filter(Pe=>Pe.value!=="waiting")),ce}let R=b(()=>l.getters["appointment/getBookings"]?l.getters["appointment/getBookings"]:[]),M=V(!1);function O(ee){l.commit("customerInfo/setCustomersIds",[ee.id].concat(l.getters["customerInfo/getCustomersIds"])),l.commit("customerInfo/setCustomers",[ee].concat(l.getters["customerInfo/getCustomers"])),H()}function H(){let ee=l.getters["appointment/getBookings"].map(se=>parseInt(se.customer.id)),G=!1,ae=g.value.settings?JSON.parse(g.value.settings):null;p.value.customersIds.filter(se=>!ee.includes(se)).forEach(se=>{let ye={};s.savedAppointment&&s.savedAppointment.bookings.forEach(me=>{parseInt(me.customer.id)===parseInt(se)&&(ye=me)}),G=l.getters["appointment/getBookings"].length>1;let De=ae&&"general"in ae&&"defaultAppointmentStatus"in ae.general?ae.general.defaultAppointmentStatus:r.general.defaultAppointmentStatus,Me=(l.getters["appointment/getBookings"]||[]).filter(me=>me.status==="approved"||me.status==="pending").reduce((me,xe)=>me+(xe.persons||1),0),Le=(l.getters["appointment/getBookings"]||[]).filter(me=>me.status==="waiting").reduce((me,xe)=>me+(xe.persons||1),0),be=De;Me>=D.value&&L.value&&Le<v.value&&(be="waiting"),l.getters["appointment/getBookings"].push(Object.assign({id:null,customer:F.value.find(me=>me.id===parseInt(se)),persons:1,status:be,duration:Object.keys(g.value.customPricing.durations)[0],extras:g.value.extras.map(me=>new Object({extraId:me.id,quantity:0})),customFields:{}},ye)),l.dispatch("appointment/resetBookingCustomFields",l.getters["appointment/getBookings"].length-1),l.dispatch("appointment/addCustomFieldsFormRules",{key:l.getters["appointment/getBookings"].length-1,label:c.value.required_field}),l.commit("appointment/setBooking",{index:l.getters["appointment/getBookings"].length-1,value:l.getters["appointment/getBookings"][l.getters["appointment/getBookings"].length-1]})});let _e=ee.filter(se=>!p.value.customersIds.includes(se)),ce=[];l.getters["appointment/getBookings"].forEach((se,ye)=>{_e.indexOf(se.customer.id)!==-1&&ce.push(ye)});let Pe=l.getters["appointment/getBookings"].length;for(let se=Pe-1;se>=0;se--)ce.indexOf(se)!==-1&&(G=!0,l.dispatch("appointment/removeBooking",se));G&&e("changedSlotCondition")}function z(){l.dispatch("customerInfo/resetCustomer"),M.value=!0}function J(ee){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),M.value=!0,$e.get("/users/customers/"+ee,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(G=>{l.commit("customerInfo/setCustomer",Bi(l,G.data.data.user))}).catch(G=>{console.log(G)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}function oe(ee){l.dispatch("appointment/removeBooking",ee),l.dispatch("appointment/deleteAllCustomFieldsFormRules"),l.dispatch("appointment/addAllCustomFieldsFormRules",{label:c.value.required_field}),e("changedSlotCondition")}const{noShowData:X}=U("noShowData");function re(ee,G){return ee&&G?"am-w-50":""}function te(ee){ee&&l.commit("appointment/setAllBookingsStatus",ee)}function pe(ee,G){const ae=l.getters["appointment/getBookings"][ee];if(!ae)return;if(G==="waiting"){L.value&&C.value-(ae.status==="waiting"?ae.persons||1:0)+(ae.persons||1)<=v.value&&l.commit("appointment/setBookingStatus",{index:ee,value:G});return}f.value-(ae.status==="approved"||ae.status==="pending"?ae.persons||1:0)+(ae.persons||1)<=D.value&&l.commit("appointment/setBookingStatus",{index:ee,value:G})}function le(ee,G){const ae=l.getters["appointment/getBookings"][ee];if(!ae)return;const _e=ae.persons||1,ce=G-_e;if(ce!==0){if(ae.status==="waiting"){C.value+ce<=v.value&&(l.commit("appointment/setBookingPersons",{index:ee,value:G}),e("changedSlotCondition"));return}f.value+ce<=D.value&&(l.commit("appointment/setBookingPersons",{index:ee,value:G}),e("changedSlotCondition"))}}function Ee(ee){if(ee.status==="waiting"&&L.value){const G=P.value?.waitingList||{};return G.maxExtraPeopleEnabled?Array.from({length:G.maxExtraPeople},(ae,_e)=>_e+1):[1]}return Array.from({length:D.value},(G,ae)=>ae+1)}function de(ee,G){return ee.status==="waiting"?(l.getters["appointment/getBookings"]||[]).filter(se=>se!==ee&&se.status==="waiting").reduce((se,ye)=>se+(ye.persons||1),0)+G>v.value:(l.getters["appointment/getBookings"]||[]).filter(ce=>ce!==ee&&(ce.status==="approved"||ce.status==="pending")).reduce((ce,Pe)=>ce+(Pe.persons||1),0)+G>D.value}function ie(ee,G){l.commit("appointment/setBookingDuration",{index:ee,value:G}),e("changedSlotCondition")}let Ce=b(()=>o.value.cabinetType==="employee"?i.value.appointments.options.customerPhone.visibility:!0),I=b(()=>o.value.cabinetType==="employee"?i.value.appointments.options.customerEmail.visibility:!0),W=U("amColors"),Q=b(()=>({"--am-c-card-text":W.value.colorMainText}));return Ge(()=>{if(l.getters["appointment/getId"]){let ee=l.getters["appointment/getBookings"].map(G=>G.customer.id);l.commit("customerInfo/setCustomersIds",ee),Gs(l,"",{limit:ee.length,customers:ee},()=>{l.commit("customerInfo/setCustomers",l.getters["customerInfo/getCustomers"].concat(l.getters["auth/getPreloadedCustomers"].filter(G=>l.getters["customerInfo/getCustomers"].map(ae=>ae.id).indexOf(G.id)===-1)).sort((G,ae)=>G.id-ae.id))})}else l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({customersFormRef:m}),(ee,G)=>{const ae=vt,_e=st;return u(),A("div",{class:"am-capai-cuf",style:Be(t(Q))},[s.capacityWarning?(u(),Y(Ai,{key:0,heading:s.capacityWarning},null,8,["heading"])):$("",!0),d("div",{class:j(["am-capai-cuf__heading",s.responsiveClass])},[N(_e,{ref_key:"customersFormRef",ref:m,model:t(p),rules:t(y),class:j(["am-capai-cuf__heading-form",s.responsiveClass])},{default:S(()=>[N(ae,{prop:"customersIds",class:"am-capai-cuf__heading-form__item"},{default:S(()=>[N(Je,{modelValue:t(p).customersIds,"onUpdate:modelValue":G[0]||(G[0]=ce=>t(p).customersIds=ce),filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","popper-class":"am-capai-cuf__popper-customer",placeholder:`${t(c).select_customers}`,"remote-method":ce=>{t(Gs)(t(l),ce)},loading:t(T),onChange:H,onFocus:G[1]||(G[1]=ce=>t($o)(t(l)))},{default:S(()=>[(u(!0),A(ne,null,ve(t(F),ce=>(u(),Y(Ye,{key:ce.id,disabled:B(ce.id),value:ce.id,label:ce.email&&t(I)?ce.email:ce.firstName+" "+ce.lastName},{default:S(()=>[d("div",W9,[d("div",H9,w(ce.firstName+" "+ce.lastName),1),t(I)&&ce.email?(u(),A("div",G9,w(ce.email),1)):$("",!0),t(Ce)&&ce.phone?(u(),A("div",Z9,w(ce.phone),1)):$("",!0)])]),_:2},1032,["disabled","value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})]),_:1},8,["model","rules","class"]),t(r).roles.allowWriteCustomers?(u(),Y(ke,{key:0,class:j(["am-capai-cuf__heading-add",s.responsiveClass]),size:"default",prefix:"plus",icon:"plus","icon-only":t(x)<=540,disabled:t(g)?.maxCapacity===n.appointmentCapacity&&!_(),onClick:z},{default:S(()=>[ue(w(t(c).new_customer),1)]),_:1},8,["class","icon-only","disabled"])):$("",!0)],2),d("div",J9,[t(l).getters["appointment/getBookings"].length>1?(u(),A("div",{key:0,class:j(["am-capai-cuf__bulk",s.responsiveClass])},[d("div",X9,w(t(c).change_group_status),1),N(Je,{modelValue:t(E),"onUpdate:modelValue":G[2]||(G[2]=ce=>Fe(E)?E.value=ce:E=ce),clearable:"",size:"small",placeholder:"Group Status","popper-class":"am-capai-cuf__popper","parent-class":`am-capai-cuf__bulk-status ${s.responsiveClass}`,"prefix-icon":t(E)?k(!0).find(ce=>ce.value===t(E))?.icon:"circle-empty","prefix-icon-color":t(E)?k(!0).find(ce=>ce.value===t(E))?.color:"var(--am-c-select-text-op40)",onChange:te},{default:S(()=>[(u(!0),A(ne,null,ve(k(!0),ce=>(u(),Y(Ye,{key:ce.value,value:ce.value,label:ce.label},{default:S(()=>[d("span",{class:j(`am-icon-${ce.icon}`),style:Be(`color: ${ce.color}`)},null,6),ue(" "+w(ce.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","parent-class","prefix-icon","prefix-icon-color"])],2)):$("",!0),(u(!0),A(ne,null,ve(t(R),(ce,Pe)=>(u(),A("div",{key:Pe,class:j(["am-capai-cuf__card",s.responsiveClass])},[d("div",{class:j(["am-capai-cuf__card-info",s.responsiveClass])},[d("div",{class:j(["am-capai-customer__name",t(X)(ce.customer.noShowCount).class])},[t(X)(ce.customer.noShowCount).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(X)(ce.customer.noShowCount).icon}`)},null,2)):$("",!0),ue(" "+w(ce.customer.firstName+" "+ce.customer.lastName),1)],2),ce.customer.phone&&t(Ce)?(u(),A("div",Q9,[K9,d("a",{href:`tel:${ce.customer.phone}`},w(ce.customer.phone),9,e8)])):$("",!0),ce.customer.email&&t(I)?(u(),A("div",t8,[a8,d("a",{href:`mailto:${ce.customer.email}`},w(ce.customer.email),9,s8)])):$("",!0)],2),d("div",{class:j(["am-capai-cuf__card-booking",s.responsiveClass])},[N(Je,{modelValue:ce.status,"onUpdate:modelValue":se=>ce.status=se,"prefix-icon":k(!1).find(se=>se.value===ce.status)?.icon,"prefix-icon-color":k(!1).find(se=>se.value===ce.status)?.color,"popper-class":"am-capai-cuf__popper",size:"small",onChange:se=>pe(Pe,se)},{default:S(()=>[(u(!0),A(ne,null,ve(k(!1),se=>(u(),Y(Ye,{key:se.value,value:se.value,label:se.label},{default:S(()=>[d("span",{class:j(`am-icon-${se.icon}`),style:Be(`color: ${se.color}`)},null,6),ue(" "+w(se.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","prefix-icon","prefix-icon-color","onChange"]),t(g).maxCapacity>1?(u(),Y(Je,{key:0,modelValue:ce.persons,"onUpdate:modelValue":se=>ce.persons=se,"parent-class":`${re(t(g).maxCapacity>1,t(g).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(c).persons,"prefix-icon":"users","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:se=>le(Pe,se)},{default:S(()=>[(u(!0),A(ne,null,ve(Ee(ce),se=>(u(),Y(Ye,{key:se,disabled:de(ce,se),value:se,label:se},null,8,["disabled","value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):$("",!0),t(g).customPricing.enabled==="duration"?(u(),Y(Je,{key:1,modelValue:ce.duration,"onUpdate:modelValue":se=>ce.duration=se,"parent-class":`${re(t(g).maxCapacity>1,t(g).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(c).duration,"prefix-icon":"clock","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:se=>ie(Pe,se)},{default:S(()=>[(u(!0),A(ne,null,ve(Object.keys(t(g).customPricing.durations),se=>(u(),Y(Ye,{key:se,value:se,label:t(hs)(se,t(c).h,t(c).min)},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):$("",!0)],2),N(Ea,{index:Pe,"reference-class":s.responsiveClass,"have-edit":t(r).roles.allowWriteCustomers,onRemove:oe,onEdit:se=>J(ce.customer.id)},null,8,["index","reference-class","have-edit","onEdit"])],2))),128))]),t(M)?(u(),Y(Fi,{key:1,visibility:t(M),"responsive-class":s.responsiveClass,"onUpdate:visibility":G[3]||(G[3]=ce=>Fe(M)?M.value=ce:M=ce),onAddedCustomer:O},null,8,["visibility","responsive-class"])):$("",!0)],4)}}};const n8=d("span",{class:"am-icon-email"},null,-1),o8=["href"],r8=d("span",{class:"am-icon-phone"},null,-1),i8=["href"],c8={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Oe();const l=U("shortcodeData");let o=U("amCustomize");const r=U("settings");let i=U("amLabels"),c=V(null),x=V({}),g=b(()=>s.getters["appointment/getCustomFieldsRules"]),m=V({}),p=b(()=>s.getters["appointment/getCustomFields"]),y=b(()=>s.getters["appointment/getServiceId"]),T=b(()=>s.getters["customerInfo/getCustomersIds"]),F=V(null);function E(C,B){let _=s.getters["appointment/getBookings"][C].id;(B.type!=="file"||_)&&(x.value[`${C}cf${B.id}`]=b({get:()=>{let k=s.getters["appointment/getBookings"][C].customFields[B.id]?.value;return k||""},set:k=>s.dispatch("appointment/updateBookingCustomField",{bookingKey:C,fieldId:B.id,value:k})}))}function P(C,B){let _=s.getters["appointment/getBookings"][C].id;(B.type!=="file"||_)&&(m.value[C][B.id]={template:We[B.type],props:{id:B.id,itemName:`${C}cf${B.id}`,label:B.label,options:B.options,class:`am-capai-cfields__item am-cf-width-${B.width}`}}),(B.type==="checkbox"||B.type==="radio")&&(m.value[C][B.id].props.options=m.value[C][B.id].props.options.map(k=>({...k,value:k.label}))),B.type==="text-area"&&(m.value[C][B.id].props={...m.value[C][B.id].props,itemType:"textarea"}),B.type==="file"&&_&&(m.value[C][B.id].props={...m.value[C][B.id].props,btnLabel:i.value.upload_file_here,isUpload:!1,bookingId:_}),B.type==="datepicker"&&(m.value[C][B.id].props={...m.value[C][B.id].props,weekStartsFromDay:r.wordpress.startOfWeek})}function L(){x.value={},s.getters["appointment/getBookings"].forEach((C,B)=>{m.value[B]={},s.getters["appointment/getCustomFields"].forEach(_=>{E(B,_),P(B,_)})})}const{noShowData:D}=U("noShowData");let v=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),f=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0);return xt([y,T],()=>{L()}),Zs(()=>{L()}),Ge(()=>{s.getters["appointment/getBookings"].filter(C=>C.status!=="canceled"&&C.status!=="rejected").length<2&&(F.value=0)}),a({customFieldsFormRef:c}),(C,B)=>{const _=Cs,k=ys,R=st;return u(),Y(R,{ref_key:"customFieldsFormRef",ref:c,model:t(x),rules:t(g),"label-position":"top",class:j(["am-capai-cfields am-capai-cfields__form",e.responsiveClass])},{default:S(()=>[N(k,{modelValue:t(F),"onUpdate:modelValue":B[0]||(B[0]=M=>Fe(F)?F.value=M:F=M),class:"am-capai-collapse",accordion:""},{default:S(()=>[(u(!0),A(ne,null,ve(t(s).getters["appointment/getBookings"].filter(M=>M.status!=="canceled"&&M.status!=="rejected"),(M,O)=>(u(),Y(_,{key:O,name:O,class:"am-capai-collapse__item"},{title:S(()=>[d("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(M.customer.email&&t(f)||M.customer.phone&&t(v))},t(D)(M.customer.noShowCount).class]])},[t(D)(M.customer.noShowCount).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(D)(M.customer.noShowCount).icon}`)},null,2)):$("",!0),ue(" "+w(M.customer.firstName+" "+M.customer.lastName),1)],2)]),default:S(()=>[M.customer.email&&t(f)||M.customer.phone&&t(v)?(u(),A("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[M.customer.email&&t(f)?(u(),A("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[n8,d("a",{href:`mailto:${M.customer.email}`},w(M.customer.email),9,o8)],2)):$("",!0),M.customer.phone&&t(v)?(u(),A("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[r8,d("a",{href:`tel:${M.customer.phone}`},w(M.customer.phone),9,i8)],2)):$("",!0)],2)):$("",!0),(u(!0),A(ne,null,ve(t(p),H=>(u(),A(ne,{key:O+"_"+H.id},[O in t(m)&&`${O}cf${H.id}`in t(x)?(u(),Y(ft(t(m)[O][H.id].template),Dt({key:0,modelValue:t(x)[`${O}cf${H.id}`],"onUpdate:modelValue":z=>t(x)[`${O}cf${H.id}`]=z},t(m)[O][H.id].props),null,16,["modelValue","onUpdate:modelValue"])):$("",!0)],64))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model","rules","class"])}}};const x8={key:0,class:"am-capai-ext__heading-extra"},u8=d("span",{class:"am-icon-email"},null,-1),d8=["href"],m8=d("span",{class:"am-icon-phone"},null,-1),p8=["href"],f8={class:"am-capai-ext__wrapper"},g8={class:"am-capai-ext__inner-info"},h8={class:"am-capai-ext__inner-name"},v8={key:0,class:"am-capai-ext__inner-duration"},E8={class:"am-capai-ext__total"},_8={props:{responsiveClass:{type:String,default:""}},emits:["changedSlotCondition"],setup(n,{emit:a}){const e=n,s=Oe(),l=U("shortcodeData");let o=U("amCustomize"),r=U("amLabels"),i=b(()=>s.getters["appointment/getEmployeeService"]),c=b(()=>s.getters["appointment/getBookings"]),x=V(null);function g(L,D,v){L.duration&&(v.extras[D].quantity===0||v.extras[D].quantity===1)&&a("changedSlotCondition")}function m(L){return L.extras.length?L.extras.reduce((D,v)=>D+("price"in v?v.price:i.value.extras.find(f=>f.id===v.extraId).price)*v.quantity,0):0}function p(L){return L.filter(D=>D.quantity>0).length}const{noShowData:y}=U("noShowData");let T=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),F=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),E=U("amColors"),P=b(()=>({"--am-c-ext-text-op60":K(E.value.colorMainText,.6)}));return Ge(()=>{c.value.filter(L=>L.status!=="canceled"&&L.status!=="rejected").length<2&&(x.value=0)}),(L,D)=>{const v=Cs,f=ys;return u(),Y(f,{modelValue:t(x),"onUpdate:modelValue":D[0]||(D[0]=C=>Fe(x)?x.value=C:x=C),class:"am-capai-ext am-capai-collapse",accordion:"",style:Be(t(P))},{default:S(()=>[(u(!0),A(ne,null,ve(t(c).filter(C=>C.status!=="canceled"&&C.status!=="rejected"),(C,B)=>(u(),Y(v,{key:B,name:B,class:"am-capai-ext__item am-capai-collapse__item"},{title:S(()=>[d("div",{class:j(["am-capai-ext__heading",{"am-pb-16":!(C.customer.email&&t(F)||C.customer.phone&&t(T))}])},[d("div",{class:j(["am-capai-customer__name",t(y)(C.customer.noShowCount).class])},[t(y)(C.customer.noShowCount).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(y)(C.customer.noShowCount).icon}`)},null,2)):$("",!0),ue(" "+w(C.customer.firstName+" "+C.customer.lastName),1)],2),p(C.extras)>0?(u(),A("div",x8,w(`${t(r).extras}: ${p(C.extras)}`),1)):$("",!0)],2)]),default:S(()=>[C.customer.email&&t(F)||C.customer.phone&&t(T)?(u(),A("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[C.customer.email&&t(F)?(u(),A("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[u8,d("a",{href:`mailto:${C.customer.email}`},w(C.customer.email),9,d8)],2)):$("",!0),C.customer.phone&&t(T)?(u(),A("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[m8,d("a",{href:`tel:${C.customer.phone}`},w(C.customer.phone),9,p8)],2)):$("",!0)],2)):$("",!0),d("div",f8,[(u(!0),A(ne,null,ve(t(i).extras,(_,k)=>(u(),A("div",{key:k,class:j(["am-capai-ext__inner",[{"am-border-bottom":k!==t(i).extras.length-1},e.responsiveClass]])},[d("div",g8,[d("div",h8,w(_.name),1),_.duration?(u(),A("div",v8,w(`${t(r).duration}: ${t(hs)(_.duration,t(r).h,t(r).min)}`),1)):$("",!0)]),d("div",{class:j(["am-capai-ext__inner-selection",e.responsiveClass])},[d("div",{class:j(["am-capai-ext__inner-price",e.responsiveClass])},[_.price?(u(),A(ne,{key:0},[ue(w(t(nt)("price"in C.extras[k]?C.extras[k].price:_.price)),1)],64)):(u(),A(ne,{key:1},[ue(w(t(r).free),1)],64))],2),N(Ct,{modelValue:C.extras[k].quantity,"onUpdate:modelValue":R=>C.extras[k].quantity=R,class:j(e.responsiveClass),size:"small",min:0,max:_.maxQuantity,onChange:R=>g(_,k,C)},null,8,["modelValue","onUpdate:modelValue","class","max","onChange"])],2)],2))),128)),d("div",E8,w(`${t(r).subtotal}: ${t(nt)(m(C))}`),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const C8={class:"am-fs__rs-every"},y8={key:1},b8={class:"am-fs__rs-on-week"},B8=["onClick"],A8={key:2},F8={class:"am-fs__rs-on-month"},k8={class:"am-fs__rs-ends"},D8={class:"am-fs__rs-ends-choose"},w8={class:"am-fs__rs-ends-options"},P8={class:"am-fs__rs-ends-after"},T8={class:"am-fs__rs-summary"},L8={key:0},S8={key:1},I8={key:0},$8=ue(", "),N8={key:0},O8={key:1},M8={name:"RecurringSetup"},V8=Object.assign(M8,{props:{service:{type:Object,default:()=>{}},startDate:{type:String,default:""},startTime:{type:String,default:""},maxDate:{type:String,default:""},globalClass:{type:String,default:""}},setup(n){const a=n;let e=U("amLabels"),s=U("amCustomize"),l=Oe(),o=U("containerWidth",0),r=b(()=>o.value<560||o.value-240<520),i=b({get:()=>l.getters["recurring/getRepeatType"],set:C=>{l.commit("recurring/setRepeatType",C)}}),c=b({get:()=>l.getters["recurring/getRepeatInterval"],set:C=>{l.commit("recurring/setRepeatInterval",C)}}),x=b({get:()=>l.getters["recurring/getOccurrenceType"],set:C=>{l.commit("recurring/setOccurrenceType",C)}}),g=b({get:()=>l.getters["recurring/getOccurrenceDate"]?l.getters["recurring/getOccurrenceDate"]:new Date(a.startDate),set:C=>{l.commit("recurring/setOccurrenceDate",C)}}),m=b({get:()=>l.getters["recurring/getOccurrenceCount"],set:C=>{l.commit("recurring/setOccurrenceCount",C)}}),p=b({get:()=>l.getters["recurring/getMonthly"],set:C=>{l.commit("recurring/setMonthly",C)}});const y=V([{label:e.value.recurrence_day,labelPlural:e.value.recurrence_days,value:"daily"},{label:e.value.recurrence_week,labelPlural:e.value.recurrence_weeks,value:"weekly"},{label:e.value.recurrence_month,labelPlural:e.value.recurrence_months,value:"monthly"}]),T=V([{label:e.value.recurrence_specific_date,value:0},{label:e.value.recurrence_first,value:1},{label:e.value.recurrence_second,value:2},{label:e.value.recurrence_third,value:3},{label:e.value.recurrence_fourth,value:4},{label:e.value.recurrence_last,value:5}]);let F=V(Ae(a.startDate).format("dddd").toLowerCase()),E=V([{label:"Mon",labelFull:"Monday",value:"monday",selected:!1},{label:"Tue",labelFull:"Tuesday",value:"tuesday",selected:!1},{label:"Wed",labelFull:"Wednesday",value:"wednesday",selected:!1},{label:"Thu",labelFull:"Thursday",value:"thursday",selected:!1},{label:"Fri",labelFull:"Friday",value:"friday",selected:!1},{label:"Sat",labelFull:"Saturday",value:"saturday",selected:!1},{label:"Sun",labelFull:"Sunday",value:"sunday",selected:!1}]),P=b(()=>E.value.find(C=>C.value===Ae(a.startDate,"YYYY-MM-DD").format("dddd").toLowerCase()).labelFull);function L(C){g.value=Ae(C,"YYYY-MM-DD").toDate()}function D(C,B=!1){let _=E.value.find(k=>k.value===C);_.selected=B?!0:!_.selected,l.commit("recurring/setDays",{value:C,selected:_.selected})}Ge(()=>{qs&&(E.value=E.value.map((B,_)=>({...B,label:Fr[_],labelFull:kr[_]})));let C=l.getters["recurring/getDays"].filter(B=>B.selected);C.length===0?D(E.value.find(B=>F.value&&B.value===F.value).value,!0):C.forEach(B=>{D(B.value,!0)}),a.service.recurringCycle!=="all"&&l.commit("recurring/setRepeatType",a.service.recurringCycle)});let v=U("amColors"),f=b(()=>({"--am-c-rs-text":v.value.colorMainText,"--am-c-rs-text-op60":K(v.value.colorMainText,.6),"--am-c-rs-bgr":v.value.colorMainBgr,"--am-c-rs-primary":v.value.colorPrimary,"--am-c-rs-inp-border":v.value.colorInpBorder}));return(C,B)=>(u(),A("div",{class:j(["am-fs__rs",[{"am-fs__rs-mobile":t(r)},t(a).globalClass]]),style:Be(t(f))},[t(s)&&t(s).recurringStep&&t(s).recurringStep.options.heading.visibility?(u(),A(ne,{key:0},[d("p",null,w(t(e).recurrence),1),d("span",null,w(t(e).recurrence_choosing_time),1)],64)):$("",!0),d("p",null,w(t(e).repeat_every)+":",1),d("div",C8,[N(t(Ct),{modelValue:t(c),"onUpdate:modelValue":B[0]||(B[0]=_=>Fe(c)?c.value=_:c=_),min:1,max:100},null,8,["modelValue"]),N(t(Je),{modelValue:t(i),"onUpdate:modelValue":B[1]||(B[1]=_=>Fe(i)?i.value=_:i=_),disabled:t(a).service.recurringCycle!=="all"},{default:S(()=>[(u(!0),A(ne,null,ve(y.value,(_,k)=>(u(),Y(t(Ye),{key:k,label:_.label,value:_.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),t(i)==="weekly"?(u(),A("div",y8,[d("p",null,w(`${t(e).recurrence_repeat_on}:`),1),d("div",b8,[(u(!0),A(ne,null,ve(t(E),(_,k)=>(u(),A("div",{key:k,class:j({"am-fs__rs-on-week-selected":t(E).find(R=>R.value===_.value).selected}),onClick:R=>D(_.value)},w(_.label),11,B8))),128))])])):$("",!0),t(i)==="monthly"?(u(),A("div",A8,[d("p",null,w(`${t(e).recurrence_repeat_on}:`),1),d("div",F8,[N(t(Je),{modelValue:t(p),"onUpdate:modelValue":B[2]||(B[2]=_=>Fe(p)?p.value=_:p=_)},{default:S(()=>[(u(!0),A(ne,null,ve(T.value,(_,k)=>(u(),Y(t(Ye),{key:k,label:_.label+(k!==0?" "+t(P):""),value:_.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):$("",!0),d("p",null,w(`${t(e).recurrence_ends}:`),1),d("span",null,w(t(e).recurrence_choose_ends),1),d("div",k8,[d("div",D8,[N(t(Vl),{modelValue:t(x),"onUpdate:modelValue":B[3]||(B[3]=_=>Fe(x)?x.value=_:x=_)},{default:S(()=>[N(t(La),{value:"On"},{default:S(()=>[ue(w(t(e).recurrence_on),1)]),_:1}),N(t(La),{value:"After"},{default:S(()=>[ue(w(t(e).recurrence_after),1)]),_:1})]),_:1},8,["modelValue"])]),d("div",w8,[N(t(e0),{"calendar-minimum-date":t(a).startDate,disabled:t(x)!=="On","input-placeholder":t(e).recurrence_select_date,"calendar-maximum-date":t(a).maxDate,onSelectedDate:L},null,8,["calendar-minimum-date","disabled","input-placeholder","calendar-maximum-date"]),d("div",P8,[N(t(Ct),{modelValue:t(m),"onUpdate:modelValue":B[4]||(B[4]=_=>Fe(m)?m.value=_:m=_),disabled:t(x)!=="After",min:1,max:100},null,8,["modelValue","disabled"]),d("span",null,w(` ${t(e).occurrences}`),1)])])]),d("div",T8,[d("p",null,w(`${t(e).appointment_repeats}:`),1),d("p",null,[ue(w(`${t(e).recurrence_every} ${t(c)>1?t(c):""} ${y.value.find(_=>_.value===t(i))?y.value.find(_=>_.value===t(i)).label:""}`)+" ",1),t(i)==="weekly"?(u(),A("span",L8,w(`${t(e).repeats_on} ${t(E).filter(_=>_.selected).map(_=>_.labelFull).join(", ")}`),1)):$("",!0),t(i)==="monthly"?(u(),A("span",S8,[ue(w(` ${t(e).repeats_on} ${T.value[t(p)].label}`)+" ",1),t(p)!==0?(u(),A("span",I8,w(` ${t(P)}`),1)):$("",!0),$8])):$("",!0),d("span",null,w(` ${t(e).repeats_from} ${t(it)(t(a).startDate)} ${t(e).repeats_at} ${t(vs)(t(a).startTime)}`),1)]),d("p",null,[t(x)==="After"?(u(),A("span",N8,w(t(e).number_of_recurrences)+" "+w(` ${t(m)}`),1)):t(g)?(u(),A("span",O8,w(t(e).ends_on)+" "+w(` ${t(it)(t(t0)(t(g)))}`),1)):$("",!0)])])],6))}});const R8={class:"am-capai-recurr__enable"},q8={key:0,class:"am-capai-recurr__content"},U8={key:1,class:"am-capai-recurr__list"},z8={class:"am-capai-recurr__list-heading"},j8={class:"am-capai-recurr__list-heading__text"},Y8=d("span",{class:"am-icon-refresh"},null,-1),W8={class:"am-capai-recurr__table"},H8={key:2,class:"am-capai-recurr__actions"},G8={props:{responsiveClass:{type:String,default:""},maximumBookingStartDate:{type:String,required:!0},slotsLoading:{type:Boolean,required:!0},slotsProps:{type:Object,required:!0},freeSlots:{type:Object,required:!0},getFreeTimes:{type:Function,required:!0},isDisabledDate:{type:Function,required:!0},getSelectedDatesTimes:{type:Function,required:!0}},emits:["fetchSlots"],setup(n,{emit:a}){const e=n,s=Oe(),l=U("settings");let o=U("amLabels"),r=U("localLanguage"),i=b(()=>s.getters["appointment/getEmployeeService"]),c=V(!1),x=V(2),g=V(!1),m=U("recurringList"),p=V(!0);function y(){let B=s.getters["recurring/getOccurrenceType"]==="On"?at(s.getters["recurring/getOccurrenceDate"]).format("YYYY-MM-DD"):null,_=a0(e.maximumBookingStartDate,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),B,l.general.numberOfDaysAvailableForBooking,s.getters["recurring/getRepeatType"],s.getters["recurring/getRepeatInterval"],s.getters["recurring/getDays"],s.getters["recurring/getMonthly"]);x.value=s.getters["recurring/getOccurrenceType"]==="On"?Object.keys(_).length:s.getters["recurring/getOccurrenceCount"],g.value=!0;let k=Pr(Object.keys(_));Tr(Object.assign({startDateTime:at(s.getters["appointment/getStartDate"]).startOf("month").subtract(6,"days").format("YYYY-MM-DD"),endDateTime:k.length?at(k[k.length-1]).endOf("month").add(11,"days").format("YYYY-MM-DD"):at().add(l.general.numberOfDaysAvailableForBooking,"days").format("YYYY-MM-DD")},e.slotsProps),null,R=>{let M=s0(i.value,R,_,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),s.getters["appointment/getStartTime"],B,s.getters["recurring/getOccurrenceType"]==="After"?s.getters["recurring/getOccurrenceCount"]:null);m.value=[],Object.keys(M).forEach(O=>{m.value.push(Object.assign({date:at(O).toDate(),editing:!1},M[O]))}),g.value=!1})}function T(){m.value=null}function F(B){let _=at(m.value[B].date).format("YYYY-MM-DD");m.value[B].times=Object.keys(e.freeSlots[_]);let k=e.getSelectedDatesTimes(B,!1);_ in k&&m.value[B].time in k[_]&&(m.value[B].time="")}function E(B){m.value.splice(B,1)}function P(B){m.value[B].editing=!0}function L(B){m.value[B].editing=!1}let D=V(null);function v(B,_,k=!1){!B&&!D.value?B=at().toDate():!B&&D.value&&(B=D.value),D.value=B&&k?B:D.value,a("fetchSlots",B,_,k)}let f=U("amColors"),C=b(()=>({"--am-c-recurr-bgr-op05":K(f.value.colorPrimary,.05),"--am-c-warning-op10":K(f.value.colorWarning,.1),"--am-c-main-text-op10":K(f.value.colorMainText,.1)}));return xt(c,B=>{B||(m.value=null)}),(B,_)=>(u(),A("div",{class:"am-capai-recurr",style:Be(t(C))},[d("div",R8,[N(ht,{modelValue:t(c),"onUpdate:modelValue":_[0]||(_[0]=k=>Fe(c)?c.value=k:c=k),label:"Enable Recurring appointment"},null,8,["modelValue"])]),t(c)?(u(),A("div",q8,[!t(g)&&!t(m)?(u(),Y(V8,{key:0,"start-date":t(at)(t(s).getters["appointment/getStartDate"]).format("YYYY-MM-DD"),"start-time":t(s).getters["appointment/getStartTime"],"max-date":t(e).maximumBookingStartDate,service:t(i)},null,8,["start-date","start-time","max-date","service"])):(u(),A(ne,{key:1},[t(m)?(u(),A("div",U8,[d("div",z8,[d("div",j8,[Y8,d("div",null,w(`${t(m).length} appointments total`),1)]),d("div",{class:"am-capai-recurr__list-heading__action",onClick:_[1]||(_[1]=()=>{Fe(p)?p.value=!t(p):p=!t(p)})},w(t(p)?t(o).show_less:t(o).show_more),1)]),t(p)?(u(),A(ne,{key:0},[t(m).filter(k=>k.isSubstituteDate||k.isSubstituteTime).length?(u(),Y(Ai,{key:0,heading:t(o).recurring_unavailable_slots,text:t(o).recurring_sub_message1},null,8,["heading","text"])):$("",!0),d("div",W8,[(u(!0),A(ne,null,ve(t(m),(k,R)=>(u(),A("div",{key:R,class:j(["am-capai-recurr__row",[{"am-warn":k.isSubstituteDate||k.isSubstituteTime},t(e).responsiveClass]])},[d("div",{class:j(["am-capai-recurr__row-num",t(e).responsiveClass])},w(R+1),3),d("div",{class:j(["am-capai-recurr__row-date",[{"am-disable":!k.editing},t(e).responsiveClass]])},[N(ea,{modelValue:k.date,"onUpdate:modelValue":M=>k.date=M,type:"date",format:t(Kt)(),placeholder:"Pick a day",size:"small",lang:t(r),"disabled-date":(M,O)=>t(e).isDisabledDate(M,k.editing,!1,O),"popper-class":t(e).slotsLoading?"slots-loader":"",onPanelChange:M=>{v(M,R,!0)},onChange:M=>F(R),onFocus:M=>v(k.date,R,!0)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date","popper-class","onPanelChange","onChange","onFocus"])],2),d("div",{class:j(["am-capai-recurr__row-time",[{"am-disable":!k.editing},t(e).responsiveClass]])},[N(Je,{modelValue:k.time,"onUpdate:modelValue":M=>k.time=M,size:"small",placeholder:`${t(o).select_time}`,disabled:!k.date},{default:S(()=>[(u(!0),A(ne,null,ve(k.editing?t(e).getFreeTimes(R,t(m)[R],!1):t(m)[R].times,M=>(u(),Y(Ye,{key:M,value:M,label:M},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])],2),d("div",{class:j(["am-capai-recurr__row-actions",t(e).responsiveClass])},[k.editing?(u(),Y(ke,{key:1,category:"primary",size:"small",onClick:M=>L(R)},{default:S(()=>[ue(w(t(o).save),1)]),_:2},1032,["onClick"])):(u(),Y(Ea,{key:0,index:R,onRemove:E,onEdit:P},null,8,["index"]))],2)],2))),128))])],64)):$("",!0)])):(u(),Y(Wt,{key:0,count:t(x)},null,8,["count"]))],64)),t(g)?$("",!0):(u(),A("div",H8,[t(m)?$("",!0):(u(),Y(ke,{key:0,category:"primary",size:"medium",onClick:_[2]||(_[2]=k=>y())},{default:S(()=>[ue(w(t(o).recurring_list),1)]),_:1})),t(m)?(u(),Y(ke,{key:1,category:"secondary",type:"plain",size:"medium",onClick:_[3]||(_[3]=k=>T())},{default:S(()=>[ue(w(t(o).recurring_settings),1)]),_:1})):$("",!0)]))])):$("",!0)],4))}};const Z8=d("span",{class:"am-icon-email"},null,-1),J8=["href"],X8=d("span",{class:"am-icon-phone"},null,-1),Q8=["href"],K8={class:"am-capai-linked__list"},eh={class:"am-capai-linked__list-index"},th={class:"am-capai-linked__list-date"},ah=d("span",{class:"am-icon-calendar"},null,-1),sh={class:"am-capai-linked__list-action"},lh={props:{responsiveClass:{type:String,default:""},linkedAppointments:{type:Array,required:!0}},emits:["editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Oe();const l=U("shortcodeData");let o=U("amCustomize"),r=V(null);function i(F){return e.linkedAppointments.filter(E=>E.bookings.filter(P=>parseInt(P.customer.id)===parseInt(F.customer.id)).length)}const{noShowData:c}=U("noShowData");let x=U("amLabels");function g(F){s.commit("appointment/resetAppointment",{providerId:s.getters["auth/getProfile"].id}),s.commit("customerInfo/setCustomers",[]),s.commit("customerInfo/setCustomersIds",[]),a("editLinkedAppointment",F)}let m=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),p=b(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),y=U("amColors"),T=b(()=>({"--am-c-linked-bgr-op05":K(y.value.colorMainText,.05)}));return Ge(()=>{s.getters["appointment/getBookings"].filter(F=>F.status!=="canceled"&&F.status!=="rejected").length<2&&(r.value=0)}),(F,E)=>{const P=Cs,L=ys;return u(),Y(L,{modelValue:t(r),"onUpdate:modelValue":E[0]||(E[0]=D=>Fe(r)?r.value=D:r=D),class:"am-capai-collapse am-capai-linked",accordion:"",style:Be(t(T))},{default:S(()=>[(u(!0),A(ne,null,ve(t(s).getters["appointment/getBookings"],(D,v)=>(u(),A(ne,{key:v},[i(D).length?(u(),Y(P,{key:0,name:v,class:"am-capai-collapse__item"},{title:S(()=>[d("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(D.customer.email&&t(p)||D.customer.phone&&t(m))},t(c)(D.customer.noShowCount).class]])},[t(c)(D.customer.noShowCount).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(c)(D.customer.noShowCount).icon}`)},null,2)):$("",!0),ue(" "+w(D.customer.firstName+" "+D.customer.lastName),1)],2)]),default:S(()=>[D.customer.email&&t(p)||D.customer.phone&&t(m)?(u(),A("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(e).responsiveClass])},[D.customer.email&&t(p)?(u(),A("div",{key:0,class:j(["am-capai-customer__data",t(e).responsiveClass])},[Z8,d("a",{href:`mailto:${D.customer.email}`},w(D.customer.email),9,J8)],2)):$("",!0),D.customer.phone&&t(m)?(u(),A("div",{key:1,class:j(["am-capai-customer__data",t(e).responsiveClass])},[X8,d("a",{href:`tel:${D.customer.phone}`},w(D.customer.phone),9,Q8)],2)):$("",!0)],2)):$("",!0),d("div",K8,[(u(!0),A(ne,null,ve(i(D),(f,C)=>(u(),A("div",{key:D.id+"-"+C,class:j(["am-capai-linked__list-item",t(e).responsiveClass])},[d("div",eh,w(C+1),1),d("div",th,[ah,ue(" "+w(t(l0)(f.bookingStart)),1)]),d("div",sh,[N(ke,{category:"primary",size:"small",onClick:B=>g(f)},{default:S(()=>[ue(w(t(x).edit),1)]),_:2},1032,["onClick"])])],2))),128))])]),_:2},1032,["name"])):$("",!0)],64))),128))]),_:1},8,["modelValue","style"])}}},Rs=tt(window.wpAmeliaLabels);function ki(n){if(n.gateway==="onSite")return Rs.on_site;if(n.gateway==="wc")return n.gatewayTitle;if(n.gateway)return n.gateway.charAt(0).toUpperCase()+n.gateway.slice(1)}function oo(n){switch(n){case"paid":return Rs.paid;case"pending":return Rs.pending;case"partiallyPaid":return Rs.partially_paid;case"refunded":return Rs.refunded}}function ds(n,a){switch(n){case"paid":return{icon:"am-icon-checkmark-circle",color:a.colorSuccess};case"pending":return{icon:"am-icon-refresh",color:a.colorWarning};case"partiallyPaid":return{icon:"am-icon-prepaid",color:a.colorPrimary};case"refunded":return{icon:"am-icon-refund",color:a.colorError}}}const nh={class:"am-capai-pay__heading-status"},oh={class:"am-capai-pay__heading-status__text"},rh=d("span",{class:"am-icon-email"},null,-1),ih=["href"],ch=d("span",{class:"am-icon-phone"},null,-1),xh=["href"],uh={class:"am-capai-pay__row-label"},dh={class:"am-capai-pay__row-value"},mh={class:"am-capai-pay__row-label"},ph={class:"am-capai-pay__row-value"},fh={class:"am-capai-pay__row-label"},gh={class:"am-capai-pay__row-value"},hh={key:0,class:"am-divider"},vh={class:"am-capai-pay__row-label"},Eh={class:"am-capai-pay__row-label"},_h={class:"am-capai-pay__row-label"},Ch={class:"am-capai-pay__row-label"},yh={class:"am-capai-pay__row-label"},bh={class:"am-capai-pay__row-label"},Bh={class:"am-capai-pay__row-label"},Ah={class:"am-capai-pay__row-label"},Fh={class:"am-capai-pay__row-label"},kh={class:"am-capai-pay__row-label"},Dh={class:"am-capai-pay__row-label"},wh={props:{responsiveClass:{type:String,default:""},savedAppointment:{type:Object,default:()=>{}}},setup(n){const a=n;let e=Oe();const s=U("shortcodeData");let l=U("amCustomize"),o=U("pageWidth"),r=U("amLabels"),i=b(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerPhone.visibility:!0),c=b(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerEmail.visibility:!0),x=V(null),g=b(()=>e.getters["appointment/getEmployeeService"]),m=b(()=>e.getters["appointment/getBookings"].filter(E=>"id"in E&&E.id&&E.status!=="canceled"&&E.status!=="rejected")),p=b(()=>{let E=[];return m.value.forEach((P,L)=>{let D=n0(e.getters["appointment/getAppointmentData"],a.savedAppointment,P,g.value);E.push(go(e,{price:D?o0(g.value,P.persons,P.duration):P.price,persons:P.persons,aggregatedPrice:P.aggregatedPrice,extras:P.extras.filter(v=>"id"in v&&v.id),serviceId:e.getters["appointment/getServiceId"],tax:P.tax,coupon:P.coupon,wcTax:P.payments.filter(v=>v.wcOrderId&&v.wcItemTaxValue).reduce((v,f)=>v+f.wcItemTaxValue,0)},!1)),E[L].deposit=P.payments.length&&(P.payments[0].status==="paid"||P.payments[0].status==="partiallyPaid")?P.payments[0].amount:0,E[L].paid=P.payments.filter(v=>v.status==="paid"||v.status==="partiallyPaid").reduce((v,f)=>v+f.amount,0),E[L].refunded=P.payments.filter(v=>v.status==="refunded").reduce((v,f)=>v+f.amount,0),E[L].status=P.payments.reduce((v,f)=>v+f.amount,0),P.payments.filter(v=>v.status!=="refunded").length===0?E[L].status="refunded":E[L].paid-(E[L].total-E[L].discount+E[L].tax+E[L].wcTax)===0?E[L].status="paid":E[L].paid?E[L].status="partiallyPaid":E[L].status="pending"}),E});const{noShowData:y}=U("noShowData");let T=U("amColors"),F=b(()=>({"--am-c-pay-text-op03":K(T.value.colorMainText,.03)}));return Ge(()=>{e.getters["appointment/getBookings"].filter(E=>E.status!=="canceled"&&E.status!=="rejected").length<2&&(x.value=0)}),(E,P)=>{const L=Cs,D=ys;return u(),Y(D,{modelValue:t(x),"onUpdate:modelValue":P[0]||(P[0]=v=>Fe(x)?x.value=v:x=v),class:"am-capai-collapse am-capai-pay",accordion:"",style:Be(t(F))},{default:S(()=>[(u(!0),A(ne,null,ve(t(m),(v,f)=>(u(),Y(L,{key:f,name:f,class:"am-capai-collapse__item"},{title:S(()=>[d("div",{class:j(["am-capai-pay__heading",{"am-pb-16":!(v.customer.email&&t(c)||v.customer.phone&&t(i))}])},[d("div",{class:j(["am-capai-customer__name",t(y)(v.customer.noShowCount).class])},[t(y)(v.customer.noShowCount).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(y)(v.customer.noShowCount).icon}`)},null,2)):$("",!0),ue(" "+w(v.customer.firstName+" "+v.customer.lastName),1)],2),d("div",nh,[d("span",{class:j(t(ds)(t(p)[f].status,t(T)).icon),style:Be({color:t(ds)(t(p)[f].status,t(T)).color})},null,6),d("div",oh,w(t(oo)(t(p)[f].status)),1)])],2)]),default:S(()=>[v.customer.email&&t(c)||v.customer.phone&&t(i)?(u(),A("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(a).responsiveClass])},[v.customer.email&&t(c)?(u(),A("div",{key:0,class:j(["am-capai-customer__data",t(a).responsiveClass])},[rh,d("a",{href:`mailto:${v.customer.email}`},w(v.customer.email),9,ih)],2)):$("",!0),v.customer.phone&&t(i)?(u(),A("div",{key:1,class:j(["am-capai-customer__data",t(a).responsiveClass])},[ch,d("a",{href:`tel:${v.customer.phone}`},w(v.customer.phone),9,xh)],2)):$("",!0)],2)):$("",!0),d("div",{class:j(["am-capai-pay__content",t(a).responsiveClass])},[(u(!0),A(ne,null,ve(v.payments,(C,B)=>(u(),A(ne,{key:B},[d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",uh,w(t(r).date),1),d("div",dh,w(t(it)(C.dateTime.split(" ")[0])),1)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",mh,w(t(r).payment_method),1),d("div",ph,w(t(ki)(C)),1)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",fh,w(t(r).status),1),d("div",gh,[d("span",{class:j(t(ds)(C.status,t(T)).icon),style:Be({color:t(ds)(C.status,t(T)).color})},null,6),ue(" "+w(t(oo)(C.status)),1)])],2)],64))),128)),t(o)>480?(u(),A("div",hh)):$("",!0),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",vh,w(t(r).price),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].bookable)),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Eh,w(t(r).extras),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].total-t(p)[f].bookable)),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",_h,w(t(r).subtotal),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].total)),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Ch,w(t(r).discount_amount),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].discount)),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",yh,w(t(r).tax),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].tax)),3)],2),t(p)[f].wcTax?(u(),A("div",{key:1,class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",bh,w(t(r).tax)+" (Woo) ",1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].wcTax)),3)],2)):$("",!0),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Bh,w(t(r).paid_deposit),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].deposit)),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Ah,w(t(r).paid_remaining_amount),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].paid?t(p)[f].paid-t(p)[f].deposit:0)),3)],2),t(p)[f].refunded?(u(),A("div",{key:2,class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Fh,w(t(r).refunded),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].refunded)),3)],2)):$("",!0),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",kh,w(t(r).due),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].paid-(t(p)[f].total-t(p)[f].discount+t(p)[f].tax+t(p)[f].wcTax))),3)],2),d("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[d("div",Dh,w(t(r).total),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},w(t(nt)(t(p)[f].total-t(p)[f].discount+t(p)[f].tax+t(p)[f].wcTax)),3)],2)],2)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const Ph={class:"am-capai__footer"},Th={name:"CabinetAppointment"},Lh=Object.assign(Th,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},linkedAppointments:{type:Array,default:()=>[]}},emits:["close","save","editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let r=U("licence");const i=V("details"),c=V(null);let x=b(()=>s.getters["appointment/getEmployeeService"]),g=V(null),m=V(""),p=b(()=>s.getters["appointment/getBookings"].length?s.getters["appointment/getBookings"].filter(I=>I.status==="approved"||I.status==="pending").map(I=>I.persons).reduce((I,W)=>I+W,0):0),y=V(null),T=b(()=>s.getters["appointment/getCustomFields"]),F=V(null);ze("recurringList",F);function E(I,W){let Q=Ae(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),ee={};return s.getters["appointment/getStartDate"]&&s.getters["appointment/getStartTime"]&&!W&&(ee[Q]={},ee[Q][s.getters["appointment/getStartTime"]]=!0),F.value&&F.value.forEach((G,ae)=>{if(G.time&&(I!==null?ae!==I:!0)){let _e=Ae(G.date).format("YYYY-MM-DD");_e in ee||(ee[_e]={}),ee[_e][G.time]=!0}}),ee}function P(I,W,Q){if(W.date===null)return[];let ee=Ae(W.date).format("YYYY-MM-DD"),G=E(I,Q),ae=W.time?Ut(W.time):null;if(ee in G){let _e=W.times.filter(Pe=>!Object.keys(G[ee]).includes(Pe)),ce=[];return _e.forEach(Pe=>{let se=Ut(Pe),ye=!0;Object.keys(G[ee]).map(De=>Ut(De)).sort((De,Me)=>De-Me).forEach(De=>{se<De?se+x.value.duration+x.value.timeAfter>De&&(ye=!1):De+x.value.duration+x.value.timeAfter>se&&(ye=!1)}),ye&&(ae!==null&&se>ae&&ce.indexOf(W.time)===-1&&ce.push(W.time),ce.push(Pe))}),L(ee,G,ce)}return L(ee,G,W.times)}function L(I,W,Q){let ee=[],G=!1,ae=Ae(I,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD");if(ae in W){let ce=Object.keys(W[ae]).map(se=>Ut(se)).sort((se,ye)=>se-ye),Pe=ce[ce.length-1]+x.value.duration+x.value.timeAfter;Pe>86400&&(Q.forEach(se=>{Pe-86400<=Ut(se)&&ee.push(se)}),Q=ee,G=!0)}let _e=Ae(I,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(_e in W){let ce=Object.keys(W[_e]).map(Pe=>Ut(Pe)).sort((Pe,se)=>Pe-se);ce[0]-x.value.duration-x.value.timeAfter<0&&(Q.forEach(Pe=>{let se=Ut(Pe);(se+x.value.duration+x.value.timeAfter<=86400||ce[0]>=se+x.value.duration+x.value.timeAfter-86400)&&ee.push(Pe)}),G=!0)}return G?ee:Q}let D=V({});ze("slotsPricing",D);let v=V(""),f=V({}),C=V([]);function B(I){C.value=Object.keys(f.value[Ae(I).format("YYYY-MM-DD")])}function _(I){let W=f.value[Ae(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")][I][0].l;W&&s.commit("appointment/setLocationId",W)}function k(I,W,Q,ee){let G=Ae(I).format("YYYY-MM-DD");return typeof ee>"u"&&!(G in f.value&&(W?P(null,{date:I,times:Object.keys(f.value[G])},Q).length:!0))}let R=V(!1),M=b(()=>{let I={};return s.getters["appointment/getBookings"].filter(W=>W.status==="pending"||W.status==="approved").forEach(W=>{W.extras.forEach(Q=>{Q.quantity&&!(Q.extraId in I)&&(I[Q.extraId]={id:Q.extraId,quantity:Q.quantity})})}),{serviceId:s.getters["appointment/getServiceId"],serviceDuration:Math.max.apply(Math,s.getters["appointment/getBookings"].filter(W=>W.status!=="canceled"&&W.status!=="rejected").map(W=>W.duration)),providerIds:s.getters["appointment/getProviderId"]?[s.getters["appointment/getProviderId"]]:[],locationId:s.getters["appointment/getLocationId"],extras:JSON.stringify(Object.values(I)),persons:p.value?p.value:1,excludeAppointmentId:s.getters["appointment/getId"],group:s.getters["appointment/getId"]?0:1,timeZone:s.getters["cabinet/getTimeZone"],monthsLoad:1,page:"appointments",structured:!0}});function O(I=!1){s.getters["appointment/getStartDate"]&&H(s.getters["appointment/getStartDate"],null,!1,I)}function H(I,W=null,Q=!1,ee=!1){s.getters["appointment/getServiceId"]&&(R.value=!0,Tr(Object.assign({startDateTime:I?Ae(I).startOf("month").subtract(6,"days").format("YYYY-MM-DD"):null,endDateTime:I?Ae(I).endOf("month").add(6,"days").format("YYYY-MM-DD"):null},M.value),{},(G,ae,_e,ce)=>{if(v.value=ce,s.getters["appointment/getStartDate"]&&W===null&&!Q){let se=Ae(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD");se in G?(s.getters["appointment/getStartTime"]&&!(s.getters["appointment/getStartTime"]in G[se])&&!ee&&s.commit("appointment/setStartTime",null),C.value=Object.keys(G[se]),f.value=G):ee||(f.value={},s.commit("appointment/setStartTime",null),s.commit("appointment/setStartDate",null),s.commit("appointment/setTargetedDate",null),C.value=[])}else f.value=G;let Pe=!r.isLite&&!r.isStarter&&!r.isBasic?r0(s,G,s.getters["appointment/getServiceId"]):null;D.value=Pe?Pe.dates:{},R.value=!1},()=>{}))}function z(){f.value={},v.value=null,F.value=null}function J(I){if(I){if(I===1)return{class:"am-no-show-1",icon:"no-show-1"};if(I===2)return{class:"am-no-show-2",icon:"no-show-2"};if(I>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:J});let oe=V(!1),X=V("");function re(){oe.value=!1,X.value=""}let te=V(!1),pe=V(null);function le(){const I=new Promise(ee=>{y.value?.customFieldsFormRef?y.value.customFieldsFormRef.validate(G=>{G?ee(!0):(i.value="customFields",ee(!1))}):ee(!0)}),W=new Promise(ee=>{g.value?.customersFormRef?g.value.customersFormRef.validate(G=>{!G||!s.getters["customerInfo/getCustomersIds"].length?(i.value="customers",ee(!1)):ee(!0)}):ee(!0)}),Q=new Promise(ee=>{c.value?.detailsFormRef?c.value.detailsFormRef.validate(G=>{!G||!s.getters["appointment/getServiceId"]||!s.getters["appointment/getStartDate"]||!s.getters["appointment/getStartTime"]?(i.value="details",ee(!1)):ee(!0)}):ee(!0)});Promise.all([I,W,Q]).then(ee=>{if(!ee.includes(!1)){if(m.value=s.getters["appointment/getBookings"].filter(G=>G.status!=="canceled"&&G.status!=="rejected"&&G.status!=="waiting").map(G=>G.persons).reduce((G,ae)=>G+ae,0)>x.value.maxCapacity?l.value.select_max_customer_count_warning+" "+x.value.maxCapacity:"",m.value){i.value="customers";return}Ee()}})}function Ee(){let I=[];s.getters["appointment/getBookings"].forEach(G=>{let ae={};Object.keys(G.customFields).forEach(_e=>{ae[_e]={label:G.customFields[_e].label,type:G.customFields[_e].type,value:G.customFields[_e].type==="datepicker"?G.customFields[_e].value?Ae(G.customFields[_e].value).format("YYYY-MM-DD"):"":G.customFields[_e].value}}),I.push(Object.assign({},G,{customerId:G.customer.id,extras:G.extras.filter(_e=>_e.quantity),customFields:o.featuresIntegrations.customFields.enabled||s.getters["appointment/getId"]?ae:null}))});let W=[];if(pe.value){let G=pe.value.bookings.map(_e=>"id"in _e&&_e.id),ae=I.map(_e=>"id"in _e&&_e.id);W=pe.value.bookings.filter(_e=>G.filter(ce=>!ae.includes(ce)).includes(_e.id)).map(_e=>new Object({id:_e.id}))}let Q=s.getters["cabinet/getTimeZone"],ee={serviceId:s.getters["appointment/getServiceId"],providerId:s.getters["appointment/getProviderId"],locationId:s.getters["appointment/getLocationId"],bookings:I,removedBookings:W,bookingStart:Ae(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")+" "+s.getters["appointment/getStartTime"],utc:Q==="UTC",timeZone:Q==="UTC"?null:Q,notifyParticipants:s.getters["appointment/getNotifyParticipants"]?1:0,internalNotes:s.getters["appointment/getInternalNotes"],id:s.getters["appointment/getId"],payment:{gateway:"onSite"},recurring:F.value?F.value.map(G=>new Object({bookingStart:Ae(G.date).format("YYYY-MM-DD")+" "+G.time,providerId:G.slot[0][0],locationId:G.slot[0][1]})):[],lessonSpace:s.getters["appointment/getLessonSpace"]?"https://www.thelessonspace.com/space/"+s.getters["appointment/getLessonSpace"]:null,createPaymentLinks:s.getters["appointment/getCreatePaymentLinks"]?1:0};te.value=!0,$e.post("/appointments"+(s.getters["appointment/getId"]?"/"+s.getters["appointment/getId"]:""),ee,Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(G=>{G.data.data.appointment.id&&de("save")}).catch(G=>{X.value=l.value.error,"response"in G&&"data"in G.response&&"data"in G.response.data&&("timeSlotUnavailable"in G.response.data.data&&G.response.data.data.timeSlotUnavailable===!0&&(X.value=l.value.time_slot_unavailable,i.value="details"),"customerAlreadyBooked"in G.response.data.data&&G.response.data.data.customerAlreadyBooked===!0&&(X.value=l.value.customer_already_booked,i.value="customers")),oe.value=!0}).finally(()=>{te.value=!1})}function de(I){s.commit("appointment/setActive",!1),a(I)}Ge(()=>{if(s.commit("appointment/setActive",!0),s.getters["appointment/getId"]){pe.value=JSON.parse(JSON.stringify(s.getters["appointment/getAppointmentData"]));let I=s.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null}),W=s.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null});s.getters["appointment/getId"]&&s.getters["appointment/getServiceId"]&&W.map(ee=>ee.id).indexOf(s.getters["appointment/getServiceId"])===-1||s.getters["appointment/getId"]&&s.getters["appointment/getLocationId"]&&I.map(ee=>ee.id).indexOf(s.getters["appointment/getLocationId"])===-1||O(!0)}s.getters["appointment/getServiceId"]&&(s.dispatch("appointment/updateEmployeeService",s.getters["appointment/getServiceId"]),s.dispatch("appointment/addAllCustomFieldsFormRules",{label:l.value.required_field}))});let ie=U("amColors"),Ce=b(()=>({"--am-c-capai-text":ie.value.colorMainText,"--am-c-capai-text-op10":K(ie.value.colorMainText,.1),"--am-c-capai-primary":ie.value.colorPrimary,"--am-c-cust-no1":ie.value.colorMainText,"--am-c-cust-no1-bgr":K(ie.value.colorMainText,.1),"--am-c-cust-no2":ie.value.colorWarning,"--am-c-cust-no2-bgr":K(ie.value.colorWarning,.1),"--am-c-cust-no3":ie.value.colorError,"--am-c-cust-no3-bgr":K(ie.value.colorError,.1),"--am-c-cust-link":K(ie.value.colorMainText,.5),"--am-c-cust-text":ie.value.colorMainText}));return(I,W)=>{const Q=_a,ee=Ca;return t(te)?(u(),Y(Wt,{key:1})):(u(),A("div",{key:0,class:j(["am-capai",[{"am-no-border":!0},t(e).responsiveClass]]),style:Be(t(Ce))},[t(oe)?(u(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error","show-icon":!0,"show-border":!0,"close-after":5e3,onClose:re,onTriggerClose:re},{title:S(()=>[ue(w(t(X)),1)]),_:1})):$("",!0),N(ee,{modelValue:i.value,"onUpdate:modelValue":W[1]||(W[1]=G=>i.value=G)},{default:S(()=>[N(Q,{label:t(l).details,name:"details"},{default:S(()=>[N(M9,{ref_key:"appointmentDetailsRef",ref:c,"slots-props":t(M),"slots-loading":t(R),"free-slots":t(f),"is-disabled-date":k,times:t(C),"get-free-times":P,onRemoveSlots:z,onFetchSlots:H,onSelectDate:B,onSelectTime:_},null,8,["slots-props","slots-loading","free-slots","times"])]),_:1},8,["label"]),t(x)?(u(),Y(Q,{key:0,label:t(l).customers,name:"customers"},{default:S(()=>[N(l8,{ref_key:"appointmentCustomersRef",ref:g,"responsive-class":t(e).responsiveClass,"capacity-warning":t(m),"appointment-capacity":t(p),"saved-appointment":t(pe),onChangedSlotCondition:O},null,8,["responsive-class","capacity-warning","appointment-capacity","saved-appointment"])]),_:1},8,["label"])):$("",!0),t(o).featuresIntegrations.extras.enabled&&t(x)&&t(x).extras.length&&t(s).getters["appointment/getBookings"].length?(u(),Y(Q,{key:1,label:t(l).extras,name:"extras"},{default:S(()=>[N(_8,{"responsive-class":t(e).responsiveClass,onChangedSlotCondition:O},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(o).featuresIntegrations.customFields.enabled&&t(x)&&t(T).length&&t(s).getters["appointment/getBookings"].length?(u(),Y(Q,{key:2,label:t(l).custom_fields,name:"customFields"},{default:S(()=>[N(c8,{ref_key:"appointmentCustomFieldsRef",ref:y,"responsive-class":t(e).responsiveClass},null,8,["responsive-class"])]),_:1},8,["label"])):$("",!0),t(s).getters["appointment/getId"]&&n.linkedAppointments.length?(u(),Y(Q,{key:3,label:t(l).linked,name:"linked"},{default:S(()=>[N(lh,{"linked-appointments":n.linkedAppointments,"responsive-class":t(e).responsiveClass,onEditLinkedAppointment:W[0]||(W[0]=G=>t(a)("editLinkedAppointment",G))},null,8,["linked-appointments","responsive-class"])]),_:1},8,["label"])):$("",!0),t(o).featuresIntegrations.recurringAppointments.enabled&&t(x)&&t(x).recurringCycle!=="disabled"&&t(s).getters["appointment/getStartDate"]&&t(s).getters["appointment/getStartTime"]&&!t(s).getters["appointment/getId"]&&!!t(s).getters["customerInfo/getCustomersIds"].length?(u(),Y(Q,{key:4,label:t(l).recurring,name:"recurring"},{default:S(()=>[N(G8,{"free-slots":t(f),"slots-props":t(M),"maximum-booking-start-date":t(v),"get-free-times":P,"get-selected-dates-times":E,"is-disabled-date":k,"slots-loading":t(R),"responsive-class":t(e).responsiveClass,onFetchSlots:H},null,8,["free-slots","slots-props","maximum-booking-start-date","slots-loading","responsive-class"])]),_:1},8,["label"])):$("",!0),t(s).getters["appointment/getId"]?(u(),Y(Q,{key:5,label:t(l).payment,name:"payment"},{default:S(()=>[N(wh,{"responsive-class":t(e).responsiveClass,"saved-appointment":t(pe)},null,8,["responsive-class","saved-appointment"])]),_:1},8,["label"])):$("",!0)]),_:1},8,["modelValue"]),d("div",Ph,[N(ke,{category:"secondary",size:"default",type:"plain",onClick:W[2]||(W[2]=()=>{t(a)("close")})},{default:S(()=>[ue(w(t(l).cancel),1)]),_:1}),N(ke,{size:"default",onClick:le},{default:S(()=>[ue(w(t(l).save),1)]),_:1})])],6))}}});const Sh={key:0,class:"el-skeleton-item-wrapper-title"},Ih={name:"AuthSkeleton"},Gl=Object.assign(Ih,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Nl,o=Ol;return u(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",[{"am-asi":t(a).mainClass}]])},{template:S(()=>[t(a).centerFirst?(u(),A("div",Sh,[N(l,{variant:"rect"})])):$("",!0),(u(!0),A(ne,null,ve(new Array(t(a).count),r=>(u(),A("div",{key:r,class:"el-skeleton-item-wrapper"},[N(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const $h={key:0,class:"am-icon-checkmark-circle-full"},Nh={key:1,class:"am-icon-clearable"},Oh={key:2,class:"am-cap__actions"},Mh={name:"CabinetAppointments",key:"appointments"},Vh=Object.assign(Mh,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(n){const a=n;let e=Oe();const s=U("settings");let l=U("amCustomize");const o=U("shortcodeData"),r=U("labels"),i=U("localLanguage");let c=b(()=>s.general.usedLanguages.includes(i.value)),x=b(()=>{let re=tt({...r}),te=l.value.appointments.translations;return te&&Object.keys(te).forEach(pe=>{te[pe][i.value]&&c.value?re[pe]=te[pe][i.value]:te[pe].default&&(re[pe]=te[pe].default)}),re});ze("amLabels",x);const g=V(null),{width:m}=Ga(g);let p=b(()=>ot(m.value));ze("pageWidth",m);let y=V(null),T=V(!1),F=V("success"),E=V("");function P(){T.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let L=U("cabinetType");e.commit("cabinetFilters/setDates",ho(L.value));let D=b(()=>e.getters["cabinet/getAppointmentsLoading"]),v=b(()=>e.getters["entities/getReady"]),f=V(null),C=V(0),B=V(1);function _(re){B.value=re,k(null,re)}function k(re=null,te=1){e.commit("cabinet/setAppointmentsLoading",!0);let pe=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getAppointmentsFilters"])),le=e.getters["cabinet/getTimeZone"];pe.dates=pe.dates.map(de=>Ae(de).format("YYYY-MM-DD")),pe.timeZone=le,pe.source="cabinet-"+L.value,pe.page=te,e.commit("auth/setLoadingAppointmentsCounter",e.getters["auth/getLoadingAppointmentsCounter"]+1);let Ee=e.getters["auth/getLoadingAppointmentsCounter"];$e.get("/appointments",Object.assign(Ue(e),{params:Js(pe)})).then(de=>{Ee===e.getters["auth/getLoadingAppointmentsCounter"]&&(C.value=de.data.data.total,f.value=hi(de.data.data.appointments,le,L.value==="provider"))}).catch(de=>{de?.response?.data?.data?.reauthorize!==void 0&&de.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(de)}).finally(()=>{Ee===e.getters["auth/getLoadingAppointmentsCounter"]&&(e.commit("cabinet/setAppointmentsLoading",!1),re&&"message"in re&&(T.value=!0,E.value=re.message,F.value="success",g.value&&y.value&&setTimeout(function(){gt(g.value,y.value.$el,0,300)},500)))})}let R=V([]);function M(re){e.commit("cabinet/setAppointmentsLoading",!0),$e.get("/appointments/"+re.id,Object.assign({params:{source:"cabinet-"+L.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(te=>{let pe=te.data.data.appointment.bookingStart.split(" "),le=e.getters["entities/getService"](te.data.data.appointment.serviceId),Ee=[];te.data.data.appointment.bookings.forEach(de=>{let ie=[];le.extras.sort((I,W)=>I.position-W.position).forEach(I=>{ie.push({extraId:I.id,quantity:0});let W=de.extras.find(Q=>Q.extraId===I.id);typeof W<"u"&&(ie[ie.length-1]=W)});let Ce=de.customFields?JSON.parse(de.customFields):{};e.getters["entities/getCustomFields"].forEach(I=>{(I.allServices||I.services.some(W=>W.id===le.id))&&(Ce[I.id]=Ce[I.id]?Object.assign({},Ce[I.id],{value:Ce[I.id].type==="datepicker"?Ce[I.id].value?Ae(Ce[I.id].value).toDate():"":Ce[I.id].value}):{label:I.label,type:I.type,value:I.type==="checkbox"?[]:"",position:I.position})}),Ee.push({id:de.id,customer:re.bookings.find(I=>I.id===de.id).customer,persons:de.persons,status:de.status,duration:de.duration?de.duration.toString():null,extras:ie,customFields:Ce,payments:de.payments,price:de.price,aggregatedPrice:de.aggregatedPrice,tax:de.tax,coupon:de.coupon})}),e.commit("appointment/setAppointment",{id:te.data.data.appointment.id,categoryId:le.categoryId,serviceId:te.data.data.appointment.serviceId,providerId:te.data.data.appointment.providerId,locationId:te.data.data.appointment.locationId,internalNotes:te.data.data.appointment.internalNotes,lessonSpace:te.data.data.appointment.lessonSpace!==null?te.data.data.appointment.lessonSpace.split("https://www.thelessonspace.com/space/")[1]:null,startDate:Ae(pe[0]).toDate(),startTime:pe[1].substring(0,5),bookings:Ee,notifyParticipants:!!te.data.data.appointment.notifyParticipants,createPaymentLinks:!!te.data.data.appointment.createPaymentLinks}),R.value=te.data.data.recurring,O.value=!0}).catch(te=>{console.log(te)}).finally(()=>{e.commit("cabinet/setAppointmentsLoading",!1)})}let O=V(!1);function H(){T.value=!0,E.value=x.value.appointment_saved,F.value="success",g.value&&y.value&&setTimeout(function(){gt(g.value,y.value.$el,0,300)},500),k(),oe()}function z(re,te){E.value=re,F.value=te,T.value=!0}function J(){X(),O.value=!0}function oe(){O.value=!1,X()}function X(){e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])}return xt(()=>a.loadBookingsCounter,()=>{k()}),Ge(()=>{k()}),(re,te)=>(u(),A("div",{ref_key:"pageContainer",ref:g,class:j(["am-cap am-capa-main",{"am-capai-main":t(O)}])},[d("div",{class:j(["am-capa-main__inner",t(p)])},[t(T)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:y,type:t(F),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:P,onTriggerClose:P},{title:S(()=>[t(F)==="success"?(u(),A("span",$h)):$("",!0),t(F)==="error"?(u(),A("span",Nh)):$("",!0),ue(" "+w(t(E)),1)]),_:1},8,["type"])):$("",!0),!t(O)&&t(v)?(u(),Y(No,{key:1,"step-key":"appointments","responsive-class":t(p),empty:!1,onAddAppointment:J,onChangeFilters:k},null,8,["responsive-class"])):$("",!0),t(o).cabinetType==="employee"&&t(s).roles.allowWriteAppointments&&!t(O)&&t(v)?(u(),A("div",Oh,[N(ke,{prefix:"plus",size:"small",category:"primary",type:t(l).appointments.options.newAppBtn.buttonType,onClick:J},{default:S(()=>[d("span",null,w(t(x).new_appointment),1)]),_:1},8,["type"])])):$("",!0),!t(D)&&t(v)?(u(),A(ne,{key:3},[!t(O)&&t(f)&&Object.keys(t(f)).length>0?(u(),Y(bi,{key:0,"grouped-appointments":t(f),"page-width":t(m),"responsive-class":t(p),"step-key":"appointments",onCanceled:k,onBooked:k,onEditAppointment:M,onStatusChange:z},null,8,["grouped-appointments","page-width","responsive-class"])):t(O)?$("",!0):(u(),Y(Ta,{key:1,heading:t(x).no_app_found,text:t(x).have_no_app},null,8,["heading","text"])),!t(O)&&t(f)&&Object.keys(t(f)).length>0&&t(C)>t(s).general.itemsPerPage?(u(),Y(wl,{key:2,"page-size":t(s).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(C),"current-page":t(B),onCurrentChange:_},null,8,["page-size","total","current-page"])):$("",!0),t(O)?(u(),Y(Lh,{key:3,"page-width":t(m),"responsive-class":t(p),"linked-appointments":t(R),onEditLinkedAppointment:M,onClose:oe,onSave:H},null,8,["page-width","responsive-class","linked-appointments"])):$("",!0)],64)):(u(),Y(Gl,{key:4}))],2)],2))}});var Di={exports:{}};(function(n,a){(function(s,l){n.exports=l()})(typeof self<"u"?self:ha,function(){return function(e){var s={};function l(o){if(s[o])return s[o].exports;var r=s[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,l),r.l=!0,r.exports}return l.m=e,l.c=s,l.d=function(o,r,i){l.o(o,r)||Object.defineProperty(o,r,{configurable:!1,enumerable:!0,get:i})},l.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(r,"a",r),r},l.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},l.p="",l(l.s=3)}([function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function r(i,c){this.width=c,this.height=i.length/c,this.data=i}return r.createEmpty=function(i,c){return new r(new Uint8ClampedArray(i*c),i)},r.prototype.get=function(i,c){return i<0||i>=this.width||c<0||c>=this.height?!1:!!this.data[c*this.width+i]},r.prototype.set=function(i,c,x){this.data[c*this.width+i]=x?1:0},r.prototype.setRegion=function(i,c,x,g,m){for(var p=c;p<c+g;p++)for(var y=i;y<i+x;y++)this.set(y,p,!!m)},r}();s.BitMatrix=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(2);function r(c,x){return c^x}s.addOrSubtractGF=r;var i=function(){function c(x,g,m){this.primitive=x,this.size=g,this.generatorBase=m,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var p=1,y=0;y<this.size;y++)this.expTable[y]=p,p=p*2,p>=this.size&&(p=(p^this.primitive)&this.size-1);for(var y=0;y<this.size-1;y++)this.logTable[this.expTable[y]]=y;this.zero=new o.default(this,Uint8ClampedArray.from([0])),this.one=new o.default(this,Uint8ClampedArray.from([1]))}return c.prototype.multiply=function(x,g){return x===0||g===0?0:this.expTable[(this.logTable[x]+this.logTable[g])%(this.size-1)]},c.prototype.inverse=function(x){if(x===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[x]-1]},c.prototype.buildMonomial=function(x,g){if(x<0)throw new Error("Invalid monomial degree less than 0");if(g===0)return this.zero;var m=new Uint8ClampedArray(x+1);return m[0]=g,new o.default(this,m)},c.prototype.log=function(x){if(x===0)throw new Error("Can't take log(0)");return this.logTable[x]},c.prototype.exp=function(x){return this.expTable[x]},c}();s.default=i},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),r=function(){function i(c,x){if(x.length===0)throw new Error("No coefficients.");this.field=c;var g=x.length;if(g>1&&x[0]===0){for(var m=1;m<g&&x[m]===0;)m++;if(m===g)this.coefficients=c.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(g-m);for(var p=0;p<this.coefficients.length;p++)this.coefficients[p]=x[m+p]}}else this.coefficients=x}return i.prototype.degree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return this.coefficients[0]===0},i.prototype.getCoefficient=function(c){return this.coefficients[this.coefficients.length-1-c]},i.prototype.addOrSubtract=function(c){var x;if(this.isZero())return c;if(c.isZero())return this;var g=this.coefficients,m=c.coefficients;g.length>m.length&&(x=[m,g],g=x[0],m=x[1]);for(var p=new Uint8ClampedArray(m.length),y=m.length-g.length,T=0;T<y;T++)p[T]=m[T];for(var T=y;T<m.length;T++)p[T]=o.addOrSubtractGF(g[T-y],m[T]);return new i(this.field,p)},i.prototype.multiply=function(c){if(c===0)return this.field.zero;if(c===1)return this;for(var x=this.coefficients.length,g=new Uint8ClampedArray(x),m=0;m<x;m++)g[m]=this.field.multiply(this.coefficients[m],c);return new i(this.field,g)},i.prototype.multiplyPoly=function(c){if(this.isZero()||c.isZero())return this.field.zero;for(var x=this.coefficients,g=x.length,m=c.coefficients,p=m.length,y=new Uint8ClampedArray(g+p-1),T=0;T<g;T++)for(var F=x[T],E=0;E<p;E++)y[T+E]=o.addOrSubtractGF(y[T+E],this.field.multiply(F,m[E]));return new i(this.field,y)},i.prototype.multiplyByMonomial=function(c,x){if(c<0)throw new Error("Invalid degree less than 0");if(x===0)return this.field.zero;for(var g=this.coefficients.length,m=new Uint8ClampedArray(g+c),p=0;p<g;p++)m[p]=this.field.multiply(this.coefficients[p],x);return new i(this.field,m)},i.prototype.evaluateAt=function(c){var x=0;if(c===0)return this.getCoefficient(0);var g=this.coefficients.length;if(c===1)return this.coefficients.forEach(function(p){x=o.addOrSubtractGF(x,p)}),x;x=this.coefficients[0];for(var m=1;m<g;m++)x=o.addOrSubtractGF(this.field.multiply(c,x),this.coefficients[m]);return x},i}();s.default=r},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(4),r=l(5),i=l(11),c=l(12);function x(p){var y=c.locate(p);if(!y)return null;for(var T=0,F=y;T<F.length;T++){var E=F[T],P=i.extract(p,E),L=r.decode(P.matrix);if(L)return{binaryData:L.bytes,data:L.text,chunks:L.chunks,version:L.version,location:{topRightCorner:P.mappingFunction(E.dimension,0),topLeftCorner:P.mappingFunction(0,0),bottomRightCorner:P.mappingFunction(E.dimension,E.dimension),bottomLeftCorner:P.mappingFunction(0,E.dimension),topRightFinderPattern:E.topRight,topLeftFinderPattern:E.topLeft,bottomLeftFinderPattern:E.bottomLeft,bottomRightAlignmentPattern:E.alignmentPattern}}}return null}var g={inversionAttempts:"attemptBoth"};function m(p,y,T,F){F===void 0&&(F={});var E=g;Object.keys(E||{}).forEach(function(B){E[B]=F[B]||E[B]});var P=E.inversionAttempts==="attemptBoth"||E.inversionAttempts==="invertFirst",L=E.inversionAttempts==="onlyInvert"||E.inversionAttempts==="invertFirst",D=o.binarize(p,y,T,P),v=D.binarized,f=D.inverted,C=x(L?f:v);return!C&&(E.inversionAttempts==="attemptBoth"||E.inversionAttempts==="invertFirst")&&(C=x(L?v:f)),C}m.default=m,s.default=m},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),r=8,i=24;function c(m,p,y){return m<p?p:m>y?y:m}var x=function(){function m(p,y){this.width=p,this.data=new Uint8ClampedArray(p*y)}return m.prototype.get=function(p,y){return this.data[y*this.width+p]},m.prototype.set=function(p,y,T){this.data[y*this.width+p]=T},m}();function g(m,p,y,T){if(m.length!==p*y*4)throw new Error("Malformed data passed to binarizer.");for(var F=new x(p,y),E=0;E<p;E++)for(var P=0;P<y;P++){var L=m[(P*p+E)*4+0],D=m[(P*p+E)*4+1],v=m[(P*p+E)*4+2];F.set(E,P,.2126*L+.7152*D+.0722*v)}for(var f=Math.ceil(p/r),C=Math.ceil(y/r),B=new x(f,C),_=0;_<C;_++)for(var k=0;k<f;k++){for(var R=0,M=1/0,O=0,P=0;P<r;P++)for(var E=0;E<r;E++){var H=F.get(k*r+E,_*r+P);R+=H,M=Math.min(M,H),O=Math.max(O,H)}var z=R/Math.pow(r,2);if(O-M<=i&&(z=M/2,_>0&&k>0)){var J=(B.get(k,_-1)+2*B.get(k-1,_)+B.get(k-1,_-1))/4;M<J&&(z=J)}B.set(k,_,z)}var oe=o.BitMatrix.createEmpty(p,y),X=null;T&&(X=o.BitMatrix.createEmpty(p,y));for(var _=0;_<C;_++)for(var k=0;k<f;k++){for(var re=c(k,2,f-3),te=c(_,2,C-3),R=0,pe=-2;pe<=2;pe++)for(var le=-2;le<=2;le++)R+=B.get(re+pe,te+le);for(var Ee=R/25,pe=0;pe<r;pe++)for(var le=0;le<r;le++){var E=k*r+pe,P=_*r+le,de=F.get(E,P);oe.set(E,P,de<=Ee),T&&X.set(E,P,!(de<=Ee))}}return T?{binarized:oe,inverted:X}:{binarized:oe}}s.binarize=g},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),r=l(6),i=l(9),c=l(10);function x(v,f){for(var C=v^f,B=0;C;)B++,C&=C-1;return B}function g(v,f){return f<<1|v}var m=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],p=[function(v){return(v.y+v.x)%2===0},function(v){return v.y%2===0},function(v){return v.x%3===0},function(v){return(v.y+v.x)%3===0},function(v){return(Math.floor(v.y/2)+Math.floor(v.x/3))%2===0},function(v){return v.x*v.y%2+v.x*v.y%3===0},function(v){return(v.y*v.x%2+v.y*v.x%3)%2===0},function(v){return((v.y+v.x)%2+v.y*v.x%3)%2===0}];function y(v){var f=17+4*v.versionNumber,C=o.BitMatrix.createEmpty(f,f);C.setRegion(0,0,9,9,!0),C.setRegion(f-8,0,8,9,!0),C.setRegion(0,f-8,9,8,!0);for(var B=0,_=v.alignmentPatternCenters;B<_.length;B++)for(var k=_[B],R=0,M=v.alignmentPatternCenters;R<M.length;R++){var O=M[R];k===6&&O===6||k===6&&O===f-7||k===f-7&&O===6||C.setRegion(k-2,O-2,5,5,!0)}return C.setRegion(6,9,1,f-17,!0),C.setRegion(9,6,f-17,1,!0),v.versionNumber>6&&(C.setRegion(f-11,0,3,6,!0),C.setRegion(0,f-11,6,3,!0)),C}function T(v,f,C){for(var B=p[C.dataMask],_=v.height,k=y(f),R=[],M=0,O=0,H=!0,z=_-1;z>0;z-=2){z===6&&z--;for(var J=0;J<_;J++)for(var oe=H?_-1-J:J,X=0;X<2;X++){var re=z-X;if(!k.get(re,oe)){O++;var te=v.get(re,oe);B({y:oe,x:re})&&(te=!te),M=g(te,M),O===8&&(R.push(M),O=0,M=0)}}H=!H}return R}function F(v){var f=v.height,C=Math.floor((f-17)/4);if(C<=6)return c.VERSIONS[C-1];for(var B=0,_=5;_>=0;_--)for(var k=f-9;k>=f-11;k--)B=g(v.get(k,_),B);for(var R=0,k=5;k>=0;k--)for(var _=f-9;_>=f-11;_--)R=g(v.get(k,_),R);for(var M=1/0,O,H=0,z=c.VERSIONS;H<z.length;H++){var J=z[H];if(J.infoBits===B||J.infoBits===R)return J;var oe=x(B,J.infoBits);oe<M&&(O=J,M=oe),oe=x(R,J.infoBits),oe<M&&(O=J,M=oe)}if(M<=3)return O}function E(v){for(var f=0,C=0;C<=8;C++)C!==6&&(f=g(v.get(C,8),f));for(var B=7;B>=0;B--)B!==6&&(f=g(v.get(8,B),f));for(var _=v.height,k=0,B=_-1;B>=_-7;B--)k=g(v.get(8,B),k);for(var C=_-8;C<_;C++)k=g(v.get(C,8),k);for(var R=1/0,M=null,O=0,H=m;O<H.length;O++){var z=H[O],J=z.bits,oe=z.formatInfo;if(J===f||J===k)return oe;var X=x(f,J);X<R&&(M=oe,R=X),f!==k&&(X=x(k,J),X<R&&(M=oe,R=X))}return R<=3?M:null}function P(v,f,C){var B=f.errorCorrectionLevels[C],_=[],k=0;if(B.ecBlocks.forEach(function(te){for(var pe=0;pe<te.numBlocks;pe++)_.push({numDataCodewords:te.dataCodewordsPerBlock,codewords:[]}),k+=te.dataCodewordsPerBlock+B.ecCodewordsPerBlock}),v.length<k)return null;v=v.slice(0,k);for(var R=B.ecBlocks[0].dataCodewordsPerBlock,M=0;M<R;M++)for(var O=0,H=_;O<H.length;O++){var z=H[O];z.codewords.push(v.shift())}if(B.ecBlocks.length>1)for(var J=B.ecBlocks[0].numBlocks,oe=B.ecBlocks[1].numBlocks,M=0;M<oe;M++)_[J+M].codewords.push(v.shift());for(;v.length>0;)for(var X=0,re=_;X<re.length;X++){var z=re[X];z.codewords.push(v.shift())}return _}function L(v){var f=F(v);if(!f)return null;var C=E(v);if(!C)return null;var B=T(v,f,C),_=P(B,f,C.errorCorrectionLevel);if(!_)return null;for(var k=_.reduce(function(X,re){return X+re.numDataCodewords},0),R=new Uint8ClampedArray(k),M=0,O=0,H=_;O<H.length;O++){var z=H[O],J=i.decode(z.codewords,z.codewords.length-z.numDataCodewords);if(!J)return null;for(var oe=0;oe<z.numDataCodewords;oe++)R[M++]=J[oe]}try{return r.decode(R,f.versionNumber)}catch{return null}}function D(v){if(v==null)return null;var f=L(v);if(f)return f;for(var C=0;C<v.width;C++)for(var B=C+1;B<v.height;B++)v.get(C,B)!==v.get(B,C)&&(v.set(C,B,!v.get(C,B)),v.set(B,C,!v.get(B,C)));return L(v)}s.decode=D},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(7),r=l(8),i;(function(F){F.Numeric="numeric",F.Alphanumeric="alphanumeric",F.Byte="byte",F.Kanji="kanji",F.ECI="eci"})(i=s.Mode||(s.Mode={}));var c;(function(F){F[F.Terminator=0]="Terminator",F[F.Numeric=1]="Numeric",F[F.Alphanumeric=2]="Alphanumeric",F[F.Byte=4]="Byte",F[F.Kanji=8]="Kanji",F[F.ECI=7]="ECI"})(c||(c={}));function x(F,E){for(var P=[],L="",D=[10,12,14][E],v=F.readBits(D);v>=3;){var f=F.readBits(10);if(f>=1e3)throw new Error("Invalid numeric value above 999");var C=Math.floor(f/100),B=Math.floor(f/10)%10,_=f%10;P.push(48+C,48+B,48+_),L+=C.toString()+B.toString()+_.toString(),v-=3}if(v===2){var f=F.readBits(7);if(f>=100)throw new Error("Invalid numeric value above 99");var C=Math.floor(f/10),B=f%10;P.push(48+C,48+B),L+=C.toString()+B.toString()}else if(v===1){var f=F.readBits(4);if(f>=10)throw new Error("Invalid numeric value above 9");P.push(48+f),L+=f.toString()}return{bytes:P,text:L}}var g=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function m(F,E){for(var P=[],L="",D=[9,11,13][E],v=F.readBits(D);v>=2;){var f=F.readBits(11),C=Math.floor(f/45),B=f%45;P.push(g[C].charCodeAt(0),g[B].charCodeAt(0)),L+=g[C]+g[B],v-=2}if(v===1){var C=F.readBits(6);P.push(g[C].charCodeAt(0)),L+=g[C]}return{bytes:P,text:L}}function p(F,E){for(var P=[],L="",D=[8,16,16][E],v=F.readBits(D),f=0;f<v;f++){var C=F.readBits(8);P.push(C)}try{L+=decodeURIComponent(P.map(function(B){return"%"+("0"+B.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:P,text:L}}function y(F,E){for(var P=[],L="",D=[8,10,12][E],v=F.readBits(D),f=0;f<v;f++){var C=F.readBits(13),B=Math.floor(C/192)<<8|C%192;B<7936?B+=33088:B+=49472,P.push(B>>8,B&255),L+=String.fromCharCode(r.shiftJISTable[B])}return{bytes:P,text:L}}function T(F,E){for(var P,L,D,v,f=new o.BitStream(F),C=E<=9?0:E<=26?1:2,B={text:"",bytes:[],chunks:[],version:E};f.available()>=4;){var _=f.readBits(4);if(_===c.Terminator)return B;if(_===c.ECI)f.readBits(1)===0?B.chunks.push({type:i.ECI,assignmentNumber:f.readBits(7)}):f.readBits(1)===0?B.chunks.push({type:i.ECI,assignmentNumber:f.readBits(14)}):f.readBits(1)===0?B.chunks.push({type:i.ECI,assignmentNumber:f.readBits(21)}):B.chunks.push({type:i.ECI,assignmentNumber:-1});else if(_===c.Numeric){var k=x(f,C);B.text+=k.text,(P=B.bytes).push.apply(P,k.bytes),B.chunks.push({type:i.Numeric,text:k.text})}else if(_===c.Alphanumeric){var R=m(f,C);B.text+=R.text,(L=B.bytes).push.apply(L,R.bytes),B.chunks.push({type:i.Alphanumeric,text:R.text})}else if(_===c.Byte){var M=p(f,C);B.text+=M.text,(D=B.bytes).push.apply(D,M.bytes),B.chunks.push({type:i.Byte,bytes:M.bytes,text:M.text})}else if(_===c.Kanji){var O=y(f,C);B.text+=O.text,(v=B.bytes).push.apply(v,O.bytes),B.chunks.push({type:i.Kanji,bytes:O.bytes,text:O.text})}}if(f.available()===0||f.readBits(f.available())===0)return B}s.decode=T},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function r(i){this.byteOffset=0,this.bitOffset=0,this.bytes=i}return r.prototype.readBits=function(i){if(i<1||i>32||i>this.available())throw new Error("Cannot read "+i.toString()+" bits");var c=0;if(this.bitOffset>0){var x=8-this.bitOffset,g=i<x?i:x,m=x-g,p=255>>8-g<<m;c=(this.bytes[this.byteOffset]&p)>>m,i-=g,this.bitOffset+=g,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(i>0){for(;i>=8;)c=c<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,i-=8;if(i>0){var m=8-i,p=255>>m<<m;c=c<<i|(this.bytes[this.byteOffset]&p)>>m,this.bitOffset+=i}}return c},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}();s.BitStream=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),r=l(2);function i(m,p,y,T){var F;p.degree()<y.degree()&&(F=[y,p],p=F[0],y=F[1]);for(var E=p,P=y,L=m.zero,D=m.one;P.degree()>=T/2;){var v=E,f=L;if(E=P,L=D,E.isZero())return null;P=v;for(var C=m.zero,B=E.getCoefficient(E.degree()),_=m.inverse(B);P.degree()>=E.degree()&&!P.isZero();){var k=P.degree()-E.degree(),R=m.multiply(P.getCoefficient(P.degree()),_);C=C.addOrSubtract(m.buildMonomial(k,R)),P=P.addOrSubtract(E.multiplyByMonomial(k,R))}if(D=C.multiplyPoly(L).addOrSubtract(f),P.degree()>=E.degree())return null}var M=D.getCoefficient(0);if(M===0)return null;var O=m.inverse(M);return[D.multiply(O),P.multiply(O)]}function c(m,p){var y=p.degree();if(y===1)return[p.getCoefficient(1)];for(var T=new Array(y),F=0,E=1;E<m.size&&F<y;E++)p.evaluateAt(E)===0&&(T[F]=m.inverse(E),F++);return F!==y?null:T}function x(m,p,y){for(var T=y.length,F=new Array(T),E=0;E<T;E++){for(var P=m.inverse(y[E]),L=1,D=0;D<T;D++)E!==D&&(L=m.multiply(L,o.addOrSubtractGF(1,m.multiply(y[D],P))));F[E]=m.multiply(p.evaluateAt(P),m.inverse(L)),m.generatorBase!==0&&(F[E]=m.multiply(F[E],P))}return F}function g(m,p){var y=new Uint8ClampedArray(m.length);y.set(m);for(var T=new o.default(285,256,0),F=new r.default(T,y),E=new Uint8ClampedArray(p),P=!1,L=0;L<p;L++){var D=F.evaluateAt(T.exp(L+T.generatorBase));E[E.length-1-L]=D,D!==0&&(P=!0)}if(!P)return y;var v=new r.default(T,E),f=i(T,T.buildMonomial(p,1),v,p);if(f===null)return null;var C=c(T,f[0]);if(C==null)return null;for(var B=x(T,f[1],C),_=0;_<C.length;_++){var k=y.length-1-T.log(C[_]);if(k<0)return null;y[k]=o.addOrSubtractGF(y[k],B[_])}return y}s.decode=g},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0);function r(g,m,p,y){var T=g.x-m.x+p.x-y.x,F=g.y-m.y+p.y-y.y;if(T===0&&F===0)return{a11:m.x-g.x,a12:m.y-g.y,a13:0,a21:p.x-m.x,a22:p.y-m.y,a23:0,a31:g.x,a32:g.y,a33:1};var E=m.x-p.x,P=y.x-p.x,L=m.y-p.y,D=y.y-p.y,v=E*D-P*L,f=(T*D-P*F)/v,C=(E*F-T*L)/v;return{a11:m.x-g.x+f*m.x,a12:m.y-g.y+f*m.y,a13:f,a21:y.x-g.x+C*y.x,a22:y.y-g.y+C*y.y,a23:C,a31:g.x,a32:g.y,a33:1}}function i(g,m,p,y){var T=r(g,m,p,y);return{a11:T.a22*T.a33-T.a23*T.a32,a12:T.a13*T.a32-T.a12*T.a33,a13:T.a12*T.a23-T.a13*T.a22,a21:T.a23*T.a31-T.a21*T.a33,a22:T.a11*T.a33-T.a13*T.a31,a23:T.a13*T.a21-T.a11*T.a23,a31:T.a21*T.a32-T.a22*T.a31,a32:T.a12*T.a31-T.a11*T.a32,a33:T.a11*T.a22-T.a12*T.a21}}function c(g,m){return{a11:g.a11*m.a11+g.a21*m.a12+g.a31*m.a13,a12:g.a12*m.a11+g.a22*m.a12+g.a32*m.a13,a13:g.a13*m.a11+g.a23*m.a12+g.a33*m.a13,a21:g.a11*m.a21+g.a21*m.a22+g.a31*m.a23,a22:g.a12*m.a21+g.a22*m.a22+g.a32*m.a23,a23:g.a13*m.a21+g.a23*m.a22+g.a33*m.a23,a31:g.a11*m.a31+g.a21*m.a32+g.a31*m.a33,a32:g.a12*m.a31+g.a22*m.a32+g.a32*m.a33,a33:g.a13*m.a31+g.a23*m.a32+g.a33*m.a33}}function x(g,m){for(var p=i({x:3.5,y:3.5},{x:m.dimension-3.5,y:3.5},{x:m.dimension-6.5,y:m.dimension-6.5},{x:3.5,y:m.dimension-3.5}),y=r(m.topLeft,m.topRight,m.alignmentPattern,m.bottomLeft),T=c(y,p),F=o.BitMatrix.createEmpty(m.dimension,m.dimension),E=function(C,B){var _=T.a13*C+T.a23*B+T.a33;return{x:(T.a11*C+T.a21*B+T.a31)/_,y:(T.a12*C+T.a22*B+T.a32)/_}},P=0;P<m.dimension;P++)for(var L=0;L<m.dimension;L++){var D=L+.5,v=P+.5,f=E(D,v);F.set(L,P,g.get(Math.floor(f.x),Math.floor(f.y)))}return{matrix:F,mappingFunction:E}}s.extract=x},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=4,r=.5,i=1.5,c=function(D,v){return Math.sqrt(Math.pow(v.x-D.x,2)+Math.pow(v.y-D.y,2))};function x(D){return D.reduce(function(v,f){return v+f})}function g(D,v,f){var C,B,_,k,R=c(D,v),M=c(v,f),O=c(D,f),H,z,J;return M>=R&&M>=O?(C=[v,D,f],H=C[0],z=C[1],J=C[2]):O>=M&&O>=R?(B=[D,v,f],H=B[0],z=B[1],J=B[2]):(_=[D,f,v],H=_[0],z=_[1],J=_[2]),(J.x-z.x)*(H.y-z.y)-(J.y-z.y)*(H.x-z.x)<0&&(k=[J,H],H=k[0],J=k[1]),{bottomLeft:H,topLeft:z,topRight:J}}function m(D,v,f,C){var B=(x(y(D,f,C,5))/7+x(y(D,v,C,5))/7+x(y(f,D,C,5))/7+x(y(v,D,C,5))/7)/4;if(B<1)throw new Error("Invalid module size");var _=Math.round(c(D,v)/B),k=Math.round(c(D,f)/B),R=Math.floor((_+k)/2)+7;switch(R%4){case 0:R++;break;case 2:R--;break}return{dimension:R,moduleSize:B}}function p(D,v,f,C){var B=[{x:Math.floor(D.x),y:Math.floor(D.y)}],_=Math.abs(v.y-D.y)>Math.abs(v.x-D.x),k,R,M,O;_?(k=Math.floor(D.y),R=Math.floor(D.x),M=Math.floor(v.y),O=Math.floor(v.x)):(k=Math.floor(D.x),R=Math.floor(D.y),M=Math.floor(v.x),O=Math.floor(v.y));for(var H=Math.abs(M-k),z=Math.abs(O-R),J=Math.floor(-H/2),oe=k<M?1:-1,X=R<O?1:-1,re=!0,te=k,pe=R;te!==M+oe;te+=oe){var le=_?pe:te,Ee=_?te:pe;if(f.get(le,Ee)!==re&&(re=!re,B.push({x:le,y:Ee}),B.length===C+1))break;if(J+=z,J>0){if(pe===O)break;pe+=X,J-=H}}for(var de=[],ie=0;ie<C;ie++)B[ie]&&B[ie+1]?de.push(c(B[ie],B[ie+1])):de.push(0);return de}function y(D,v,f,C){var B,_=v.y-D.y,k=v.x-D.x,R=p(D,v,f,Math.ceil(C/2)),M=p(D,{x:D.x-k,y:D.y-_},f,Math.ceil(C/2)),O=R.shift()+M.shift()-1;return(B=M.concat(O)).concat.apply(B,R)}function T(D,v){var f=x(D)/x(v),C=0;return v.forEach(function(B,_){C+=Math.pow(D[_]-B*f,2)}),{averageSize:f,error:C}}function F(D,v,f){try{var C=y(D,{x:-1,y:D.y},f,v.length),B=y(D,{x:D.x,y:-1},f,v.length),_={x:Math.max(0,D.x-D.y)-1,y:Math.max(0,D.y-D.x)-1},k=y(D,_,f,v.length),R={x:Math.min(f.width,D.x+D.y)+1,y:Math.min(f.height,D.y+D.x)+1},M=y(D,R,f,v.length),O=T(C,v),H=T(B,v),z=T(k,v),J=T(M,v),oe=Math.sqrt(O.error*O.error+H.error*H.error+z.error*z.error+J.error*J.error),X=(O.averageSize+H.averageSize+z.averageSize+J.averageSize)/4,re=(Math.pow(O.averageSize-X,2)+Math.pow(H.averageSize-X,2)+Math.pow(z.averageSize-X,2)+Math.pow(J.averageSize-X,2))/X;return oe+re}catch{return 1/0}}function E(D,v){for(var f=Math.round(v.x);D.get(f,Math.round(v.y));)f--;for(var C=Math.round(v.x);D.get(C,Math.round(v.y));)C++;for(var B=(f+C)/2,_=Math.round(v.y);D.get(Math.round(B),_);)_--;for(var k=Math.round(v.y);D.get(Math.round(B),k);)k++;var R=(_+k)/2;return{x:B,y:R}}function P(D){for(var v=[],f=[],C=[],B=[],_=function(le){for(var Ee=0,de=!1,ie=[0,0,0,0,0],Ce=function(W){var Q=D.get(W,le);if(Q===de)Ee++;else{ie=[ie[1],ie[2],ie[3],ie[4],Ee],Ee=1,de=Q;var ee=x(ie)/7,G=Math.abs(ie[0]-ee)<ee&&Math.abs(ie[1]-ee)<ee&&Math.abs(ie[2]-3*ee)<3*ee&&Math.abs(ie[3]-ee)<ee&&Math.abs(ie[4]-ee)<ee&&!Q,ae=x(ie.slice(-3))/3,_e=Math.abs(ie[2]-ae)<ae&&Math.abs(ie[3]-ae)<ae&&Math.abs(ie[4]-ae)<ae&&Q;if(G){var ce=W-ie[3]-ie[4],Pe=ce-ie[2],se={startX:Pe,endX:ce,y:le},ye=f.filter(function(Le){return Pe>=Le.bottom.startX&&Pe<=Le.bottom.endX||ce>=Le.bottom.startX&&Pe<=Le.bottom.endX||Pe<=Le.bottom.startX&&ce>=Le.bottom.endX&&ie[2]/(Le.bottom.endX-Le.bottom.startX)<i&&ie[2]/(Le.bottom.endX-Le.bottom.startX)>r});ye.length>0?ye[0].bottom=se:f.push({top:se,bottom:se})}if(_e){var De=W-ie[4],Me=De-ie[3],se={startX:Me,y:le,endX:De},ye=B.filter(function(me){return Me>=me.bottom.startX&&Me<=me.bottom.endX||De>=me.bottom.startX&&Me<=me.bottom.endX||Me<=me.bottom.startX&&De>=me.bottom.endX&&ie[2]/(me.bottom.endX-me.bottom.startX)<i&&ie[2]/(me.bottom.endX-me.bottom.startX)>r});ye.length>0?ye[0].bottom=se:B.push({top:se,bottom:se})}}},I=-1;I<=D.width;I++)Ce(I);v.push.apply(v,f.filter(function(W){return W.bottom.y!==le&&W.bottom.y-W.top.y>=2})),f=f.filter(function(W){return W.bottom.y===le}),C.push.apply(C,B.filter(function(W){return W.bottom.y!==le})),B=B.filter(function(W){return W.bottom.y===le})},k=0;k<=D.height;k++)_(k);v.push.apply(v,f.filter(function(le){return le.bottom.y-le.top.y>=2})),C.push.apply(C,B);var R=v.filter(function(le){return le.bottom.y-le.top.y>=2}).map(function(le){var Ee=(le.top.startX+le.top.endX+le.bottom.startX+le.bottom.endX)/4,de=(le.top.y+le.bottom.y+1)/2;if(!!D.get(Math.round(Ee),Math.round(de))){var ie=[le.top.endX-le.top.startX,le.bottom.endX-le.bottom.startX,le.bottom.y-le.top.y+1],Ce=x(ie)/ie.length,I=F({x:Math.round(Ee),y:Math.round(de)},[1,1,3,1,1],D);return{score:I,x:Ee,y:de,size:Ce}}}).filter(function(le){return!!le}).sort(function(le,Ee){return le.score-Ee.score}).map(function(le,Ee,de){if(Ee>o)return null;var ie=de.filter(function(I,W){return Ee!==W}).map(function(I){return{x:I.x,y:I.y,score:I.score+Math.pow(I.size-le.size,2)/le.size,size:I.size}}).sort(function(I,W){return I.score-W.score});if(ie.length<2)return null;var Ce=le.score+ie[0].score+ie[1].score;return{points:[le].concat(ie.slice(0,2)),score:Ce}}).filter(function(le){return!!le}).sort(function(le,Ee){return le.score-Ee.score});if(R.length===0)return null;var M=g(R[0].points[0],R[0].points[1],R[0].points[2]),O=M.topRight,H=M.topLeft,z=M.bottomLeft,J=L(D,C,O,H,z),oe=[];J&&oe.push({alignmentPattern:{x:J.alignmentPattern.x,y:J.alignmentPattern.y},bottomLeft:{x:z.x,y:z.y},dimension:J.dimension,topLeft:{x:H.x,y:H.y},topRight:{x:O.x,y:O.y}});var X=E(D,O),re=E(D,H),te=E(D,z),pe=L(D,C,X,re,te);return pe&&oe.push({alignmentPattern:{x:pe.alignmentPattern.x,y:pe.alignmentPattern.y},bottomLeft:{x:te.x,y:te.y},topLeft:{x:re.x,y:re.y},topRight:{x:X.x,y:X.y},dimension:pe.dimension}),oe.length===0?null:oe}s.locate=P;function L(D,v,f,C,B){var _,k,R;try{_=m(C,f,B,D),k=_.dimension,R=_.moduleSize}catch{return null}var M={x:f.x-C.x+B.x,y:f.y-C.y+B.y},O=(c(C,B)+c(C,f))/2/R,H=1-3/O,z={x:C.x+H*(M.x-C.x),y:C.y+H*(M.y-C.y)},J=v.map(function(X){var re=(X.top.startX+X.top.endX+X.bottom.startX+X.bottom.endX)/4,te=(X.top.y+X.bottom.y+1)/2;if(!!D.get(Math.floor(re),Math.floor(te))){var pe=[X.top.endX-X.top.startX,X.bottom.endX-X.bottom.startX,X.bottom.y-X.top.y+1];x(pe)/pe.length;var le=F({x:Math.floor(re),y:Math.floor(te)},[1,1,1],D),Ee=le+c({x:re,y:te},z);return{x:re,y:te,score:Ee}}}).filter(function(X){return!!X}).sort(function(X,re){return X.score-re.score}),oe=O>=15&&J.length?J[0]:z;return{alignmentPattern:oe,dimension:k}}}]).default})})(Di);var Rh=Ar(Di.exports);const qh={class:"am-cqcs__header"},Uh={key:0,class:"am-cqcs__container"},zh={class:"am-cqcs__container-inner"},jh={class:"am-cqcs__camera-container"},Yh=d("div",{class:"am-cqcs__video-overlay"},[d("div",{class:"am-cqcs__frame"})],-1),Wh={key:0,class:"am-cqcs__response-info"},Hh={key:0,class:"am-cqcs__response-message"},Gh={key:1,class:"am-cqcs__response-name"},Zh={key:2,class:"am-cqcs__response-item"},Jh={key:3,class:"am-cqcs__response-item"},Xh={key:4,class:"am-cqcs__response-item"},Qh={key:5,class:"am-cqcs__response-item"},Kh={key:1,class:"am-cqcs__error"},e1=d("span",{class:"am-icon-close-filled"},null,-1),t1={class:"am-cqcs__controls"},a1=d("span",{class:"am-icon-refresh"},null,-1),s1=d("span",{class:"am-icon-mobile"},null,-1),l1=d("span",{class:"am-icon-mobile"},null,-1),n1={props:{visibility:{type:Boolean,default:!1}},emits:["update:visibility"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("labels"),o=V(!1),r=V(!1),i=V(!1),c=V(!1),x=V([]),g=V(0),m=V(""),p=V(null),y=V(null),T=V(0),F=V(1500),E=V(null),P=V(null),L=V(null),D=V(null),v=V({ticketCode:""}),f=V({ticketCode:[{required:!0,message:"Ticket code is required",trigger:"click"}]}),C=V({ticketCode:{template:We.text,props:{itemName:"ticketCode",placeholder:l.enter_ticket_code,class:"am-cqcs__form-item",prepend:"#"}}}),B=V(null);async function _(){try{if(!(window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname.includes("ngrok.io")||location.hostname.startsWith("192.168.")||location.hostname.startsWith("10.")||location.hostname.startsWith("172.")))throw new Error("Camera access requires HTTPS or localhost. Please access this page over a secure connection or use localhost.");if(!navigator.mediaDevices)throw new Error("MediaDevices API not supported in this browser. Please update your browser or try Chrome/Firefox.");if(!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia not supported in this browser. Please update your browser or try Chrome/Firefox.");let Ee=[];try{Ee=await navigator.mediaDevices.enumerateDevices()}catch(de){console.warn("Could not enumerate devices:",de)}x.value=Ee.filter(de=>de.kind==="videoinput"),await k()}catch(le){pe(le)}}async function k(){B.value&&B.value.closingFromParent(),E.value=null;try{if(m.value="",!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera access not supported in this browser");p.value&&p.value.getTracks().forEach(de=>de.stop());let le={video:{facingMode:"environment"}};x.value.length>0&&x.value[g.value]&&x.value[g.value].deviceId?le.video.deviceId={exact:x.value[g.value].deviceId}:le.video={facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480}},p.value=await navigator.mediaDevices.getUserMedia(le);const Ee=p.value.getVideoTracks()[0];if(Ee&&Ee.getCapabilities){const de=Ee.getCapabilities();c.value=!!de.torch}P.value&&(P.value.srcObject=p.value,P.value.onloadedmetadata=()=>{P.value.play().catch(de=>{console.warn("Could not auto-play video:",de)})}),r.value=!0,M()}catch(le){pe(le)}}function R(){E.value=null,r.value=!1,y.value&&(cancelAnimationFrame(y.value),y.value=null),p.value&&(p.value.getTracks().forEach(le=>le.stop()),p.value=null),P.value&&(P.value.srcObject=null)}function M(){const le=P.value,Ee=L.value;if(!le||!Ee)return;const de=Ee.getContext("2d",{willReadFrequently:!0}),ie=()=>{if(!!r.value){if(le.readyState===le.HAVE_ENOUGH_DATA){(Ee.width!==le.videoWidth||Ee.height!==le.videoHeight)&&(Ee.width=le.videoWidth,Ee.height=le.videoHeight),de.drawImage(le,0,0,Ee.width,Ee.height);const Ce=de.getImageData(0,0,Ee.width,Ee.height),I=performance.now();if(I-T.value>=F.value){const W=Rh(Ce.data,Ce.width,Ce.height,{inversionAttempts:"dontInvert"});W&&W.data&&(W.data&&(oe(W.data),R()),T.value=I)}}y.value=requestAnimationFrame(ie)}};y.value=requestAnimationFrame(ie)}async function O(){if(!(!c.value||!p.value))try{await p.value.getVideoTracks()[0].applyConstraints({advanced:[{torch:!i.value}]}),i.value=!i.value}catch(le){console.error("Error toggling torch:",le)}}async function H(){x.value.length<=1||(g.value=(g.value+1)%x.value.length,await k())}function z(){D.value.validate(le=>{if(le){const Ee={ticketManualCode:v.value.ticketCode.trim(),scannedAt:at().format("YYYY-MM-DD")};X(Ee),v.value.ticketCode=""}else return!1})}function J(le){const Ee={},de=/(\w+)\s*:\s*([^\s|]+)/g;let ie;for(;(ie=de.exec(le))!==null;){let Ce=ie[1],I=ie[2];/^-?\d+$/.test(I)&&(I=Number(I)),Ee[Ce]=I}return Ee}function oe(le){m.value="";let Ee=J(le);const de=at().format("YYYY-MM-DD");let ie={...Ee,scannedAt:de};X(ie)}function X(le){o.value=!0,m.value="",$e.post("/scan-eticket",{ticketManualCode:le.ticketManualCode,scannedAt:le.scannedAt},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(Ee=>{Ee.data&&Ee.data.data&&(E.value={messageType:Ee.data.data.messageType,message:Ee.data.data.message,bookingId:Ee.data.data.bookingId,ticketManualCode:Ee.data.data.ticketManualCode,ticketControlNumber:Ee.data.data.ticketControl,eventName:Ee.data.data.eventName?Ee.data.data.eventName:re(Ee.data.data)},te(Ee.data.data)&&(E.value.eventTicketName=te(Ee.data.data)))}).catch(Ee=>{const de=Ee?.response?.data;!de||(de.data?E.value={messageType:de.data.messageType,message:de.data.message}:(E.value={messageType:"error",message:de.message},de.message.includes("Mandatory fields not passed!")&&(E.value.message=l.ticket_not_valid)))}).finally(()=>{o.value=!1})}function re(le){return le.qrCodes.find(de=>de.ticketManualCode===le.ticketManualCode).eventName||""}function te(le){return le.qrCodes.find(de=>de.ticketManualCode===le.ticketManualCode).eventTicketName||""}function pe(le){console.error("Scanner error:",le),le.name==="NotAllowedError"?m.value=l.camera_error_1:le.name==="NotFoundError"?m.value=l.camera_error_2:le.name==="NotSupportedError"?m.value=l.camera_error_3:m.value=`Camera error: ${le.message}`}return Ge(()=>{xt(()=>e.visibility,le=>{le?_():R()},{immediate:!0})}),Yn(()=>{R()}),(le,Ee)=>{const de=vt,ie=st;return e.visibility?(u(),Y(Sa,{key:0,visibility:e.visibility,class:"am-cqcs__dialog",position:"top","footer-visibility":!1,"onUpdate:visibility":Ee[0]||(Ee[0]=Ce=>a("update:visibility",Ce))},{header:S(()=>[d("div",qh,w(t(l).e_ticket_scanner),1)]),default:S(()=>[e.visibility?(u(),A("div",Uh,[$t(d("div",zh,[d("div",jh,[d("video",{ref_key:"videoElement",ref:P,class:"am-cqcs__video",style:Be({display:t(r)?"block":"none"}),autoplay:"",playsinline:""},null,4),d("canvas",{ref_key:"canvasElement",ref:L,class:"am-cqcs__canvas",style:{display:"none"}},null,512),Yh]),t(E)?(u(),A("div",Wh,[d("span",{class:j(t(E).messageType==="error"?"am-icon-close-filled":"am-icon-checkmark-circle-full")},null,2),t(E).message?(u(),A("div",Hh,w(t(l)[t(E).message]||t(E).message),1)):$("",!0),t(E).eventName?(u(),A("div",Gh,w(t(E).eventName),1)):$("",!0),t(E).ticketManualCode?(u(),A("div",Zh,[d("span",null,w(t(l).ticket_id)+":",1),ue(" #"+w(t(E).ticketManualCode),1)])):$("",!0),t(E).eventTicketName?(u(),A("div",Jh,[d("span",null,w(t(l).ticket_name)+":",1),ue(" "+w(t(E).eventTicketName),1)])):$("",!0),t(E).bookingId?(u(),A("div",Xh,[d("span",null,w(t(l).booking_id)+":",1),ue(" #"+w(t(E).bookingId),1)])):$("",!0),t(E).ticketControlNumber?(u(),A("div",Qh,[d("span",null,w(t(l).attendees_allowed)+":",1),ue(" "+w(t(E).ticketControlNumber),1)])):$("",!0)])):$("",!0),t(m)?(u(),A("div",Kh,[e1,ue(" "+w(t(m)),1)])):$("",!0),d("div",t1,[t(c)?(u(),Y(ke,{key:0,category:"primary",onClick:O},{default:S(()=>[d("span",{class:j(t(i)?"am-icon-bolt-lightning":"am-icon-bolt-lightning-fill")},null,2),ue(" "+w(t(i)?t(l).torch_off:t(l).torch_on),1)]),_:1})):$("",!0),t(x).length>1?(u(),Y(ke,{key:1,onClick:H},{default:S(()=>[a1,ue(" "+w(t(l).switch_camera),1)]),_:1})):$("",!0),t(r)?$("",!0):(u(),Y(ke,{key:2,category:"primary",onClick:k},{default:S(()=>[s1,ue(" "+w(t(l).start_scanner),1)]),_:1})),t(r)?(u(),Y(ke,{key:3,category:"danger",onClick:R},{default:S(()=>[l1,ue(" "+w(t(l).stop_scanner),1)]),_:1})):$("",!0)]),N(fo,{class:"am-cqcs__collapse"},{default:S(()=>[N(po,{ref_key:"manualCodeCollapse",ref:B,class:"am-cqcs__collapse-item"},{heading:S(()=>[ue(w(t(l).enter_ticket_manually),1)]),default:S(()=>[N(ie,{ref_key:"manualCodeForm",ref:D,model:t(v),rules:t(f),class:"am-cqcs__form",onSubmit:i0(z,["prevent"])},{default:S(()=>[(u(!0),A(ne,null,ve(t(C),(Ce,I)=>(u(),Y(ft(Ce.template),Dt({key:I,modelValue:t(v)[I],"onUpdate:modelValue":W=>t(v)[I]=W},Ce.props),null,16,["modelValue","onUpdate:modelValue"]))),128)),N(de,null,{default:S(()=>[N(ke,{category:"primary",onClick:z},{default:S(()=>[ue(w(t(l).validate_ticket),1)]),_:1})]),_:1})]),_:1},8,["model","rules","onSubmit"])]),_:1},512)]),_:1})],512),[[mo,!t(o)]]),t(o)?(u(),Y(Gl,{key:0})):$("",!0)])):$("",!0)]),_:1},8,["visibility"])):$("",!0)}}};function _s(n,a,e={},s={}){for(let l in a)l in n&&a[l]&&typeof a[l]=="object"?(l in s||(s[l]={}),_s(n[l],a[l],l in e?e[l]:n[l],s[l]),Object.keys(s[l]).length===0&&delete s[l]):l in e?s[l]=e[l]:l in n?s[l]=n[l]:s[l]=a[l];return s}function o1(n){lt.activation.stash&&$e.post("/stash",{},Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(()=>{})}function r1(n,a){let e=n.getters["event/getDefaultEvent"],s=[],l={};a.customTickets.length&&a.bookings.forEach(i=>{i.ticketsData.forEach(c=>{l[c.eventTicketId]=!0})}),a.customTickets.forEach(i=>{JSON.parse(i.dateRanges).forEach((c,x)=>{x in s||s.push({enabled:c.enabled,range:[Ae(c.startDate,"YYYY-MM-DD").toDate(),Ae(c.endDate,"YYYY-MM-DD").toDate()],tickets:[]}),s[x].tickets.push({price:c.price})}),i.booked=i.id in l});let o=!a.description||a.description.startsWith("<!-- Content -->")?"text":"html",r=a.description?a.description.replace("<!-- Content -->",""):"";return Object.assign({},a,{description:r,descriptionMode:o,tags:a.tags.map(i=>i.name),organizerId:a.organizerId,periods:a.periods.map(i=>new Object({id:i.id,eventId:i.eventId,appleCalendarEventId:i.appleCalendarEventId,googleCalendarEventId:i.googleCalendarEventId,googleMeetUrl:i.googleMeetUrl,outlookCalendarEventId:i.outlookCalendarEventId,startDate:Ae(i.periodStart.split(" ")[0],"YYYY-MM-DD").toDate(),endDate:Ae(i.periodEnd.split(" ")[0],"YYYY-MM-DD").toDate(),startTime:i.periodStart.split(" ")[1].substring(0,5),endTime:i.periodEnd.split(" ")[1].substring(0,5)})),bookingOpens:{disabled:a.bookingOpens===null,date:a.bookingOpens?Ae(a.bookingOpens.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingOpens?a.bookingOpens.split(" ")[1].substring(0,5):null},bookingOpensRec:a.bookingOpensRec==="same",bookingCloses:{disabled:a.bookingCloses===null,date:a.bookingCloses?Ae(a.bookingCloses.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingCloses?a.bookingCloses.split(" ")[1].substring(0,5):null},bookingClosesRec:a.bookingClosesRec==="same",recurringEnabled:a.recurring&&a.recurring.cycle!==null,recurring:a.recurring!==null?Object.assign({},a.recurring,{until:a.recurring.until?Ae(a.recurring.until.split(" ")[0],"YYYY-MM-DD").toDate():null,monthDate:a.recurring.monthDate?Ae(a.recurring.monthDate.split(" ")[0],"YYYY-MM-DD").toDate():null}):e.recurring,depositEnabled:a.depositPayment!=="disabled",depositPayment:a.depositPayment!=="disabled"?a.depositPayment:"percentage",customTicketsRangesEnabled:s.length>0,customTicketsRanges:s,maxCustomCapacity:a.maxCustomCapacity===null?1:a.maxCustomCapacity,maxCustomCapacityEnabled:a.maxCustomCapacity!==null,closeAfterMinEnabled:a.closeAfterMin!==null,closeAfterMinBookings:a.closeAfterMinBookings,closeAfterMin:a.closeAfterMin===null?1:a.closeAfterMin,maxExtraPeopleEnabled:a.maxExtraPeople!==null,maxExtraPeople:a.maxExtraPeople===null?0:a.maxExtraPeople,locationId:a.locationId===null&&a.customLocation?0:a.locationId,settings:_s(lt,e.settings,a.settings?JSON.parse(a.settings):{},{})})}function i1(n){let a=n.getters["event/getDefaultEvent"],e=[];n.getters["event/getCustomTickets"].forEach((l,o)=>{let r=[];n.getters["event/getCustomTicketsRanges"].filter(i=>i.range[0]&&i.range[1]).forEach(i=>{r.push({startDate:Ae(i.range[0]).format("YYYY-MM-DD"),endDate:Ae(i.range[1]).format("YYYY-MM-DD"),price:i.tickets[o].price})}),e.push(Object.assign({},l,{dateRanges:JSON.stringify(r)}))});let s=_s(_s(lt,a.settings,{},{}),a.settings,n.getters["event/getSettings"],{});return Object.keys(n.getters["event/getSettings"]).forEach(l=>{Object.keys(n.getters["event/getSettings"][l]).forEach(o=>{n.getters["event/getSettings"][l][o]!==null&&typeof n.getters["event/getSettings"][l][o]=="object"?(Object.keys(n.getters["event/getSettings"][l][o]).forEach(r=>{(n.getters["event/getSettings"][l][o][r]===lt[l][o][r]||lt[l][o][r]&&(n.getters["event/getSettings"][l][o][r]===""||n.getters["event/getSettings"][l][o][r]===null))&&delete s[l][o][r]}),typeof s[l][o]=="object"&&Object.keys(s[l][o]).length===0&&delete s[l][o]):l in lt&&o in lt[l]&&(s[l][o]===lt[l][o]||lt[l][o]&&(n.getters["event/getSettings"][l][o]===""||n.getters["event/getSettings"][l][o]===null))&&delete s[l][o]}),Object.keys(s[l]).length===0&&delete s[l]}),{aggregatedPrice:n.getters["event/getAggregatedPrice"],bookMultipleTimes:n.getters["event/getBookMultipleTimes"],bookingCloses:!n.getters["event/getBookingClosesDisabled"]&&n.getters["event/getBookingClosesDate"]&&n.getters["event/getBookingClosesTime"]?Ae(n.getters["event/getBookingClosesDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingClosesTime"]+":00":null,bookingClosesRec:n.getters["event/getBookingClosesRec"]?"same":"calculate",bookingOpens:!n.getters["event/getBookingOpensDisabled"]&&n.getters["event/getBookingOpensDate"]&&n.getters["event/getBookingOpensTime"]?Ae(n.getters["event/getBookingOpensDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingOpensTime"]+":00":null,bookingOpensRec:n.getters["event/getBookingOpensRec"]?"same":"calculate",bringingAnyone:n.getters["event/getBringingAnyone"],closeAfterMin:n.getters["event/getCloseAfterMinEnabled"]?n.getters["event/getCloseAfterMin"]:null,closeAfterMinBookings:n.getters["event/getCloseAfterMinBookings"],color:n.getters["event/getColor"],customLocation:n.getters["event/getCustomLocation"],customPricing:n.getters["event/getCustomPricing"],customTickets:e,deposit:n.getters["event/getDeposit"],depositPayment:n.getters["event/getDepositEnabled"]?n.getters["event/getDepositPayment"]:"disabled",depositPerPerson:n.getters["event/getDepositPerPerson"],description:n.getters["event/getDescription"]&&n.getters["event/getDescriptionMode"]==="text"?"<!-- Content -->"+n.getters["event/getDescription"]:n.getters["event/getDescription"],fullPayment:n.getters["event/getFullPayment"],gallery:n.getters["event/getGallery"],id:n.getters["event/getId"],locationId:n.getters["event/getLocationId"]===0?null:n.getters["event/getLocationId"],maxCapacity:n.getters["event/getMaxCapacity"],maxCustomCapacity:n.getters["event/getMaxCustomCapacityEnabled"]?n.getters["event/getMaxCustomCapacity"]:null,maxExtraPeople:n.getters["event/getMaxExtraPeopleEnabled"]?n.getters["event/getMaxExtraPeople"]:null,name:n.getters["event/getName"],notifyParticipants:n.getters["event/getNotifyParticipants"],organizerId:n.getters["event/getOrganizerId"],parentId:n.getters["event/getParentId"],periods:wi(n),price:n.getters["event/getPrice"],providers:n.getters["event/getId"]?n.getters["event/getProviders"]:[{id:n.getters["auth/getProfile"].id,firstName:n.getters["auth/getProfile"].firstName,lastName:n.getters["auth/getProfile"].lastName,email:n.getters["auth/getProfile"].email,type:"provider"}],recurring:n.getters["event/getRecurringEnabled"]?Object.assign({},n.getters["event/getRecurring"],{until:Ae(n.getters["event/getRecurringUntil"]).format("YYYY-MM-DD"),monthDate:n.getters["event/getRecurringMonthDate"]?Ae(n.getters["event/getRecurringMonthDate"]).format("YYYY-MM-DD"):null}):null,settings:Object.keys(s).length?JSON.stringify(s):null,show:n.getters["event/getShow"],tags:n.getters["event/getTags"].map(l=>new Object({name:l})),timeZone:n.getters["cabinet/getTimeZone"],translations:n.getters["event/getTranslations"],utc:n.getters["cabinet/getTimeZone"]==="UTC",zoomUserId:n.getters["event/getZoomUserId"]}}function wi(n){return n.getters["event/getPeriods"].map(a=>new Object({id:a.id,eventId:a.eventId,appleCalendarEventId:a.appleCalendarEventId,googleCalendarEventId:a.googleCalendarEventId,googleMeetUrl:a.googleMeetUrl,outlookCalendarEventId:a.outlookCalendarEventId,microsoftTeamsUrl:a.microsoftTeamsUrl,periodStart:n.getters["cabinet/getTimeZone"]==="UTC"?Ae(a.startDate).utc().format("YYYY-MM-DD")+" "+a.startTime+":00":Ae(a.startDate).format("YYYY-MM-DD")+" "+a.startTime+":00",periodEnd:n.getters["cabinet/getTimeZone"]==="UTC"?Ae(a.endDate).utc().format("YYYY-MM-DD")+" "+a.endTime+":00":Ae(a.endDate).format("YYYY-MM-DD")+" "+a.endTime+":00"}))}const bl=tt(window.wpAmeliaLabels);function Cr(n,a={}){return Object.assign(a,{id:n.id,eventId:n.event.id,customer:n.customer,customerId:n.customer.id,persons:n.persons,customFields:n.customFields?JSON.parse(n.customFields):{},ticketsData:n.ticketsData,status:n.status,tax:n.tax,price:n.price,coupon:n.coupon,payments:n.payments,qrCodes:n.qrCodes})}function Pi(n){let a={};return Object.keys(n.getters["attendee/getCustomFields"]).forEach(e=>{a[e]={label:n.getters["attendee/getCustomFields"][e].label,type:n.getters["attendee/getCustomFields"][e].type,value:n.getters["attendee/getCustomFields"][e].type==="datepicker"?n.getters["attendee/getCustomFields"][e].value?Ae(n.getters["attendee/getCustomFields"][e].value).format("YYYY-MM-DD"):null:n.getters["attendee/getCustomFields"][e].value}}),{id:n.getters["attendee/getId"],type:"event",eventId:n.getters["attendee/getEventId"],bookings:[{customerId:n.getters["attendee/getCustomerId"],persons:n.getters["attendee/getPersons"],customFields:a,ticketsData:n.getters["attendee/getTickets"],status:n.getters["attendee/getStatus"],coupon:n.getters["attendee/getCoupon"]}],status:n.getters["attendee/getStatus"],validateCoupon:!1,isBackendOrCabinet:!0,createPaymentLinks:!1,payment:{gateway:"onSite"}}}function gs(n,a,e=null){let s=a.customFields,l=e&&e.customPricing?e.customTickets.map((o,r)=>new Object({eventTicketId:o.id,persons:r===0&&!Object.keys(a.ticketsData).length?1:0,price:o.price})):[];return e&&(n.getters["entities/getCustomFields"].filter(o=>o.allEvents||o.events.map(r=>r.id).indexOf(e.id)!==-1&&o.type!=="content"&&o.type!=="file").forEach(o=>{s[o.id]={type:o.type,label:o.label,value:o.id in s?s[o.id].value:o.type==="checkbox"||o.type==="file"?[]:"",width:o.width,options:o.options,id:o.id,required:o.required}}),e.customPricing&&Object.keys(a.ticketsData).forEach(o=>{let r=l.find(i=>i.eventTicketId===a.ticketsData[o].eventTicketId);r.id=a.ticketsData[o].id,r.persons=a.ticketsData[o].persons,r.price=a.ticketsData[o].price,r.customerBookingId=a.ticketsData[o].customerBookingId})),Object.assign({},a,{eventId:e?e.id:null,customFields:s,ticketsData:l})}function Ti(){return[{label:bl.approved,value:"approved",icon:"check",color:"var(--am-c-success)"},{label:bl.waiting,value:"waiting",icon:"clock",color:"var(--am-c-warning)"},{label:bl.canceled,value:"canceled",icon:"close",color:"var(--am-c-error)"},{label:bl["no-show"],value:"no-show",icon:"no-show",color:"#808A90"}]}function Li(n){let a=0;return n.getters["attendee/getTickets"].length?n.getters["attendee/getTickets"].forEach(e=>{e.persons&&(a+=n.getters["attendee/getAggregatedPrice"]?e.price*e.persons:e.price)}):a=n.getters["attendee/getAggregatedPrice"]?n.getters["attendee/getPrice"]*n.getters["attendee/getPersons"]:n.getters["attendee/getPrice"],io(null,n.getters["attendee/getCoupon"],n.getters["attendee/getTax"]&&n.getters["attendee/getTax"].length?n.getters["attendee/getTax"][0]:null,a,!1)}const c1=["innerHTML"],x1=["innerHTML"],u1={setup(n,{expose:a}){let e=Oe(),s=U("amLabels"),l=U("licence");const o=U("settings");let r=V(e.getters["entities/getLocations"]),i=V(e.getters["entities/getTags"]),c=V("");function x(P){c.value=P.toLowerCase()}let g=b(()=>c.value?i.value.filter(P=>P.name.toLowerCase().includes(c.value)):i.value),m=V(null),p=V({name:b({get:()=>e.getters["event/getName"],set:P=>{e.commit("event/setName",P)}}),locationId:b({get:()=>e.getters["event/getLocationId"],set:P=>{e.commit("event/setLocationId",P)}}),customLocation:b({get:()=>e.getters["event/getCustomLocation"],set:P=>{e.commit("event/setCustomLocation",P)}}),organizerId:b({get:()=>e.getters["event/getOrganizerId"],set:P=>{e.commit("event/setOrganizerId",P)}}),zoomUserId:b({get:()=>e.getters["event/getZoomUserId"],set:P=>{e.commit("event/setZoomUserId",P)}}),tags:b({get:()=>e.getters["event/getTags"],set:P=>{e.commit("event/setTags",P)}}),notifyParticipants:b({get:()=>e.getters["event/getNotifyParticipants"],set:P=>{e.commit("event/setNotifyParticipants",P)}}),description:b({get:()=>e.getters["event/getDescription"],set:P=>{e.commit("event/setDescription",P||"")}})}),y=b(()=>p.value.organizerId!==null);function T(P){e.commit("event/setOrganizerId",P?e.getters["auth/getProfile"].id:null)}let F=b(()=>({name:[{required:!0,message:s.value.please_enter_name,trigger:["submit","change"]}]})),E=b(()=>{let P=e.getters["auth/getZoomUsers"];return P.length?P.map(L=>({value:L.id,label:`${L.first_name} ${L.last_name} (${L.email})`})):[]});return a({detailsFormRef:m}),(P,L)=>{const D=vt,v=Ml,f=st;return u(),Y(f,{ref_key:"detailsFormRef",ref:m,model:t(p),rules:t(F),class:"am-capei-def"},{default:S(()=>[N(D,{prop:"name",label:`${t(s).name}:`,class:"am-capei-def__item"},{default:S(()=>[N(ct,{modelValue:t(p).name,"onUpdate:modelValue":L[0]||(L[0]=C=>t(p).name=C),placeholder:t(s).enter_event_name},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!t(l).isStarter&&t(r).length>1?(u(),Y(D,{key:0,label:`${t(s).event_select_address}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(p).locationId,"onUpdate:modelValue":L[1]||(L[1]=C=>t(p).locationId=C),placeholder:t(s).select},{default:S(()=>[(u(),Y(Ye,{key:0,value:0,label:t(s).event_custom_address},null,8,["label"])),(u(!0),A(ne,null,ve(t(r),C=>(u(),Y(Ye,{key:C.id,value:C.id,label:C.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),t(p).locationId?$("",!0):(u(),Y(D,{key:1,label:`${t(s).event_custom_address}:`,class:"am-capei-def__item"},{default:S(()=>[N(ct,{modelValue:t(p).customLocation,"onUpdate:modelValue":L[2]||(L[2]=C=>t(p).customLocation=C)},null,8,["modelValue"])]),_:1},8,["label"])),t(o).zoom.enabled?(u(),Y(D,{key:2,label:`${t(s).zoom_user}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(p).zoomUserId,"onUpdate:modelValue":L[3]||(L[3]=C=>t(p).zoomUserId=C),clearable:"",placeholder:t(s).zoom_user_placeholder},{default:S(()=>[(u(!0),A(ne,null,ve(t(E),C=>(u(),Y(Ye,{key:C.value,value:C.value,label:C.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0),!t(l).isStarter&&(t(o).googleCalendar.enabled||t(o).outlookCalendar.enabled||t(o).appleCalendar)&&(t(e).getters["employee/getGoogleCalendarId"]||t(e).getters["employee/getOutlookCalendarId"]||t(e).getters["employee/getAppleCalendarId"])?(u(),Y(D,{key:3,class:"am-capei-def__item am-capei-def__item-tool"},{default:S(()=>[N(rt,{modelValue:t(y),"onUpdate:modelValue":L[4]||(L[4]=C=>Fe(y)?y.value=C:y=C),disabled:t(p).organizerId&&t(p).organizerId!==t(e).getters["auth/getProfile"].id,"active-text":t(s).event_organizer,"aria-label":t(s).event_organizer,onChange:T},null,8,["modelValue","disabled","active-text","aria-label"]),N(v,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(s).event_organizer_tooltip},null,8,c1)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1})):$("",!0),N(D,{label:`${t(s).event_tags}:`,class:"am-capei-def__item"},{default:S(()=>[N(Je,{modelValue:t(p).tags,"onUpdate:modelValue":L[5]||(L[5]=C=>t(p).tags=C),clearable:"",filterable:"",multiple:"","allow-create":!0,placeholder:t(s).event_tags_select_or_create,"filter-method":x},{default:S(()=>[(u(!0),A(ne,null,ve(t(g),(C,B)=>(u(),Y(Ye,{key:B,value:C.name,label:C.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),N(D,{class:"am-capei-def__item am-capei-def__item-tool"},{default:S(()=>[N(rt,{modelValue:t(p).notifyParticipants,"onUpdate:modelValue":L[6]||(L[6]=C=>t(p).notifyParticipants=C),"active-text":t(s).notify_attendees,"aria-label":t(s).notify_attendees},null,8,["modelValue","active-text","aria-label"]),N(v,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(s).notify_attendees_tooltip},null,8,x1)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1}),N(D,{prop:"description",label:t(s).description_colon,class:"am-capei-def__item"},{default:S(()=>[N(pi,{modelValue:t(p).description,"onUpdate:modelValue":L[7]||(L[7]=C=>t(p).description=C),mode:t(e).getters["event/getDescriptionMode"],onSetMode:L[8]||(L[8]=C=>t(e).commit("event/setDescriptionMode",C))},null,8,["modelValue","mode"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};const d1={class:"am-capei-per__segment"},m1={key:0,class:"am-capei-per__delete"},p1={class:"am-capei-per__segment"},f1=["innerHTML"],g1={class:"am-capei-per__segment"},h1=["innerHTML"],v1={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe(),o=U("settings");let r=U("amLabels"),i=U("localLanguage"),c=V(at());function x(D){let v=E.value.periods.map(f=>f.endDate).filter(f=>f instanceof Date&&!isNaN(f));return at(D)<c.value||at(D)>at(new Date(Math.max(...v)))}function g(D,v){const f=at(D)<c.value;return(v?at(D)>at(v):!1)||f}function m(D,v){return v?at(D)<at(v):at(D)<c.value}function p(){let D=!0;F.value.validate(v=>{v||(D=!1)}),D&&E.value.periods.push({eventId:l.getters["event/getId"]?l.getters["event/getId"]:null,startDate:null,endDate:null,startTime:null,endTime:null})}function y(D){l.getters["event/getId"]&&E.value.periods[D]?.id&&E.value.periods[D].id&&E.value.periods.forEach((v,f)=>{f!==D&&!v?.id&&(E.value.periods[f].id=E.value.periods[D].id,E.value.periods[f].eventId=E.value.periods[D].eventId,E.value.periods[f].appleCalendarEventId=E.value.periods[D].appleCalendarEventId,E.value.periods[f].googleCalendarEventId=E.value.periods[D].googleCalendarEventId,E.value.periods[f].googleMeetUrl=E.value.periods[D].googleMeetUrl,E.value.periods[f].outlookCalendarEventId=E.value.periods[D].outlookCalendarEventId,E.value.periods[f].microsoftTeamsUrl=E.value.periods[D].microsoftTeamsUrl)}),E.value.periods.splice(D,1)}let T=b(()=>l.getters["event/getRecurringEnabled"]),F=V(null),E=V({periods:b({get:()=>l.getters["event/getPeriods"],set:D=>{l.commit("event/setPeriods",D)}}),bookingOpensDisabled:b({get:()=>l.getters["event/getBookingOpensDisabled"],set:D=>{l.commit("event/setBookingOpensDisabled",D)}}),bookingOpensDate:b({get:()=>l.getters["event/getBookingOpensDate"],set:D=>{l.commit("event/setBookingOpensDate",D)}}),bookingOpensTime:b({get:()=>l.getters["event/getBookingOpensTime"],set:D=>{l.commit("event/setBookingOpensTime",D)}}),bookingOpensRec:b({get:()=>l.getters["event/getBookingOpensRec"],set:D=>{l.commit("event/setBookingOpensRec",D)}}),bookingClosesDisabled:b({get:()=>l.getters["event/getBookingClosesDisabled"],set:D=>{l.commit("event/setBookingClosesDisabled",D)}}),bookingClosesDate:b({get:()=>l.getters["event/getBookingClosesDate"],set:D=>{l.commit("event/setBookingClosesDate",D)}}),bookingClosesTime:b({get:()=>l.getters["event/getBookingClosesTime"],set:D=>{l.commit("event/setBookingClosesTime",D)}}),bookingClosesRec:b({get:()=>l.getters["event/getBookingClosesRec"],set:D=>{l.commit("event/setBookingClosesRec",D)}})});a({periodsFormRef:F});let P=U("amColors"),L=b(()=>({"--am-c-capei-per-text":P.value.colorMainText,"--am-c-capei-per-text-op03":K(P.value.colorMainText,.03),"--am-c-capei-per-inp-bgr-op03":K(P.value.colorInpBgr,.03)}));return(D,v)=>{const f=vt,C=Ml,B=st;return u(),Y(B,{ref_key:"periodsFormRef",ref:F,model:t(E),"label-position":"top",class:"am-capei-per",style:Be(t(L))},{default:S(()=>[d("div",d1,[(u(!0),A(ne,null,ve(t(E).periods,(_,k)=>(u(),A(ne,{key:k},[N(f,{prop:"periods."+k+".startDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},label:`${t(r).start_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:_.startDate,"onUpdate:modelValue":R=>_.startDate=R,format:t(Kt)(),lang:t(i),"disabled-date":R=>g(R,_.endDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),N(f,{prop:"periods."+k+".endDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},label:`${t(r).end_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:_.endDate,"onUpdate:modelValue":R=>_.endDate=R,format:t(Kt)(),lang:t(i),"disabled-date":R=>m(R,_.startDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),N(f,{prop:"periods."+k+".startTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},label:`${t(r).start_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Da,{modelValue:_.startTime,"onUpdate:modelValue":R=>_.startTime=R,start:"00:00",end:t(Mt)(t(Ut)("24:00")-t(o).general.timeSlotLength),"min-time":null,"max-time":_.endTime,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","onUpdate:modelValue","end","max-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),N(f,{prop:"periods."+k+".endTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},label:`${t(r).end_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Da,{modelValue:_.endTime,"onUpdate:modelValue":R=>_.endTime=R,disabled:!_.startTime,start:"00:00",end:"24:00","min-time":_.startTime,"max-time":null,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","onUpdate:modelValue","disabled","min-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),t(E).periods.length>1?(u(),A("div",m1,[N(ke,{size:"default",category:"danger",onClick:R=>y(k)},{default:S(()=>[ue(w(t(r).delete_period),1)]),_:2},1032,["onClick"])])):$("",!0)],64))),128)),N(ke,{size:"default",onClick:v[0]||(v[0]=_=>p())},{default:S(()=>[ue(w(t(r).add_period),1)]),_:1})]),d("div",p1,[N(ht,{modelValue:t(E).bookingOpensDisabled,"onUpdate:modelValue":v[1]||(v[1]=_=>t(E).bookingOpensDisabled=_),label:t(r).event_booking_opens_now},null,8,["modelValue","label"]),t(E).bookingOpensDisabled?$("",!0):(u(),A(ne,{key:0},[N(f,{label:`${t(r).date}:`,prop:"bookingOpensDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:t(E).bookingOpensDate,"onUpdate:modelValue":v[2]||(v[2]=_=>t(E).bookingOpensDate=_),format:t(Kt)(),lang:t(i),"disabled-date":x},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),N(f,{label:`${t(r).time}:`,prop:"bookingOpensTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Da,{modelValue:t(E).bookingOpensTime,"onUpdate:modelValue":v[3]||(v[3]=_=>t(E).bookingOpensTime=_),placeholder:t(r).select_time,step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1},null,8,["modelValue","placeholder","step"])]),_:1},8,["label","rules","class"])],64)),t(T)?(u(),Y(ht,{key:1,modelValue:t(E).bookingOpensRec,"onUpdate:modelValue":v[4]||(v[4]=_=>t(E).bookingOpensRec=_)},{default:S(()=>[ue(w(t(r).apply_to_all)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(r).event_booking_closes_apply},null,8,f1)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):$("",!0)]),d("div",g1,[N(ht,{modelValue:t(E).bookingClosesDisabled,"onUpdate:modelValue":v[5]||(v[5]=_=>t(E).bookingClosesDisabled=_),label:t(r).event_booking_closes_after},null,8,["modelValue","label"]),t(E).bookingClosesDisabled?$("",!0):(u(),A(ne,{key:0},[N(f,{label:`${t(r).date}:`,prop:"bookingClosesDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(ea,{modelValue:t(E).bookingClosesDate,"onUpdate:modelValue":v[6]||(v[6]=_=>t(E).bookingClosesDate=_),format:t(Kt)(),lang:t(i),"disabled-date":x},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),N(f,{label:`${t(r).time}:`,prop:"bookingClosesTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:S(()=>[N(Da,{modelValue:t(E).bookingClosesTime,"onUpdate:modelValue":v[7]||(v[7]=_=>t(E).bookingClosesTime=_),step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","step","placeholder"])]),_:1},8,["label","rules","class"])],64)),t(T)?(u(),Y(ht,{key:1,modelValue:t(E).bookingClosesRec,"onUpdate:modelValue":v[8]||(v[8]=_=>t(E).bookingClosesRec=_)},{default:S(()=>[ue(w(t(r).apply_to_all)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(r).event_booking_closes_apply},null,8,h1)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):$("",!0)])]),_:1},8,["model","style"])}}};const E1={class:"am-capei-recurr__header"},_1={class:"am-capei-recurr__header-text"},C1={props:{pageWidth:{type:Number,default:0},recurringUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe();let o=U("amLabels"),r=U("localLanguage"),i=V([{label:o.value.day,value:"daily"},{label:o.value.week,value:"weekly"},{label:o.value.month,value:"monthly"},{label:o.value.year,value:"yearly"}]),c=V([{label:o.value.recurring_date_first,value:"first"},{label:o.value.recurring_date_second,value:"second"},{label:o.value.recurring_date_third,value:"third"},{label:o.value.recurring_date_fourth,value:"fourth"},{label:o.value.recurring_date_fifth,value:"fifth"},{label:o.value.recurring_date_last,value:"last"}]),x=[{label:o.value.weekday_monday,value:"monday"},{label:o.value.weekday_tuesday,value:"tuesday"},{label:o.value.weekday_wednesday,value:"wednesday"},{label:o.value.weekday_thursday,value:"thursday"},{label:o.value.weekday_friday,value:"friday"},{label:o.value.weekday_saturday,value:"saturday"},{label:o.value.weekday_sunday,value:"sunday"}],g=V(null),m=V({enabled:b({get:()=>l.getters["event/getRecurringEnabled"],set:L=>{l.commit("event/setRecurringEnabled",L)}}),cycle:b({get:()=>l.getters["event/getRecurringCycle"],set:L=>{l.commit("event/setRecurringCycle",L)}}),cycleInterval:b({get:()=>l.getters["event/getRecurringCycleInterval"],set:L=>{l.commit("event/setRecurringCycleInterval",L)}}),monthDate:b({get:()=>l.getters["event/getRecurringMonthDate"],set:L=>{l.commit("event/setRecurringMonthDate",L)}}),monthlyOnDay:b({get:()=>l.getters["event/getRecurringMonthlyOnDay"],set:L=>{l.commit("event/setRecurringMonthlyOnDay",L)}}),monthlyOnRepeat:b({get:()=>l.getters["event/getRecurringMonthlyOnRepeat"],set:L=>{l.commit("event/setRecurringMonthlyOnRepeat",L)}}),monthlyRepeat:b({get:()=>l.getters["event/getRecurringMonthlyRepeat"],set:L=>{l.commit("event/setRecurringMonthlyRepeat",L)}}),order:b({get:()=>l.getters["event/getRecurringOrder"],set:L=>{l.commit("event/setRecurringOrder",L)}}),until:b({get:()=>l.getters["event/getRecurringUntil"],set:L=>{l.commit("event/setRecurringUntil",L)}})}),p=b(()=>({cycle:[{required:!0,message:o.value.select_cycle_warning,trigger:["submit","change"]}],until:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],monthDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}]})),y=b(()=>l.getters["event/getPeriods"]),T=b(()=>e.recurringUntil!==null?e.recurringUntil:y.value.length?at(y.value[0].startDate,"YYYY-MM-DD"):at());function F(L){return at(L)<=T.value}a({recurringFormRef:g});let E=U("amColors"),P=b(()=>({"--am-c-capei-recurr-text":E.value.colorMainText,"--am-c-capei-recurr-text-op03":K(E.value.colorMainText,.03),"--am-c-capei-recurr-inp-bgr-op03":K(E.value.colorInpBgr,.03),"--am-c-capei-recurr-bgr-op03":K(E.value.colorMainText,.03)}));return(L,D)=>{const v=vt,f=st;return u(),A("div",{class:"am-capei-recurr",style:Be(t(P))},[d("div",E1,[d("div",_1,w(t(o).event_recurring_check),1),N(rt,{modelValue:t(m).enabled,"onUpdate:modelValue":D[0]||(D[0]=C=>t(m).enabled=C),disabled:!t(y).length||!t(y)[0].startDate||!t(y)[0].endDate,"aria-label":t(o).event_recurring_check},null,8,["modelValue","disabled","aria-label"])]),t(m).enabled&&t(y).length&&t(y)[0].startDate&&t(y)[0].endDate?(u(),Y(f,{key:0,ref_key:"recurringFormRef",ref:g,rules:t(p),model:t(m),"label-position":"top",class:"am-capei-recurr__form"},{default:S(()=>[N(v,{label:`${t(o).repeat_every}`,class:j(["am-capei-recurr__form-item am-ws-150",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(m).cycleInterval,"onUpdate:modelValue":D[1]||(D[1]=C=>t(m).cycleInterval=C),min:1,disabled:t(e).recurringUntil!==null},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),N(v,{prop:"cycle",class:j(["am-capei-recurr__form-item am-inline-ws-150 am-align-end",t(s)])},{default:S(()=>[N(Je,{modelValue:t(m).cycle,"onUpdate:modelValue":D[2]||(D[2]=C=>t(m).cycle=C),clearable:"",placeholder:t(o).select_repeat_period,disabled:t(e).recurringUntil!==null},{default:S(()=>[(u(!0),A(ne,null,ve(t(i),(C,B)=>(u(),Y(Ye,{key:B,value:C.value,label:C.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["class"]),t(m).cycle==="monthly"?(u(),Y(Vl,{key:0,modelValue:t(m).monthlyRepeat,"onUpdate:modelValue":D[5]||(D[5]=C=>t(m).monthlyRepeat=C),class:"am-w-100",disabled:t(e).recurringUntil!==null},{default:S(()=>[N(v,{class:"am-capei-recurr__form-item"},{default:S(()=>[N(La,{value:"each"},{default:S(()=>[ue(w(t(o).recurrence_each),1)]),_:1})]),_:1}),N(v,{prop:"on",class:"am-capei-recurr__form-item"},{default:S(()=>[N(La,{value:"on"},{default:S(()=>[ue(w(t(o).recurrence_on),1)]),_:1})]),_:1}),N(v,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(m).monthlyOnRepeat,"onUpdate:modelValue":D[3]||(D[3]=C=>t(m).monthlyOnRepeat=C),disabled:t(m).monthlyRepeat==="each"||t(e).recurringUntil!==null,placeholder:t(o).select_repeat_period},{default:S(()=>[(u(!0),A(ne,null,ve(t(c),(C,B)=>(u(),Y(Ye,{key:B,value:C.value,label:C.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"]),N(v,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(m).monthlyOnDay,"onUpdate:modelValue":D[4]||(D[4]=C=>t(m).monthlyOnDay=C),disabled:t(m).monthlyRepeat==="each",placeholder:t(o).select_repeat_period},{default:S(()=>[(u(!0),A(ne,null,ve(t(x),(C,B)=>(u(),Y(Ye,{key:B,value:C.value,label:C.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"])]),_:1},8,["modelValue","disabled"])):$("",!0),N(v,{label:t(o).event_recurring_until,prop:"until",class:"am-capei-recurr__form-item"},{default:S(()=>[N(ea,{modelValue:t(m).until,"onUpdate:modelValue":D[6]||(D[6]=C=>t(m).until=C),format:t(Kt)(),lang:t(r),"disabled-date":F,placeholder:t(o).select_date},null,8,["modelValue","format","lang","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])):$("",!0)],4)}}};const y1={class:"am-capei-price__heading"},b1={key:0,class:"am-capei-price__segment"},B1={key:0,class:"am-capei-price__block"},A1={class:"am-capei-price__block-header"},F1={class:"am-capei-price__block-header__text"},k1={key:1,class:"am-capei-price__segment"},D1={key:1,class:"am-capei-price__block"},w1={class:"am-capei-price__block-header"},P1={class:"am-capei-price__block-header__text"},T1={key:0,class:"am-capei-price__block-heading am-pl-32 am-pr-44"},L1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-40"},S1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},I1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},$1={key:1,class:"am-separator am-order-6"},N1=d("div",{class:"am-separator"},null,-1),O1={class:"am-capei-price__part"},M1=d("div",{class:"am-separator"},null,-1),V1={class:"am-capei-price__block-header"},R1={class:"am-capei-price__block-header__text"},q1={key:1,class:"am-capei-price__block-segment"},U1={key:0,class:"am-capei-price__block-heading"},z1={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},j1={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},Y1=d("div",{class:"am-separator"},null,-1),W1={key:2,class:"am-capei-price__block"},H1={class:"am-capei-price__block-header"},G1={class:"am-capei-price__block-header__text"},Z1={key:0,class:"am-capei-price__part"},J1={key:3,class:"am-capei-price__block"},X1={class:"am-capei-price__block-header"},Q1={class:"am-capei-price__block-header__text"},K1={key:0,class:"am-capei-price__part"},ev={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth)),l=Oe(),o=U("amLabels");const r=U("settings");let i=U("localLanguage"),c=U("licence"),x={components:{IconComponent:Ze},template:'<IconComponent icon="plus"/>'};function g(_){let k=Ae(_),R=!1;if(f.value.customTicketsRanges.forEach(H=>{!R&&H.range[0]&&H.range[1]&&(R=Ae(H.range[0])<=k&&Ae(H.range[1])>=k)}),R)return!0;let M=l.getters["event/getBookingOpensDisabled"]?Ae():Ae(l.getters["event/getBookingOpensDate"]),O=l.getters["event/getBookingClosesDisabled"]?l.getters["event/getPeriods"][0].startDate?Ae(l.getters["event/getPeriods"][0].startDate,"YYYY-MM-DD"):Ae():Ae(l.getters["event/getBookingClosesDate"]);return k<M||k>O}let m=b(()=>l.getters["event/getEvent"]),p=b(()=>f.value.customPricing?f.value.customTickets.reduce((_,k)=>_+k.spots,0)>1:f.value.maxCapacity>1),y=b(()=>f.value.customPricing?f.value.customTickets.reduce((_,k)=>_+k.spots,0):0),T=b(()=>f.value.customPricing&&f.value.maxCustomCapacityEnabled?f.value.maxCustomCapacity:f.value.customPricing?y.value:f.value.maxCapacity);function F(){f.value.customPricing&&f.value.customTickets.length===0&&P()}function E(_){f.value.customTickets.splice(_,1)}function P(){f.value.customTickets.push({enabled:!0,name:"",spots:1,waitingListSpots:0,price:0}),f.value.customTicketsRanges.forEach(_=>{_.tickets.push(new Object({price:0}))})}function L(_){f.value.customTicketsRanges.splice(_,1)}function D(){f.value.customTicketsRanges.push({range:["",""],tickets:f.value.customTickets.map(_=>new Object({price:_.price}))})}const v=V(null);let f=V({price:b({get:()=>l.getters["event/getPrice"],set:_=>{l.commit("event/setPrice",_)}}),maxCapacity:b({get:()=>l.getters["event/getMaxCapacity"],set:_=>{l.commit("event/setMaxCapacity",_)}}),bringingAnyone:b({get:()=>l.getters["event/getBringingAnyone"],set:_=>{l.commit("event/setBringingAnyone",_)}}),aggregatedPrice:b({get:()=>l.getters["event/getAggregatedPrice"],set:_=>{l.commit("event/setAggregatedPrice",_)}}),bookMultipleTimes:b({get:()=>l.getters["event/getBookMultipleTimes"],set:_=>{l.commit("event/setBookMultipleTimes",_)}}),depositEnabled:b({get:()=>l.getters["event/getDepositEnabled"],set:_=>{l.commit("event/setDepositEnabled",_)}}),deposit:b({get:()=>l.getters["event/getDeposit"],set:_=>{l.commit("event/setDeposit",_)}}),depositPayment:b({get:()=>l.getters["event/getDepositPayment"],set:_=>{l.commit("event/setDepositPayment",_)}}),depositPerPerson:b({get:()=>l.getters["event/getDepositPerPerson"],set:_=>{l.commit("event/setDepositPerPerson",_)}}),fullPayment:b({get:()=>l.getters["event/getFullPayment"],set:_=>{l.commit("event/setFullPayment",_)}}),customPricing:b({get:()=>l.getters["event/getCustomPricing"],set:_=>{l.commit("event/setCustomPricing",_)}}),customTickets:b({get:()=>l.getters["event/getCustomTickets"],set:_=>{l.commit("event/setCustomTickets",_)}}),customTicketsRangesEnabled:b({get:()=>l.getters["event/getCustomTicketsRangesEnabled"],set:_=>{l.commit("event/setCustomTicketsRangesEnabled",_)}}),customTicketsRanges:b({get:()=>l.getters["event/getCustomTicketsRanges"],set:_=>{l.commit("event/setCustomTicketsRanges",_)}}),maxCustomCapacityEnabled:b({get:()=>l.getters["event/getMaxCustomCapacityEnabled"],set:_=>{l.commit("event/setMaxCustomCapacityEnabled",_)}}),maxCustomCapacity:b({get:()=>l.getters["event/getMaxCustomCapacity"],set:_=>{l.commit("event/setMaxCustomCapacity",_)}}),closeAfterMinEnabled:b({get:()=>l.getters["event/getCloseAfterMinEnabled"],set:_=>{l.commit("event/setCloseAfterMinEnabled",_)}}),closeAfterMin:b({get:()=>l.getters["event/getCloseAfterMin"],set:_=>{l.commit("event/setCloseAfterMin",_)}}),closeAfterMinBookings:b({get:()=>l.getters["event/getCloseAfterMinBookings"],set:_=>{l.commit("event/setCloseAfterMinBookings",_)}}),maxExtraPeopleEnabled:b({get:()=>l.getters["event/getMaxExtraPeopleEnabled"],set:_=>{l.commit("event/setMaxExtraPeopleEnabled",_)}}),maxExtraPeople:b({get:()=>l.getters["event/getMaxExtraPeople"],set:_=>{l.commit("event/setMaxExtraPeople",_)}})});a({pricingFormRef:v});let C=U("amColors"),B=b(()=>({"--am-c-capei-price-text":C.value.colorMainText,"--am-c-capei-price-text-op03":K(C.value.colorMainText,.03),"--am-c-capei-price-inp-bgr-op03":K(C.value.colorInpBgr,.03)}));return(_,k)=>{const R=vt,M=st;return u(),Y(M,{ref_key:"pricingFormRef",ref:v,model:t(f),style:Be(t(B)),class:"am-capei-price"},{default:S(()=>[d("div",y1,[N(R,{label:`${t(o).price}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(ct,{modelValue:t(f).price,"onUpdate:modelValue":k[0]||(k[0]=O=>t(f).price=O),disabled:t(f).customPricing,"is-money":!0},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),N(R,{label:`${t(o).event_max_capacity}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(f).maxCapacity,"onUpdate:modelValue":k[1]||(k[1]=O=>t(f).maxCapacity=O),disabled:t(f).customPricing,min:1},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),t(p)?(u(),A("div",b1,[N(ht,{modelValue:t(f).bringingAnyone,"onUpdate:modelValue":k[2]||(k[2]=O=>t(f).bringingAnyone=O),label:t(o).event_bringing_anyone},null,8,["modelValue","label"]),t(f).bringingAnyone?(u(),Y(ht,{key:0,modelValue:t(f).aggregatedPrice,"onUpdate:modelValue":k[3]||(k[3]=O=>t(f).aggregatedPrice=O),label:t(o).event_aggregated_price},null,8,["modelValue","label"])):$("",!0),N(ht,{modelValue:t(f).bookMultipleTimes,"onUpdate:modelValue":k[4]||(k[4]=O=>t(f).bookMultipleTimes=O),label:t(o).event_book_more_than_once},null,8,["modelValue","label"])])):$("",!0)]),t(r).featuresIntegrations.depositPayment.enabled&&!t(c).isStarter?(u(),A("div",B1,[d("div",A1,[d("div",F1,w(t(o).deposit_enabled),1),N(rt,{modelValue:t(f).depositEnabled,"onUpdate:modelValue":k[5]||(k[5]=O=>t(f).depositEnabled=O),"aria-label":t(o).deposit_enabled},null,8,["modelValue","aria-label"])]),t(f).depositEnabled?(u(),A(ne,{key:0},[N(R,{label:`${t(o).deposit_payment}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Je,{modelValue:t(f).depositPayment,"onUpdate:modelValue":k[6]||(k[6]=O=>t(f).depositPayment=O)},{default:S(()=>[N(Ye,{value:"percentage",label:t(o).amount_percentage},null,8,["label"]),N(Ye,{value:"fixed",label:t(o).amount_fixed},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","class"]),t(f).depositPayment==="fixed"?(u(),Y(R,{key:0,label:`${t(o).amount} (${t(c0)()}):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(ct,{modelValue:t(f).deposit,"onUpdate:modelValue":k[7]||(k[7]=O=>t(f).deposit=O),"is-money":!0},null,8,["modelValue"])]),_:1},8,["label","class"])):$("",!0),t(f).depositPayment==="percentage"?(u(),Y(R,{key:1,label:`${t(o).amount} (%):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(f).deposit,"onUpdate:modelValue":k[8]||(k[8]=O=>t(f).deposit=O),min:1,max:100},null,8,["modelValue"])]),_:1},8,["label","class"])):$("",!0)],64)):$("",!0),t(f).depositEnabled?(u(),A("div",k1,[N(ht,{modelValue:t(f).depositPerPerson,"onUpdate:modelValue":k[9]||(k[9]=O=>t(f).depositPerPerson=O),label:t(o).deposit_per_person},null,8,["modelValue","label"]),N(ht,{modelValue:t(f).fullPayment,"onUpdate:modelValue":k[10]||(k[10]=O=>t(f).fullPayment=O),label:t(o).allow_total_event_amount},null,8,["modelValue","label"])])):$("",!0)])):$("",!0),(t(m).id||t(r).featuresIntegrations.tickets.enabled)&&!t(c).isStarter?(u(),A("div",D1,[d("div",w1,[d("div",P1,w(t(o).custom_pricing_enabled),1),N(rt,{modelValue:t(f).customPricing,"onUpdate:modelValue":k[11]||(k[11]=O=>t(f).customPricing=O),disabled:t(m).bookings&&t(m).bookings.length>0,"aria-label":t(o).custom_pricing_enabled,onChange:F},null,8,["modelValue","disabled","aria-label"])]),t(f).customPricing?(u(),A(ne,{key:0},[e.pageWidth>545?(u(),A("div",T1,[d("div",L1,w(t(o).name)+": ",1),d("div",S1,w(t(o).price)+": ",1),d("div",I1,w(t(o).spots)+": ",1)])):$("",!0),(u(!0),A(ne,null,ve(t(f).customTickets,(O,H)=>(u(),A("div",{key:H,class:"am-capei-price__block-segment am-custom-76"},[d("div",{class:j(["am-capei-price__block-inner am-ws-16",{"am-mt-22":e.pageWidth<546}])},[N(R,null,{default:S(()=>[N(ht,{modelValue:O.enabled,"onUpdate:modelValue":z=>O.enabled=z},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],2),d("div",{class:j(["am-capei-price__block-inner",[{"am-we-40":e.pageWidth>545},{"am-we-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:S(()=>[N(ct,{modelValue:O.name,"onUpdate:modelValue":z=>O.name=z,disabled:!O.enabled,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),d("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-2":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[N(R,{label:e.pageWidth<546?t(o).price:""},{default:S(()=>[N(ct,{modelValue:O.price,"onUpdate:modelValue":z=>O.price=z,disabled:!O.enabled,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),d("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-3":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[N(R,{label:e.pageWidth<546?`${t(o).spots}:`:""},{default:S(()=>[N(Ct,{modelValue:O.spots,"onUpdate:modelValue":z=>O.spots=z,min:1,disabled:!O.enabled||t(f).maxCustomCapacityEnabled,"aria-label":t(o).spots},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),!O.booked&&t(f).customTickets.length>1?(u(),A("div",{key:0,class:j(["am-capei-price__block-delete",{"am-order-1 am-mt-22":e.pageWidth<546}])},[N(ke,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ze},template:"<IconComponent icon='bucket'/>"},onClick:z=>E(H)},null,8,["icon","onClick"])],2)):$("",!0),e.pageWidth<546?(u(),A("div",$1)):$("",!0)]))),128)),N(ke,{icon:t(x),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:P},{default:S(()=>[ue(w(t(o).add_ticket_category),1)]),_:1},8,["icon"]),N1,d("div",O1,[d("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[N(ht,{modelValue:t(f).maxCustomCapacityEnabled,"onUpdate:modelValue":k[12]||(k[12]=O=>t(f).maxCustomCapacityEnabled=O),label:`${t(o).event_max_capacity}:`},null,8,["modelValue","label"])],2),d("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[N(Ct,{modelValue:t(f).maxCustomCapacity,"onUpdate:modelValue":k[13]||(k[13]=O=>t(f).maxCustomCapacity=O),min:1,disabled:!t(f).maxCustomCapacityEnabled},null,8,["modelValue","disabled"])],2)]),M1,d("div",V1,[d("div",R1,w(t(o).pricing_by_date_enabled),1),N(rt,{modelValue:t(f).customTicketsRangesEnabled,"onUpdate:modelValue":k[14]||(k[14]=O=>t(f).customTicketsRangesEnabled=O),"aria-label":t(o).pricing_by_date_enabled},null,8,["modelValue","aria-label"])]),t(f).customTicketsRangesEnabled?(u(),A("div",q1,[(u(!0),A(ne,null,ve(t(f).customTicketsRanges,(O,H)=>(u(),A(ne,{key:H},[N(R,{label:`${t(o).event_date_range}:`,class:"am-capei-price__date-range"},{default:S(()=>[N(ea,{modelValue:O.range,"onUpdate:modelValue":z=>O.range=z,type:"daterange",format:t(Kt)(),placeholder:"Pick a day",lang:t(i),"disabled-date":g,"start-placeholder":t(o).start_date,"end-placeholder":t(o).end_date},null,8,["modelValue","onUpdate:modelValue","format","lang","start-placeholder","end-placeholder"]),N(ke,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ze},template:"<IconComponent icon='bucket'/>"},"aria-label":t(o).delete,onClick:z=>L(H)},null,8,["icon","aria-label","onClick"])]),_:2},1032,["label"]),e.pageWidth>545?(u(),A("div",U1,[d("div",z1,w(t(o).name)+": ",1),d("div",j1,w(t(o).price)+": ",1)])):$("",!0),(u(!0),A(ne,null,ve(t(f).customTickets,(z,J)=>(u(),A(ne,{key:J},[d("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:S(()=>[N(ct,{modelValue:z.name,"onUpdate:modelValue":oe=>z.name=oe,disabled:!0,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2),d("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[N(R,{label:e.pageWidth<546?`${t(o).price}:`:""},{default:S(()=>[N(ct,{modelValue:O.tickets[J].price,"onUpdate:modelValue":oe=>O.tickets[J].price=oe,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2)],64))),128)),Y1],64))),128)),N(ke,{icon:t(x),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:D},{default:S(()=>[ue(w(t(o).event_add_date_range),1)]),_:1},8,["icon"])])):$("",!0)],64)):$("",!0)])):$("",!0),t(f).maxCapacity>1||t(f).maxCustomCapacity>1||t(y)>1?(u(),A("div",W1,[d("div",H1,[d("div",G1,w(t(o).event_close_after_min),1),N(rt,{modelValue:t(f).closeAfterMinEnabled,"onUpdate:modelValue":k[15]||(k[15]=O=>t(f).closeAfterMinEnabled=O),"aria-label":t(o).event_close_after_min},null,8,["modelValue","aria-label"])]),t(f).closeAfterMinEnabled&&(t(f).maxCapacity>1||t(f).maxCustomCapacity>1||t(y)>1)?(u(),A("div",Z1,[N(Vl,{modelValue:t(f).closeAfterMinBookings,"onUpdate:modelValue":k[16]||(k[16]=O=>t(f).closeAfterMinBookings=O),class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:S(()=>[N(La,{value:!1},{default:S(()=>[ue(w(t(o).event_close_min_total),1)]),_:1}),N(La,{value:!0},{default:S(()=>[ue(w(t(o).event_close_min_bookings),1)]),_:1})]),_:1},8,["modelValue","class"]),N(R,{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:S(()=>[N(Ct,{modelValue:t(f).closeAfterMin,"onUpdate:modelValue":k[17]||(k[17]=O=>t(f).closeAfterMin=O),min:1,max:t(T)},null,8,["modelValue","max"])]),_:1},8,["class"])])):$("",!0)])):$("",!0),t(f).maxCapacity>1||t(f).maxCustomCapacity>1||t(y)>1?(u(),A("div",J1,[d("div",X1,[d("div",Q1,w(t(o).limit_extra_people),1),N(rt,{modelValue:t(f).maxExtraPeopleEnabled,"onUpdate:modelValue":k[18]||(k[18]=O=>t(f).maxExtraPeopleEnabled=O),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(f).maxExtraPeopleEnabled&&(t(f).maxCapacity>1||t(f).maxCustomCapacity>1||t(y)>1)?(u(),A("div",K1,[N(R,{label:`${t(o).limit_extra_people_set}:`,class:"am-capei-price__part-item am-w-100"},{default:S(()=>[N(Ct,{modelValue:t(f).maxExtraPeople,"onUpdate:modelValue":k[19]||(k[19]=O=>t(f).maxExtraPeople=O),min:0,max:t(T)-1},null,8,["modelValue","max"])]),_:1},8,["label"])])):$("",!0)])):$("",!0)]),_:1},8,["model","style"])}}};const tv={class:"am-capei-custef__heading"},av={class:"am-capei-custef__colors"},sv=["onClick"],lv={key:0,class:"am-icon-check"},nv={setup(n){let a=Oe(),e=U("amLabels");const s=V(null);let l=V(1),o=V(["#1788FB","#4BBEC6","#FBC22D","#FA3C52","#D696B8","#689BCA","#26CC2B","#FD7E35","#E38587","#774DFB"]),r=V({color:b({get:()=>a.getters["event/getColor"],set:i=>{a.commit("event/setColor",i)}}),show:b({get:()=>a.getters["event/getShow"],set:i=>{a.commit("event/setShow",i)}})});return Ge(()=>{let i=a.getters["event/getColor"];o.value.filter(x=>x===i).length>0?l.value=1:l.value=2}),(i,c)=>{const x=vt,g=x0,m=st;return u(),Y(m,{ref_key:"customizeFormRef",ref:s,model:t(r),class:"am-capei-custef"},{default:S(()=>[d("div",tv,w(t(e).event_colors),1),N(Vl,{modelValue:t(l),"onUpdate:modelValue":c[2]||(c[2]=p=>Fe(l)?l.value=p:l=p)},{default:S(()=>[N(x,{class:"am-capei-custef__item"},{default:S(()=>[N(La,{value:1},{default:S(()=>[ue(w(t(e).event_colors_preset)+": ",1)]),_:1}),d("div",av,[(u(!0),A(ne,null,ve(t(o),p=>(u(),A("div",{key:p,class:j(["am-capei-custef__colors-item",{"am-disabled":t(l)===2}]),onClick:y=>t(a).commit("event/setColor",p)},[d("div",{class:"am-capei-custef__colors-item__inner",style:Be({backgroundColor:p})},[p===t(r).color?(u(),A("span",lv)):$("",!0)],4)],10,sv))),128))])]),_:1}),N(x,{class:"am-capei-custef__item"},{default:S(()=>[N(La,{value:2},{default:S(()=>[ue(w(t(e).event_colors_custom)+": ",1)]),_:1}),N(g,{modelValue:t(r).color,"onUpdate:modelValue":c[0]||(c[0]=p=>t(r).color=p),disabled:t(l)===1,"aria-label":t(e).event_colors_custom},null,8,["modelValue","disabled","aria-label"])]),_:1}),N(x,{class:"am-capei-custef__item"},{default:S(()=>[N(ht,{modelValue:t(r).show,"onUpdate:modelValue":c[1]||(c[1]=p=>t(r).show=p),label:t(e).event_show_on_site},null,8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}};const ov={class:"am-capei-waiting__header"},rv={class:"am-capei-waiting__header-text"},iv={class:"am-capei-waiting__header"},cv={class:"am-capei-waiting__header-text"},xv={props:{pageWidth:{type:Number,default:0},waitingListUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth));const l=Oe();let o=U("amLabels"),r=V(null),i=V({enabled:b({get:()=>l.getters["event/getWaitingListEnabled"],set:y=>{l.commit("event/setWaitingListEnabled",y)}}),maxCapacity:b({get:()=>l.getters["event/getWaitingListMaxCapacity"],set:y=>{l.commit("event/setWaitingListMaxCapacity",y)}}),maxExtraPeopleEnabled:b({get:()=>l.getters["event/getWaitingListMaxExtraPeopleEnabled"],set:y=>{l.commit("event/setWaitingListMaxExtraPeopleEnabled",y)}}),maxExtraPeople:b({get:()=>l.getters["event/getWaitingListMaxExtraPeople"],set:y=>{l.commit("event/setWaitingListMaxExtraPeople",y)}})}),c=b(()=>l.getters["event/getCustomTickets"]),x=b(()=>l.getters["event/getCustomPricing"]),g=b(()=>l.getters["event/getMaxCustomCapacityEnabled"]);a({waitingListFormRef:r});let m=U("amColors"),p=b(()=>({"--am-c-capei-waiting-text":m.value.colorMainText,"--am-c-capei-waiting-text-op03":K(m.value.colorMainText,.03),"--am-c-capei-waiting-inp-bgr-op03":K(m.value.colorInpBgr,.03),"--am-c-capei-waiting-bgr-op05":K(m.value.colorPrimary,.05)}));return(y,T)=>{const F=vt,E=st;return u(),A("div",{class:"am-capei-waiting",style:Be(t(p))},[d("div",ov,[d("div",rv,w(t(o).events_show_waiting_list_booking_full),1),N(rt,{modelValue:t(i).enabled,"onUpdate:modelValue":T[0]||(T[0]=P=>t(i).enabled=P),"aria-label":t(o).events_show_waiting_list_booking_full},null,8,["modelValue","aria-label"])]),t(i).enabled?(u(),Y(E,{key:0,ref_key:"waitingListFormRef",ref:r,model:t(i),"label-position":"top"},{default:S(()=>[!t(x)||t(g)?(u(),Y(F,{key:0,label:`${t(o).maximum_capacity}`,class:j(["am-capei-waiting__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(i).maxCapacity,"onUpdate:modelValue":T[1]||(T[1]=P=>t(i).maxCapacity=P),min:1},null,8,["modelValue"])]),_:1},8,["label","class"])):$("",!0),t(x)?(u(!0),A(ne,{key:1},ve(t(c),(P,L)=>(u(),Y(F,{key:L,label:P.name,class:j(["am-capei-waiting__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:P.waitingListSpots,"onUpdate:modelValue":D=>P.waitingListSpots=D,min:1,disabled:t(g)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128)):$("",!0),d("div",iv,[d("div",cv,w(t(o).limit_extra_people),1),N(rt,{modelValue:t(i).maxExtraPeopleEnabled,"onUpdate:modelValue":T[2]||(T[2]=P=>t(i).maxExtraPeopleEnabled=P),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(i).maxExtraPeopleEnabled?(u(),Y(F,{key:2,class:j(t(s))},{default:S(()=>[N(Ct,{modelValue:t(i).maxExtraPeople,"onUpdate:modelValue":T[3]||(T[3]=P=>t(i).maxExtraPeople=P),min:0,disabled:!t(i).maxExtraPeopleEnabled},null,8,["modelValue","disabled"])]),_:1},8,["class"])):$("",!0)]),_:1},8,["model"])):$("",!0)],4)}}};const uv={class:"am-capei-sef__header"},dv=d("span",{class:"am-icon-options"},null,-1),mv={class:"am-capei-sef__header-text"},pv={class:"am-capei-sef__content"},fv=["innerHTML"],gv=["innerHTML"],hv={class:"am-capei-sef__header"},vv=d("span",{class:"am-icon-payments"},null,-1),Ev={class:"am-capei-sef__header-text"},_v={class:"am-capei-sef__content"},Cv={class:"am-capei-sef__segment"},yv={key:0,class:"am-capei-sef__heading"},bv={class:"am-capei-sef__heading-text"},Bv=["innerHTML"],Av=["innerHTML"],Fv={key:0,class:"am-capei-sef__heading"},kv={class:"am-capei-sef__heading-text"},Dv={class:"am-capei-sef__segment"},wv={key:0,class:"am-capei-sef__heading"},Pv={class:"am-capei-sef__heading-text"},Tv={key:1,class:"am-capei-sef__heading"},Lv=["src"],Sv={key:2,class:"am-capei-sef__heading"},Iv=["src"],$v={key:3,class:"am-capei-sef__heading"},Nv=["src"],Ov={key:4,class:"am-capei-sef__heading"},Mv=["src"],Vv={key:5,class:"am-capei-sef__heading"},Rv=["src"],qv={key:6,class:"am-capei-sef__heading"},Uv=["src"],zv={class:"am-capei-sef__header"},jv=d("span",{class:"am-icon-options"},null,-1),Yv={class:"am-capei-sef__header-text"},Wv={key:0,class:"am-capei-sef__heading"},Hv={class:"am-capei-sef__heading-text"},Gv={key:1,class:"am-capei-sef__heading"},Zv={class:"am-capei-sef__heading-text"},Jv={key:2,class:"am-capei-sef__heading"},Xv={class:"am-capei-sef__heading-text"},Qv={setup(n){let a=Oe(),e=U("licence"),s=U("amLabels");const l=U("settings"),o=U("baseUrls");let r=V([{label:s.value.disabled,value:0},{label:s.value.min10,value:600},{label:s.value.min12,value:720},{label:s.value.min15,value:900},{label:s.value.min30,value:1800},{label:s.value.min45,value:2700},{label:s.value.h1,value:3600},{label:s.value.h1min30,value:5400},{label:s.value.h2,value:7200},{label:s.value.h3,value:10800},{label:s.value.h4,value:14400},{label:s.value.h6,value:21600},{label:s.value.h8,value:28800},{label:s.value.h9,value:32400},{label:s.value.h10,value:36e3},{label:s.value.h11,value:39600},{label:s.value.h12,value:43200},{label:s.value.day1,value:86400},{label:s.value.days2,value:172800},{label:s.value.days3,value:259200},{label:s.value.days4,value:345600},{label:s.value.days5,value:432e3},{label:s.value.days6,value:518400},{label:s.value.week1,value:604800},{label:s.value.weeks2,value:1209600},{label:s.value.weeks3,value:1814400},{label:s.value.weeks4,value:2419200},{label:s.value.months3,value:7884e3},{label:s.value.months6,value:15768e3}]),i=V([]),c=V(!1),x=V(0),g=V(null),m=b(()=>{if(i.value.length){let v=i.value.find(f=>f.id===l.payments.wc.productId);return typeof v<"u"?v.name:s.value.select}return""});function p(){l.payments.wc.enabled&&y({id:P.value.paymentsWcProductId},v=>{i.value=v.length?v:[]})}function y(v,f){clearTimeout(g.value),c.value=!0,x.value++,g.value=setTimeout(()=>{let C=x.value;$e.get("/payment/wc/products",{params:v}).then(B=>{C>=x.value&&f(B.data.data.products.sort((_,k)=>_.name.toLowerCase()>k.name.toLowerCase()?1:-1))}).finally(()=>{c.value=!1})},500)}function T(v){v&&y({name:v},f=>{i.value=f})}let F=V("");const E=V(null);let P=V({generalMinimumTimeRequirementPriorToCanceling:b({get:()=>a.getters["event/getSettingsGeneralMinimumTimeRequirementPriorToCanceling"],set:v=>{a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",v)}}),generalRedirectUrlAfterAppointment:b({get:()=>a.getters["event/getSettingsGeneralRedirectUrlAfterAppointment"],set:v=>{a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",v)}}),paymentsPaymentLinksEnabled:b({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksEnabled"],set:v=>{a.commit("event/setSettingsPaymentsPaymentLinksEnabled",v)}}),paymentsPaymentLinksRedirectUrl:b({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksRedirectUrl"],set:v=>{a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",v)}}),paymentsOnSite:b({get:()=>a.getters["event/getSettingsPaymentsOnSite"],set:v=>{a.commit("event/setSettingsPaymentsOnSite",v)}}),paymentsWcEnabled:b({get:()=>a.getters["event/getSettingsPaymentsWcEnabled"],set:v=>{a.commit("event/setSettingsPaymentsWcEnabled",v)}}),paymentsWcProductId:b({get:()=>a.getters["event/getSettingsPaymentsWcProductId"],set:v=>{a.commit("event/setSettingsPaymentsWcProductId",v)}}),paymentsStripeEnabled:b({get:()=>a.getters["event/getSettingsPaymentsStripeEnabled"],set:v=>{a.commit("event/setSettingsPaymentsStripeEnabled",v)}}),paymentsPayPalEnabled:b({get:()=>a.getters["event/getSettingsPaymentsPayPalEnabled"],set:v=>{a.commit("event/setSettingsPaymentsPayPalEnabled",v)}}),paymentsMollieEnabled:b({get:()=>a.getters["event/getSettingsPaymentsMollieEnabled"],set:v=>{a.commit("event/setSettingsPaymentsMollieEnabled",v)}}),paymentsRazorpayEnabled:b({get:()=>a.getters["event/getSettingsPaymentsRazorpayEnabled"],set:v=>{a.commit("event/setSettingsPaymentsRazorpayEnabled",v)}}),paymentsBarionEnabled:b({get:()=>a.getters["event/getSettingsPaymentsBarionEnabled"],set:v=>{a.commit("event/setSettingsPaymentsBarionEnabled",v)}}),paymentsSquareEnabled:b({get:()=>a.getters["event/getSettingsPaymentsSquareEnabled"],set:v=>{a.commit("event/setSettingsPaymentsSquareEnabled",v)}}),integrationsGoogleMeetEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsGoogleMeetEnabled"],set:v=>{a.commit("event/setSettingsIntegrationsGoogleMeetEnabled",v)}}),integrationsMicrosoftTeamsEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsMicrosoftTeamsEnabled"],set:v=>{a.commit("event/setSettingsIntegrationsMicrosoftTeamsEnabled",v)}}),integrationsLessonSpaceEnabled:b({get:()=>a.getters["event/getSettingsIntegrationsLessonSpaceEnabled"],set:v=>{a.commit("event/setSettingsIntegrationsLessonSpaceEnabled",v)}})});Ge(()=>{P.value.generalMinimumTimeRequirementPriorToCanceling===l.general.minimumTimeRequirementPriorToCanceling&&a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",""),P.value.generalRedirectUrlAfterAppointment===l.general.redirectUrlAfterAppointment&&a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",""),P.value.paymentsPaymentLinksRedirectUrl===l.payments.paymentLinks.redirectUrl&&a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",""),p()});let L=U("amColors"),D=b(()=>({"--am-c-capei-sef-primary":L.value.colorPrimary,"--am-c-capei-sef-text":L.value.colorMainText,"--am-c-capei-sef-text-op03":K(L.value.colorMainText,.03),"--am-c-capei-sef-bgr":L.value.colorMainBgr}));return(v,f)=>{const C=Ml,B=vt,_=Cs,k=ys,R=st;return u(),Y(R,{ref_key:"settingsFormRef",ref:E,model:t(P),class:"am-capei-sef",style:Be(t(D))},{default:S(()=>[N(k,{modelValue:t(F),"onUpdate:modelValue":f[16]||(f[16]=M=>Fe(F)?F.value=M:F=M),accordion:"",class:"am-capei-sef__collapse"},{default:S(()=>[N(_,{name:"general",class:"am-capei-sef__collapse-item"},{title:S(()=>[d("div",uv,[dv,d("div",mv,w(t(s).general),1)])]),default:S(()=>[d("div",pv,[N(B,null,{label:S(()=>[ue(w(t(s).minimum_time_before_canceling)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(s).minimum_time_before_canceling_tooltip},null,8,fv)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(Je,{modelValue:t(P).generalMinimumTimeRequirementPriorToCanceling,"onUpdate:modelValue":f[0]||(f[0]=M=>t(P).generalMinimumTimeRequirementPriorToCanceling=M),placeholder:t(r).find(M=>M.value===t(l).general.minimumTimeRequirementPriorToCanceling).label,clearable:""},{default:S(()=>[(u(!0),A(ne,null,ve(t(r),(M,O)=>(u(),Y(Ye,{key:O,value:M.value,label:M.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),N(B,null,{label:S(()=>[ue(w(t(s).redirect_url_after_appointment)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(s).redirect_url_after_appointment_tooltip},null,8,gv)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(ct,{modelValue:t(P).generalRedirectUrlAfterAppointment,"onUpdate:modelValue":f[1]||(f[1]=M=>t(P).generalRedirectUrlAfterAppointment=M),placeholder:t(l).general.redirectUrlAfterAppointment},null,8,["modelValue","placeholder"])]),_:1})])]),_:1}),N(_,{name:"payment",class:"am-capei-sef__collapse-item"},{title:S(()=>[d("div",hv,[vv,d("div",Ev,w(t(s).payments),1)])]),default:S(()=>[d("div",_v,[d("div",Cv,[t(e).isStarter?$("",!0):(u(),A("div",yv,[d("div",bv,[ue(w(t(s).payment_links_enable)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(s).payment_links_enable_tooltip},null,8,Bv)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),N(rt,{modelValue:t(P).paymentsPaymentLinksEnabled,"onUpdate:modelValue":f[2]||(f[2]=M=>t(P).paymentsPaymentLinksEnabled=M)},null,8,["modelValue"])])),t(P).paymentsPaymentLinksEnabled&&!t(e).isStarter?(u(),Y(B,{key:1,label:t(s).redirect_url_after_appointment},{label:S(()=>[ue(w(t(s).redirect_url_after_appointment)+" ",1),N(C,{effect:"dark",placement:"top"},{content:S(()=>[d("div",{innerHTML:t(e).isPro||t(e).isDeveloper?t(s).redirect_url_after_app_or_package_tt:t(s).redirect_url_after_appointment_tooltip},null,8,Av)]),default:S(()=>[N(Ze,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:S(()=>[N(ct,{modelValue:t(P).paymentsPaymentLinksRedirectUrl,"onUpdate:modelValue":f[3]||(f[3]=M=>t(P).paymentsPaymentLinksRedirectUrl=M),placeholder:t(l).payments.paymentLinks.redirectUrl},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):$("",!0)]),t(l).payments.onSite?(u(),A("div",Fv,[d("div",kv,w(t(s).on_site),1),N(rt,{modelValue:t(P).paymentsOnSite,"onUpdate:modelValue":f[4]||(f[4]=M=>t(P).paymentsOnSite=M)},null,8,["modelValue"])])):$("",!0),d("div",Dv,[t(l).payments.wc.enabled?(u(),A("div",wv,[d("div",Pv,w(t(s).wc_service),1),N(rt,{modelValue:t(P).paymentsWcEnabled,"onUpdate:modelValue":f[5]||(f[5]=M=>t(P).paymentsWcEnabled=M)},null,8,["modelValue"])])):$("",!0),t(P).paymentsWcEnabled?(u(),Y(B,{key:1},{default:S(()=>[N(Je,{modelValue:t(P).paymentsWcProductId,"onUpdate:modelValue":f[6]||(f[6]=M=>t(P).paymentsWcProductId=M),clearable:"",filterable:"",remote:"",placeholder:t(m),loading:t(c),"remote-method":T},{default:S(()=>[(u(!0),A(ne,null,ve(t(i),(M,O)=>(u(),Y(Ye,{key:O,value:M.id,label:M.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1})):$("",!0)]),t(l).payments.payPal.enabled?(u(),A("div",Tv,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/paypal-light.svg",alt:"PayPal"},null,8,Lv),N(rt,{modelValue:t(P).paymentsPayPalEnabled,"onUpdate:modelValue":f[7]||(f[7]=M=>t(P).paymentsPayPalEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).payments.stripe.enabled?(u(),A("div",Sv,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/stripe.svg",alt:"Stripe"},null,8,Iv),N(rt,{modelValue:t(P).paymentsStripeEnabled,"onUpdate:modelValue":f[8]||(f[8]=M=>t(P).paymentsStripeEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).payments.mollie.enabled?(u(),A("div",$v,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/mollie.svg",alt:"Mollie"},null,8,Nv),N(rt,{modelValue:t(P).paymentsMollieEnabled,"onUpdate:modelValue":f[9]||(f[9]=M=>t(P).paymentsMollieEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).payments.square.enabled?(u(),A("div",Ov,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/square.svg",alt:"Square"},null,8,Mv),N(rt,{modelValue:t(P).paymentsSquareEnabled,"onUpdate:modelValue":f[10]||(f[10]=M=>t(P).paymentsSquareEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).payments.razorpay.enabled?(u(),A("div",Vv,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/razorpay.svg",alt:"Razorpay"},null,8,Rv),N(rt,{modelValue:t(P).paymentsRazorpayEnabled,"onUpdate:modelValue":f[11]||(f[11]=M=>t(P).paymentsRazorpayEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).payments.barion.enabled?(u(),A("div",qv,[d("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/barion.svg",alt:"Barion"},null,8,Uv),N(rt,{modelValue:t(P).paymentsBarionEnabled,"onUpdate:modelValue":f[12]||(f[12]=M=>t(P).paymentsBarionEnabled=M)},null,8,["modelValue"])])):$("",!0)])]),_:1}),t(l).googleCalendar.enabled&&t(l).googleMeet.enabled||t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled||t(l).lessonSpace.enabled?(u(),Y(_,{key:0,name:"integrations",class:"am-capei-sef__collapse-item"},{title:S(()=>[d("div",zv,[jv,d("div",Yv,w(t(s).integrations_settings),1)])]),default:S(()=>[t(l).googleCalendar.enabled&&t(l).googleMeet.enabled?(u(),A("div",Wv,[d("div",Hv,w(t(s).enable_google_meet),1),N(rt,{modelValue:t(P).integrationsGoogleMeetEnabled,"onUpdate:modelValue":f[13]||(f[13]=M=>t(P).integrationsGoogleMeetEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled?(u(),A("div",Gv,[d("div",Zv,w(t(s).enable_microsoft_teams),1),N(rt,{modelValue:t(P).integrationsMicrosoftTeamsEnabled,"onUpdate:modelValue":f[14]||(f[14]=M=>t(P).integrationsMicrosoftTeamsEnabled=M)},null,8,["modelValue"])])):$("",!0),t(l).lessonSpace.enabled?(u(),A("div",Jv,[d("div",Xv,w(t(s).lesson_space),1),N(rt,{modelValue:t(P).integrationsLessonSpaceEnabled,"onUpdate:modelValue":f[15]||(f[15]=M=>t(P).integrationsLessonSpaceEnabled=M)},null,8,["modelValue"])])):$("",!0)]),_:1})):$("",!0)]),_:1},8,["modelValue"])]),_:1},8,["model","style"])}}};const Kv={class:"am-capei__footer-actions"},eE={name:"CabinetEvent"},tE=Object.assign(eE,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["close","save","duplicate"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let r=U("licence");const i=V("details");let c=V(null),x=V(null),g=V(null),m=V(null),p=V(null),y=V(!0),T=V(!1),F=V(!1);function E(){a("duplicate",Object.assign(JSON.parse(JSON.stringify(s.getters["event/getEvent"])),{id:null,bookings:[]}))}async function P(){let _=!0;await new Promise(k=>{c.value?.detailsFormRef.validate(R=>{R||(i.value="details",_=!1),k()})}),_&&(await new Promise(k=>{x.value?.periodsFormRef.validate(R=>{R||(i.value="periods",_=!1),k()})}),_&&(s.getters["event/getRecurringEnabled"]&&(await new Promise(k=>{g.value?.recurringFormRef.validate(R=>{R||(i.value="recurring",_=!1),k()})}),!_)||v(k=>{k?F.value=!0:D()})))}function L(_){y.value=!0,$e.post("/events"+(s.getters["event/getId"]?"/"+s.getters["event/getId"]:""),Object.assign(i1(s),{applyGlobally:_}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{o1(s),f("save")}).catch(k=>{console.log(k)}).finally(()=>{y.value=!1})}function D(){p.value?(y.value=!1,F.value=!1,T.value=!0):L(!1)}function v(_){let k=s.getters["event/getOrganizerId"]?s.getters["employee/getEmployee"]:null;if(k&&(k.googleCalendar||k.outlookCalendar)){y.value=!0;let R=s.getters["event/getProviders"].map(M=>new Object({id:M.id}));$e.post("/events/calendar",{providers:s.getters["event/getProviders"].map(M=>M.id).indexOf(k.id)===-1?R.concat([{id:k.id}]):R,periods:wi(s),eventIds:[s.getters["event/getId"],s.getters["event/getParentId"]],recurring:s.getters["event/getRecurring"]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{_(!1)}).catch(()=>{_(!0),y.value=!1})}else _(!1)}function f(_){s.commit("event/setActive",!1),a(_)}Ge(()=>{s.getters["event/getId"]&&s.getters["event/getRecurringUntil"]&&(p.value=at(s.getters["event/getRecurringUntil"].toISOString().split("T")[0])),s.commit("event/setActive",!0),y.value=!1});let C=U("amColors"),B=b(()=>({"--am-c-capei-text":C.value.colorMainText,"--am-c-capei-text-op10":K(C.value.colorMainText,.1),"--am-c-capei-primary":C.value.colorPrimary,"--am-c-cust-no1":C.value.colorMainText,"--am-c-cust-no1-bgr":K(C.value.colorMainText,.1),"--am-c-cust-no2":C.value.colorWarning,"--am-c-cust-no2-bgr":K(C.value.colorWarning,.1),"--am-c-cust-no3":C.value.colorError,"--am-c-cust-no3-bgr":K(C.value.colorError,.1),"--am-c-cust-link":K(C.value.colorMainText,.5),"--am-c-cust-text":C.value.colorMainText}));return(_,k)=>{const R=_a,M=Ca;return u(),A(ne,null,[t(y)?(u(),Y(Wt,{key:1})):(u(),A("div",{key:0,class:j(["am-capei",t(e).responsiveClass]),style:Be(t(B))},[N(M,{modelValue:i.value,"onUpdate:modelValue":k[0]||(k[0]=O=>i.value=O),class:"am-ap__tabs"},{default:S(()=>[N(R,{label:t(l).details,name:"details"},{default:S(()=>[N(u1,{ref_key:"eventDetailsRef",ref:c},null,512)]),_:1},8,["label"]),N(R,{label:t(l).periods,name:"periods"},{default:S(()=>[N(v1,{ref_key:"eventPeriodsRef",ref:x,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),t(r).isStarter?$("",!0):(u(),Y(R,{key:0,label:t(l).recurring,name:"recurring"},{default:S(()=>[N(C1,{ref_key:"eventRecurringRef",ref:g,"page-width":t(e).pageWidth,"recurring-until":t(p)},null,8,["page-width","recurring-until"])]),_:1},8,["label"])),N(R,{label:t(l).pricing,name:"pricing"},{default:S(()=>[N(ev,{ref_key:"eventPricingRef",ref:m,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),N(R,{label:t(l).customize,name:"customize"},{default:S(()=>[N(nv)]),_:1},8,["label"]),t(o).featuresIntegrations.waitingList.enabled&&!t(r).isStarter&&!t(r).isBasic?(u(),Y(R,{key:1,label:t(l).waiting_list,name:"waitingList"},{default:S(()=>[N(xv,{"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"])):$("",!0),N(R,{label:t(l).settings,name:"settings"},{default:S(()=>[N(Qv)]),_:1},8,["label"])]),_:1},8,["modelValue"]),d("div",{class:j(["am-capei__footer",[{"am-capei__footer_new":!t(s).getters["event/getId"]},t(e).responsiveClass]])},[t(s).getters["event/getId"]?(u(),Y(ke,{key:0,class:"am-capei__footer-duplicate","icon-only":!0,icon:"duplicate",type:"plain",category:"secondary",onClick:E})):$("",!0),d("div",Kv,[N(ke,{category:"secondary",size:"default",type:"plain",onClick:k[1]||(k[1]=()=>{t(a)("close")})},{default:S(()=>[ue(w(t(l).cancel),1)]),_:1}),N(ke,{size:"default",onClick:P},{default:S(()=>[ue(w(t(l).save),1)]),_:1})])],2)],6)),N(Ha,{visibility:t(T)&&t(p)!==null,title:t(l).confirm,description:t(l).confirm_save_following,"close-btn-text":t(l).save_single,"confirm-btn-text":t(l).update_following,"customized-options":{cancelBtn:{type:"plain"},confirmBtn:{type:""}},onDecline:k[2]||(k[2]=O=>L(!1)),onConfirm:k[3]||(k[3]=O=>L(!0)),onClose:k[4]||(k[4]=O=>Fe(T)?T.value=!1:T=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),N(Ha,{visibility:t(F),title:t(l).confirm,description:t(l).confirm_save_conflict,"close-btn-text":t(l).cancel,"confirm-btn-text":t(l).confirm,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:k[5]||(k[5]=O=>Fe(F)?F.value=!1:F=!1),onConfirm:D,onClose:k[6]||(k[6]=O=>Fe(F)?F.value=!1:F=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],64)}}});const aE={class:"am-cap__att"},sE={class:"am-cap-customers"},lE={class:"am-cap__cust-option"},nE={class:"am-cap__cust-option__heading"},oE={key:0,class:"am-cap__cust-option__inner"},rE={key:1,class:"am-cap__cust-option__inner"},iE={key:0,class:"am-cap-cust__data-wrapper"},cE={key:0,class:"am-cap-cust__data"},xE=d("span",{class:"am-icon-phone"},null,-1),uE=["href"],dE={key:1,class:"am-cap-cust__data"},mE=d("span",{class:"am-icon-email"},null,-1),pE=["href"],fE={class:"am-cap__att-heading"},gE={props:{event:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1},pageWidth:{type:Number,required:!0}},setup(n,{expose:a}){const e=n;let s=b(()=>ot(e.pageWidth)),l=Oe(),o=U("amLabels");const r=U("settings"),i=U("shortcodeData");let c=U("amCustomize"),x=b(()=>i.value.cabinetType==="employee"?c.value.events.options.customerPhone.visibility:!0),g=b(()=>i.value.cabinetType==="employee"?c.value.events.options.customerEmail.visibility:!0),m=V(null),p=V({customerId:b({get:()=>l.getters["attendee/getCustomerId"],set:R=>l.commit("attendee/setCustomerId",R)}),status:b({get:()=>l.getters["attendee/getStatus"],set:R=>l.commit("attendee/setStatus",R)}),persons:b({get:()=>l.getters["attendee/getPersons"],set:R=>l.commit("attendee/setPersons",R)}),tickets:b({get:()=>l.getters["attendee/getTickets"],set:R=>l.commit("attendee/setTickets",R)})}),y=V({customerId:[{required:!0,message:o.value.select_customer,trigger:["submit","change"]}]}),T=b(()=>e.event.settings?JSON.parse(e.event.settings):null),F=V(Ti().filter(R=>R.value!=="canceled"&&(!r.featuresIntegrations.waitingList.enabled||(T.value?"waitingList"in T.value&&!T.value.waitingList.enabled:!0)?R.value!=="waiting":!0)&&R.value!=="no-show")),E=b(()=>l.getters["customerInfo/getLoading"]),P=b(()=>l.getters["customerInfo/getCustomers"]),L=b(()=>p.value.customerId?P.value.find(R=>R.id===p.value.customerId):null);function D(R){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),v.value=!0,$e.get("/users/customers/"+R,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(M=>{l.commit("customerInfo/setCustomer",Bi(l,M.data.data.user))}).catch(M=>{console.log(M)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}let v=V(!1);function f(){l.dispatch("customerInfo/resetCustomer"),v.value=!0}function C(R){l.commit("customerInfo/setCustomers",[R]),l.commit("attendee/setCustomerId",R.id)}Ge(()=>{l.getters["attendee/getId"]||l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({detailsFormRef:m});function B(R){if(R){if(R===1)return{class:"am-no-show-1",icon:"no-show-1"};if(R===2)return{class:"am-no-show-2",icon:"no-show-2"};if(R>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}let _=U("amColors"),k=b(()=>({"--am-c-cust-no1":_.value.colorMainText,"--am-c-cust-no1-bgr":K(_.value.colorMainText,.1),"--am-c-cust-no2":_.value.colorWarning,"--am-c-cust-no2-bgr":K(_.value.colorWarning,.1),"--am-c-cust-no3":_.value.colorError,"--am-c-cust-no3-bgr":K(_.value.colorError,.1),"--am-c-cust-text":_.value.colorMainText,"--am-c-cust-link":K(_.value.colorMainText,.5)}));return(R,M)=>{const O=vt,H=st;return u(),A("div",aE,[N(H,{ref_key:"detailsFormRef",ref:m,model:t(p),rules:t(y),class:"am-cap__att-form"},{default:S(()=>[d("div",sE,[e.isNew?(u(),Y(O,{key:0,prop:"customerId",class:"am-cap__att-form__item am-w-100"},{default:S(()=>[N(Je,{modelValue:t(p).customerId,"onUpdate:modelValue":M[0]||(M[0]=z=>t(p).customerId=z),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-inp-text)","popper-class":"am-cap-cust__popper",placeholder:t(o).event_attendees_search,"remote-method":z=>{t(Gs)(t(l),z)},loading:t(E),onFocus:M[1]||(M[1]=z=>t($o)(t(l)))},{default:S(()=>[(u(!0),A(ne,null,ve(t(P),z=>(u(),Y(Ye,{key:z.id,value:z.id,label:z.email?z.email:z.firstName+" "+z.lastName},{default:S(()=>[d("div",lE,[d("div",nE,w(z.firstName+" "+z.lastName),1),z.email&&t(g)?(u(),A("div",oE,w(z.email),1)):$("",!0),z.phone&&t(x)?(u(),A("div",rE,w(z.phone),1)):$("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})):$("",!0),!t(l).getters["attendee/getId"]&&t(r).roles.allowWriteCustomers?(u(),Y(ke,{key:1,class:j(["am-capai-cuf__heading-add",e.responsiveClass]),size:"default",disabled:!!t(p).customerId,prefix:"plus",icon:"plus","icon-only":e.pageWidth<=420,onClick:f},{default:S(()=>[ue(w(t(o).new_customer),1)]),_:1},8,["class","disabled","icon-only"])):$("",!0)]),t(L)?(u(),A("div",{key:0,class:j(["am-cap-attendee",t(s)])},[d("div",{class:j(["am-cap-cust",t(s)]),style:Be(t(k))},[d("div",{class:j(["am-cap-cust__name",B(0).class])},[B(0).icon?(u(),A("span",{key:0,class:j(`am-icon-${B(0).icon}`)},null,2)):$("",!0),ue(" "+w(t(L).firstName+" "+t(L).lastName),1)],2),t(L).phone&&t(x)||t(L).email&&t(g)?(u(),A("div",iE,[t(L).phone&&t(x)?(u(),A("div",cE,[xE,d("a",{href:`tel:${t(L).phone}`},w(t(L).phone),9,uE)])):$("",!0),t(L).email&&t(g)?(u(),A("div",dE,[mE,d("a",{href:`mailto:${t(L).email}`},w(t(L).email),9,pE)])):$("",!0)])):$("",!0)],6),N(O,{prop:"status",class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Je,{modelValue:t(p).status,"onUpdate:modelValue":M[2]||(M[2]=z=>t(p).status=z),disabled:!e.isNew,placeholder:t(o).select,"prefix-icon":t(F).find(z=>z.value===t(p).status).icon,"prefix-icon-color":t(F).find(z=>z.value===t(p).status).color,"popper-class":"am-capei-att__popper"},{default:S(()=>[(u(!0),A(ne,null,ve(t(F),z=>(u(),Y(Ye,{key:z.value,value:z.value,label:z.label},{default:S(()=>[d("span",{class:j(`am-icon-${z.icon}`),style:Be({color:z.color})},null,6),ue(" "+w(z.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder","prefix-icon","prefix-icon-color"])]),_:1},8,["class"]),t(r).roles.allowWriteCustomers?(u(),Y(Ea,{key:0,"have-delete":!1,"reference-class":t(s),onEdit:M[3]||(M[3]=z=>D(t(L).id))},null,8,["reference-class"])):$("",!0)],2)):$("",!0),t(L)?(u(),A(ne,{key:1},[e.event.customPricing?(u(),A(ne,{key:1},[d("div",fE,w(`${t(o).event_book_tickets}:`),1),(u(!0),A(ne,null,ve(t(p).tickets,(z,J)=>(u(),Y(O,{key:J,label:e.event.customTickets.find(oe=>oe.id===z.eventTicketId).name,class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:z.persons,"onUpdate:modelValue":oe=>z.persons=oe,min:0,disabled:!t(r).roles.allowWriteEvents},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128))],64)):(u(),Y(O,{key:0,prop:"persons",label:`${t(o).event_book_persons}:`,class:j(["am-cap__att-form__item",t(s)])},{default:S(()=>[N(Ct,{modelValue:t(p).persons,"onUpdate:modelValue":M[4]||(M[4]=z=>t(p).persons=z),min:1,disabled:!t(r).roles.allowWriteEvents},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]))],64)):$("",!0),t(L)?$("",!0):(u(),Y(Ta,{key:2,heading:t(o).no_attendees_yet},null,8,["heading"]))]),_:1},8,["model","rules"]),t(v)?(u(),Y(Fi,{key:0,visibility:t(v),"responsive-class":e.responsiveClass,"onUpdate:visibility":M[5]||(M[5]=z=>Fe(v)?v.value=z:v=z),onAddedCustomer:C},null,8,["visibility","responsive-class"])):$("",!0)])}}};const hE={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Oe();const l=U("settings");let o=U("amLabels"),r=V(null),i=V({}),c=V({}),x=V({}),g=b(()=>s.getters["attendee/getCustomFields"]);function m(T,F){let E=s.getters["attendee/getId"];(T.type!=="file"||E)&&(i.value[F]=b({get:()=>{let P=s.getters["attendee/getCustomFields"][F]?.value;return P||""},set:P=>s.commit("attendee/setCustomFields",{id:F,value:P})}))}function p(T,F){let E=s.getters["attendee/getId"];(T.type!=="file"||E)&&(x.value[F]={template:We[T.type],props:{id:F,itemName:F.toString(),label:T.label,options:T.options,class:`am-capei-att-cf__item am-cf-width-${T.width}`}}),(T.type==="checkbox"||T.type==="radio")&&(x.value[F].props.options=x.value[F].props.options.map(P=>({...P,value:P.label}))),T.type==="text-area"&&(x.value[F].props={...x.value[F].props,itemType:"textarea"}),T.type==="file"&&E&&(x.value[F].props={...x.value[F].props,btnLabel:o.value.upload_file_here,isUpload:!1,bookingId:E,source:"cabinet-provider"}),T.type==="datepicker"&&(x.value[F].props={...x.value[F].props,weekStartsFromDay:l.wordpress.startOfWeek})}function y(T){let F=s.getters["attendee/getId"];(T.type!=="file"||F)&&(c.value[T.id]=[{message:o.value.required_field,required:T.required,trigger:["submit","change"]}])}return Ge(()=>{i.value={},x.value={};for(let T in g.value)m(g.value[T],T),p(g.value[T],T),y(g.value[T])}),a({customFieldsFormRef:r}),(T,F)=>{const E=st;return u(),Y(E,{ref_key:"customFieldsFormRef",ref:r,model:t(i),rules:t(c),"label-position":"top",class:j(["am-capei-att-cf__form",e.responsiveClass])},{default:S(()=>[(u(!0),A(ne,null,ve(Object.keys(t(g)),P=>(u(),A(ne,{key:P},[P in t(i)?(u(),Y(ft(t(x)[P].template),Dt({key:0,modelValue:t(i)[P],"onUpdate:modelValue":L=>t(i)[P]=L},t(x)[P].props),null,16,["modelValue","onUpdate:modelValue"])):$("",!0)],64))),128))]),_:1},8,["model","rules","class"])}}};const vE={class:"am-capai-pay__row-label"},EE={class:"am-capai-pay__row-value"},_E={class:"am-capai-pay__row-label"},CE={class:"am-capai-pay__row-value"},yE={class:"am-capai-pay__row-label"},bE={class:"am-capai-pay__row-value"},BE={key:0,class:"am-divider"},AE={class:"am-capai-pay__row-label"},FE={class:"am-capai-pay__row-label"},kE={class:"am-capai-pay__row-label"},DE={class:"am-capai-pay__row-label"},wE={class:"am-capai-pay__row-label"},PE={class:"am-capai-pay__row-label"},TE={class:"am-capai-pay__row-label"},LE={props:{event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=U("amLabels"),l=b(()=>e.getters["attendee/getPayments"]),o=b(()=>Object.assign(Li(e),{deposit:l.value[0].amount,paid:l.value.reduce((c,x)=>c+x.amount,0)})),r=U("amColors"),i=b(()=>({"--am-c-pay-text-op03":K(r.value.colorMainText,.03)}));return(c,x)=>(u(),A("div",{class:j(["am-capai-pay__content",a.responsiveClass]),style:Be(t(i))},[(u(!0),A(ne,null,ve(t(l),(g,m)=>(u(),A(ne,{key:m},[d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",vE,w(t(s).date),1),d("div",EE,w(t(it)(g.dateTime.split(" ")[0])),1)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",_E,w(t(s).payment_method),1),d("div",CE,w(t(ki)(g)),1)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",yE,w(t(s).status),1),d("div",bE,[d("span",{class:j(t(ds)(g.status,t(r)).icon),style:Be({color:t(ds)(g.status,t(r)).color})},null,6),ue(" "+w(t(oo)(g.status)),1)])],2)],64))),128)),a.pageWidth>480?(u(),A("div",BE)):$("",!0),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",AE,w(t(s).price),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).price)),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",FE,w(t(s).discount_amount),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).discount)),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",kE,w(t(s).tax),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).tax)),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",DE,w(t(s).paid_deposit),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).deposit)),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",wE,w(t(s).paid_remaining_amount),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).paid-t(o).deposit)),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",PE,w(t(s).due),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).paid-(t(o).price-t(o).discount+t(o).tax))),3)],2),d("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[d("div",TE,w(t(s).total),1),d("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},w(t(nt)(t(o).price-t(o).discount+t(o).tax)),3)],2)],6))}};const SE=d("span",{class:"am-icon-clearable"},null,-1),IE={class:"am-capei-atti__footer"},$E={name:"CabinetEventAttendee"},Si=Object.assign($E,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},emits:["close","save"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings");let r=V(!1),i=b(()=>s.getters["attendee/getCustomFields"]);const c=V("details");let x=V(null),g=V(null),m=V(!1),p=V(null),y=V("");function T(){m.value=!1,y.value=""}let F=V(!1),E=V();ze("formWrapper",E);function P(){let _=Li(s);return _.price-_.discount+_.tax}function L(){let _=!0;if(g.value?.customFieldsFormRef.validate(M=>{M||(c.value="customFields",_=!1)}),x.value?.detailsFormRef.validate(M=>{M||(c.value="details",_=!1)}),!_)return;let k=o.payments.paymentLinks&&o.payments.paymentLinks.enabled,R=e.event.settings?JSON.parse(e.event.settings):null;R&&"payments"in R&&"paymentLinks"in R.payments&&"enabled"in R.payments.paymentLinks&&(k=R.payments.paymentLinks.enabled),k&&s.getters["attendee/getId"]&&P()>v.value?F.value=!0:D(!1)}function D(_){r.value=!0,$e.post(s.getters["attendee/getId"]?"/events/bookings/"+s.getters["attendee/getId"]:"/bookings",Object.assign(Pi(s),{runInstantPostBookingActions:!0,createPaymentLinks:_}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{a("save"),s.commit("attendee/setActive",!1)}).catch(k=>{console.log(k)}).finally(()=>{r.value=!1})}let v=V(0);function f(){s.commit("attendee/setActive",!1),a("close")}Ge(()=>{s.commit("attendee/setActive",!0),s.getters["attendee/getId"]&&(v.value=P())});let C=U("amColors"),B=b(()=>({"--am-c-capai-text":C.value.colorMainText,"--am-c-capai-text-op10":K(C.value.colorMainText,.1),"--am-c-capai-primary":C.value.colorPrimary,"--am-c-cust-no1":C.value.colorMainText,"--am-c-cust-no1-bgr":K(C.value.colorMainText,.1),"--am-c-cust-no2":C.value.colorWarning,"--am-c-cust-no2-bgr":K(C.value.colorWarning,.1),"--am-c-cust-no3":C.value.colorError,"--am-c-cust-no3-bgr":K(C.value.colorError,.1),"--am-c-cust-link":K(C.value.colorMainText,.5),"--am-c-cust-text":C.value.colorMainText}));return(_,k)=>{const R=_a,M=Ca;return t(r)?(u(),Y(Wt,{key:1})):(u(),A("div",{key:0,class:j(["am-capei-atti",[{"am-no-border":!0},t(e).responsiveClass]]),style:Be(t(B))},[t(m)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:p,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:T,onTriggerClose:T},{title:S(()=>[SE,ue(" "+w(t(y)),1)]),_:1},512)):$("",!0),N(M,{modelValue:c.value,"onUpdate:modelValue":k[0]||(k[0]=O=>c.value=O)},{default:S(()=>[N(R,{label:t(l).details,name:"details"},{default:S(()=>[N(t(gE),{ref_key:"attendeeDetailsRef",ref:x,event:t(e).event,"is-new":t(e).isNew,"page-width":t(e).pageWidth},null,8,["event","is-new","page-width"])]),_:1},8,["label"]),Object.keys(t(i)).length?(u(),Y(R,{key:0,label:t(l).custom_fields,name:"customFields"},{default:S(()=>[N(t(hE),{ref_key:"attendeeCustomFieldsRef",ref:g,event:t(e).event},null,8,["event"])]),_:1},8,["label"])):$("",!0),t(s).getters["attendee/getId"]?(u(),Y(R,{key:1,label:t(l).payment,name:"payment"},{default:S(()=>[N(t(LE),{event:t(e).event,"page-width":t(e).pageWidth},null,8,["event","page-width"])]),_:1},8,["label"])):$("",!0)]),_:1},8,["modelValue"]),d("div",IE,[N(ke,{category:"secondary",size:"default",type:"plain",onClick:f},{default:S(()=>[ue(w(t(o).roles.allowWriteEvents?t(l).cancel:t(l).close),1)]),_:1}),t(o).roles.allowWriteEvents?(u(),Y(ke,{key:0,size:"default",onClick:L},{default:S(()=>[ue(w(t(l).save),1)]),_:1})):$("",!0)]),N(Ha,{visibility:t(F),title:t(l).confirm,description:t(l).price_changed_message,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:k[1]||(k[1]=O=>D(!1)),onConfirm:k[2]||(k[2]=O=>D(!0)),onClose:k[3]||(k[3]=O=>Fe(F)?F.value=!1:F=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],6))}}});const NE=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),OE={key:1,class:"am-capei-att__top"},ME={class:"am-capei-att__top-heading"},VE={class:"am-capei-att__top-text"},RE={key:0,class:"am-capei-att__top-places"},qE={class:"am-cap__cust-option"},UE={class:"am-cap__cust-option__heading"},zE={key:0,class:"am-cap__cust-option__inner"},jE={key:1,class:"am-cap__cust-option__inner"},YE={key:0,class:"am-capei-att__card-wrapper"},WE={key:0,class:"am-capei-customer__data-wrapper"},HE={key:0,class:"am-capei-customer__data"},GE=d("span",{class:"am-icon-phone"},null,-1),ZE=["href"],JE={key:1,class:"am-capei-customer__data"},XE=d("span",{class:"am-icon-email"},null,-1),QE=["href"],KE={key:0,class:"am-capei-att__card-tickets"},e_={class:"am-capei-att__card-label"},t_={class:"am-capei-att__card-tickets__inner"},a_={key:1,class:"am-capei-att__card-persons"},s_={class:"am-capei-att__card-label"},l_={class:"am-capei-att__card-person"},n_={key:2,class:"am-capei-att__card-etickets"},o_={class:"am-capei-att__card-etickets__label"},r_={class:"am-capei-att__card-etickets__date"},i_={class:"am-capei-att__card-etickets__capacity"},c_={key:0,class:"am-capei-att__card-wrapper"},x_={key:0,class:"am-capei-customer__data-wrapper"},u_={key:0,class:"am-capei-customer__data"},d_=d("span",{class:"am-icon-phone"},null,-1),m_=["href"],p_={key:1,class:"am-capei-customer__data"},f_=d("span",{class:"am-icon-email"},null,-1),g_=["href"],h_={key:0,class:"am-capei-att__card-tickets"},v_={class:"am-capei-att__card-label"},E_={class:"am-capei-att__card-tickets__inner"},__={key:1,class:"am-capei-att__card-persons"},C_={class:"am-capei-att__card-label"},y_={class:"am-capei-att__card-person"},b_={name:"CabinetEventAttendees"},B_=Object.assign(b_,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},event:{type:Object,default:()=>{}}},emits:["close","openAttendee"],setup(n,{emit:a}){const e=n;let s=Oe(),l=U("amLabels");const o=U("settings"),r=U("shortcodeData");let i=U("amCustomize"),c=b(()=>r.value.cabinetType==="employee"?i.value.events.options.customerPhone.visibility:!0),x=b(()=>r.value.cabinetType==="employee"?i.value.events.options.customerEmail.visibility:!0),g=V(null),m=V(!1),p=V("success"),y=V("");function T(){m.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let F=V(!1),E=V(!1),P=V(!1),L=V([]),D=V(0),v=V(1),f=V(!1),C=V([]),B=V(0),_=V(1),k=b(()=>e.event.settings?JSON.parse(e.event.settings):null);const{noShowData:R}=U("noShowData");let M=V(!1),O=V(null),H=V(!1);function z(){O.value=null,M.value=!1}function J(Me,Le){O.value=Me,H.value=Le,M.value=!0}let oe=V(null);function X(){s.commit("attendee/setActive",!1),m.value=!0,y.value=l.value.event_attendee_saved,oe.value&&g.value&&setTimeout(function(){gt(oe.value,g.value.$el,0,300)},500),I(le.value==="approved"?["approved","canceled"]:["waiting"]),re()}function re(){F.value=!1,E.value=!1,a("openAttendee",!1)}function te(){s.commit("attendee/setAttendee",gs(s,s.getters["attendee/getDefaultAttendee"],e.event)),F.value=!0,a("openAttendee",!0)}function pe(Me){let Le=s.getters["customerInfo/getCustomers"],be=s.getters["customerInfo/getCustomersIds"];Le.filter(me=>me.id===Me.customer.id).length===0&&(Le.push(Me.customer),s.commit("customerInfo/setCustomers",Le)),be.indexOf(Me.customer.id)===-1&&(be.push(Me.customer.id),s.commit("customerInfo/setCustomersIds",be)),s.commit("attendee/setAttendee",gs(s,Me,e.event)),E.value=!0,F.value=!0,a("openAttendee",!0)}const le=V("approved");function Ee(){switch(le.value){case"approved":v.value=1;break;case"waiting":_.value=1;break}I(le.value==="approved"?["approved","canceled"]:["waiting"])}let de=V(null),ie=b(()=>s.getters["customerInfo/getLoading"]),Ce=b(()=>s.getters["customerInfo/getCustomers"]);function I(Me,Le=1){Me[0]==="approved"?P.value=!0:f.value=!0,$e.get("/bookings/events",Object.assign(Ue(s),{params:Js({source:"cabinet-provider",statuses:Me,page:Le,limit:parseInt(o.general.itemsPerPage),events:[e.event.id],customers:de.value?[de.value]:[]})})).then(be=>{Me[0]==="approved"?(ae.value=be.data.data.attendeeCount,_e.value=be.data.data.maxCapacity,L.value=be.data.data.bookings.filter(me=>me.status==="approved"||me.status==="canceled").reduce((me,xe)=>(me.push(gs(s,Cr(xe,s.getters["attendee/getAttendee"]),e.event)),me),[]),D.value=be.data.data.filteredCount):(ae.value=be.data.data.waitingCount,_e.value=be.data.data.waitingCapacity,C.value=be.data.data.bookings.filter(me=>me.status==="waiting").reduce((me,xe)=>(me.push(Cr(xe)),me),[]),B.value=be.data.data.filteredCount)}).catch(be=>{console.log(be)}).finally(()=>{P.value=!1,f.value=!1})}function W(Me,Le){$e.post("/events/bookings/"+Me,{status:Le,bookings:[{status:Le}]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(be=>{console.log(be)}).finally(()=>{})}function Q(Me){let Le=le.value==="approved"?["approved","canceled"]:["waiting"];Le[0]==="approved"?v.value=Me:_.value=Me,I(Le,Me)}function ee(){M.value=!1,H.value?f.value=!0:P.value=!0,$e.post("/events/bookings/delete/"+O.value.id,Pi(s),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{Q(v.value)}).catch(()=>{f.value=!1,P.value=!1})}let G=V(Ti().filter(Me=>(!o.featuresIntegrations.waitingList.enabled||(k.value?"waitingList"in k.value&&!k.value.waitingList.enabled:!0)?Me.value!=="waiting":!0)&&(o.featuresIntegrations.noShowTag.enabled?!0:Me.value!=="no-show"))),ae=V(0),_e=V(0),ce=b(()=>`${ae.value}/${_e.value}`),Pe=b(()=>ae.value===1?l.value.attendee:l.value.attendees);function se(Me){const Le=JSON.parse(Me),be={};return Le.forEach(me=>{if(me.type!=="booking")for(const[xe,je]of Object.entries(me.dates))(be[xe]=be[xe]||[]).push(je)}),Object.fromEntries(Object.entries(be).map(([me,xe])=>[me,`${xe.filter(Boolean).length}/${xe.length}`]))}Ge(()=>{I(["approved","canceled"]),s.commit("customerInfo/setCustomers",s.getters["auth/getPreloadedCustomers"])});let ye=U("amColors"),De=b(()=>({"--am-c-capei-att-primary":ye.value.colorPrimary,"--am-c-capei-att-text":ye.value.colorMainText,"--am-c-capei-att-text-op90":K(ye.value.colorMainText,.9),"--am-c-capei-att-text-op10":K(ye.value.colorMainText,.1)}));return(Me,Le)=>{const be=_a,me=Ca;return u(),A("div",{ref_key:"attendeesContainer",ref:oe,class:"am-capei-att",style:Be(t(De))},[t(m)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:g,type:t(p),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:T,onTriggerClose:T},{title:S(()=>[NE,ue(" "+w(t(y)),1)]),_:1},8,["type"])):$("",!0),t(F)?$("",!0):(u(),A("div",OE,[d("div",ME,[d("div",VE,w(t(e).event.name),1),t(_e)?(u(),A("div",RE,w(t(ce))+" "+w(t(Pe)),1)):$("",!0)]),N(ke,{category:"secondary",type:"plain",size:"small",class:"am-capei-att__back",onClick:Le[0]||(Le[0]=xe=>t(a)("close"))},{default:S(()=>[ue(w(t(l).back),1)]),_:1})])),t(F)?$("",!0):(u(),A("div",{key:2,class:j(["am-capei-att__header",t(e).responsiveClass])},[N(Je,{modelValue:t(de),"onUpdate:modelValue":Le[1]||(Le[1]=xe=>Fe(de)?de.value=xe:de=xe),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-capei-att-text)","popper-class":"am-cap-cust__popper",placeholder:t(l).event_attendees_search,"remote-method":xe=>{t(Gs)(t(s),xe)},loading:t(ie),onFocus:Le[2]||(Le[2]=xe=>t($o)(t(s))),onChange:Le[3]||(Le[3]=xe=>I(le.value==="approved"?["approved","canceled"]:["waiting"],1))},{default:S(()=>[(u(!0),A(ne,null,ve(t(Ce),xe=>(u(),Y(Ye,{key:xe.id,value:xe.id,label:`${xe.firstName} ${xe.lastName}`},{default:S(()=>[d("div",qE,[d("div",UE,w(xe.firstName+" "+xe.lastName),1),t(x)?(u(),A("div",zE,w(xe.email),1)):$("",!0),t(c)?(u(),A("div",jE,w(xe.phone),1)):$("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"]),t(o).roles.allowWriteEvents?(u(),Y(ke,{key:0,prefix:"plus",icon:"plus","icon-only":t(e).pageWidth<540,onClick:te},{default:S(()=>[ue(w(t(l).event_add_attendee),1)]),_:1},8,["icon-only"])):$("",!0)],2)),t(F)?$("",!0):(u(),Y(me,{key:3,modelValue:le.value,"onUpdate:modelValue":Le[4]||(Le[4]=xe=>le.value=xe),onTabClick:Ee},{default:S(()=>[N(be,{label:t(l).attendees,name:"approved"},{default:S(()=>[t(P)?(u(),Y(Wt,{key:1})):(u(),A("div",YE,[t(L).length?(u(),A(ne,{key:0},[(u(!0),A(ne,null,ve(t(L),(xe,je)=>(u(),A("div",{key:je,class:j(["am-capei-att__card",t(e).responsiveClass])},[d("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[d("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[d("div",{class:j(["am-capei-customer__name",t(R)(0).class])},[t(R)(0).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(R)(0).icon}`)},null,2)):$("",!0),ue(" "+w(xe.customer.firstName+" "+xe.customer.lastName),1)],2),xe.customer.phone&&t(c)||xe.customer.email&&t(x)?(u(),A("div",WE,[xe.customer.phone&&t(c)?(u(),A("div",HE,[GE,d("a",{href:`tel:${xe.customer.phone}`},w(xe.customer.phone),9,ZE)])):$("",!0),xe.customer.email&&t(x)?(u(),A("div",JE,[XE,d("a",{href:`mailto:${xe.customer.email}`},w(xe.customer.email),9,QE)])):$("",!0)])):$("",!0)],2),N(Je,{modelValue:xe.status,"onUpdate:modelValue":he=>xe.status=he,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(G).find(he=>he.value===xe.status).icon,"prefix-icon-color":t(G).find(he=>he.value===xe.status).color,"popper-class":"am-capei-att__popper","parent-class":t(e).responsiveClass,onChange:he=>{W(xe.id,he)}},{default:S(()=>[(u(!0),A(ne,null,ve(t(G),he=>(u(),Y(Ye,{key:he.value,value:he.value,label:he.label},{default:S(()=>[d("span",{class:j(`am-icon-${he.icon}`),style:Be({color:he.color})},null,6),ue(" "+w(he.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","parent-class","onChange"])],2),xe.ticketsData.length?(u(),A("div",KE,[d("div",e_,w(t(l).event_book_tickets)+": ",1),d("div",t_,[(u(!0),A(ne,null,ve(xe.ticketsData,(he,we)=>(u(),A("div",{key:we,class:"am-capei-att__card-ticket"},w(he.persons)+" x "+w(t(e).event.customTickets.find(Ve=>Ve.id===he.eventTicketId).name),1))),128))])])):(u(),A("div",a_,[d("div",s_,w(t(l).event_book_persons)+": ",1),d("div",l_,w(xe.persons),1)])),t(o).featuresIntegrations.eTickets.enabled&&xe.qrCodes?(u(),A("div",n_,[d("div",o_,w(t(l).checked_in)+": ",1),(u(!0),A(ne,null,ve(se(xe.qrCodes),(he,we)=>(u(),A("div",{key:we,class:"am-capei-att__card-etickets__item"},[d("span",r_,w(we)+":",1),d("span",i_,w(he),1)]))),128))])):$("",!0),t(o).roles.allowWriteEvents?(u(),Y(Ea,{key:3,index:je,"reference-class":t(e).responsiveClass,onEdit:he=>pe(xe),onRemove:he=>J(xe,!1)},null,8,["index","reference-class","onEdit","onRemove"])):$("",!0)],2))),128)),t(D)>t(o).general.itemsPerPage?(u(),Y(wl,{key:0,"page-size":t(o).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(D),"current-page":t(v),onCurrentChange:Q},null,8,["page-size","total","current-page"])):$("",!0)],64)):(u(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"]),t(o).featuresIntegrations.waitingList.enabled&&t(k)!==null&&"waitingList"in t(k)&&t(k).waitingList.enabled?(u(),Y(be,{key:0,label:t(l).waiting_list,name:"waiting"},{default:S(()=>[t(f)?(u(),Y(Wt,{key:1})):(u(),A("div",c_,[t(C).length?(u(),A(ne,{key:0},[(u(!0),A(ne,null,ve(t(C),(xe,je)=>(u(),A("div",{key:je,class:"am-capei-att__card"},[d("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[d("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[d("div",{class:j(["am-capei-customer__name",t(R)(0).class])},[t(R)(0).icon?(u(),A("span",{key:0,class:j(`am-icon-${t(R)(0).icon}`)},null,2)):$("",!0),ue(" "+w(xe.customer.firstName+" "+xe.customer.lastName),1)],2),xe.customer.phone&&t(c)||xe.customer.email&&t(x)?(u(),A("div",x_,[xe.customer.phone&&t(c)?(u(),A("div",u_,[d_,d("a",{href:`tel:${xe.customer.phone}`},w(xe.customer.phone),9,m_)])):$("",!0),xe.customer.email&&t(x)?(u(),A("div",p_,[f_,d("a",{href:`mailto:${xe.customer.email}`},w(xe.customer.email),9,g_)])):$("",!0)])):$("",!0)],2),N(Je,{modelValue:xe.status,"onUpdate:modelValue":he=>xe.status=he,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(G).find(he=>he.value===xe.status).icon,"prefix-icon-color":t(G).find(he=>he.value===xe.status).color,"popper-class":"am-capei-att__popper",onChange:he=>{W(xe.id,he)}},{default:S(()=>[(u(!0),A(ne,null,ve(t(G),he=>(u(),Y(Ye,{key:he.value,value:he.value,label:he.label},{default:S(()=>[d("span",{class:j(`am-icon-${he.icon}`),style:Be({color:he.color})},null,6),ue(" "+w(he.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","onChange"])],2),Object.keys(xe.ticketsData).length?(u(),A("div",h_,[d("div",v_,w(t(l).event_book_tickets)+": ",1),d("div",E_,[(u(!0),A(ne,null,ve(xe.ticketsData,(he,we)=>(u(),A("div",{key:we,class:"am-capei-att__card-ticket"},w(he.persons)+" x "+w(t(e).event.customTickets.find(Ve=>Ve.id===he.eventTicketId).name),1))),128))])])):(u(),A("div",__,[d("div",C_,w(t(l).event_book_persons)+": ",1),d("div",y_,w(xe.persons),1)])),t(o).roles.allowWriteEvents?(u(),Y(Ea,{key:2,index:je,"reference-class":t(e).responsiveClass,onEdit:he=>pe(xe),onRemove:he=>J(xe,!0)},null,8,["index","reference-class","onEdit","onRemove"])):$("",!0)]))),128)),t(B)>t(o).general.itemsPerPage?(u(),Y(wl,{key:0,"page-size":t(o).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(B),"current-page":t(_),onCurrentChange:Q},null,8,["page-size","total","current-page"])):$("",!0)],64)):(u(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"])):$("",!0)]),_:1},8,["modelValue"])),N(Ha,{visibility:t(M),title:t(l).confirm,description:t(l).event_attendee_remove,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:z,onConfirm:ee,onClose:z},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),t(F)?(u(),Y(Si,{key:4,visibility:t(F),title:t(E)?t(l).event_edit_attendee:t(l).event_add_attendee,event:t(e).event,"page-width":t(e).pageWidth,"is-new":!t(E),onSave:X,onClose:re},null,8,["visibility","title","event","page-width","is-new"])):$("",!0)],4)}}});const A_=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),F_={name:"CabinetEvents",key:"events"},k_=Object.assign(F_,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=V(null),{width:l}=Ga(s),o=b(()=>ot(l.value)),r={components:{IconComponent:Ze},template:'<IconComponent icon="plus"/>'},i=U("licence");const c=U("settings");let x=U("originKey"),g=U("amCustomize");const m=U("shortcodeData");let p=b(()=>m.value.cabinetType==="customer"&&(i.isPro||i.isDeveloper)&&c.featuresIntegrations.eTickets.enabled);const y=U("labels"),T=U("localLanguage");let F=b(()=>c.general.usedLanguages.includes(T.value)),E=b(()=>{let he=tt({...y}),we=g.value.events.translations;return we&&Object.keys(we).forEach(Ve=>{we[Ve][T.value]&&F.value?he[Ve]=we[Ve][T.value]:we[Ve].default&&(he[Ve]=we[Ve].default)}),he});ze("amLabels",E);let P=V(null),L=V(!1),D=V("success"),v=V("");function f(){L.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function C(he){let we=tt({...y}),Ve=g.value[he].translations;return Ve&&Object.keys(Ve).forEach(Ke=>{Ve[Ke][T.value]&&F.value?we[Ke]=Ve[Ke][T.value]:Ve[Ke].default&&(we[Ke]=Ve[Ke].default)}),we}function B(he){return g.value[he].options}let _=b(()=>e.getters["entities/getReady"]),k=U("cabinetType");e.commit("cabinetFilters/setDates",ho(k.value));let R=b(()=>e.getters["cabinet/getEventsLoading"]),M=V(!1),O=V(null),H=V(null),z=V(0),J=V(1);function oe(he){J.value=he,X(he)}function X(he=1){O.value=null,e.commit("cabinet/setEventsLoading",!0);let we=e.getters["cabinet/getTimeZone"],Ve=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getEventsFilters"]));Ve.dates=Ve.dates.map(Re=>Ae(Re).format("YYYY-MM-DD")),Ve.timeZone=we,Ve.source="cabinet-"+k.value,Ve.id=Ve.events,Ve.group=!0,Ve.page=he,Ve.limit=c.general.itemsPerPage,Ve.customers&&(Ve.customerId=Ve.customers),e.commit("auth/setLoadingEventsCounter",e.getters["auth/getLoadingEventsCounter"]+1);let Ke=e.getters["auth/getLoadingEventsCounter"];$e.get("/events",Object.assign(Ue(e),{params:Js(Ve)})).then(Re=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&(e.dispatch("cabinetFilters/injectEventsOptions",Re.data.data.events),e.commit("auth/setPreloadedEvents",Re.data.data.events),z.value=Re.data.data.count,e.commit("eventEntities/setEvents",Re.data.data.events),H.value=D0(Re.data.data.events,e.getters["cabinet/getTimeZone"],e))}).catch(Re=>{Re?.response?.data?.data?.reauthorize!==void 0&&Re.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(Re)}).finally(()=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&e.commit("cabinet/setEventsLoading",!1)})}function re(he){e.commit("cabinet/setEventsLoading",!0),$e.get("/events/"+he.id,Object.assign({params:{source:"cabinet-"+k.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(we=>{e.commit("event/setEvent",r1(e,we.data.data.event)),te.value=!0}).catch(we=>{console.log(we)}).finally(()=>{e.commit("cabinet/setEventsLoading",!1)})}let te=V(!1),pe=V(!1),le=V(!1),Ee=V(!1),de=V(!1),ie=V(null);function Ce(he){e.commit("cabinet/setEventsLoading",!0),te.value=!1,setTimeout(()=>{e.commit("event/setEvent",he),te.value=!0,e.commit("cabinet/setEventsLoading",!1)},500)}function I(){L.value=!0,v.value=E.value.event_saved,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500),X(),se()}function W(){ye(),te.value=!0}function Q(he){ie.value=he,Pe(gs(e,e.getters["attendee/getDefaultAttendee"],he)),le.value=!0}function ee(){X(J.value),G()}function G(){le.value=!1,Ee.value=!1}function ae(he){ie.value=he,pe.value=!0}function _e(){ie.value=null,X(J.value),Pe(gs(e,e.getters["attendee/getDefaultAttendee"])),pe.value=!1,de.value=!1}function ce(he){de.value=he}function Pe(he={}){e.commit("attendee/setAttendee",he)}function se(){te.value=!1,ye()}function ye(){e.commit("event/setEvent",{bookings:[],settings:_s(c,e.getters["event/getSettings"],{},{})})}let De=V(!1);function Me(){De.value=!0,$e.post("/bookings/cancel/"+O.value.id,{type:"event",source:"cabinet-"+k.value},Object.assign(Ue(e),{params:{source:"cabinet-"+k.value}})).then(()=>{O.value=null,X(),L.value=!0,v.value=E.value.event_canceled,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500)}).catch(he=>{!("data"in he.response.data)&&"message"in he.response.data&&(L.value=!0,v.value=he.response.data.message,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500))}).finally(()=>{De.value=!1})}xt(()=>a.loadBookingsCounter,()=>{X()}),Ge(()=>{X()});function Le(he){let we=[],Ve=e.getters["entities/getEmployees"];if(he.organizerId&&Ve.find(Ke=>Ke.id===he.organizerId)){let Ke={...Ve.find(Re=>Re.id===he.organizerId),rank:"organizer"};if(!he.providers.length)return Ke;we.push(Ke)}return he.providers.length&&he.providers.forEach(Ke=>{Ke.id!==he.organizerId&&Ve.find(Re=>Re.id===Ke.id)&&we.push(Ve.find(Re=>Re.id===Ke.id))}),we}function be(he){if(he){if(he===1)return{class:"am-no-show-1",icon:"no-show-1"};if(he===2)return{class:"am-no-show-2",icon:"no-show-2"};if(he>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:be});let me=V(!1),xe=U("amColors"),je=b(()=>({"--am-c-cape-bgr":xe.value.colorMainBgr,"--am-c-cape-text":xe.value.colorMainText,"--am-c-cape-text-op70":K(xe.value.colorMainText,.7),"--am-c-cape-text-op25":K(xe.value.colorMainText,.25),"--am-c-cape-primary":xe.value.colorPrimary,"--am-c-cust-no1":xe.value.colorMainText,"--am-c-cust-no1-bgr":K(xe.value.colorMainText,.1),"--am-c-cust-no2":xe.value.colorWarning,"--am-c-cust-no2-bgr":K(xe.value.colorWarning,.1),"--am-c-cust-no3":xe.value.colorError,"--am-c-cust-no3-bgr":K(xe.value.colorError,.1),"--am-c-cust-text":xe.value.colorMainText,"--am-c-cust-link":K(xe.value.colorMainText,.5)}));return(he,we)=>(u(),A("div",{ref_key:"pageContainer",ref:s,class:j(["am-cap am-cape-main",{"am-capei-main":t(te)||t(le)||t(de)}]),style:Be(t(je))},[d("div",{class:j(["am-cape-main__inner",t(o)])},[t(L)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:P,type:t(D),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:f,onTriggerClose:f},{title:S(()=>[A_,ue(" "+w(t(v)),1)]),_:1},8,["type"])):$("",!0),!t(le)&&!t(te)&&!t(pe)&&t(_)?(u(),Y(No,{key:1,"step-key":"events",empty:t(M),"responsive-class":t(o),onChangeFilters:X},null,8,["empty","responsive-class"])):$("",!0),t(m).cabinetType==="employee"&&t(_)&&!t(le)&&!t(te)&&!t(pe)&&((t(i).isPro||t(i).isDeveloper)&&t(c).featuresIntegrations.eTickets.enabled||t(c).roles.allowWriteEvents)?(u(),A("div",{key:2,class:j(["am-cap__actions",t(o)])},[(t(i).isPro||t(i).isDeveloper)&&t(c).featuresIntegrations.eTickets.enabled&&(t(g).events.options?.scanQrCodeBtn?.visibility??!0)?(u(),Y(ke,{key:0,prefix:"scan-qr-code",size:"small",category:"secondary",type:"plain",onClick:we[0]||(we[0]=Ve=>Fe(me)?me.value=!0:me=!0)},{default:S(()=>[ue(w(t(E).scan_e_ticket),1)]),_:1})):$("",!0),t(c).roles.allowWriteEvents?(u(),Y(ke,{key:1,icon:t(r),prefix:"plus",size:"small",category:"primary",type:t(g).events.options.newEvtBtn.buttonType,onClick:W},{default:S(()=>[d("span",null,w(t(E).new_event),1)]),_:1},8,["icon","type"])):$("",!0)],2)):$("",!0),!t(R)&&t(_)?(u(),A(ne,{key:3},[!t(le)&&!t(te)&&!t(pe)&&t(H)&&Object.keys(t(H)).length>0?(u(),A("div",{key:0,class:j(["am-cape__wrapper",[{"am-no-border":t(H)&&Object.keys(t(H)).length===1},t(o)]])},[(u(!0),A(ne,null,ve(t(H),(Ve,Ke)=>(u(),A("div",{key:Ke,class:"am-cape"},[d("div",{class:j(["am-cape__date",[{"am-today":t(it)(Ke)===t(it)(t(Ae)().format("YYYY-MM-DD"))},{"am-no-flag":t(H)&&Object.keys(t(H)).length===1},t(o)]])},w(t(it)(Ke)),3),(u(!0),A(ne,null,ve(Ve.events,(Re,$a)=>(u(),Y(Ci,{key:$a,start:t(vs)(Re.periods[0].periodStart.split(" ")[1].slice(0,5)),name:Re.name,employee:Le(Re),customers:Re.bookings.filter(ut=>ut.status!=="rejected"&&ut.status!=="canceled").map(ut=>ut.customer),price:t(Lr)(Re),duration:null,periods:(he.periods=t(w0)(Re.periods))?he.periods:[],extras:[],tickets:t(P0)(Re),"custom-fields":t(vi)(Re.bookings,t(m).cabinetType),location:t(T0)(t(e),Re),"qr-codes":t(p)?t(L0)(Re):[],"google-meet-link":Re.periods.length===1&&Re.periods[0].googleMeetUrl?Re.periods[0].googleMeetUrl:"","microsoft-teams-link":Re.periods.length===1&&Re.periods[0].microsoftTeamsUrl?Re.periods[0].microsoftTeamsUrl:"","zoom-link":Re.periods.length===1&&Re.periods[0].zoomMeeting?Re.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":Re.periods.length===1&&Re.periods[0].lessonSpace?Re.periods[0].lessonSpace:"",bookable:Re,reservation:Re,booking:Re.bookings[0],"responsive-class":t(o),"parent-width":t(l),"customized-options":B("events"),onEditEvent:re,onAddEventAttendee:Q,onListEventAttendees:ae,onCancelBooking:we[1]||(we[1]=ut=>{Fe(O)?O.value=ut:O=ut})},null,8,["start","name","employee","customers","price","periods","tickets","custom-fields","location","qr-codes","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):$("",!0),!t(le)&&!t(te)&&!t(pe)&&(t(H)===null||Object.keys(t(H)).length===0)?(u(),Y(Ta,{key:1,heading:t(E).no_evt_found,text:t(E).have_no_evt},null,8,["heading","text"])):$("",!0),!t(le)&&!t(te)&&!t(pe)&&t(H)&&Object.keys(t(H)).length>0&&t(z)>t(c).general.itemsPerPage?(u(),Y(wl,{key:2,"page-size":t(c).general.itemsPerPage,"pager-count":5,layout:"prev, pager, next",total:t(z),"current-page":t(J),onCurrentChange:oe},null,8,["page-size","total","current-page"])):$("",!0),t(te)?(u(),Y(tE,{key:3,"page-width":t(l),"responsive-class":t(o),onClose:se,onSave:I,onDuplicate:Ce},null,8,["page-width","responsive-class"])):$("",!0),!t(le)&&t(pe)?(u(),Y(B_,{key:4,event:t(ie),"page-width":t(l),"responsive-class":t(o),onClose:_e,onOpenAttendee:ce},null,8,["event","page-width","responsive-class"])):$("",!0),t(le)?(u(),Y(Si,{key:5,visibility:t(le),title:t(Ee)?t(E).event_edit_attendee:t(E).event_add_attendee,event:t(ie),"page-width":t(l),"is-new":!t(Ee),onSave:ee,onClose:G},null,8,["visibility","title","event","page-width","is-new"])):$("",!0),t(x)==="capc"?(u(),Y(Ha,{key:6,visibility:t(O)!==null,title:C("cancelEvent").cancel_event,description:C("cancelEvent").confirm_cancel_event,"close-btn-text":C("cancelEvent").close,"confirm-btn-text":C("cancelEvent").confirm,"customized-options":B("cancelEvent"),loading:t(De),onClose:we[2]||(we[2]=Ve=>Fe(O)?O.value=null:O=null),onDecline:we[3]||(we[3]=Ve=>Fe(O)?O.value=null:O=null),onConfirm:Me},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):$("",!0),t(me)?(u(),Y(n1,{key:7,visibility:t(me),"onUpdate:visibility":[we[4]||(we[4]=Ve=>Fe(me)?me.value=Ve:me=Ve),we[5]||(we[5]=Ve=>Fe(me)?me.value=Ve:me=Ve)]},null,8,["visibility"])):$("",!0)],64)):(u(),Y(Gl,{key:4}))],2)],6))}});const D_={class:"am-sc__top-menu"},w_={class:"am-sc__top-left"},P_={class:"am-sc__name"},T_={key:0,class:"am-sc__date"},L_={key:1,class:"am-sc__date"},S_=["onClick"],I_={class:"am-sc__edit"},$_=["onClick"],N_=d("span",{class:"am-icon-eye"},null,-1),O_={class:"am-sc__edit-text"},M_=["onClick"],V_=d("span",{class:"am-icon-download"},null,-1),R_={class:"am-sc__edit-text"},q_=["onClick"],U_={class:"am-sc__capacity"},z_=d("div",{class:"am-sc__btn"},[d("span",{class:"am-icon-arrow-right"})],-1),j_={key:0,class:"am-sc__bottom"},Y_=d("span",{class:"am-icon-triangle-info"},null,-1),W_={name:"CabinetPackagesList"},H_=Object.assign(W_,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(n,{emit:a}){const e=n;let s=Oe();function l(_){return Ae(_,"YYYY-MM-DD").diff(Ae(),"days")}function o(_){a("click",_)}function r(_,k,R){let M=0;return Object.keys(_).forEach(O=>{(k===null||parseInt(k)===parseInt(O))&&(M+=_[O].purchaseData[R])}),M}function i(_){return _===1?F.value.appointment_booked:F.value.appointments_booked}function c(_){let k=_.packageData.sharedCapacity?_.packageData.sharedCount:r(_.services,null,"count"),R=_.packageData.sharedCapacity?_.packageData.sharedTotal:r(_.services,null,"total");return`${R-k}/${R} ${i(R-k)}`}let x=U("containerWidth");const g=U("settings");let m=U("amCustomize");const p=U("labels"),y=U("localLanguage");let T=b(()=>g.general.usedLanguages.includes(y.value)),F=b(()=>{let _=tt({...p}),k=m.value.packagesList.translations;return k&&Object.keys(k).forEach(R=>{k[R][y.value]&&T.value?_[R]=k[R][y.value]:k[R].default&&(_[R]=k[R].default)}),_}),E=U("amColors"),P=U("licence");const L=V([]);Ge(()=>{L.value=e.packages.map(()=>!1)});function D(_,k){_.stopPropagation(),L.value=L.value.map((R,M)=>M===k?!R:!1)}function v(_){L.value[_]=!1}function f(_){s.commit("cabinet/setPackageLoading",!0),$e.post("/invoices/"+e.packages[_][1].packageData.payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(k=>{window.open(Dl(k)),L.value[_]=!1}).catch(k=>{console.log(k.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}function C(_){s.commit("cabinet/setPackageLoading",!0);const k=g.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.packages[_][1].packageData.payments[0].id,{format:k},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(R=>{let M=Dl(R,k);const O=document.createElement("a");O.href=M,O.download=`Invoice.${k}`,document.body.appendChild(O),O.click(),document.body.removeChild(O),L.value[_]=!1}).catch(R=>{console.log(R.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}let B=b(()=>({"--am-c-sc-bgr":E.value.colorMainBgr,"--am-c-sc-bgr-op15":K(E.value.colorMainText,.15),"--am-c-sc-text":E.value.colorMainText,"--am-c-sc-text-op80":K(E.value.colorMainText,.8),"--am-c-sc-text-op60":K(E.value.colorMainText,.6),"--am-c-sc-text-op10":K(E.value.colorMainText,.1),"--am-c-sc-text-op15":K(E.value.colorMainText,.15),"--am-c-sc-warning-op50":K(E.value.colorWarning,.5)}));return(_,k)=>{const R=bs;return t(e).packages.length?(u(!0),A(ne,{key:0},ve(t(e).packages,(M,O)=>(u(),A("div",{key:M[0],style:Be(t(B)),class:j(["am-sc",{"am-sc__canceled":M[1].packageData.status==="canceled"}])},[d("div",{class:j(["am-sc__top",n.responsiveClass])},[d("div",D_,[d("div",w_,[d("div",P_,w(M[1].packageData.name),1),M[1].packageData.end?(u(),A("div",T_,w(t(F).package_book_expire)+" "+w(t(it)(M[1].packageData.end.split(" ")[0])),1)):(u(),A("div",L_,w(`${t(F).package_book_expiration} ${t(F).package_book_unlimited}`),1))]),!t(P).isStarter&&t(g).featuresIntegrations.invoices.enabled?(u(),Y(R,{key:0,ref_for:!0,ref:"editRef",visible:L.value[O],persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-sc__popper","popper-style":t(B),trigger:"click",placement:"bottom-end"},{reference:S(()=>[d("span",{class:"am-cc__edit-btn am-icon-dots-vertical",onClick:H=>D(H,O)},null,8,S_)]),default:S(()=>[$t((u(),A("div",I_,[t(P).isStarter?$("",!0):(u(),A("div",{key:0,class:"am-sc__edit-item",onClick:H=>f(O)},[N_,d("span",O_,w(t(F).preview_invoice),1)],8,$_)),t(P).isStarter?$("",!0):(u(),A("div",{key:1,class:"am-sc__edit-item",onClick:H=>C(O)},[V_,d("span",R_,w(t(F).download_invoice),1)],8,M_))])),[[t(Qt),()=>v(O)]])]),_:2},1032,["visible","popper-style"])):$("",!0)]),d("div",{class:j(["am-sc__top-right",n.responsiveClass]),onClick:H=>o(M[0])},[d("div",U_,w(c(M[1])),1),z_],10,q_)],2),M[1].packageData.end&&M[1].packageData.status!=="canceled"?(u(),A(ne,{key:0},[l(M[1].packageData.end.split(" ")[0])>0?(u(),A("div",j_,[d("span",{class:j(["am-sc__expiration",{"am-mobile":t(x)<481}])},[Y_,ue(" "+w(`${t(F).package_deal_expire_in} ${l(M[1].packageData.end.split(" ")[0])} ${t(F).expires_days}, ${t(F).appointments_deal_expire}`),1)],2)])):$("",!0)],64)):$("",!0)],6))),128)):(u(),Y(Ta,{key:1,heading:t(F).no_pack_found,text:t(F).have_no_pack},null,8,["heading","text"]))}}});const G_=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),Z_={class:"am-cappa__back"},J_={class:"am-cappa__heading-left"},X_={key:0,class:"am-cappa__img-name"},Q_={class:"am-cappa__info"},K_={class:"am-cappa__name"},eC={key:0,class:"am-cappa__date"},tC={key:1,class:"am-cappa__date"},aC={key:2,class:"am-cappa__capacity"},sC={class:"am-cappa__service-heading"},lC={class:"am-cappa__service-right"},nC={key:0,class:"am-cappa__service-img__name"},oC={class:"am-cappa__service-info"},rC={class:"am-cappa__service-name"},iC={key:0,class:"am-cappa__service-capacity"},cC={name:"CabinetPackageAppointmentsList",key:"packagesList"},xC=Object.assign(cC,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(n,{emit:a}){const e=n;let s=Oe(),l=b(()=>s.getters.getSettings),o={components:{IconComponent:Ze},template:'<IconComponent icon="arrow-left"></IconComponent>'},{selectedPackageCustomerId:r}=U("packageSelection"),i=b(()=>s.getters["entities/getPackage"](e.data.packageData.id)),c=b(()=>i.value.bookable.filter(I=>e.data.services[I.service.id]).map(I=>I.service.id.toString())),x=b(()=>i.value.bookable.find(I=>parseInt(I.service.id)===parseInt(E.value))),g=V(null),m=V(null),p=b(()=>{let I=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredEmployees"],Q=[];if(x.value){if(m.value)Object.keys(I).forEach(G=>{P.value&&P.value.serviceId in I[G]&&I[G][parseInt(P.value.serviceId)].indexOf(m.value)!==-1&&Q.push(parseInt(G))});else{let G=[];if(x.value.locations.length)G=x.value.locations.map(ae=>ae.id);else for(let ae in I)x.value.service.id in I[ae]&&(G=G.concat(I[ae][x.value.service.id]));for(let ae in I)x.value.service.id in I[ae]&&G.forEach(_e=>{I[ae][x.value.service.id].indexOf(_e)!==-1&&Q.push(parseInt(ae))})}let ee=x.value.providers.length?x.value.providers.map(G=>G.id):W.map(G=>G.id);return W.filter(G=>ee.indexOf(G.id)!==-1&&Q.indexOf(G.id)!==-1&&(s.getters["entities/getShowHidden"]||G.status==="visible"&&G.show))}return[]}),y=b(()=>{let I=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredLocations"],Q=[];if(x.value){if(g.value)Q=I[g.value][x.value.service.id];else{let G=[];if(x.value.providers.length)G=x.value.providers.map(ae=>ae.id);else for(let ae in I)x.value.service.id in I[ae]&&G.push(parseInt(ae));for(let ae in I)x.value.service.id in I[ae]&&G.indexOf(parseInt(ae))!==-1&&(Q=Q.concat(I[ae][x.value.service.id]))}let ee=x.value.locations.length?x.value.locations.map(G=>G.id):W.map(G=>G.id);return W.filter(G=>ee.indexOf(G.id)!==-1&&Q.indexOf(G.id)!==-1&&(s.getters["entities/getShowHidden"]||G.status==="visible"))}return[]}),T=b(()=>{let I=[];return Object.keys(e.data.services).forEach(W=>{Object.keys(e.data.services[W].appointments).forEach(Q=>{e.data.services[W].appointments[Q].appointments.forEach(ee=>{I.push(ee)})})}),{type:"package",package:i.value,booking:null,bookable:i.value,paymentId:e.data.packageData.payments.length?e.data.packageData.payments[0].id:null,customer:s.getters["auth/getProfile"],packageCustomerId:parseInt(r.value),packageReservations:I,payments:e.data.packageData.payments,price:e.data.packageData.price,tax:e.data.packageData.tax,coupon:e.data.packageData.coupon,discount:e.data.packageData.discount,end:e.data.packageData.end}}),F=V(!1),E=V(null),P=V(null),L=V(null);Ge(()=>{E.value=c.value[0]});function D(I,W,Q){let ee=0;return Object.keys(I).forEach(G=>{(W===null||parseInt(W)===parseInt(G))&&(ee+=I[G].purchaseData[Q])}),ee}function v(I){return I===1?X.value.appointment_booked:X.value.appointments_booked}function f(I,W=null){let Q=I.packageData.sharedCapacity?I.packageData.sharedCount:D(I.services,W,"count"),ee=I.packageData.sharedCapacity?I.packageData.sharedTotal:D(I.services,W,"total");return`${ee-Q}/${ee} ${v(ee-Q)}`}function C(I){E.value=I.paneName}function B(){let I=s.getters["auth/getProfile"],W=s.getters["cabinet/getTimeZone"]?s.getters["cabinet/getTimeZone"]:"UTC",Q={serviceId:parseInt(E.value),group:1,timeZone:s.getters["cabinet/getTimeZone"],structured:!0,page:"cabinet"},ee=i.value.bookable.find(G=>parseInt(G.service.id)===parseInt(E.value)).providers.map(G=>G.id);ee.length&&(Q.providerIds=ee),Q.locationId=null,L.value=Q,P.value={type:"appointment",bookings:[{packageCustomerService:{id:e.data.services[E.value].purchaseData.packageCustomerServiceId},customer:{id:I.id,firstName:I.firstName,lastName:I.lastName,email:I.email,phone:I.phone,countryPhoneIso:I.countryPhoneIso,externalId:I.externalId,translations:I.translations},customerId:I.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:E.value,locationId:e.data.services[E.value].purchaseData.locitionId,providerId:e.data.services[E.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:l.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:W===""?Intl.DateTimeFormat().resolvedOptions().timeZone:W,utc:W==="",locale:window.localeLanguage[0]}}function _(I){P.value=null,a("booked",I)}let k=V(!1);function R(){k.value=!0,$e.post("/packages/customers/"+parseInt(r.value),{status:"canceled"},Ue(s)).then(()=>{F.value=!1,a("canceled",{message:X.value.package_purchase_canceled})}).catch(I=>{I.response&&a("cancelError",I.response.data)}).finally(()=>{k.value=!1})}function M(I){a("booked",I)}function O(){a("goBack")}let H=U("amCustomize");const z=U("labels"),J=U("localLanguage");let oe=b(()=>l.value.general.usedLanguages.includes(J.value)),X=b(()=>{let I=tt({...z}),W=H.value.packageAppointmentsList.translations;return W&&Object.keys(W).forEach(Q=>{W[Q][J.value]&&oe.value?I[Q]=W[Q][J.value]:W[Q].default&&(I[Q]=W[Q].default)}),I});ze("amLabels",X);let re=b(()=>s.getters["cabinet/getPaymentLinkError"].package),te=V("error"),pe=V(X.value.payment_link_error);function le(){re.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function Ee(I){let W=tt({...z}),Q=H.value[I].translations;return Q&&Object.keys(Q).forEach(ee=>{Q[ee][J.value]&&oe.value?W[ee]=Q[ee][J.value]:Q[ee].default&&(W[ee]=Q[ee].default)}),W}function de(I){return H.value[I].options}let ie=U("amColors"),Ce=b(()=>({"--am-c-cappa-text":ie.value.colorMainText,"--am-c-cappa-bgr":ie.value.colorMainBgr,"--am-c-cappa-text-op80":K(ie.value.colorMainText,.8),"--am-c-cappa-text-op70":K(ie.value.colorMainText,.7),"--am-c-cappa-text-op20":K(ie.value.colorMainText,.2),"--am-c-cappa-primary":ie.value.colorPrimary}));return(I,W)=>{const Q=_a,ee=Ca;return u(),A("div",{class:"am-cappa",style:Be(t(Ce))},[t(re)?(u(),Y(bt,{key:0,ref:"alertContainer",type:t(te),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:le,onTriggerClose:le},{title:S(()=>[G_,ue(" "+w(t(pe)),1)]),_:1},8,["type"])):$("",!0),d("div",Z_,[N(ke,{"custom-class":"am-cappa__back-btn",icon:t(o),type:t(H).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"","aria-label":t(X).back_btn,onClick:O},null,8,["icon","type","aria-label"]),d("span",null,w(t(X).back_btn),1)]),d("div",{class:j(["am-cappa__heading",n.responsiveClass])},[d("div",J_,[d("div",{class:"am-cappa__img",style:Be(t(e).data.packageData.pictureThumbPath?{backgroundImage:`url(${t(e).data.packageData.pictureThumbPath})`}:{})},[t(e).data.packageData.pictureThumbPath?$("",!0):(u(),A("span",X_,w(t(Uo)(t(e).data.packageData.name)),1)),d("span",{class:"am-cappa__img-color",style:Be({backgroundColor:t(e).data.packageData.color})},null,4)],4),d("div",Q_,[d("div",K_,w(t(e).data.packageData.name),1),t(e).data.packageData.end?(u(),A("div",eC,w(t(X).package_book_expire)+" "+w(t(it)(t(e).data.packageData.end.split(" ")[0])),1)):(u(),A("div",tC,w(`${t(X).package_book_expiration} ${t(X).package_book_unlimited}`),1)),Object.keys(t(e).data.services).length>1?(u(),A("div",aC,w(f(t(e).data)),1)):$("",!0)])]),d("div",{class:j(["am-cappa__heading-right",n.responsiveClass])},[t(l).roles.allowCustomerCancelPackages&&t(e).data.packageData.status!=="canceled"?(u(),Y(ke,{key:0,category:"danger",size:"small",class:j(["am-cappa__actions",n.responsiveClass]),type:t(H).packageAppointmentsList.options.cancelBtn.buttonType,onClick:W[0]||(W[0]=()=>{Fe(F)?F.value=!0:F=!0})},{default:S(()=>[ue(w(t(X).cancel),1)]),_:1},8,["class","type"])):$("",!0),t(e).data.packageData.status==="approved"&&t(e).data.packageData.price>0?(u(),Y(Ei,{key:1,"btn-size":"small",class:j(`am-cappa__actions ${n.responsiveClass}`),type:t(H).packageAppointmentsList.options.payBtn.buttonType,reservation:t(T),bookable:t(i)},null,8,["class","type","reservation","bookable"])):$("",!0)],2)],2),N(ee,{modelValue:t(E),"onUpdate:modelValue":W[1]||(W[1]=G=>Fe(E)?E.value=G:E=G),class:"am-cappa__service",onTabClick:C},{default:S(()=>[(u(!0),A(ne,null,ve(t(c),G=>(u(),Y(Q,{key:G,name:G},{label:S(()=>[d("div",sC,w(t(e).data.services[G].purchaseData.name),1)]),default:S(()=>[t(E)===G?(u(),A(ne,{key:0},[d("div",{class:j(["am-cappa__service-top",n.responsiveClass])},[d("div",lC,[d("div",{class:"am-cappa__service-img",style:Be(t(e).data.services[t(E)].purchaseData.pictureThumbPath?{backgroundImage:`url(${t(e).data.services[t(E)].purchaseData.pictureThumbPath})`}:{})},[t(e).data.services[t(E)].purchaseData.pictureThumbPath?$("",!0):(u(),A("span",nC,w(t(Uo)(t(e).data.services[t(E)].purchaseData.name)),1)),d("span",{class:"am-cappa__service-img__color",style:Be({backgroundColor:t(e).data.services[t(E)].purchaseData.color})},null,4)],4),d("div",oC,[d("div",rC,w(t(e).data.services[t(E)].purchaseData.name),1),t(e).data.packageData.sharedCapacity?$("",!0):(u(),A("div",iC,w(f(t(e).data,t(E))),1))])]),t(e).data.packageData.status!=="canceled"?(u(),Y(ke,{key:0,class:j(["am-cappa__service-book",n.responsiveClass]),size:"small",type:t(H).packageAppointmentsList.options.bookBtn.buttonType,disabled:D(t(e).data.services,t(E),"count")===0,onClick:B},{default:S(()=>[ue(w(t(X).book_now),1)]),_:1},8,["class","type","disabled"])):$("",!0)],2),N(bi,{"grouped-appointments":t(e).data.services[t(E)].appointments,"page-width":n.pageWidth,"responsive-class":n.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:M,onBooked:M},null,8,["grouped-appointments","page-width","responsive-class"])],64)):$("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),N(Ha,{loading:t(k),visibility:t(F),title:Ee("cancelPackage").cancel_package,description:Ee("cancelPackage").confirm_cancel_package,"close-btn-text":Ee("cancelPackage").close,"confirm-btn-text":Ee("cancelPackage").confirm,"customized-options":de("cancelPackage"),onClose:W[2]||(W[2]=()=>{Fe(F)?F.value=!1:F=!1}),onDecline:W[3]||(W[3]=()=>{Fe(F)?F.value=!1:F=!1}),onConfirm:R},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),N(yi,{visibility:t(P)!==null&&!t(P).id,appointment:t(P),employees:t(p),locations:t(y),"slots-params":t(L),labels:Ee("bookAppointment"),"customized-options":de("bookAppointment"),onClose:W[4]||(W[4]=G=>Fe(P)?P.value=null:P=null),onSuccess:_,onError:W[5]||(W[5]=()=>{}),onEmployeeSelection:W[6]||(W[6]=G=>Fe(g)?g.value=G:g=G),onLocationSelection:W[7]||(W[7]=G=>Fe(m)?m.value=G:m=G)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const uC=d("span",{class:"am-icon-checkmark-circle-full"},null,-1),dC={name:"CabinetPackages",key:"packages"},mC=Object.assign(dC,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Oe(),s=V(null),l=V(0),o=U("sidebarCollapsed");window.addEventListener("resize",r);function r(){s.value&&(l.value=s.value.offsetWidth)}xt(o,O=>{O?setTimeout(()=>{i()},1500):setTimeout(()=>{i()},500)});function i(){l.value=s.value.offsetWidth}Ge(()=>{co(()=>{l.value=s.value.offsetWidth})});let c=b(()=>ot(l.value)),x=V(null),g=V(!1),m=V("success"),p=V("");function y(){g.value=!1,p.value=""}let T=U("cabinetType");e.commit("cabinetFilters/setDates",ho(T.value));let F=b(()=>e.getters["cabinet/getPackageLoading"]),E=V([]),P=V(null);function L(){let O=e.getters["cabinetFilters/getPackages"],H=e.getters["cabinetFilters/getServices"],z=e.getters["cabinetFilters/getProviders"],J=e.getters["cabinetFilters/getLocations"];E.value=B.value.filter(oe=>{let X=e.getters["entities/getPackageEntities"](oe[1].packageData.id);return(H.length===0||H.filter(re=>X.services.includes(re)).length>0)&&(z.length===0||z.filter(re=>X.providers.includes(re)).length>0)&&(J.length===0||J.filter(re=>X.locations.includes(re)).length>0)&&(O.length===0||O.filter(re=>X.packages.includes(re)).length>0)})}function D(O,H,z){let J=0;return Object.keys(O).forEach(oe=>{(H===null||parseInt(H)===parseInt(oe))&&(J+=O[oe].purchaseData[z])}),J}function v(O){let H=D(O.services,null,"count"),z=D(O.services,null,"total");return z-H===z}function f(O){e.commit("cabinet/setPackageLoading",!0);let H=e.getters["cabinet/getTimeZone"],z=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getPackagesFilters"]));z.timeZone=H,z.source="cabinet-"+T.value,z.activePackages=0,$e.get("/appointments",Js(Object.assign(Ue(e),{params:z}))).then(J=>{let oe={};J.data.data.availablePackageBookings.forEach(de=>{de.packages.forEach(ie=>{ie.services.forEach(Ce=>{Ce.bookings.forEach(I=>{let W=e.getters["entities/getPackage"](ie.packageId);if(W&&(I.packageCustomerId in oe||(oe[I.packageCustomerId]={packageData:{id:W.id,name:W.name,start:I.start,end:I.end,price:I.price,tax:I.tax,coupon:I.coupon,status:I.status,type:"package",payments:I.payments,sharedCapacity:I.sharedCapacity,sharedTotal:I.total,sharedCount:I.count,discount:0,color:W.color,pictureFullPath:W.pictureFullPath,pictureThumbPath:W.pictureThumbPath},services:{}}),!(Ce.serviceId in oe[I.packageCustomerId].services))){let Q=e.getters["entities/getService"](Ce.serviceId);oe[I.packageCustomerId].services[Ce.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:I.id,total:I.total,count:I.count,employeeId:I.employeeId,locationId:I.locationId,name:Q.name,color:Q.color,pictureThumbPath:Q.pictureThumbPath}}}})})})});let X=hi(J.data.data.appointments,H,T.value==="provider");Object.keys(X).forEach(de=>{X[de].appointments.forEach(ie=>{ie.bookings.forEach(Ce=>{let I=Ce.packageCustomerService.packageCustomer.id;I in oe&&(de in oe[I].services[ie.serviceId].appointments||(oe[I].services[ie.serviceId].appointments[de]={date:de,appointments:[]}),oe[I].services[ie.serviceId].appointments[de].appointments.push(ie))})})});let re=Object.entries(oe).filter(de=>de[1].packageData.status==="canceled"),te=Object.entries(oe).filter(de=>de[1].packageData.status!=="canceled"&&v(de[1])),pe=Object.entries(oe).filter(de=>de[1].packageData.status!=="canceled"&&!v(de[1])&&de[1].packageData.end===null),le=Object.entries(oe).filter(de=>de[1].packageData.status!=="canceled"&&!v(de[1])&&de[1].packageData.end!==null).sort((de,ie)=>Ae(de[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(Ae(ie[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(E.value=[...le,...pe,...te,...re],B.value=[...le,...pe,...te,...re],!(z.packages.length||z.services.length||z.providers.length||z.locations.length)){let de=[],ie=[],Ce=[],I=[];E.value.forEach(W=>{let Q=e.getters["entities/getPackageEntities"](W[1].packageData.id);de=de.concat(Q.services),ie=ie.concat(Q.providers),Ce=Ce.concat(Q.locations),I=I.concat(Q.packages)}),e.dispatch("cabinetFilters/injectServiceOptions",de.filter((W,Q,ee)=>ee.indexOf(W)===Q)),e.dispatch("cabinetFilters/injectProviderOptions",ie.filter((W,Q,ee)=>ee.indexOf(W)===Q)),e.dispatch("cabinetFilters/injectLocationOptions",Ce.filter((W,Q,ee)=>ee.indexOf(W)===Q)),e.dispatch("cabinetFilters/injectPackagesOptions",I.filter((W,Q,ee)=>ee.indexOf(W)===Q))}}).catch(J=>{console.log(J)}).finally(()=>{e.commit("cabinet/setPackageLoading",!1),O&&"message"in O&&(g.value=!0,p.value=O.message,s.value&&x.value&&setTimeout(function(){gt(s.value,x.value.$el,0,300)},500))})}function C(O){g.value=!0,p.value=O.message,m.value="error",s.value&&x.value&&setTimeout(function(){gt(s.value,x.value.$el,0,300)},500)}ze("packageSelection",{selectedPackageCustomerId:P});let B=V([]);xt(()=>a.loadBookingsCounter,()=>{f()}),Ge(()=>{f()});let _=b(()=>({list:{template:Qe(H_),props:{packages:E.value,responsiveClass:c.value},handlers:{click:R}},item:{template:Qe(xC),props:{data:P.value?E.value.find(O=>O[0]===P.value)[1]:{},responsiveClass:c.value,pageWidth:l.value},handlers:{goBack:M,booked:f,canceled:f,cancelError:C}}})),k=V("list");function R(O){P.value=O,k.value="item"}function M(){P.value=null,k.value="list"}return(O,H)=>(u(),A("div",{ref_key:"pageContainer",ref:s,class:"am-cap"},[t(g)?(u(),Y(bt,{key:0,ref_key:"alertContainer",ref:x,type:t(m),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:y,onTriggerClose:y},{title:S(()=>[uC,ue(" "+w(t(p)),1)]),_:1},8,["type"])):$("",!0),$t(N(No,{"step-key":"packages","responsive-class":t(c),onChangeFilters:L},null,8,["responsive-class"]),[[mo,t(k)==="list"]]),t(F)?(u(),Y(Gl,{key:2})):(u(),Y(ft(t(_)[t(k)].template),Dt({key:1},t(_)[t(k)].props,uo(t(_)[t(k)].handlers)),null,16))],512))}});const pC=d("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),fC=d("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),gC=["href"],hC={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},vC=["onClick"],EC={class:"am-fs-sb__page-icon"},_C={key:1,class:"am-fs-sb__page-divider"},CC={class:"am-fs-sb__page-inner"},yC=d("div",{class:"am-fs-sb__page-icon"},[d("span",{class:"am-icon-dashboard"})],-1),bC=d("div",{class:"am-fs-sb__page-divider"},null,-1),BC={class:"am-fs-sb__page-inner"},AC=d("div",{class:"am-fs-sb__page-icon"},[d("span",{class:"am-icon-logout"})],-1),FC={class:"am-caph"},kC={class:"am-caph__text"},DC=d("span",{class:"am-icon-menu"},null,-1),wC=[DC],PC={name:"CustomerPanel"},TC=Object.assign(PC,{setup(n){const a=$l().cookies,e=Oe();let s=b(()=>e.getters.getIsRtl);const l=U("shortcodeData");let o=b(()=>e.getters["auth/getAuthenticated"]);xt(o,ae=>{ae&&(e.commit("auth/setNewPassword",""),e.commit("auth/setConfirmPassword",""))});let r=V(l.value.cabinetType==="employee"?"provider":"customer");ze("cabinetType",r);let i=U("licence"),c=b(()=>r.value==="provider"?"cape":"capc");ze("originKey",c);let x=V(null),{width:g}=Ga(x);ze("containerWidth",g);const m=U("settings");let p=V(l.value.appointments||!l.value.events?"appointments":"events");const y=b(()=>m.customizedData&&c.value in m.customizedData?m.customizedData[c.value]:kl[c.value]);ze("amCustomize",y);const T=V(m.customizedData?m.customizedData.fonts:kl.fonts);ze("amFonts",T);const F=U("labels");ze("amLabels",F);const E=U("localLanguage");let P=b(()=>m.general.usedLanguages.includes(E.value)),L=b(()=>{let ae=tt({...F});return m.customizedData&&Object.keys(y.value).forEach(_e=>{if(_e!=="colors"&&y.value[_e].translations){let ce=y.value[_e].translations;Object.keys(ce).forEach(Pe=>{ce[Pe][E.value]&&P.value?ae[Pe]=ce[Pe][E.value]:ce[Pe].default&&(ae[Pe]=ce[Pe].default)})}}),ae});function D(){let ae=document.head||document.getElementsByTagName("head")[0];ae.querySelector("#amCustomFont")&&ae.querySelector("#amCustomFont").remove();let _e="@font-face {font-family: 'comic'; src: url(http://localhost/amelia-test/wp-content/uploads/amelia/fonts/comic.woff);}",ce=document.createElement("style");ae.appendChild(ce),ce.setAttribute("type","text/css"),ce.setAttribute("id","amCustomFont"),ce.appendChild(document.createTextNode(_e))}T.value.customFontSelected&&D();let v=b(()=>p.value==="packages"?y.value.packagesList.options:y.value[p.value].options),f=b(()=>{let ae=p.value;return r.value==="customer"?ae!=="profile"?v.value.timeZone.visibility:!0:ae==="appointments"||ae==="events"?v.value.timeZone.visibility:!0}),C=V(!1),B=V(!1);ze("sidebarCollapsed",u0(B));let _=V("");xt(B,ae=>{ae?setTimeout(()=>{_.value="am-collapsed"},1e3):_.value=""});let k=V(null),R=V(0),M=b(()=>g.value>480);Ge(()=>{k.value&&setTimeout(()=>{R.value=k.value.offsetHeight},200),setTimeout(()=>{B.value=g.value<=600?!0:y.value.sidebar.options.toggle.visibility},1300)});const O=()=>{g.value<=600?B.value=!0:B.value=y.value.sidebar.options.toggle.visibility};window.addEventListener("resize",O),xt(g,ae=>{C.value=ae>481?!1:C.value});const H=b(()=>e.getters["entities/getReady"]);xt(H,ae=>{if(ae){if(l.value.cabinetType==="employee"&&e.getters["employee/getId"]){let _e=e.getters["employee/getEmployee"];e.commit("employee/setServiceList",Br(e,_e.serviceList)),e.commit("entities/setEmployees",[e.getters["entities/getEmployee"](e.getters["employee/getId"])])}e.dispatch("cabinetFilters/injectServiceOptions",e.getters["entities/getServices"].map(_e=>_e.id)),e.dispatch("cabinetFilters/injectProviderOptions",r.value==="customer"?e.getters["entities/getEmployees"].map(_e=>_e.id):[]),e.dispatch("cabinetFilters/injectLocationOptions",e.getters["entities/getLocations"].map(_e=>_e.id))}});const z=U("baseUrls");let J=["employees","categories","locations","packages","entitiesRelations","customFields"];l.value.cabinetType==="employee"&&(J=J.concat(["taxes","spaces","tags","settings"])),e.dispatch("entities/getEntities",{types:J,licence:"basic",loadEntities:!0,showHidden:!0,isPanel:!0});let oe=b(()=>e.getters.getReady),X=V({profile:Qe(l.value.cabinetType==="employee"?qp:Kc)});(l.value.appointments||!l.value.events)&&(X.value.appointments=Qe(Vh)),(l.value.events||!l.value.appointments)&&(X.value.events=Qe(k_)),m.featuresIntegrations.packages.enabled&&(l.value.appointments||!l.value.events)&&(i.isPro||i.isDeveloper)&&(X.value.packages=Qe(mC));const re=V([{key:"profile",icon:"user",pageLabel:L.value.my_profile,label:b(()=>c.value==="cape"?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:y.value.profile.options.lastName.visibility?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:`${e.getters["auth/getProfile"].firstName}`)}]);(l.value.appointments||!l.value.events)&&re.value.push({key:"appointments",icon:"service",label:L.value.appointments}),(l.value.events||!l.value.appointments)&&re.value.push({key:"events",icon:"star-outline",label:L.value.events}),m.featuresIntegrations.packages.enabled&&l.value.cabinetType==="customer"&&(l.value.appointments||!l.value.events)&&(i.isPro||i.isDeveloper)&&re.value.push({key:"packages",icon:"shipment",label:L.value.packages}),ze("sidebarSteps",re),Ge(()=>{te.value=re.value.findIndex(ae=>ae.key===p.value)});let te=V(0);function pe(ae,_e){l.value.cabinetType==="employee"&&(ae.key!=="appointments"&&(e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id,categoryId:null,serviceId:null,locationId:null}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])),ae.key!=="events"&&(e.commit("event/setEvent",{settings:_s(m,e.getters["event/getSettings"],{},{})}),e.commit("attendee/setAttendee",gs(e,e.getters["attendee/getDefaultAttendee"])))),p.value=ae.key,te.value=_e,e.commit("cabinetFilters/setResetFilters")}function le(ae){l.value.cabinetType==="employee"&&l.value.profile&&ae.step.key==="profile"||(pe(ae.step,ae.index),e.commit("cabinetFilters/setResetFilters"))}function Ee(){e.dispatch("auth/logout")}function de(){C.value=!1,Ee()}let ie=V(0);function Ce(){ie.value++}let I=b(()=>{switch(re.value[te.value].key){case"profile":return re.value[te.value].pageLabel;case"appointments":return e.getters["appointment/getActive"]&&!e.getters["appointment/getId"]?L.value.new_appointment:e.getters["appointment/getActive"]&&e.getters["appointment/getId"]?L.value.edit_appointment:re.value[te.value].label;case"events":return e.getters["attendee/getActive"]&&!e.getters["attendee/getId"]?L.value.event_add_attendee:e.getters["attendee/getActive"]&&e.getters["attendee/getId"]?L.value.event_edit_attendee:e.getters["event/getActive"]&&!e.getters["event/getId"]?L.value.new_event:e.getters["event/getActive"]&&e.getters["event/getId"]?L.value.edit_event:re.value[te.value].label;default:return re.value[te.value].label}});ze("bookingsCounterChanger",{bookingsCounterChanger:Ce});const W=U("timeZone");Zs(()=>{if(!m.general.showClientTimeZone){let ae=W.value;a.get("ameliaUserTimeZone")&&(ae=a.get("ameliaUserTimeZone")),e.commit("cabinet/setTimeZone",ae)}e.getters["cabinet/getTimeZone"]||e.commit("cabinet/setTimeZone",zs())});let Q=b(()=>y.value.colors);ze("amColors",Q);let ee=b(()=>({"--am-c-primary":Q.value.colorPrimary,"--am-c-success":Q.value.colorSuccess,"--am-c-error":Q.value.colorError,"--am-c-warning":Q.value.colorWarning,"--am-c-main-bgr":Q.value.colorMainBgr,"--am-c-main-heading-text":Q.value.colorMainHeadingText,"--am-c-main-text":Q.value.colorMainText,"--am-c-main-text-op10":K(Q.value.colorMainText,.1),"--am-c-sb-bgr":Q.value.colorSbBgr,"--am-c-sb-text":Q.value.colorSbText,"--am-c-inp-bgr":Q.value.colorInpBgr,"--am-c-inp-border":Q.value.colorInpBorder,"--am-c-inp-text":Q.value.colorInpText,"--am-c-inp-placeholder":Q.value.colorInpPlaceHolder,"--am-c-drop-bgr":Q.value.colorDropBgr,"--am-c-drop-text":Q.value.colorDropText,"--am-c-btn-prim":Q.value.colorBtnPrim,"--am-c-btn-prim-text":Q.value.colorBtnPrimText,"--am-c-btn-sec":Q.value.colorBtnSec,"--am-c-btn-sec-text":Q.value.colorBtnSecText,"--am-c-btn-danger":Q.value.colorBtnDanger,"--am-c-btn-danger-text":Q.value.colorBtnDangerText,"--am-c-skeleton-op20":K(Q.value.colorMainText,.2),"--am-c-skeleton-op60":K(Q.value.colorMainText,.6),"--am-c-skeleton-sb-op20":K(Q.value.colorSbText,.2),"--am-c-skeleton-sb-op60":K(Q.value.colorSbText,.6),"--am-c-scroll-op30":K(Q.value.colorPrimary,.3),"--am-c-scroll-op10":K(Q.value.colorPrimary,.1),"--am-font-family":T.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px","--am-mw-main":M.value?B.value?"858px":"1024px":"520px","--am-brad-main":M.value?"0 0.5rem 0.5rem 0":"0.5rem"})),G=b(()=>({"--am-c-msd-bgr":Q.value.colorSbBgr,"--am-c-msd-text":Q.value.colorSbText,"--am-c-msd-text-op05":K(Q.value.colorSbText,.05),"--am-c-msd-text-op10":K(Q.value.colorSbText,.1),"--am-c-msd-text-op60":K(Q.value.colorSbText,.6)}));return(ae,_e)=>(u(),A(ne,null,[T.value.customFontSelected?$("",!0):(u(),A(ne,{key:0},[pC,fC,d("link",{rel:"stylesheet",type:"text/css",href:`${t(z).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,gC)],64)),d("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:x,class:j(["am-cap__wrapper",[{"am-collapsed":t(B)},{"am-auth":!t(o)}]]),style:Be(t(ee))},[t(o)?$("",!0):(u(),Y(Uc,{key:0})),t(o)?(u(),A(ne,{key:1},[t(M)?(u(),Y(d0,{key:0,class:j(["am-fs-sb",[{"am-collapsed":t(B)},{"am-rtl":t(s)}]]),style:Be({width:t(B)?"72px":"240px",paddingBottom:`${t(R)+16}px`})},{"step-list":S(()=>[d("div",hC,[(u(!0),A(ne,null,ve(re.value,(ce,Pe)=>(u(),A(ne,{key:ce.key},[ce.key!=="packages"||t(e).getters["entities/getPackages"].length?(u(),A("div",{key:0,class:j(["am-fs-sb__page",{selected:t(p)===ce.key}]),style:Be({"pointer-events":t(l).cabinetType==="employee"&&t(l).profile&&ce.key==="profile"?"none":""}),onClick:()=>{t(l).cabinetType==="employee"&&t(l).profile&&ce.key==="profile"||pe(ce,Pe)}},[d("div",{class:j(["am-fs-sb__page-inner",{"am-collapsed":t(B)}])},[d("div",EC,[d("span",{class:j(`am-icon-${ce.icon}`)},null,2)]),N(ga,{name:"fade"},{default:S(()=>[t(B)?$("",!0):(u(),A("p",{key:0,class:j(["am-fs-sb__page-heading",[t(_),{"am-rtl":t(s)}]])},w(ce.label),3))]),_:2},1024),N(ga,{name:"fade"},{default:S(()=>[t(B)?$("",!0):(u(),A("div",{key:0,class:j(["am-fs-sb__page-indicator",[t(_),{"am-rtl":t(s)}]])},[d("span",{class:j(t(s)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2))]),_:1})],2)],14,vC)):$("",!0),Pe===0&&re.value[0].key==="profile"?(u(),A("div",_C)):$("",!0)],64))),128))])]),"support-info":S(()=>[d("div",{ref_key:"sidebarFooterRef",ref:k,class:"am-fs-sb__footer"},[d("div",{class:"am-fs-sb__page",onClick:_e[0]||(_e[0]=ce=>Fe(B)?B.value=!t(B):B=!t(B))},[d("div",CC,[yC,N(ga,{name:"fade"},{default:S(()=>[t(B)?$("",!0):(u(),A("p",{key:0,class:j(["am-fs-sb__page-heading",t(_)])},w(t(L).toggle_sidebar),3))]),_:1})])]),bC,d("div",{class:"am-fs-sb__page",onClick:Ee},[d("div",BC,[AC,N(ga,{name:"fade"},{default:S(()=>[t(B)?$("",!0):(u(),A("p",{key:0,class:j(["am-fs-sb__page-heading",t(_)])},w(t(L).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):$("",!0),N(m0,{"max-width":786,"old-responsive":!1},{header:S(()=>[N(E0,{ready:t(oe)},{default:S(()=>[d("div",FC,[d("div",kC,w(t(I)),1),t(M)?$("",!0):(u(),A("div",{key:0,class:"am-caph__menu",onClick:_e[1]||(_e[1]=()=>Fe(C)?C.value=!t(C):C=!t(C))},wC)),t(m).featuresIntegrations.timezones.enabled&&t(H)&&t(M)&&t(f)?(u(),Y(Wn,{key:1})):$("",!0),N(z0,{"menu-items":re.value,monitor:t(p),visibility:t(C),"custom-css":t(G),"customized-labels":t(L),position:"right",width:240,"onUpdate:visibility":_e[2]||(_e[2]=ce=>Fe(C)?C.value=ce:C=ce),onClick:le,onLogout:de},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:S(()=>[(u(),Y(ft(t(X)[t(p)]),{class:"am-fs__main-content","load-bookings-counter":t(ie)},null,8,["load-bookings-counter"]))]),_:1})],64)):$("",!0)],6)],64))}});var RC=Object.freeze(Object.defineProperty({__proto__:null,default:TC},Symbol.toStringTag,{value:"Module"}));export{RC as C,B0 as _,qt as a,ia as b,g0 as c,E0 as d,z0 as e,ea as f,IC as g,Lr as h,w0 as i,$C as u};
