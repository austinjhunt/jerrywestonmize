import{bF as qs,bG as Ii,aQ as ro,m as B,s as M,l as U,bH as $i,o as x,c as F,j as $,b as t,ab as Ae,p as j,q as Ce,n as Q,y as yr,a as m,w as I,f as ue,t as k,h as Fe,i as N,H as Qe,_ as Ge,bI as Ni,bJ as Oi,b6 as it,a_ as ye,bK as Al,bs as io,u as Ne,e as Y,a8 as ga,r as ve,F as ne,b9 as Sa,bL as $l,ap as Ye,bM as zs,am as Je,aG as Nl,aF as Ol,bN as ja,aN as $e,b4 as Fl,A as tt,bg as Mi,bh as Vi,a0 as Gs,x as Ze,b1 as ot,bj as bt,aX as lt,bk as Ri,bl as kt,af as ft,bb as br,bO as qi,bP as Br,bQ as Ui,bi as st,bR as Mo,D as ze,E as Dl,G as xt,v as co,b7 as _a,b8 as Ca,bn as zi,aJ as ha,bS as Ar,bT as xo,bU as ms,bV as wa,bW as Yn,bX as ji,bY as Yi,al as ct,bZ as uo,aR as vt,b_ as Fr,b$ as Dr,c0 as Cs,c1 as ys,aW as ht,g as Vo,b5 as Ct,c2 as hs,c3 as Wi,bz as Za,c4 as kr,ad as wr,c5 as Mt,c6 as Ut,aB as $t,c7 as ea,c8 as bs,aC as mo,c9 as Wt,ca as Ta,ay as po,an as fo,cb as Hi,aO as Js,cc as Zi,cd as vs,aq as nt,ce as go,cf as kl,cg as Gi,ch as Ji,ci as Ro,cj as qo,bm as gt,ck as Pr,bf as Xi,cl as Ml,a5 as Qi,aU as La,aT as Vl,aZ as Ki,cm as e0,cn as t0,co as Tr,cp as a0,cq as s0,cr as l0,cs as n0,ct as o0,cu as ho,cv as r0,cw as i0,cx as c0,cy as Uo,cz as x0,ac as u0,ah as d0}from"./stepForm.8ba9650b.js";import{e as m0,n as We,o as p0,m as at,p as wl}from"./eventListForm.52877e54.js";function Ot(n,a){let e=a!==""?JSON.parse(n.translations)[a]:JSON.parse(n.translations);if(qs in e)return e[qs];let s=Object.keys(e),l=Object.keys(e).map(r=>r.length>2?r.slice(0,2):r),o="";for(let r=0;r<l.length;r++){if(Ii===s[r]&&e[s[r]]){o=e[s[r]];break}l[r]===qs&&e[s[r]]&&(o=e[s[r]])}return o}function In(n,a){return n.translations&&JSON.parse(n.translations)[a]&&Ot(n,a)?Ot(n,a):n[a]}function qt(n){return n.translations&&JSON.parse(n.translations).name&&Ot(n,"name")?Ot(n,"name"):n.name}function f0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.name}function PC(n){return n.translations&&Ot(n,"")?Ot(n,""):n.content}function g0(n){return n.translations&&Ot(n,"name")?Ot(n,"name"):n.label}function h0(n){return n.translations&&Ot(n,"")?Ot(n,""):n.label}function ia(n){return n.translations&&JSON.parse(n.translations).description&&Ot(n,"description")?Ot(n,"description"):n.description}function TC(n){n.services&&n.services.length&&n.services.forEach(a=>{a.name=qt(a),a.description=ia(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ia(e)})}),n.locations&&n.locations.length&&n.locations.forEach(a=>{a.name=qt(a),a.description=ia(a)}),n.packages&&n.packages.length&&n.packages.forEach(a=>{a.name=qt(a),a.description=ia(a),a.bookable.forEach(e=>{e.service.name=qt(e.service),e.service.description=ia(e.service),"extras"in e.service&&e.service.extras.forEach(s=>{s.name=qt(s),s.description=ia(s)})})}),n.categories&&n.categories.length&&n.categories.forEach(a=>{a.name=qt(a),a.serviceList.forEach(e=>{e.name=qt(e),e.description=ia(e),e.extras.forEach(s=>{s.name=qt(s),s.description=ia(s)})})}),n.events&&n.events.length&&n.events.forEach(a=>{a.name=qt(a),a.description=ia(a),a.extras.forEach(e=>{e.name=qt(e),e.description=ia(e)})}),n.customFields&&n.customFields.length&&n.customFields.forEach(a=>{a.label=g0(a),a.options.forEach(e=>{e.label=h0(e)})}),n.employees&&n.employees.length&&n.employees.forEach(a=>{a.firstName=In(a,"firstName"),a.lastName=In(a,"lastName"),a.description=In(a,"description")})}const rt={props:{modelValue:{type:[Boolean,String,Number],default:!1},id:{type:String},name:{type:String},width:{type:[Number,String]},size:{type:String,default:"default",validator(n){return["large","default","small"].includes(n)}},validateEvent:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},activeColor:{type:String},inactiveColor:{type:String},activeText:{type:String},inactiveText:{type:String},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},activeIconClass:{type:String},inactiveIconClass:{type:String},activeIcon:{type:String},inactiveIcon:{type:String},beforeChange:{type:[Function,Boolean],default:()=>{}},borderColor:{type:String},inlinePrompt:{type:Boolean,default:!1},parentClass:{type:String},class:{type:String},ariaLabel:{type:String}},emits:["update:modelValue","change"],setup(n,{emit:a}){const e=n,{modelValue:s}=ro(e),l=B({get:()=>s.value,set:c=>a("update:modelValue",c)}),o=M(null),r=U("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF",colorBtnWaiting:"#CCA20C",colorBtnWaitingText:"#FFFFFF",colorBtnDanger:"#B4190F",colorBtnDangerText:"#FFFFFF"})),i=B(()=>({"--am-c-switch-bgr-active":r.value.colorPrimary,"--am-c-switch-bgr-inactive":r.value.colorInpBorder,"--am-c-switch-action":r.value.colorMainBgr,"--am-c-switch-text":r.value.colorMainText}));return(c,u)=>{const g=$i;return x(),F("div",{class:j(["am-switch-wrapper",n.parentClass]),style:Ce(t(i))},[$(g,{id:n.id,ref_key:"amSwitch",ref:o,modelValue:t(l),"onUpdate:modelValue":u[0]||(u[0]=p=>Ae(l)?l.value=p:null),class:j(["am-switch",e.class]),name:n.name,width:n.width,size:n.size,"validate-event":n.validateEvent,loading:n.loading,disabled:n.disabled,"active-color":n.activeColor,"inactive-color":n.inactiveColor,"active-text":n.activeText,"inactive-text":n.inactiveText,"active-value":n.activeValue,"inactive-value":n.inactiveValue,"active-icon-class":n.activeIconClass,"inactive-icon-class":n.inactiveIconClass,"active-icon":n.activeIcon,"inactive-icon":n.inactiveIcon,"before-change":n.beforeChange,"border-color":n.borderColor,"inline-prompt":n.inlinePrompt,"aria-label":n.ariaLabel,onChange:u[1]||(u[1]=p=>a("change",p))},null,8,["id","modelValue","class","name","width","size","validate-event","loading","disabled","active-color","inactive-color","active-text","inactive-text","active-value","inactive-value","active-icon-class","inactive-icon-class","active-icon","inactive-icon","before-change","border-color","inline-prompt","aria-label"])],6)}}};const v0={props:{ready:{type:Boolean,default:!0}},setup(n){let a=U("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#1A2C37",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),e=B(()=>({"--am-c-caph-text":a.value.colorMainText,"--am-c-caph-heading-text":a.value.colorMainHeadingText,"--am-c-caph-text-op15":Q(a.value.colorMainText,.15)}));return(s,l)=>(x(),F("div",{class:"am-caph__main",style:Ce(t(e))},[yr(s.$slots,"default")],4))}};const E0={key:0},_0={key:1},C0={key:2},y0={name:"MainProfileFooter"},b0=Object.assign(y0,{props:{parentWidth:{type:Number,default:1200},display:{type:String,default:"first"},loading:{type:Boolean,default:!1},customizedLabels:{type:Object,default:()=>({})},deleteFooterType:{type:String,default:"plain"},saveFooterButton:{type:String,default:"filled"},passFooterButton:{type:String,default:"filled"}},setup(n){const a=n,e=U("labels");function s(p){return Object.keys(a.customizedLabels).length&&a.customizedLabels[p]?a.customizedLabels[p]:e[p]}const l=U("settings");let o=U("deleteProfileDialog",M(!1)),r=U("saveProfileChanges",()=>{}),i=U("saveCustomerCustomFields",()=>{}),c=U("changeProfilePassword",()=>{}),u=U("amColors"),g=B(()=>({"--am-c-cappf-bgr":u.value.colorMainBgr,"--am-c-cappf-text":u.value.colorMainText,"--am-c-cappf-text-op15":Q(u.value.colorMainText,.15)}));return(p,f)=>(x(),F("div",{class:"am-cappf",style:Ce(t(g))},[m("div",{class:j(["am-cappf__options",{"am-only-one":n.display==="second"||!t(l).roles.allowCustomerDeleteProfile}])},[n.display==="first"&&t(l).roles.allowCustomerDeleteProfile?(x(),F("div",E0,[$(Fe,{category:"danger",size:t(a).parentWidth<=360?"small":"default",type:t(a).deleteFooterType,class:"am-cappf__delete",disabled:n.loading,onClick:f[0]||(f[0]=b=>Ae(o)?o.value=!0:o=!0)},{default:I(()=>[ue(k(s("delete_profile")),1)]),_:1},8,["size","type","disabled"])])):N("",!0),n.display==="first"||n.display==="third"?(x(),F("div",_0,[$(Fe,{type:t(a).saveFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:f[1]||(f[1]=b=>n.display==="first"?t(r)():t(i)())},{default:I(()=>[ue(k(s("save_changes")),1)]),_:1},8,["type","size","disabled"])])):N("",!0),n.display==="second"?(x(),F("div",C0,[$(Fe,{type:t(a).passFooterButton,size:t(a).parentWidth<=360?"small":"default",disabled:n.loading,onClick:f[2]||(f[2]=b=>t(c)())},{default:I(()=>[ue(k(s("change_password")),1)]),_:1},8,["type","size","disabled"])])):N("",!0)],2)],4))}});const B0={key:0,class:"am-date-picker__input-date"},A0={key:1,class:"am-date-picker__input-start"},F0={key:2,class:"am-date-picker__input-end"},Ht={props:{modelValue:{type:[String,Array,Object,Number]},readonly:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!1},placeholder:{type:String,default:""},startPlaceholder:{type:String},endPlaceholder:{type:String},type:{type:String,default:"date",validator(n){return["year","years","month","months","date","dates","datetime","week","datetimerange","daterange","monthrange","yearrange"].includes(n)}},format:{type:String},popperClass:{type:String,default:""},popperOptions:{type:Object,default:()=>{}},rangeSeparator:{type:String,default:"-"},defaultValue:{type:[String,Array,Object,Number]},defaultTime:{type:[String,Array,Object,Number]},valueFormat:{type:String},id:{type:[String,Array]},name:{type:[String,Array]},unlinkPanels:{type:Boolean,default:!1},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="calendar"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="close"/>'})},validateEvent:{type:Boolean,default:!0},disabledDate:{type:Function,default:()=>{}},shortcuts:{type:Array,default:()=>[]},cellClassName:{type:Function},teleported:{type:Boolean,default:!0},emptyValues:{type:[String,Array]},valueOnClear:{type:[String,Number,Boolean,Function],default:""},fallbackPlacements:{type:Array},placement:{type:String,default:"bottom",validator(n){return["top","top-start","top-end","bottom","bottom-start","bottom-end","left","left-start","left-end","right","right-start","right-end"].includes(n)}},lang:{type:String,default:""}},emits:["update:modelValue","change","blur","focus","clear","calendar-change","panel-change","visible-change"],setup(n,{emit:a}){const e=n;let{modelValue:s}=ro(e),l=B({get:()=>s.value,set:u=>{a("update:modelValue",u)}});const o=M(null);function r(){o.value&&o.value.focus()}let i=U("amColors"),c=B(()=>({"--am-c-primary":i.value.colorPrimary,"--am-c-inp-bgr":i.value.colorInpBgr,"--am-c-inp-border":i.value.colorInpBorder,"--am-c-inp-text":i.value.colorInpText,"--am-c-inp-text-op03":Q(i.value.colorInpText,.03),"--am-c-inp-text-op05":Q(i.value.colorInpText,.05),"--am-c-inp-text-op40":Q(i.value.colorInpText,.4),"--am-c-inp-text-op60":Q(i.value.colorInpText,.6),"--am-c-inp-placeholder":i.value.colorInpPlaceHolder,"--am-c-drop-bgr":i.value.colorDropBgr,"--am-c-drop-text":i.value.colorDropText,"--am-c-drop-text-op03":Q(i.value.colorDropText,.03),"--am-c-drop-text-op10":Q(i.value.colorDropText,.1),"--am-c-drop-text-op30":Q(i.value.colorDropText,.3),"--am-c-drop-text-op50":Q(i.value.colorDropText,.5),"--am-c-drop-text-op70":Q(i.value.colorDropText,.7),"--am-c-drop-text-op80":Q(i.value.colorDropText,.8),"--am-c-drop-border":i.value.colorDropBorder,"--am-c-skeleton-op20":Q(i.value.colorMainText,.2),"--am-c-skeleton-op60":Q(i.value.colorMainText,.6),"--am-c-skeleton-sb-op20":Q(i.value.colorSbText,.2),"--am-c-skeleton-sb-op60":Q(i.value.colorSbText,.6)}));return(u,g)=>{const p=Ni,f=Oi;return x(),F("div",{class:j(["am-date-picker__wrapper",{"is-disabled":e.disabled}]),style:Ce(t(c))},[m("div",{class:j(["am-date-picker__input",[`am-${e.type}`,{"is-disabled":e.disabled}]]),onClick:r},[e.type==="date"&&t(l)?(x(),F("div",B0,k(t(it)(t(ye)(t(l)).format("YYYY-MM-DD"))),1)):N("",!0),e.type==="daterange"&&t(l)[0]?(x(),F("div",A0,k(t(it)(t(ye)(t(l)[0]).format("YYYY-MM-DD"))),1)):N("",!0),e.type==="daterange"&&t(l)[1]?(x(),F("div",F0,k(t(it)(t(ye)(t(l)[1]).format("YYYY-MM-DD"))),1)):N("",!0)],2),$(f,{locale:t(m0)(e.lang)},{default:I(()=>[$(p,{id:n.id,ref_key:"amDatePicker",ref:o,modelValue:t(l),"onUpdate:modelValue":g[0]||(g[0]=b=>Ae(l)?l.value=b:l=b),readonly:e.readonly,disabled:e.disabled,editable:e.editable,clearable:e.clearable,placeholder:e.placeholder,"start-placeholder":e.startPlaceholder,"end-placeholder":e.endPlaceholder,type:e.type,format:e.format,"popper-class":e.popperClass,"popper-options":e.popperOptions,"popper-style":t(c),"range-separator":e.rangeSeparator,"default-value":e.defaultValue,"default-time":e.defaultTime,"value-format":e.valueFormat,"unlink-panels":e.unlinkPanels,"prefix-icon":e.prefixIcon,"clear-icon":e.clearIcon,"validate-event":e.validateEvent,"disabled-date":n.disabledDate,shortcuts:e.shortcuts,"cell-class-name":e.cellClassName,teleported:e.teleported,"empty-values":e.emptyValues,"value-on-clear":e.valueOnClear,"fallback-placements":e.fallbackPlacements,placement:e.placement,class:j(["am-date-picker",[`am-date-picker--${n.size}`,{"am-date-picker--disabled":e.disabled}]]),onChange:g[1]||(g[1]=b=>u.$emit("change",b)),onBlur:g[2]||(g[2]=b=>u.$emit("blur",b)),onFocus:g[3]||(g[3]=b=>u.$emit("focus",b)),onClear:g[4]||(g[4]=b=>u.$emit("clear",b)),onCalendarChange:g[5]||(g[5]=b=>u.$emit("calendar-change",b)),onPanelChange:g[6]||(g[6]=b=>u.$emit("panel-change",b)),onVisibleChange:g[7]||(g[7]=b=>u.$emit("visible-change",b))},null,8,["id","modelValue","readonly","disabled","editable","clearable","placeholder","start-placeholder","end-placeholder","type","format","popper-class","popper-options","popper-style","range-separator","default-value","default-time","value-format","unlink-panels","prefix-icon","clear-icon","validate-event","disabled-date","shortcuts","cell-class-name","teleported","empty-values","value-on-clear","fallback-placements","placement","class"])]),_:1},8,["locale"])],6)}}};function D0(n,a,e){let s={};return n.forEach(l=>{a===""&&l.periods.forEach(g=>{g.periodStart=Al(g.periodStart),g.periodEnd=Al(g.periodEnd)});let r=ye(l.periods[0].periodStart,"YYYY-MM-DD HH:mm:ss").format("YYYY-MM-DD"),i=e.getters.getSettings.general.usedLanguages.map(g=>g.length>2?g.slice(0,2):g);(e.getters.getSettings.general.usedLanguages.indexOf(e.getters.getLocalLanguage)!==-1||i.indexOf(e.getters.getLocalLanguage.split("_")[0])!==-1)&&(l.name=qt(l),l.customTickets.forEach(g=>{g.name=f0(g)})),l.recurring&&l.recurring.until&&(l.recurring.until=l.recurring.until.split(" ")[0]),r in s||(s[r]={date:r,events:[]});let u=l.bookings.some(g=>g.status==="waiting");if(l.full&&l.status==="approved"?l.status="full":l.upcoming&&l.status==="approved"&&(l.status="upcoming"),u&&(l.status="waiting"),e.getters["auth/getProfile"].type==="provider"){let g=JSON.parse(JSON.stringify(l));s[r].events.push(g)}else l.bookings.forEach(g=>{let p=JSON.parse(JSON.stringify(l));p.bookings=[g],s[r].events.push(p)})}),s}function Lr(n){let a=0;return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)){let s=0;if(e.ticketsData.length>0)for(let o=0;o<e.ticketsData.length;o++)s+=e.ticketsData[o].persons*e.ticketsData[o].price;else s+=n.price*e.persons;let l=io(n,e.coupon,e.tax?e.tax[0]:null,s,!1);a+=l.price-l.discount+l.tax}}),a>=0?a:0}function k0(n){let a=[];return n.forEach(e=>{let s=ye(e.periodStart.split(" ")[0],"YYYY-MM-DD"),l=ye(e.periodEnd.split(" ")[0],"YYYY-MM-DD"),o=e.periodStart.split(" ")[1].slice(0,5),r=e.periodEnd.split(" ")[1].slice(0,5);r==="00:00"&&(r="24:00",l.subtract(1,"days"));let i=[];for(;s.isSameOrBefore(l);)i.push(s.format("YYYY-MM-DD")),s.add(1,"days");i.forEach(c=>{a.push({date:c,startTime:o,endTime:r,periodStart:c+" "+o,periodEnd:c+" "+r,zoomLink:n.length>1&&e.zoomMeeting?e.zoomMeeting.joinUrl:"",lessonSpaceLink:n.length>1&&e.lessonSpace?e.lessonSpace:"",googleMeetLink:n.length>1&&e.googleMeetUrl?e.googleMeetUrl:"",microsoftTeamsLink:n.length>1&&e.microsoftTeamsUrl?e.microsoftTeamsUrl:""})})}),a}function w0(n){let a={};return n.bookings.forEach(e=>{["approved","pending"].includes(e.status)&&e.ticketsData&&e.ticketsData.length&&e.ticketsData.forEach(s=>{s.eventTicketId in a||(a[s.eventTicketId]={persons:0,price:s.price,name:n.customTickets.find(l=>l.id===s.eventTicketId).name}),a[s.eventTicketId].persons=a[s.eventTicketId].persons+s.persons})}),a}function P0(n,a){let e=n.getters["entities/getLocations"];if(a.locationId&&e.length){let s=e.find(l=>l.id===a.locationId);return typeof s<"u"?s:null}else if(a.customLocation)return{address:"",name:a.customLocation};return null}function T0(n){let a=[];return n.bookings.forEach(e=>{if(["approved","pending"].includes(e.status)&&e.qrCodes){let s=JSON.parse(e.qrCodes);s=s.map(l=>({...l,bookingId:e.id,eventId:n.id})),a=a.concat(s)}}),a}const L0={class:"am-msd__item-wrapper"},S0={class:"am-msd__item-inner"},I0=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-close"})],-1),$0=["onClick"],N0={class:"am-msd__item-inner"},O0={class:"am-msd__item-icon"},M0={key:1,class:"am-msd__item-divider"},V0={class:"am-msd__item-inner"},R0=m("div",{class:"am-msd__item-icon"},[m("span",{class:"am-icon-logout"})],-1),q0={class:"am-msd__item-heading"},U0={props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},monitor:{type:String,required:!0},menuItems:{type:Array,required:!0},customCss:{type:Object,default:()=>{}},width:{type:Number,default:300},position:{type:String,default:"right",validator(n){return["right","left","top","bottom"].includes(n)}}},emits:["click","update:visibility","logout"],setup(n,{emit:a}){const e=n;let s=U("labels");const l=Ne();let o=B(()=>document?document.documentElement.dir==="rtl":!1);function r(g,p){a("click",{step:g,index:p}),a("update:visibility",!1)}function i(){a("update:visibility",!1)}function c(g){return Object.keys(e.customizedLabels).length&&e.customizedLabels[g]?e.customizedLabels[g]:s[g]}let u=B(()=>({"--am-mw-msd":`${e.width}px`}));return(g,p)=>(x(),Y(Sa,{visibility:n.visibility,position:n.position,"custom-class":"am-msd","close-outside":!0,"custom-css":{...n.customCss,...t(u)},"onUpdate:visibility":p[1]||(p[1]=f=>t(a)("update:visibility",!1))},{footer:I(()=>[m("div",{class:"am-msd__item",onClick:p[0]||(p[0]=()=>t(a)("logout"))},[m("div",V0,[R0,m("p",q0,k(c("log_out")),1)])])]),default:I(()=>[m("div",L0,[m("div",{class:"am-msd__item",onClick:i},[m("div",S0,[$(ga,{name:"fade"},{default:I(()=>[m("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},k(c("menu_title")),3)]),_:1}),$(ga,{name:"fade"},{default:I(()=>[I0]),_:1})])]),(x(!0),F(ne,null,ve(n.menuItems,(f,b)=>(x(),F(ne,{key:f.key},[f.key!=="packages"||t(l).getters["entities/getPackages"].length?(x(),F("div",{key:0,class:j(["am-msd__item",{selected:n.monitor===f.key}]),onClick:w=>r(f,b)},[m("div",N0,[m("div",O0,[m("span",{class:j(`am-icon-${f.icon}`)},null,2)]),$(ga,{name:"fade"},{default:I(()=>[m("p",{class:j(["am-msd__item-heading",{"am-rtl":t(o)}])},k(f.label),3)]),_:2},1024),$(ga,{name:"fade"},{default:I(()=>[m("div",{class:j(["am-msd__item-indicator",{"am-rtl":t(o)}])},[m("span",{class:j(t(o)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2)]),_:1})])],10,$0)):N("",!0),b===0?(x(),F("div",M0)):N("",!0)],64))),128))])]),_:1},8,["visibility","position","custom-css"]))}};const Wn={props:{size:{type:String,default:"default"}},setup(n){const a=n,e=$l().cookies,s=U("settings");let l=U("cabinetType"),{bookingsCounterChanger:o}=U("bookingsCounterChanger",{bookingsCounterChanger:()=>{}});const r=Ne();let i=B({get:()=>r.getters["cabinet/getTimeZone"],set:v=>{r.commit("cabinet/setTimeZone",v||"")}}),c=B(()=>r.getters["appointment/getActive"]||r.getters["event/getActive"]||r.getters["attendee/getActive"]);const u=U("timeZone"),g=U("timeZones");let p=M("");function f(v){p.value=v.toLowerCase()}let b=B(()=>p.value?g.filter(v=>v.toLowerCase().includes(p.value)):g);function w(){let v;s.general.showClientTimeZone?v=zs():v=u.value,e.set("ameliaUserTimeZone",v,s.roles[l.value+"Cabinet"].tokenValidTime),o(),r.commit("cabinet/setTimeZone",v)}function D(v){e.set("ameliaUserTimeZone",v,s.roles[l.value+"Cabinet"].tokenValidTime),o()}return(v,P)=>t(c)?N("",!0):(x(),Y(Je,{key:0,modelValue:t(i),"onUpdate:modelValue":P[0]||(P[0]=S=>Ae(i)?i.value=S:i=S),filterable:!0,placeholder:t(zs)(),clearable:!0,size:t(a).size,"custom-class":"am-ctz","prefix-icon":"globe-watch","filter-method":f,onClear:w,onChange:D},{default:I(()=>[(x(!0),F(ne,null,ve(t(b),(S,A)=>(x(),Y(Ye,{key:A,label:S,value:S},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","size"]))}};function Sr(){return"ameliaBooking"in window&&"cabinet"in window.ameliaBooking&&"disableAuthorizationHeader"in window.ameliaBooking.cabinet&&window.ameliaBooking.cabinet.disableAuthorizationHeader}function Ue(n){let a=n.getters["auth/getToken"];return a&&!Sr()?{headers:{Authorization:"Bearer "+a}}:{}}const z0={key:0,class:"el-skeleton-item-wrapper-title"},j0={name:"AuthSkeleton"},Zt=Object.assign(j0,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Nl,o=Ol;return x(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",t(a).mainClass])},{template:I(()=>[t(a).centerFirst?(x(),F("div",z0,[$(l,{variant:"rect"})])):N("",!0),(x(!0),F(ne,null,ve(new Array(t(a).count),r=>(x(),F("div",{key:r,class:"el-skeleton-item-wrapper"},[$(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});function Y0(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"scope");$e.post("/google/authorization/token",{authCode:n,userId:Fl(window.location.href).state,redirectUri:e}).then(()=>{history.pushState(null,null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function W0(n){n.getters["auth/getGoogleLoading"]||(n.commit("auth/setGoogleLoading",!0),$e.get("/google/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(a=>{window.location.href=a.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(a=>{console.log(a),n.commit("auth/setGoogleLoading",!1)}))}function H0(n){n.commit("auth/setGoogleLoading",!0),$e.post("/google/disconnect/"+n.getters["employee/getId"]).then(()=>{n.commit("employee/setGoogleId",null),n.commit("employee/setGoogleCalendarId",""),n.commit("employee/setGoogleToken",null),n.commit("auth/setGoogleCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setGoogleLoading",!1)})}function Z0(n,a){let e=ja(ja(ja(window.location.href,"code"),"state"),"type");$e.post("/outlook/authorization/token",{authCode:n,userId:Fl(window.location.href).state.split("amelia-outlook-calendar-auth-")[1],redirectUri:window.location.href.split("?")[0]}).then(()=>{history.pushState({},null,e)}).catch(s=>{console.log(s)}).finally(()=>{a()})}function G0(n){n.getters["auth/getOutlookLoading"]||(n.commit("auth/setOutlookLoading",!0),$e.get("/outlook/authorization/url/"+n.getters["employee/getId"],Object.assign({redirectUri:window.location.href.split("?")[0]},Ue(n))).then(a=>{window.location.href=a.data.data.authUrl.replace(/redirect_uri=.+?&/,"redirect_uri="+window.location.href+"&")}).catch(a=>{console.log(a),n.commit("auth/setGoogleLoading",!1)}))}function J0(n){n.commit("auth/setOutlookLoading",!0),$e.post("/outlook/disconnect/"+n.getters["employee/getId"]).then(()=>{n.commit("employee/setOutlookId",""),n.commit("employee/setOutlookCalendarId",""),n.commit("employee/setOutlookToken",null),n.commit("auth/setOutlookCalendars",[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setOutlookLoading",!1)})}function X0(n){n.commit("auth/setZoomLoading",!0),$e.get("/zoom/users",Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(a=>{"data"in a.data&&"users"in a.data.data&&n.commit("auth/setZoomUsers",a.data.data?.users?a.data.data.users:[])}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setZoomLoading",!1)})}function Q0(n){n.commit("auth/setStripeLoading",!0),$e.get("/stripe/accounts/"+n.getters["employee/getId"],Object.assign({},Ue(n))).then(a=>{a.data.data.account&&(n.commit("auth/setStripeProvider",a.data.data.account),n.getters["employee/getStripeConnect"]||n.commit("employee/setStripeConnect",{id:a.data.data.account.id,amount:null}))}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function K0(n,a){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/onboard/"+n.getters["auth/getProfile"].id,Object.assign({returnUrl:window.location.href,accountType:a},Ue(n))).then(e=>{window.location.href=e.data.data.url}).catch(e=>{n.commit("auth/setStripeLoading",!1),console.log("response"in e&&"data"in e.response&&"message"in e.response.data?e.response.data.message:e.message)})}function ec(n){n.commit("auth/setStripeLoading",!0),$e.post("/stripe/disconnect/"+n.getters["auth/getProfile"].id,Ue(n)).then(()=>{n.commit("auth/setStripeProvider",{id:"",email:"",type:"",completed:!1}),n.commit("employee/setStripeConnect",null)}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}function tc(n){let a=n.getters["auth/getStripeProvider"];n.commit("auth/setStripeLoading",!0),a.type==="standard"?(window.open("https://dashboard.stripe.com/"+a.id,"_blank"),n.commit("auth/setStripeLoading",!1)):a.type==="express"&&$e.post("/stripe/dashboard/"+n.getters["auth/getProfile"].id,Ue(n)).then(e=>{e.data.data.url&&window.open(e.data.data.url,"_blank")}).catch(e=>{console.log(e)}).finally(()=>{n.commit("auth/setStripeLoading",!1)})}let Aa=M(!1);function Hn(n){n.commit("auth/setAppleLoading",!0),$e.get("/apple/calendar-list/"+n.getters["employee/getId"],Ue(n)).then(a=>{n.commit("auth/setAppleCalendars",a.data.data?.calendarList?a.data.data.calendarList:[]),n.getters["auth/getAppleCalendars"].map(e=>e.id).indexOf(n.getters["employee/getAppleCalendarId"])===-1&&n.commit("employee/setAppleCalendarId",""),n.commit("employee/setAppleCalendarId",a.data.data?.appleCalendarId),Aa.value=a.data.data.isEmployeeConnectedToPersonalAppleCalendar}).catch(a=>{console.log(a)}).finally(()=>{n.commit("auth/setAppleLoading",!1)})}const ac={class:"am-asi__top"},sc={class:"am-asi__header"},lc={class:"am-asi__text"},nc={key:0},oc={class:"am-asi__social-wrapper"},rc={class:"am-asi__social-divider"},ic={class:"par-sm"},cc={class:"am-asi__footer"},xc={class:"am-asi__footer-text"},uc={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},dc={name:"AuthSignIn"},mc=Object.assign(dc,{setup(n){let a=U("licence"),e=Ne();const s=$l().cookies,l=U("settings");let o=U("amCustomize");const r=U("labels"),i=U("localLanguage");let c=B(()=>l.general.usedLanguages.includes(i.value)),u=B(()=>{let O=tt({...r}),W=o.value.signIn.translations;return W&&Object.keys(W).forEach(J=>{W[J][i.value]&&c.value?O[J]=W[J][i.value]:W[J].default&&(O[J]=W[J].default)}),O}),g={components:{IconComponent:Ge},template:'<IconComponent icon="email"></IconComponent>'},p={components:{IconComponent:Ge},template:'<IconComponent icon="password"></IconComponent>'},f=M("");const b=Mi.factory($e,Vi);function w({provider:O,credentials:W}){e.commit("setLoading",!0);const J=`/users/authentication/${O}`,re={};f=O,re.cabinetType=V.value,O==="facebook"&&(re.redirectUri=b.options.providers[O].redirectUri,b.options.providers[O].url=`${J}`,e.commit("setLoading",!1),b.authenticate(O,re).then(me=>{y.value.email=me.data.data.user.email,D(me,!0)}).catch(me=>{b.isAuthenticated()||(H.value=!0,z.value="User is not authenticated.",e.commit("setLoading",!1)),me.response?.data&&(H.value=!0,z.value=me.response.data.message),e.commit("setLoading",!1)})),O==="google"&&(re.code=W,$e.post(`${J}`,re).then(me=>{y.value.email=me.data.data.user.email,D(me,!0)}).catch(me=>{if(!("data"in me.response.data)&&"message"in me.response.data){H.value=!0,z.value=me.response.data.message;return}"invalid_credentials"in me.response.data.data&&(H.value=!0,z.value=u.value.invalid_credentials)}).finally(()=>{e.commit("setLoading",!1)}))}function D(O,W){"token"in O.data.data&&(s.set("ameliaToken",O.data.data.token,l.roles[V.value+"Cabinet"].tokenValidTime,null,null,!0),s.set("ameliaUserEmail",O.data.data.user.email,l.roles[V.value+"Cabinet"].tokenValidTime,null,null,!0),e.commit("auth/setToken",O.data.data.token)),"user"in O.data.data&&O.data.data.user.type==="provider"&&K(O),e.commit("auth/setProfile",O.data.data.user),O.data.data.user.timeZone&&e.commit("cabinet/setTimeZone",O.data.data.user.timeZone),!O.data.data.user.countryPhoneIso&&l.general.phoneDefaultCountryCode&&l.general.phoneDefaultCountryCode!=="auto"&&e.commit("auth/setProfileCountryPhoneIso",l.general.phoneDefaultCountryCode),W&&e.commit("auth/setAuthenticated",W);let J=V.value==="customer"?l.roles.customerCabinet.tokenValidTime*1e3:l.roles.providerCabinet.tokenValidTime*1e3;J>0&&J<18144e5&&setTimeout(()=>{e.dispatch("auth/logout")},J),window?.ameliaBooking?.cabinet?.userLoggedIn&&window.ameliaBooking.cabinet.userLoggedIn(O.data.data.user)}let v=M(null),P=M(!1),S=M(null);function A(){P.value=!1,H.value=!0,z.value=u.value.recaptcha_invalid_error}function d(O){P.value=!0,S.value=O,l.general.googleRecaptcha.invisible&&ee()}let _=M(null),y=M({email:B({get:()=>e.getters["auth/getEmail"],set:O=>{e.commit("auth/setEmail",O||"")}}),password:B({get:()=>e.getters["auth/getPassword"],set:O=>{e.commit("auth/setPassword",O||"")}})}),E=M({email:[{required:!0,message:u.value.enter_email_or_username_warning,trigger:"submit"}],password:[{required:!0,message:u.value.enter_password_warning,trigger:"submit"}]}),C=M({email:{template:We.text,props:{itemName:"email",label:u.value.email_or_username,prefixIcon:Qe(g),placeholder:"",class:"am-asi__item"}},password:{template:We.text,props:{itemName:"password",itemType:"password",showPassword:!0,label:u.value.password,prefixIcon:Qe(p),placeholder:"",class:"am-asi__item"}}}),L=U("pageKey"),V=U("cabinetType"),T=B(()=>e.getters.getLoading),q=B(()=>e.getters["auth/getProfileDeleted"]),H=M(!1),z=M("");function X(O,W){let J=Mo("token");O?te(O,!1,!1,!1):J?te(J,!0,!1,W):te("",!1,!0,!1)}function K(O){let W={id:O.data.data.user.id,firstName:O.data.data.user.firstName,lastName:O.data.data.user.lastName,email:O.data.data.user.email,phone:O.data.data.user.phone,countryPhoneIso:O.data.data.user.countryPhoneIso,googleCalendar:{id:"id"in O.data.data.user.googleCalendar?O.data.data.user.googleCalendar.id:null,calendarId:O.data.data.user.googleCalendar.calendarId?O.data.data.user.googleCalendar.calendarId:"",token:"token"in O.data.data.user.googleCalendar?O.data.data.user.googleCalendar.token:null},outlookCalendar:{id:"id"in O.data.data.user.outlookCalendar?O.data.data.user.outlookCalendar.id:null,calendarId:O.data.data.user.outlookCalendar.calendarId?O.data.data.user.outlookCalendar.calendarId:"",token:"token"in O.data.data.user.outlookCalendar?O.data.data.user.outlookCalendar.token:null},appleCalendarId:O.data.data.user.appleCalendarId?O.data.data.user.appleCalendarId:"",stripeConnect:O.data.data.user.stripeConnect,zoomUserId:O.data.data.user.zoomUserId?O.data.data.user.zoomUserId:"",locationId:O.data.data.user.locationId,pictureFullPath:O.data.data.user.pictureFullPath,pictureThumbPath:O.data.data.user.pictureThumbPath,description:O.data.data.user.description,weekDayList:O.data.data.user.weekDayList,specialDayList:O.data.data.user.specialDayList,dayOffList:O.data.data.user.dayOffList,serviceList:O.data.data.user.serviceList};W.serviceList.forEach(J=>{qi(J)}),e.getters["entities/getReady"]&&(e.commit("entities/setEmployees",[JSON.parse(JSON.stringify(W))]),W.serviceList=Br(e,W.serviceList)),e.commit("employee/setEmployee",Ui(e,W)),e.commit("auth/setOutlookCalendars",O.data.data.user.outlookCalendar?.calendarList?O.data.data.user.outlookCalendar.calendarList:[]),e.commit("auth/setGoogleCalendars",O.data.data.user.googleCalendar?.calendarList?O.data.data.user.googleCalendar.calendarList:[]),l.appleCalendar&&!a.isLite&&!a.isStarter&&Hn(e),l.payments.stripe.enabled&&l.payments.stripe.connect.enabled&&!a.isLite&&!a.isStarter&&!a.isBasic&&Q0(e),l.zoom.enabled&&!a.isLite&&!a.isStarter&&X0(e)}function te(O,W,J,re){let me={cabinetType:V.value,changePass:re};S.value!==null&&(me.recaptcha=S.value),J&&(me.checkIfWpUser=!0);let oe=e.getters["auth/getPassword"],De=e.getters["auth/getEmail"];!O&&oe&&De&&(me.password=oe,me.email=De),W&&(me.token=O),$e.post("/users/authenticate",me,O!==null&&!Sr()?{headers:{Authorization:"Bearer "+O}}:{}).then(_e=>{if("authentication_required"in _e.data.data){l.roles[V.value+"Cabinet"].loginEnabled||(L.value="sendAccessLink");return}D(_e,!1),Mo("token")&&window.history.replaceState(null,null,ja(window.location.href,"token")),"set_password"in _e.data.data&&_e.data.data.set_password||"change_password"in _e.data.data&&_e.data.data.change_password?L.value="setPassword":e.commit("auth/setAuthenticated",!0)}).catch(_e=>{if(!("data"in _e.response.data)&&"message"in _e.response.data){H.value=!0,z.value=_e.response.data.message;return}"invalid_credentials"in _e.response.data.data&&(H.value=!0,z.value=u.value.invalid_credentials),"recaptcha_error"in _e.response.data.data&&(H.value=!0,z.value=u.value.recaptcha_error)}).finally(()=>{e.commit("setLoading",!1)})}function le(){_.value.validate(O=>{if(O)if(l.general.googleRecaptcha.enabled&&l.roles[V.value+"Cabinet"].googleRecaptcha)if(l.general.googleRecaptcha.invisible)v.value.execute();else if(P.value)ee();else return H.value=!0,z.value=u.value.recaptcha_error,!1;else ee();else return!1})}function ee(){e.commit("setLoading",!0),te(null,!1,!1,!1)}function xe(){X(s.get("ameliaToken"),"changePass"in Fl(window.location.href))}Gs(()=>{e.commit("setLoading",!0)}),Ze(()=>{if(e.getters["auth/getLoggedOut"])l.roles[V.value+"Cabinet"].loginEnabled||(L.value="sendAccessLink"),e.commit("setLoading",!1);else{let O=Fl(window.location.href);l.googleCalendar.enabled&&V.value==="provider"&&O&&O.code&&O.scope?Y0(O.code,xe):l.outlookCalendar.enabled&&V.value==="provider"&&O&&O.code&&O.state?Z0(O.code,xe):xe()}});let se=U("containerWidth"),ge=B(()=>ot(se.value)),G=U("amFonts"),ie=U("amColors"),ae=B(()=>({"--am-c-primary":ie.value.colorPrimary,"--am-c-success":ie.value.colorSuccess,"--am-c-error":ie.value.colorError,"--am-c-warning":ie.value.colorWarning,"--am-c-main-bgr":ie.value.colorMainBgr,"--am-c-main-heading-text":ie.value.colorMainHeadingText,"--am-c-main-text":ie.value.colorMainText,"--am-c-main-text-op70":Q(ie.value.colorMainText,.7),"--am-c-main-text-op60":Q(ie.value.colorMainText,.6),"--am-c-main-text-op40":Q(ie.value.colorMainText,.4),"--am-c-main-text-op25":Q(ie.value.colorMainText,.25),"--am-c-inp-bgr":ie.value.colorInpBgr,"--am-c-inp-border":ie.value.colorInpBorder,"--am-c-inp-text":ie.value.colorInpText,"--am-c-inp-placeholder":ie.value.colorInpPlaceHolder,"--am-c-btn-prim":ie.value.colorBtnPrim,"--am-c-btn-prim-text":ie.value.colorBtnPrimText,"--am-c-skeleton-op20":Q(ie.value.colorMainText,.2),"--am-c-skeleton-op60":Q(ie.value.colorMainText,.6),"--am-font-family":G.value.fontFamily,"--am-c-scroll-op30":Q(ie.value.colorPrimary,.3),"--am-c-scroll-op10":Q(ie.value.colorPrimary,.1)}));return(O,W)=>{const J=st;return t(T)?(x(),Y(t(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi-sign-in am-asi"})):(x(),F("div",{key:0,class:"am-asi",style:Ce(t(ae))},[m("div",ac,[t(q)?(x(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-success",type:"success",title:t(u).profile_deleted,description:"","show-icon":!0,closable:!0,onClose:W[0]||(W[0]=re=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):N("",!0),t(H)?(x(),Y(bt,{key:1,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(z),description:"","show-icon":!0,closable:!0,onClose:W[1]||(W[1]=re=>t(e).commit("auth/setProfileDeleted",!1))},null,8,["title"])):N("",!0),m("div",sc,k(t(u).welcome_back),1),m("div",lc,k(t(u).enter_credentials),1)]),t(lt).socialLogin.googleLoginEnabled&&t(lt).general.googleClientId||t(lt).socialLogin.facebookLoginEnabled&&t(lt).socialLogin.facebookCredentialsEnabled?(x(),F("div",nc,[m("div",oc,[$(Ri,{provider:t(f),onSocialAction:w},null,8,["provider"])]),m("div",rc,[m("span",ic,k(t(u).or_enter_details_below),1)])])):N("",!0),$(J,{ref_key:"authFormRef",ref:_,model:t(y),rules:t(E),"label-position":"top",class:j(["am-asi__form",t(ge)])},{default:I(()=>[(x(!0),F(ne,null,ve(t(C),(re,me)=>(x(),Y(ft(re.template),kt({key:me,ref_for:!0,ref:"customerCollectorRef",modelValue:t(y)[me],"onUpdate:modelValue":oe=>t(y)[me]=oe},re.props,{onEnter:le}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),$(Fe,{class:"am-asi__btn",type:t(o).signIn.options.signInBtn.buttonType,onClick:le},{default:I(()=>[ue(k(t(u).sign_in),1)]),_:1},8,["type"]),m("div",cc,[m("span",xc,k(t(u).forgot_your_password),1),m("span",{class:"am-asi__footer-link",onClick:W[2]||(W[2]=re=>Ae(L)?L.value="sendAccessLink":L="sendAccessLink")},k(t(u).reset_password),1)]),t(l).general.googleRecaptcha.enabled&&t(l).roles[t(V)+"Cabinet"].googleRecaptcha?(x(),F("div",uc,[$(t(br),{ref_key:"recaptchaRef",ref:v,size:t(l).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(l).general.googleRecaptcha.siteKey,onVerify:d,onExpired:A},null,8,["size","sitekey"])])):N("",!0)],4))}}});const pc={class:"am-asi__top"},fc={class:"am-asi__header"},gc={class:"am-asi__text"},hc={key:0,class:"am-asi__footer"},vc={key:1,id:"am-recaptcha",class:"am-recaptcha-holder"},Ec={name:"AuthReset"},_c=Object.assign(Ec,{setup(n){let a=Ne();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=B(()=>e.general.usedLanguages.includes(o.value)),i=B(()=>{let H=tt({...l}),z=s.value.accessLink.translations;return z&&Object.keys(z).forEach(X=>{z[X][o.value]&&r.value?H[X]=z[X][o.value]:z[X].default&&(H[X]=z[X].default)}),H}),c=M(!1),u=M(""),g=M(null),p=M(!1),f=M(null);function b(){p.value=!1,c.value=!0,u.value=i.value.recaptcha_invalid_error}function w(H){p.value=!0,f.value=H,e.general.googleRecaptcha.invisible&&E()}let D=M(null),v=M({email:B({get:()=>a.getters["auth/getEmail"],set:H=>{a.commit("auth/setEmail",H||"")}})}),P=M({email:[{required:!0,message:i.value.enter_email_warning,trigger:"submit"}]}),S=M({email:{template:We.text,props:{itemName:"email",itemType:"email",label:i.value.email,placeholder:"",class:"am-asi__item"}}}),A=U("pageKey"),d=U("cabinetType"),_=B(()=>a.getters.getLoading);function y(){D.value.validate(H=>{if(H)if(e.general.googleRecaptcha.enabled&&e.roles[d.value+"Cabinet"].googleRecaptcha)if(e.general.googleRecaptcha.invisible)g.value.execute();else if(p.value)E();else return c.value=!0,u.value=i.value.recaptcha_error,!1;else E();else return!1})}function E(){a.commit("setLoading",!0);let H={email:a.getters["auth/getEmail"],locale:window.localeLanguage[0],cabinetType:d.value};f.value!==null&&(H.recaptcha=f.value),$e.post("/users/customers/reauthorize",H).then(()=>{A.value="sendAccessLinkProcess"}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}let C=U("containerWidth"),L=B(()=>ot(C.value)),V=U("amFonts"),T=U("amColors"),q=B(()=>({"--am-c-primary":T.value.colorPrimary,"--am-c-success":T.value.colorSuccess,"--am-c-error":T.value.colorError,"--am-c-warning":T.value.colorWarning,"--am-c-main-bgr":T.value.colorMainBgr,"--am-c-main-heading-text":T.value.colorMainHeadingText,"--am-c-main-text":T.value.colorMainText,"--am-c-main-text-op70":Q(T.value.colorMainText,.7),"--am-c-main-text-op60":Q(T.value.colorMainText,.6),"--am-c-main-text-op40":Q(T.value.colorMainText,.4),"--am-c-main-text-op25":Q(T.value.colorMainText,.25),"--am-c-inp-bgr":T.value.colorInpBgr,"--am-c-inp-border":T.value.colorInpBorder,"--am-c-inp-text":T.value.colorInpText,"--am-c-inp-placeholder":T.value.colorInpPlaceHolder,"--am-c-btn-prim":T.value.colorBtnPrim,"--am-c-btn-prim-text":T.value.colorBtnPrimText,"--am-c-skeleton-op20":Q(T.value.colorMainText,.2),"--am-c-skeleton-op60":Q(T.value.colorMainText,.6),"--am-font-family":V.value.fontFamily,"--am-c-scroll-op30":Q(T.value.colorPrimary,.3),"--am-c-scroll-op10":Q(T.value.colorPrimary,.1)}));return(H,z)=>{const X=st;return t(_)?(x(),Y(t(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(x(),F("div",{key:0,class:"am-asi",style:Ce(t(q))},[m("div",pc,[t(c)?(x(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error",title:t(u),description:"","show-icon":!0,closable:!0},null,8,["title"])):N("",!0),m("div",fc,k(t(i).access_link_send),1),m("div",gc,k(t(i).access_link_send_description),1)]),$(X,{ref_key:"authFormRef",ref:D,model:t(v),rules:t(P),"label-position":"top",class:j(["am-asi__form",t(L)])},{default:I(()=>[(x(!0),F(ne,null,ve(t(S),(K,te)=>(x(),Y(ft(K.template),kt({key:te,ref_for:!0,ref:"customerCollectorRef",modelValue:t(v)[te],"onUpdate:modelValue":le=>t(v)[te]=le},K.props,{onEnter:y}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),$(Fe,{class:"am-asi__btn",type:t(s).accessLink.options.sendBtn.buttonType,onClick:y},{default:I(()=>[ue(k(t(i).send),1)]),_:1},8,["type"]),t(e).roles[t(d)+"Cabinet"].loginEnabled?(x(),F("div",hc,[m("span",{class:"am-asi__footer-link",onClick:z[0]||(z[0]=K=>Ae(A)?A.value="signIn":A="signIn")},k(t(i).sign_in),1)])):N("",!0),t(e).general.googleRecaptcha.enabled&&t(e).roles[t(d)+"Cabinet"].googleRecaptcha?(x(),F("div",vc,[$(t(br),{ref_key:"recaptchaRef",ref:g,size:t(e).general.googleRecaptcha.invisible?"invisible":null,"load-recaptcha-script":!0,sitekey:t(e).general.googleRecaptcha.siteKey,onVerify:w,onExpired:b},null,8,["size","sitekey"])])):N("",!0)],4))}}});const Cc={class:"am-asi__top"},yc={class:"am-asi__header"},bc={class:"am-asi__text"},Bc={class:"am-asi__email"},Ac={class:"am-asi__footer"},Fc={class:"am-asi__footer-text"},Dc={name:"AuthResetProcess"},kc=Object.assign(Dc,{setup(n){let a=Ne();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=B(()=>e.general.usedLanguages.includes(o.value)),i=B(()=>{let b=tt({...l}),w=s.value.accessLinkSuccess.translations;return w&&Object.keys(w).forEach(D=>{w[D][o.value]&&r.value?b[D]=w[D][o.value]:w[D].default&&(b[D]=w[D].default)}),b}),c=B(()=>a.getters["auth/getEmail"]),u=U("pageKey"),g=U("amFonts"),p=U("amColors"),f=B(()=>({"--am-c-primary":p.value.colorPrimary,"--am-c-success":p.value.colorSuccess,"--am-c-error":p.value.colorError,"--am-c-warning":p.value.colorWarning,"--am-c-main-bgr":p.value.colorMainBgr,"--am-c-main-heading-text":p.value.colorMainHeadingText,"--am-c-main-text":p.value.colorMainText,"--am-c-main-text-op70":Q(p.value.colorMainText,.7),"--am-c-main-text-op60":Q(p.value.colorMainText,.6),"--am-c-main-text-op40":Q(p.value.colorMainText,.4),"--am-c-main-text-op25":Q(p.value.colorMainText,.25),"--am-c-inp-bgr":p.value.colorInpBgr,"--am-c-inp-border":p.value.colorInpBorder,"--am-c-inp-text":p.value.colorInpText,"--am-c-inp-placeholder":p.value.colorInpPlaceHolder,"--am-c-btn-prim":p.value.colorBtnPrim,"--am-c-btn-prim-text":p.value.colorBtnPrimText,"--am-c-skeleton-op20":Q(p.value.colorMainText,.2),"--am-c-skeleton-op60":Q(p.value.colorMainText,.6),"--am-font-family":g.value.fontFamily,"--am-c-scroll-op30":Q(p.value.colorPrimary,.3),"--am-c-scroll-op10":Q(p.value.colorPrimary,.1)}));return(b,w)=>(x(),F("div",{class:"am-asi",style:Ce(t(f))},[m("div",Cc,[m("div",yc,k(t(i).access_link_send_check),1),m("div",bc,k(t(i).access_link_send_click),1),m("div",Bc,k(t(c)),1)]),m("div",Ac,[m("span",Fc,k(t(i).access_link_send_inbox),1),m("span",{class:"am-asi__footer-link",onClick:w[0]||(w[0]=D=>Ae(u)?u.value="sendAccessLink":u="sendAccessLink")},k(t(i).access_link_send_retry),1)])],4))}});const wc={class:"am-asi__top"},Pc={class:"am-asi__header"},Tc={class:"am-asi__text"},Lc={name:"AuthNewPass"},Sc=Object.assign(Lc,{setup(n){let a=Ne();const e=U("settings");let s=U("amCustomize");const l=U("labels"),o=U("localLanguage");let r=B(()=>e.general.usedLanguages.includes(o.value)),i=B(()=>{let d=tt({...l}),_=s.value.setPass.translations;return _&&Object.keys(_).forEach(y=>{_[y][o.value]&&r.value?d[y]=_[y][o.value]:_[y].default&&(d[y]=_[y].default)}),d}),c=M(null),u=M({newPassword:B({get:()=>a.getters["auth/getNewPassword"],set:d=>{a.commit("auth/setNewPassword",d||"")}}),confirmPassword:B({get:()=>a.getters["auth/getConfirmPassword"],set:d=>{a.commit("auth/setConfirmPassword",d||"")}})}),g=M({newPassword:[{required:!0,message:i.value.new_password_required,trigger:"submit"},{min:4,message:i.value.new_password_length,trigger:"submit"}],confirmPassword:[{required:!0,message:i.value.new_password_required,trigger:"submit"},{min:4,message:i.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:i.value.passwords_not_match,trigger:"submit"}]}),p=M({newPassword:{template:We.text,props:{itemName:"newPassword",itemType:"password",showPassword:!0,label:i.value.new_password_colon,placeholder:"",minLength:3,class:"am-asi__item"}},confirmPassword:{template:We.text,props:{itemName:"confirmPassword",itemType:"password",showPassword:!0,label:i.value.new_password_colon_retype,placeholder:"",minLength:3,class:"am-asi__item"}}}),f=U("cabinetType"),b=B(()=>a.getters.getLoading);function w(){c.value.validate(d=>{if(d&&a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"]){let _=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+f.value+"s/"+_.id,{password:a.getters["auth/getNewPassword"]},Object.assign(Ue(a),{params:{source:"cabinet-"+f.value}})).then(()=>{a.commit("auth/setAuthenticated",!0)}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1)})}else return!1})}let D=U("containerWidth"),v=B(()=>ot(D.value)),P=U("amFonts"),S=U("amColors"),A=B(()=>({"--am-c-primary":S.value.colorPrimary,"--am-c-success":S.value.colorSuccess,"--am-c-error":S.value.colorError,"--am-c-warning":S.value.colorWarning,"--am-c-main-bgr":S.value.colorMainBgr,"--am-c-main-heading-text":S.value.colorMainHeadingText,"--am-c-main-text":S.value.colorMainText,"--am-c-main-text-op70":Q(S.value.colorMainText,.7),"--am-c-main-text-op60":Q(S.value.colorMainText,.6),"--am-c-main-text-op40":Q(S.value.colorMainText,.4),"--am-c-main-text-op25":Q(S.value.colorMainText,.25),"--am-c-inp-bgr":S.value.colorInpBgr,"--am-c-inp-border":S.value.colorInpBorder,"--am-c-inp-text":S.value.colorInpText,"--am-c-inp-placeholder":S.value.colorInpPlaceHolder,"--am-c-btn-prim":S.value.colorBtnPrim,"--am-c-btn-prim-text":S.value.colorBtnPrimText,"--am-c-skeleton-op20":Q(S.value.colorMainText,.2),"--am-c-skeleton-op60":Q(S.value.colorMainText,.6),"--am-font-family":P.value.fontFamily,"--am-c-scroll-op30":Q(S.value.colorPrimary,.3),"--am-c-scroll-op10":Q(S.value.colorPrimary,.1)}));return(d,_)=>{const y=st;return t(b)?(x(),Y(t(Zt),{key:1,count:4,"center-first":!0,"main-class":"am-asi"})):(x(),F("div",{key:0,class:"am-asi",style:Ce(t(A))},[m("div",wc,[m("div",Pc,k(t(i).new_password_set),1),m("div",Tc,k(t(i).new_password_set_description),1)]),$(y,{ref_key:"authFormRef",ref:c,model:t(u),rules:t(g),"label-position":"top",class:j(["am-asi__form",t(v)])},{default:I(()=>[(x(!0),F(ne,null,ve(t(p),(E,C)=>(x(),Y(ft(E.template),kt({key:C,ref_for:!0,ref:"customerCollectorRef",modelValue:t(u)[C],"onUpdate:modelValue":L=>t(u)[C]=L},E.props,{onEnter:w}),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]),$(Fe,{class:"am-asi__btn",type:t(s).setPass.options.newPassBtn.buttonType,onClick:w},{default:I(()=>[ue(k(t(i).new_password_set_action),1)]),_:1},8,["type"])],4))}}});const Ic={class:"am-asi__top"},$c=m("div",{class:"am-asi__img"},[m("span",{class:"am-icon-check"})],-1),Nc={class:"am-asi__header"},Oc={class:"am-asi__text"},Mc={name:"ChangePassSuccess"},Vc=Object.assign(Mc,{setup(n){const a=U("settings");let e=U("amCustomize");const s=U("labels"),l=U("localLanguage");let o=B(()=>a.general.usedLanguages.includes(l.value)),r=B(()=>{let p=tt({...s}),f=e.value.setPassSuccess.translations;return f&&Object.keys(f).forEach(b=>{f[b][l.value]&&o.value?p[b]=f[b][l.value]:f[b].default&&(p[b]=f[b].default)}),p}),i=U("pageKey"),c=U("amFonts"),u=U("amColors"),g=B(()=>({"--am-c-primary":u.value.colorPrimary,"--am-c-success":u.value.colorSuccess,"--am-c-error":u.value.colorError,"--am-c-warning":u.value.colorWarning,"--am-c-main-bgr":u.value.colorMainBgr,"--am-c-main-heading-text":u.value.colorMainHeadingText,"--am-c-main-text":u.value.colorMainText,"--am-c-main-text-op70":Q(u.value.colorMainText,.7),"--am-c-main-text-op60":Q(u.value.colorMainText,.6),"--am-c-main-text-op40":Q(u.value.colorMainText,.4),"--am-c-main-text-op25":Q(u.value.colorMainText,.25),"--am-c-btn-prim":u.value.colorBtnPrim,"--am-c-btn-prim-text":u.value.colorBtnPrimText,"--am-c-skeleton-op20":Q(u.value.colorMainText,.2),"--am-c-skeleton-op60":Q(u.value.colorMainText,.6),"--am-font-family":c.value.fontFamily,"--am-c-scroll-op30":Q(u.value.colorPrimary,.3),"--am-c-scroll-op10":Q(u.value.colorPrimary,.1)}));return(p,f)=>(x(),F("div",{class:"am-asi",style:Ce(t(g))},[m("div",Ic,[$c,m("div",Nc,k(t(r).new_password_changed),1),m("div",Oc,k(t(r).new_password_changed_description),1)]),$(Fe,{class:"am-asi__btn",type:t(e).setPassSuccess.options.signInBtn.buttonType,onClick:f[0]||(f[0]=b=>Ae(i)?i.value="signIn":i="signIn")},{default:I(()=>[ue(k(t(r).sign_in),1)]),_:1},8,["type"])],4))}}),Rc={name:"AuthWrapper"},qc=Object.assign(Rc,{setup(n){const a=U("settings");let e=M({signIn:Qe(mc),sendAccessLink:Qe(_c),sendAccessLinkProcess:Qe(kc),setPassword:Qe(Sc),changeSuccess:Qe(Vc)}),s=U("originKey"),l=M("signIn");ze("pageKey",l);const o=M(a.customizedData?a.customizedData.fonts:Dl.fonts);ze("amFonts",o);let r=B(()=>a.customizedData&&s.value in a.customizedData?a.customizedData[s.value].colors:Dl[s.value].colors);return ze("amColors",r),(i,c)=>(x(),Y(ft(t(e)[t(l)])))}});const Uc={class:"am-csd__inner"},zc={class:"am-csd__header"},jc={class:"am-csd__header-text"},Yc={class:"am-csd__content"},Wc={class:"am-csd__footer"},Hc={name:"DeleteProfile"},Zc=Object.assign(Hc,{props:{visibility:{type:Boolean,required:!0},customizedLabels:{type:Object,default:()=>({})},customizedOptions:{type:Object,default:()=>({})}},emits:["close","deleteProfile"],setup(n,{emit:a}){const e=n;let s=U("containerWidth");const l=U("labels");function o(u){return Object.keys(e.customizedLabels).length&&e.customizedLabels[u]?e.customizedLabels[u]:l[u]}let r=U("amFonts"),i=U("amColors"),c=B(()=>({"--am-c-csd-text":i.value.colorMainText,"--am-c-csd-bgr":i.value.colorMainBgr,"--am-c-csd-text-op10":Q(i.value.colorMainText,.1),"--am-font-family":r.value.fontFamily}));return(u,g)=>(x(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Ce(t(c)),position:"center"},{footer:I(()=>[m("div",Wc,[$(Fe,{category:"secondary",size:t(s)<=360?"small":"default",type:t(e).customizedOptions.closeBtn.buttonType,onClick:g[1]||(g[1]=()=>{a("close")})},{default:I(()=>[ue(k(o("close")),1)]),_:1},8,["size","type"]),$(Fe,{category:"danger",size:t(s)<=360?"small":"default","loading-icon":"loading",type:t(e).customizedOptions.confirmBtn.buttonType,onClick:g[2]||(g[2]=()=>{a("deleteProfile")})},{default:I(()=>[ue(k(o("delete")),1)]),_:1},8,["size","type"])])]),default:I(()=>[m("div",Uc,[m("div",zc,[m("div",jc,k(o("delete_profile")),1),m("div",{class:"am-csd__header-btn",onClick:g[0]||(g[0]=()=>{a("close")})},[$(Ge,{icon:"close"})])]),m("div",Yc,[m("p",null,k(o("delete_profile_description")),1)])])]),_:1},8,["visibility","style"]))}});const Bl={props:{pageWidth:{type:Number,default:768},count:{type:[Number,String],default:2},itemDirection:{type:String,default:"row",validator(n){return["row","row-reverse","column","column-reverse","initial","revert","unset"].includes(n)}}},setup(n){const a=n;let e=B(()=>ot(a.pageWidth)),s=U("amColors"),l=B(()=>({"--am-c-skeleton-op20":Q(s.value.colorMainText,.2),"--am-c-skeleton-op60":Q(s.value.colorMainText,.6),"--am-c-flex-direction":a.itemDirection}));return(o,r)=>{const i=Nl,c=Ol;return x(),Y(c,{animated:"",class:"am-cps",style:Ce(t(l))},{template:I(()=>[(x(!0),F(ne,null,ve(new Array(t(a).count),u=>(x(),F("div",{key:u,class:j(["am-cps__item",t(e)])},[$(i,{class:"am-cps__item-label",variant:"rect"}),$(i,{class:"am-cps__item-input",variant:"rect"})],2))),128))]),_:1},8,["style"])}}};const Gc={class:"am-capi__inner"},Jc=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Xc={name:"CabinetProfile",key:"profile"},Qc=Object.assign(Xc,{setup(n){let a=Ne(),e=B(()=>a.getters.getLoading),s=M(null),l=M(0),o=U("sidebarCollapsed");window.addEventListener("resize",r);function r(){s.value&&(l.value=s.value.offsetWidth)}xt(o,Ee=>{Ee?setTimeout(()=>{i()},1500):setTimeout(()=>{i()},500)});function i(){l.value=s.value.offsetWidth}Ze(()=>{co(()=>{l.value=s.value.offsetWidth}),oe()});let c=B(()=>ot(l.value));const u=U("settings");let g=U("cabinetType"),p=U("amCustomize");const f=U("labels"),b=U("localLanguage");let w=B(()=>u.general.usedLanguages.includes(b.value));function D(Ee,be){return be&&Object.keys(be).forEach(Pe=>{be[Pe][b.value]&&w.value?Ee[Pe]=be[Pe][b.value]:be[Pe].default&&(Ee[Pe]=be[Pe].default)}),Ee}let v=B(()=>{let Ee=tt({...f}),be=p.value.profile.translations;return D(Ee,be)});function P(Ee){let be={},Pe=p.value[Ee].translations;return D(be,Pe)}let S=B(()=>p.value.profile.options),A=M("first"),d=M("");function _(){te.value=!1,d.value=""}let y=M(null),E=M(!1),C=M({firstName:B({get:()=>a.getters["auth/getProfile"].firstName,set:Ee=>{a.commit("auth/setProfileFirstName",Ee||"")}}),lastName:B({get:()=>a.getters["auth/getProfile"].lastName,set:Ee=>{a.commit("auth/setProfileLastName",Ee||"")}}),email:B({get:()=>a.getters["auth/getProfile"].email,set:Ee=>{a.commit("auth/setProfileEmail",Ee||"")}}),phone:B({get:()=>a.getters["auth/getProfile"].phone,set:Ee=>{a.commit("auth/setProfilePhone",Ee||"")}}),birthday:B({get:()=>a.getters["auth/getProfile"].birthday?a.getters["auth/getProfile"].birthday:"",set:Ee=>{a.commit("auth/setProfileBirthday",Ee?ye(Ee).format("YYYY-MM-DD"):"")}})}),L=M({firstName:{template:We.text,props:{itemName:"firstName",label:v.value.first_name_colon,placeholder:v.value.enter_first_name,class:B(()=>`am-capi__item ${c.value}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:v.value.last_name_colon,placeholder:v.value.enter_last_name,class:B(()=>`am-capi__item ${c.value}`)}},email:{template:We.text,props:{itemName:"email",label:v.value.email_colon,placeholder:v.value.enter_email,class:B(()=>`am-capi__item ${c.value}`)}},phone:{countryPhoneIso:B({get:()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:"",set:Ee=>{a.commit("auth/setProfileCountryPhoneIso",Ee?Ee.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:v.value.phone_colon,placeholder:v.value.enter_phone,defaultCode:B(()=>a.getters["auth/getProfile"].countryPhoneIso?a.getters["auth/getProfile"].countryPhoneIso:""),phoneError:B(()=>E.value),whatsAppLabel:v.value.whatsapp_opt_in_text,isWhatsApp:u.notifications.whatsAppEnabled&&u.notifications.whatsAppAccessToken&&u.notifications.whatsAppBusinessID&&u.notifications.whatsAppPhoneID,class:B(()=>`am-capi__item ${c.value}`)}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:v.value.date_of_birth,placeholder:v.value.enter_date_of_birth,clearable:!0,readonly:!1,class:B(()=>`am-capi__item am-capi__item-birthday ${c.value}`)}}}),V=M({firstName:[{required:!0,message:v.value.enter_first_name_warning,trigger:"submit"}],lastName:[{required:S.value.lastName.required,message:v.value.enter_last_name_warning,trigger:"submit"}],email:[{required:S.value.email.required,type:"email",message:v.value.enter_valid_email_warning,trigger:"submit"}],phone:[{required:S.value.phone.required,message:v.value.enter_phone_warning,trigger:"submit"}],birthday:[{required:S.value.birthday.required,message:v.value.enter_date_of_birth_warning,trigger:"submit"}]}),T=M(!1);ze("deleteProfileDialog",T);function q(){a.commit("auth/setProfileFirstName",C.value.firstName?C.value.firstName.trim():""),a.commit("auth/setProfileLastName",C.value.lastName?C.value.lastName.trim():""),a.commit("auth/setProfileEmail",C.value.email?C.value.email.trim():""),y.value.validate(Ee=>{if(Ee){d.value=v.value.profile_data_success;let be=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/"+g.value+"s/"+be.id,be,Ue(a)).finally(()=>{a.commit("setLoading",!1),te.value=!0,S.value.phone.required&&C.value.phone&&(E.value=!1)})}else return S.value.phone.required&&!C.value.phone&&(E.value=!0),!1})}ze("saveProfileChanges",q);let H=M(null),z=M({newPass:B({get:()=>a.getters["auth/getNewPassword"],set:Ee=>{a.commit("auth/setNewPassword",Ee||"")}}),confirmPass:B({get:()=>a.getters["auth/getConfirmPassword"],set:Ee=>{a.commit("auth/setConfirmPassword",Ee||"")}})}),X=M({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:v.value.new_password_colon,placeholder:"",minLength:3,class:B(()=>`am-capp__item ${c.value}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:v.value.new_password_colon_retype,placeholder:"",minLength:3,class:B(()=>`am-capp__item ${c.value}`)}}}),K=M({newPass:[{required:!0,message:v.value.new_password_required,trigger:"submit"},{min:4,message:v.value.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:v.value.new_password_required,trigger:"submit"},{min:4,message:v.value.new_password_length,trigger:"submit"},{validator:()=>a.getters["auth/getNewPassword"]===a.getters["auth/getConfirmPassword"],message:v.value.passwords_not_match,trigger:"submit"}]}),te=M(!1);function le(){te.value=!1}function ee(){H.value.validate(Ee=>{if(Ee){let be=a.getters["auth/getProfile"];a.commit("setLoading",!0),$e.post("/users/customers/"+be.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{d.value=v.value.password_success,a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{}).finally(()=>{a.commit("setLoading",!1),te.value=!0})}else return!1})}ze("changeProfilePassword",ee);function xe(){T.value=!1,a.commit("auth/setProfileDeleted",!0),a.dispatch("auth/logout")}function se(Ee,be){if(Ee){for(const Pe in W)if(W[Pe].id===be){W[Pe].components=zi(Ee);break}}}function ge(){a.commit("setLoading",!0);let Ee=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;if(!Ee)return;let be={email:"",firstName:v.value.customer,lastName:Ee,phone:"",birthday:"",gender:"",externalId:"",password:""};const Pe=$l().cookies;$e.post("/users/customers/"+Ee,Object.assign(Ue(a),be)).then(()=>{a.commit("auth/setProfile",{}),Pe.remove("ameliaUserEmail"),a.commit("setLoading",!1),xe()}).catch(Ve=>{a.commit("setLoading",!1),console.log(Ve)})}const G=M(null),ie=tt({}),ae=tt({}),O=tt({}),W=tt({});function J(Ee,be,Pe){ie[be]=Pe??""}function re(Ee,be){if(O[be]={template:We[Ee.type],props:{id:be,itemName:be.toString(),label:Ee.label,options:Ee.options,class:`am-capei-att-cf__item am-cf-width-${Ee.width}`}},Ee.type==="text-area"&&(O[be].props.itemType="textarea"),Ee.type==="datepicker"&&(O[be].props.weekStartsFromDay=u.wordpress.startOfWeek),Ee.type==="file"){let Pe=a.getters["auth/getProfile"]?a.getters["auth/getProfile"].id:null;O[be].props={...O[be].props,btnLabel:v.value.upload_file_here,isUpload:!0,bookingId:Pe,source:"cabinet-customer"}}}function me(Ee){ae[Ee.id]=[{message:v.value.required_field,required:Ee.required,trigger:["submit","change"]}]}function oe(){const Ee=a.getters["entities/getCustomFields"],be=JSON.parse(a.getters["auth/getProfile"].customFields||"{}");Ee.filter(Pe=>Pe.saveType==="customer"&&Pe.type!=="content").sort((Pe,Ve)=>Pe.position-Ve.position).forEach(Pe=>{const{position:Ve,id:Se}=Pe,Be=be[Se]?.value;W[Ve]={...Pe,value:Be??(Pe.type==="checkbox"||Pe.type==="file"?[]:"")},Pe.type==="address"&&be[Se]?.components&&(W[Ve].components=be[Se]?.components),J(Pe,Se,W[Ve].value),re(Pe,Se),me(Pe)})}function De(){G.value.validate(Ee=>{if(Ee){const be=a.getters["auth/getProfile"],Pe={};for(const Se in W){const Be=W[Se],pe=ie[Be.id];Pe[Be.id]={label:Be.label,type:Be.type,value:typeof pe=="string"?pe.trim():pe},Be.type==="address"&&Be.components&&(Pe[Be.id].components=Be.components)}const Ve={...be,customFields:JSON.stringify(Pe)};a.commit("setLoading",!0),$e.post(`/users/${g.value}s/${be.id}`,Ve,Ue(a)).finally(()=>{a.commit("setLoading",!1),d.value=v.value.profile_data_success,te.value=!0})}else return!1})}ze("saveCustomerCustomFields",De);let _e=U("amColors"),Me=B(()=>({"--am-c-capi-primary":_e.value.colorPrimary,"--am-c-capi-text":_e.value.colorMainText,"--am-c-capi-text-op10":Q(_e.value.colorMainText,.1)}));return(Ee,be)=>{const Pe=st,Ve=_a,Se=Ca;return x(),F("div",{ref_key:"pageContainer",ref:s,class:"am-capi",style:Ce(t(Me))},[m("div",Gc,[t(te)?(x(),Y(bt,{key:0,type:"success","show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:_,onTriggerClose:_},{title:I(()=>[Jc,ue(" "+k(t(d)),1)]),_:1})):N("",!0),$(Se,{modelValue:t(A),"onUpdate:modelValue":be[0]||(be[0]=Be=>Ae(A)?A.value=Be:A=Be),class:"am-capi__tabs",onTabClick:le},{default:I(()=>[$(Ve,{class:"am-capi__tabs-item",label:t(v).personal_info,name:"first"},{default:I(()=>[t(e)?(x(),Y(Bl,{key:1,count:5,"page-width":t(l)},null,8,["page-width"])):(x(),F(ne,{key:0},[t(a).getters["auth/getProfile"]?(x(),Y(Pe,{key:0,ref_key:"infoFormRef",ref:y,model:t(C),rules:t(V),"label-position":"top",class:j(["am-capi__form",t(c)])},{default:I(()=>[(x(!0),F(ne,null,ve(t(p).profile.order,Be=>(x(),F(ne,{key:Be.id},[!t(S)[Be.id]||t(S)[Be.id].visibility?(x(),Y(ft(t(L)[Be.id].template),kt({key:0,ref_for:!0,ref:"customerCollectorRef",modelValue:t(C)[Be.id],"onUpdate:modelValue":pe=>t(C)[Be.id]=pe,countryPhoneIso:t(L)[Be.id].countryPhoneIso,"onUpdate:countryPhoneIso":pe=>t(L)[Be.id].countryPhoneIso=pe},t(L)[Be.id].props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"])):N("",!0)],64))),128))]),_:1},8,["model","rules","class"])):N("",!0)],64))]),_:1},8,["label"]),Object.keys(t(W)).length?(x(),Y(Ve,{key:0,label:t(v).custom_fields,name:"third"},{default:I(()=>[t(e)?(x(),Y(Bl,{key:1,count:Object.keys(t(W)).length,"page-width":t(l)},null,8,["count","page-width"])):(x(),Y(Pe,{key:0,ref_key:"customFieldsFormRef",ref:G,model:t(ie),rules:t(ae),"label-position":"top",class:j(["am-capei-att-cf__form",t(c)])},{default:I(()=>[(x(!0),F(ne,null,ve(Object.values(t(W)),Be=>(x(),F(ne,{key:Be.id},[Be.id in t(ie)?(x(),Y(ft(t(O)[Be.id]?.template),kt({key:0,modelValue:t(ie)[Be.id],"onUpdate:modelValue":pe=>t(ie)[Be.id]=pe},t(O)[Be.id]?.props,{onAddressSelected:pe=>se(pe,Be.id)}),null,16,["modelValue","onUpdate:modelValue","onAddressSelected"])):N("",!0)],64))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])):N("",!0),$(Ve,{class:"am-capi__tabs-item",label:t(v).password_tab,name:"second"},{default:I(()=>[t(e)?(x(),Y(Bl,{key:1,"item-direction":"column",count:2,"page-width":t(l)},null,8,["page-width"])):(x(),Y(Pe,{key:0,ref_key:"passFormRef",ref:H,model:t(z),rules:t(K),"label-position":"top",class:j(["am-capi__form",t(c)])},{default:I(()=>[(x(!0),F(ne,null,ve(t(X),(Be,pe)=>(x(),Y(ft(Be.template),kt({key:Be.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(z)[pe],"onUpdate:modelValue":ce=>t(z)[pe]=ce},Be.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"]))]),_:1},8,["label"])]),_:1},8,["modelValue"]),$(Zc,{visibility:t(T),"customized-labels":P("deleteProfile"),"customized-options":t(p).deleteProfile.options,onClose:be[1]||(be[1]=Be=>Ae(T)?T.value=!1:T=!1),onDeleteProfile:ge},null,8,["visibility","customized-labels","customized-options"]),$(b0,{loading:t(e),display:t(A),"parent-width":t(l),"customized-labels":t(v),"save-footer-button":t(S).saveFooterButton.buttonType,"delete-footer-type":t(S).deleteFooterButton.buttonType,"pass-footer-button":t(S).passFooterButton.buttonType},null,8,["loading","display","parent-width","customized-labels","save-footer-button","delete-footer-type","pass-footer-button"])])],4)}}});var Le=(n=>(n[n.TYPE=3]="TYPE",n[n.LEVEL=12]="LEVEL",n[n.ATTRIBUTE=13]="ATTRIBUTE",n[n.BLOT=14]="BLOT",n[n.INLINE=7]="INLINE",n[n.BLOCK=11]="BLOCK",n[n.BLOCK_BLOT=10]="BLOCK_BLOT",n[n.INLINE_BLOT=6]="INLINE_BLOT",n[n.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",n[n.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",n[n.ANY=15]="ANY",n))(Le||{});class ca{constructor(a,e,s={}){this.attrName=a,this.keyName=e;const l=Le.TYPE&Le.ATTRIBUTE;this.scope=s.scope!=null?s.scope&Le.LEVEL|l:Le.ATTRIBUTE,s.whitelist!=null&&(this.whitelist=s.whitelist)}static keys(a){return Array.from(a.attributes).map(e=>e.name)}add(a,e){return this.canAdd(a,e)?(a.setAttribute(this.keyName,e),!0):!1}canAdd(a,e){return this.whitelist==null?!0:typeof e=="string"?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1}remove(a){a.removeAttribute(this.keyName)}value(a){const e=a.getAttribute(this.keyName);return this.canAdd(a,e)&&e?e:""}}class ps extends Error{constructor(a){a="[Parchment] "+a,super(a),this.message=a,this.name=this.constructor.name}}const Ir=class Zn{constructor(){this.attributes={},this.classes={},this.tags={},this.types={}}static find(a,e=!1){if(a==null)return null;if(this.blots.has(a))return this.blots.get(a)||null;if(e){let s=null;try{s=a.parentNode}catch{return null}return this.find(s,e)}return null}create(a,e,s){const l=this.query(e);if(l==null)throw new ps(`Unable to create ${e} blot`);const o=l,r=e instanceof Node||e.nodeType===Node.TEXT_NODE?e:o.create(s),i=new o(a,r,s);return Zn.blots.set(i.domNode,i),i}find(a,e=!1){return Zn.find(a,e)}query(a,e=Le.ANY){let s;return typeof a=="string"?s=this.types[a]||this.attributes[a]:a instanceof Text||a.nodeType===Node.TEXT_NODE?s=this.types.text:typeof a=="number"?a&Le.LEVEL&Le.BLOCK?s=this.types.block:a&Le.LEVEL&Le.INLINE&&(s=this.types.inline):a instanceof Element&&((a.getAttribute("class")||"").split(/\s+/).some(l=>(s=this.classes[l],!!s)),s=s||this.tags[a.tagName]),s==null?null:"scope"in s&&e&Le.LEVEL&s.scope&&e&Le.TYPE&s.scope?s:null}register(...a){return a.map(e=>{const s="blotName"in e,l="attrName"in e;if(!s&&!l)throw new ps("Invalid definition");if(s&&e.blotName==="abstract")throw new ps("Cannot register abstract class");const o=s?e.blotName:l?e.attrName:void 0;return this.types[o]=e,l?typeof e.keyName=="string"&&(this.attributes[e.keyName]=e):s&&(e.className&&(this.classes[e.className]=e),e.tagName&&(Array.isArray(e.tagName)?e.tagName=e.tagName.map(r=>r.toUpperCase()):e.tagName=e.tagName.toUpperCase(),(Array.isArray(e.tagName)?e.tagName:[e.tagName]).forEach(r=>{(this.tags[r]==null||e.className==null)&&(this.tags[r]=e)}))),e})}};Ir.blots=new WeakMap;let Es=Ir;function zo(n,a){return(n.getAttribute("class")||"").split(/\s+/).filter(e=>e.indexOf(`${a}-`)===0)}class Kc extends ca{static keys(a){return(a.getAttribute("class")||"").split(/\s+/).map(e=>e.split("-").slice(0,-1).join("-"))}add(a,e){return this.canAdd(a,e)?(this.remove(a),a.classList.add(`${this.keyName}-${e}`),!0):!1}remove(a){zo(a,this.keyName).forEach(e=>{a.classList.remove(e)}),a.classList.length===0&&a.removeAttribute("class")}value(a){const e=(zo(a,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(a,e)?e:""}}const sa=Kc;function $n(n){const a=n.split("-"),e=a.slice(1).map(s=>s[0].toUpperCase()+s.slice(1)).join("");return a[0]+e}class ex extends ca{static keys(a){return(a.getAttribute("style")||"").split(";").map(e=>e.split(":")[0].trim())}add(a,e){return this.canAdd(a,e)?(a.style[$n(this.keyName)]=e,!0):!1}remove(a){a.style[$n(this.keyName)]="",a.getAttribute("style")||a.removeAttribute("style")}value(a){const e=a.style[$n(this.keyName)];return this.canAdd(a,e)?e:""}}const Ia=ex;class tx{constructor(a){this.attributes={},this.domNode=a,this.build()}attribute(a,e){e?a.add(this.domNode,e)&&(a.value(this.domNode)!=null?this.attributes[a.attrName]=a:delete this.attributes[a.attrName]):(a.remove(this.domNode),delete this.attributes[a.attrName])}build(){this.attributes={};const a=Es.find(this.domNode);if(a==null)return;const e=ca.keys(this.domNode),s=sa.keys(this.domNode),l=Ia.keys(this.domNode);e.concat(s).concat(l).forEach(o=>{const r=a.scroll.query(o,Le.ATTRIBUTE);r instanceof ca&&(this.attributes[r.attrName]=r)})}copy(a){Object.keys(this.attributes).forEach(e=>{const s=this.attributes[e].value(this.domNode);a.format(e,s)})}move(a){this.copy(a),Object.keys(this.attributes).forEach(e=>{this.attributes[e].remove(this.domNode)}),this.attributes={}}values(){return Object.keys(this.attributes).reduce((a,e)=>(a[e]=this.attributes[e].value(this.domNode),a),{})}}const Rl=tx,$r=class{constructor(a,e){this.scroll=a,this.domNode=e,Es.blots.set(e,this),this.prev=null,this.next=null}static create(a){if(this.tagName==null)throw new ps("Blot definition missing tagName");let e,s;return Array.isArray(this.tagName)?(typeof a=="string"?(s=a.toUpperCase(),parseInt(s,10).toString()===s&&(s=parseInt(s,10))):typeof a=="number"&&(s=a),typeof s=="number"?e=document.createElement(this.tagName[s-1]):s&&this.tagName.indexOf(s)>-1?e=document.createElement(s):e=document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e}get statics(){return this.constructor}attach(){}clone(){const a=this.domNode.cloneNode(!1);return this.scroll.create(a)}detach(){this.parent!=null&&this.parent.removeChild(this),Es.blots.delete(this.domNode)}deleteAt(a,e){this.isolate(a,e).remove()}formatAt(a,e,s,l){const o=this.isolate(a,e);if(this.scroll.query(s,Le.BLOT)!=null&&l)o.wrap(s,l);else if(this.scroll.query(s,Le.ATTRIBUTE)!=null){const r=this.scroll.create(this.statics.scope);o.wrap(r),r.format(s,l)}}insertAt(a,e,s){const l=s==null?this.scroll.create("text",e):this.scroll.create(e,s),o=this.split(a);this.parent.insertBefore(l,o||void 0)}isolate(a,e){const s=this.split(a);if(s==null)throw new Error("Attempt to isolate at end");return s.split(e),s}length(){return 1}offset(a=this.parent){return this.parent==null||this===a?0:this.parent.children.offset(this)+this.parent.offset(a)}optimize(a){this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)&&this.wrap(this.statics.requiredContainer.blotName)}remove(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return this.parent!=null&&(this.parent.insertBefore(s,this.next||void 0),this.remove()),s}split(a,e){return a===0?this:this.next}update(a,e){}wrap(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;if(this.parent!=null&&this.parent.insertBefore(s,this.next||void 0),typeof s.appendChild!="function")throw new ps(`Cannot wrap ${a}`);return s.appendChild(this),s}};$r.blotName="abstract";let Nr=$r;const Or=class extends Nr{static value(a){return!0}index(a,e){return this.domNode===a||this.domNode.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1}position(a,e){let s=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return a>0&&(s+=1),[this.parent.domNode,s]}value(){return{[this.statics.blotName]:this.statics.value(this.domNode)||!0}}};Or.scope=Le.INLINE_BLOT;let ax=Or;const Dt=ax;class sx{constructor(){this.head=null,this.tail=null,this.length=0}append(...a){if(this.insertBefore(a[0],null),a.length>1){const e=a.slice(1);this.append(...e)}}at(a){const e=this.iterator();let s=e();for(;s&&a>0;)a-=1,s=e();return s}contains(a){const e=this.iterator();let s=e();for(;s;){if(s===a)return!0;s=e()}return!1}indexOf(a){const e=this.iterator();let s=e(),l=0;for(;s;){if(s===a)return l;l+=1,s=e()}return-1}insertBefore(a,e){a!=null&&(this.remove(a),a.next=e,e!=null?(a.prev=e.prev,e.prev!=null&&(e.prev.next=a),e.prev=a,e===this.head&&(this.head=a)):this.tail!=null?(this.tail.next=a,a.prev=this.tail,this.tail=a):(a.prev=null,this.head=this.tail=a),this.length+=1)}offset(a){let e=0,s=this.head;for(;s!=null;){if(s===a)return e;e+=s.length(),s=s.next}return-1}remove(a){this.contains(a)&&(a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev),a===this.head&&(this.head=a.next),a===this.tail&&(this.tail=a.prev),this.length-=1)}iterator(a=this.head){return()=>{const e=a;return a!=null&&(a=a.next),e}}find(a,e=!1){const s=this.iterator();let l=s();for(;l;){const o=l.length();if(a<o||e&&a===o&&(l.next==null||l.next.length()!==0))return[l,a];a-=o,l=s()}return[null,0]}forEach(a){const e=this.iterator();let s=e();for(;s;)a(s),s=e()}forEachAt(a,e,s){if(e<=0)return;const[l,o]=this.find(a);let r=a-o;const i=this.iterator(l);let c=i();for(;c&&r<a+e;){const u=c.length();a>r?s(c,a-r,Math.min(e,r+u-a)):s(c,0,Math.min(u,a+e-r)),r+=u,c=i()}}map(a){return this.reduce((e,s)=>(e.push(a(s)),e),[])}reduce(a,e){const s=this.iterator();let l=s();for(;l;)e=a(e,l),l=s();return e}}function jo(n,a){const e=a.find(n);if(e)return e;try{return a.create(n)}catch{const s=a.create(Le.INLINE);return Array.from(n.childNodes).forEach(l=>{s.domNode.appendChild(l)}),n.parentNode&&n.parentNode.replaceChild(s.domNode,n),s.attach(),s}}const Mr=class Fa extends Nr{constructor(a,e){super(a,e),this.uiNode=null,this.build()}appendChild(a){this.insertBefore(a)}attach(){super.attach(),this.children.forEach(a=>{a.attach()})}attachUI(a){this.uiNode!=null&&this.uiNode.remove(),this.uiNode=a,Fa.uiClass&&this.uiNode.classList.add(Fa.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)}build(){this.children=new sx,Array.from(this.domNode.childNodes).filter(a=>a!==this.uiNode).reverse().forEach(a=>{try{const e=jo(a,this.scroll);this.insertBefore(e,this.children.head||void 0)}catch(e){if(e instanceof ps)return;throw e}})}deleteAt(a,e){if(a===0&&e===this.length())return this.remove();this.children.forEachAt(a,e,(s,l,o)=>{s.deleteAt(l,o)})}descendant(a,e=0){const[s,l]=this.children.find(e);return a.blotName==null&&a(s)||a.blotName!=null&&s instanceof a?[s,l]:s instanceof Fa?s.descendant(a,l):[null,-1]}descendants(a,e=0,s=Number.MAX_VALUE){let l=[],o=s;return this.children.forEachAt(e,s,(r,i,c)=>{(a.blotName==null&&a(r)||a.blotName!=null&&r instanceof a)&&l.push(r),r instanceof Fa&&(l=l.concat(r.descendants(a,i,o))),o-=c}),l}detach(){this.children.forEach(a=>{a.detach()}),super.detach()}enforceAllowedChildren(){let a=!1;this.children.forEach(e=>{a||this.statics.allowedChildren.some(s=>e instanceof s)||(e.statics.scope===Le.BLOCK_BLOT?(e.next!=null&&this.splitAfter(e),e.prev!=null&&this.splitAfter(e.prev),e.parent.unwrap(),a=!0):e instanceof Fa?e.unwrap():e.remove())})}formatAt(a,e,s,l){this.children.forEachAt(a,e,(o,r,i)=>{o.formatAt(r,i,s,l)})}insertAt(a,e,s){const[l,o]=this.children.find(a);if(l)l.insertAt(o,e,s);else{const r=s==null?this.scroll.create("text",e):this.scroll.create(e,s);this.appendChild(r)}}insertBefore(a,e){a.parent!=null&&a.parent.children.remove(a);let s=null;this.children.insertBefore(a,e||null),a.parent=this,e!=null&&(s=e.domNode),(this.domNode.parentNode!==a.domNode||this.domNode.nextSibling!==s)&&this.domNode.insertBefore(a.domNode,s),a.attach()}length(){return this.children.reduce((a,e)=>a+e.length(),0)}moveChildren(a,e){this.children.forEach(s=>{a.insertBefore(s,e)})}optimize(a){if(super.optimize(a),this.enforceAllowedChildren(),this.uiNode!=null&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),this.children.length===0)if(this.statics.defaultChild!=null){const e=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(e)}else this.remove()}path(a,e=!1){const[s,l]=this.children.find(a,e),o=[[this,a]];return s instanceof Fa?o.concat(s.path(l,e)):(s!=null&&o.push([s,l]),o)}removeChild(a){this.children.remove(a)}replaceWith(a,e){const s=typeof a=="string"?this.scroll.create(a,e):a;return s instanceof Fa&&this.moveChildren(s),super.replaceWith(s)}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.clone();return this.parent&&this.parent.insertBefore(s,this.next||void 0),this.children.forEachAt(a,this.length(),(l,o,r)=>{const i=l.split(o,e);i!=null&&s.appendChild(i)}),s}splitAfter(a){const e=this.clone();for(;a.next!=null;)e.appendChild(a.next);return this.parent&&this.parent.insertBefore(e,this.next||void 0),e}unwrap(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()}update(a,e){const s=[],l=[];a.forEach(o=>{o.target===this.domNode&&o.type==="childList"&&(s.push(...o.addedNodes),l.push(...o.removedNodes))}),l.forEach(o=>{if(o.parentNode!=null&&o.tagName!=="IFRAME"&&document.body.compareDocumentPosition(o)&Node.DOCUMENT_POSITION_CONTAINED_BY)return;const r=this.scroll.find(o);r!=null&&(r.domNode.parentNode==null||r.domNode.parentNode===this.domNode)&&r.detach()}),s.filter(o=>o.parentNode===this.domNode&&o!==this.uiNode).sort((o,r)=>o===r?0:o.compareDocumentPosition(r)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1).forEach(o=>{let r=null;o.nextSibling!=null&&(r=this.scroll.find(o.nextSibling));const i=jo(o,this.scroll);(i.next!==r||i.next==null)&&(i.parent!=null&&i.parent.removeChild(this),this.insertBefore(i,r||void 0))}),this.enforceAllowedChildren()}};Mr.uiClass="";let lx=Mr;const ta=lx;function nx(n,a){if(Object.keys(n).length!==Object.keys(a).length)return!1;for(const e in n)if(n[e]!==a[e])return!1;return!0}const rs=class is extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(is.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new Rl(this.domNode)}format(a,e){if(a===this.statics.blotName&&!e)this.children.forEach(s=>{s instanceof is||(s=s.wrap(is.blotName,!0)),this.attributes.copy(s)}),this.unwrap();else{const s=this.scroll.query(a,Le.INLINE);if(s==null)return;s instanceof ca?this.attributes.attribute(s,e):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e)}}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.formats()[s]!=null||this.scroll.query(s,Le.ATTRIBUTE)?this.isolate(a,e).format(s,l):super.formatAt(a,e,s,l)}optimize(a){super.optimize(a);const e=this.formats();if(Object.keys(e).length===0)return this.unwrap();const s=this.next;s instanceof is&&s.prev===this&&nx(e,s.formats())&&(s.moveChildren(this),s.remove())}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}wrap(a,e){const s=super.wrap(a,e);return s instanceof is&&this.attributes.move(s),s}};rs.allowedChildren=[rs,Dt],rs.blotName="inline",rs.scope=Le.INLINE_BLOT,rs.tagName="SPAN";let ox=rs;const vo=ox,cs=class Gn extends ta{static create(a){return super.create(a)}static formats(a,e){const s=e.query(Gn.blotName);if(!(s!=null&&a.tagName===s.tagName)){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return a.tagName.toLowerCase()}}constructor(a,e){super(a,e),this.attributes=new Rl(this.domNode)}format(a,e){const s=this.scroll.query(a,Le.BLOCK);s!=null&&(s instanceof ca?this.attributes.attribute(s,e):a===this.statics.blotName&&!e?this.replaceWith(Gn.blotName):e&&(a!==this.statics.blotName||this.formats()[a]!==e)&&this.replaceWith(a,e))}formats(){const a=this.attributes.values(),e=this.statics.formats(this.domNode,this.scroll);return e!=null&&(a[this.statics.blotName]=e),a}formatAt(a,e,s,l){this.scroll.query(s,Le.BLOCK)!=null?this.format(s,l):super.formatAt(a,e,s,l)}insertAt(a,e,s){if(s==null||this.scroll.query(e,Le.INLINE)!=null)super.insertAt(a,e,s);else{const l=this.split(a);if(l!=null){const o=this.scroll.create(e,s);l.parent.insertBefore(o,l)}else throw new Error("Attempt to insertAt after block boundaries")}}replaceWith(a,e){const s=super.replaceWith(a,e);return this.attributes.copy(s),s}update(a,e){super.update(a,e),a.some(s=>s.target===this.domNode&&s.type==="attributes")&&this.attributes.build()}};cs.blotName="block",cs.scope=Le.BLOCK_BLOT,cs.tagName="P",cs.allowedChildren=[vo,cs,Dt];let rx=cs;const js=rx,Jn=class extends ta{checkMerge(){return this.next!==null&&this.next.statics.blotName===this.statics.blotName}deleteAt(a,e){super.deleteAt(a,e),this.enforceAllowedChildren()}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.enforceAllowedChildren()}insertAt(a,e,s){super.insertAt(a,e,s),this.enforceAllowedChildren()}optimize(a){super.optimize(a),this.children.length>0&&this.next!=null&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())}};Jn.blotName="container",Jn.scope=Le.BLOCK_BLOT;let ix=Jn;const ql=ix;class cx extends Dt{static formats(a,e){}format(a,e){super.formatAt(0,this.length(),a,e)}formatAt(a,e,s,l){a===0&&e===this.length()?this.format(s,l):super.formatAt(a,e,s,l)}formats(){return this.statics.formats(this.domNode,this.scroll)}}const Rt=cx,xx={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},ux=100,xs=class extends ta{constructor(a,e){super(null,e),this.registry=a,this.scroll=this,this.build(),this.observer=new MutationObserver(s=>{this.update(s)}),this.observer.observe(this.domNode,xx),this.attach()}create(a,e){return this.registry.create(this,a,e)}find(a,e=!1){const s=this.registry.find(a,e);return s?s.scroll===this?s:e?this.find(s.scroll.domNode.parentNode,!0):null:null}query(a,e=Le.ANY){return this.registry.query(a,e)}register(...a){return this.registry.register(...a)}build(){this.scroll!=null&&super.build()}detach(){super.detach(),this.observer.disconnect()}deleteAt(a,e){this.update(),a===0&&e===this.length()?this.children.forEach(s=>{s.remove()}):super.deleteAt(a,e)}formatAt(a,e,s,l){this.update(),super.formatAt(a,e,s,l)}insertAt(a,e,s){this.update(),super.insertAt(a,e,s)}optimize(a=[],e={}){super.optimize(e);const s=e.mutationsMap||new WeakMap;let l=Array.from(this.observer.takeRecords());for(;l.length>0;)a.push(l.pop());const o=(c,u=!0)=>{c==null||c===this||c.domNode.parentNode!=null&&(s.has(c.domNode)||s.set(c.domNode,[]),u&&o(c.parent))},r=c=>{s.has(c.domNode)&&(c instanceof ta&&c.children.forEach(r),s.delete(c.domNode),c.optimize(e))};let i=a;for(let c=0;i.length>0;c+=1){if(c>=ux)throw new Error("[Parchment] Maximum optimize iterations reached");for(i.forEach(u=>{const g=this.find(u.target,!0);g!=null&&(g.domNode===u.target&&(u.type==="childList"?(o(this.find(u.previousSibling,!1)),Array.from(u.addedNodes).forEach(p=>{const f=this.find(p,!1);o(f,!1),f instanceof ta&&f.children.forEach(b=>{o(b,!1)})})):u.type==="attributes"&&o(g.prev)),o(g))}),this.children.forEach(r),i=Array.from(this.observer.takeRecords()),l=i.slice();l.length>0;)a.push(l.pop())}}update(a,e={}){a=a||this.observer.takeRecords();const s=new WeakMap;a.map(l=>{const o=this.find(l.target,!0);return o==null?null:s.has(o.domNode)?(s.get(o.domNode).push(l),null):(s.set(o.domNode,[l]),o)}).forEach(l=>{l!=null&&l!==this&&s.has(l.domNode)&&l.update(s.get(l.domNode)||[],e)}),e.mutationsMap=s,s.has(this.domNode)&&super.update(s.get(this.domNode),e),this.optimize(a,e)}};xs.blotName="scroll",xs.defaultChild=js,xs.allowedChildren=[js,ql],xs.scope=Le.BLOCK_BLOT,xs.tagName="DIV";let dx=xs;const Eo=dx,Xn=class Vr extends Dt{static create(a){return document.createTextNode(a)}static value(a){return a.data}constructor(a,e){super(a,e),this.text=this.statics.value(this.domNode)}deleteAt(a,e){this.domNode.data=this.text=this.text.slice(0,a)+this.text.slice(a+e)}index(a,e){return this.domNode===a?e:-1}insertAt(a,e,s){s==null?(this.text=this.text.slice(0,a)+e+this.text.slice(a),this.domNode.data=this.text):super.insertAt(a,e,s)}length(){return this.text.length}optimize(a){super.optimize(a),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof Vr&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())}position(a,e=!1){return[this.domNode,a]}split(a,e=!1){if(!e){if(a===0)return this;if(a===this.length())return this.next}const s=this.scroll.create(this.domNode.splitText(a));return this.parent.insertBefore(s,this.next||void 0),this.text=this.statics.value(this.domNode),s}update(a,e){a.some(s=>s.type==="characterData"&&s.target===this.domNode)&&(this.text=this.statics.value(this.domNode))}value(){return this.text}};Xn.blotName="text",Xn.scope=Le.INLINE_BLOT;let mx=Xn;const Pl=mx;var px=Object.freeze(Object.defineProperty({__proto__:null,Attributor:ca,AttributorStore:Rl,BlockBlot:js,ClassAttributor:sa,ContainerBlot:ql,EmbedBlot:Rt,InlineBlot:vo,LeafBlot:Dt,ParentBlot:ta,Registry:Es,Scope:Le,ScrollBlot:Eo,StyleAttributor:Ia,TextBlot:Pl},Symbol.toStringTag,{value:"Module"})),Nt={exports:{}},Vt=-1,Tt=1,pt=0;function Ys(n,a,e,s,l){if(n===a)return n?[[pt,n]]:[];if(e!=null){var o=bx(n,a,e);if(o)return o}var r=_o(n,a),i=n.substring(0,r);n=n.substring(r),a=a.substring(r),r=Ul(n,a);var c=n.substring(n.length-r);n=n.substring(0,n.length-r),a=a.substring(0,a.length-r);var u=fx(n,a);return i&&u.unshift([pt,i]),c&&u.push([pt,c]),Co(u,l),s&&vx(u),u}function fx(n,a){var e;if(!n)return[[Tt,a]];if(!a)return[[Vt,n]];var s=n.length>a.length?n:a,l=n.length>a.length?a:n,o=s.indexOf(l);if(o!==-1)return e=[[Tt,s.substring(0,o)],[pt,l],[Tt,s.substring(o+l.length)]],n.length>a.length&&(e[0][0]=e[2][0]=Vt),e;if(l.length===1)return[[Vt,n],[Tt,a]];var r=hx(n,a);if(r){var i=r[0],c=r[1],u=r[2],g=r[3],p=r[4],f=Ys(i,u),b=Ys(c,g);return f.concat([[pt,p]],b)}return gx(n,a)}function gx(n,a){for(var e=n.length,s=a.length,l=Math.ceil((e+s)/2),o=l,r=2*l,i=new Array(r),c=new Array(r),u=0;u<r;u++)i[u]=-1,c[u]=-1;i[o+1]=0,c[o+1]=0;for(var g=e-s,p=g%2!==0,f=0,b=0,w=0,D=0,v=0;v<l;v++){for(var P=-v+f;P<=v-b;P+=2){var S=o+P,A;P===-v||P!==v&&i[S-1]<i[S+1]?A=i[S+1]:A=i[S-1]+1;for(var d=A-P;A<e&&d<s&&n.charAt(A)===a.charAt(d);)A++,d++;if(i[S]=A,A>e)b+=2;else if(d>s)f+=2;else if(p){var _=o+g-P;if(_>=0&&_<r&&c[_]!==-1){var y=e-c[_];if(A>=y)return Yo(n,a,A,d)}}}for(var E=-v+w;E<=v-D;E+=2){var _=o+E,y;E===-v||E!==v&&c[_-1]<c[_+1]?y=c[_+1]:y=c[_-1]+1;for(var C=y-E;y<e&&C<s&&n.charAt(e-y-1)===a.charAt(s-C-1);)y++,C++;if(c[_]=y,y>e)D+=2;else if(C>s)w+=2;else if(!p){var S=o+g-E;if(S>=0&&S<r&&i[S]!==-1){var A=i[S],d=o+A-S;if(y=e-y,A>=y)return Yo(n,a,A,d)}}}}return[[Vt,n],[Tt,a]]}function Yo(n,a,e,s){var l=n.substring(0,e),o=a.substring(0,s),r=n.substring(e),i=a.substring(s),c=Ys(l,o),u=Ys(r,i);return c.concat(u)}function _o(n,a){if(!n||!a||n.charAt(0)!==a.charAt(0))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(o,l)==a.substring(o,l)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return Rr(n.charCodeAt(l-1))&&l--,l}function Wo(n,a){var e=n.length,s=a.length;if(e==0||s==0)return 0;e>s?n=n.substring(e-s):e<s&&(a=a.substring(0,e));var l=Math.min(e,s);if(n==a)return l;for(var o=0,r=1;;){var i=n.substring(l-r),c=a.indexOf(i);if(c==-1)return o;r+=c,(c==0||n.substring(l-r)==a.substring(0,r))&&(o=r,r++)}}function Ul(n,a){if(!n||!a||n.slice(-1)!==a.slice(-1))return 0;for(var e=0,s=Math.min(n.length,a.length),l=s,o=0;e<l;)n.substring(n.length-l,n.length-o)==a.substring(a.length-l,a.length-o)?(e=l,o=e):s=l,l=Math.floor((s-e)/2+e);return qr(n.charCodeAt(n.length-l))&&l--,l}function hx(n,a){var e=n.length>a.length?n:a,s=n.length>a.length?a:n;if(e.length<4||s.length*2<e.length)return null;function l(b,w,D){for(var v=b.substring(D,D+Math.floor(b.length/4)),P=-1,S="",A,d,_,y;(P=w.indexOf(v,P+1))!==-1;){var E=_o(b.substring(D),w.substring(P)),C=Ul(b.substring(0,D),w.substring(0,P));S.length<C+E&&(S=w.substring(P-C,P)+w.substring(P,P+E),A=b.substring(0,D-C),d=b.substring(D+E),_=w.substring(0,P-C),y=w.substring(P+E))}return S.length*2>=b.length?[A,d,_,y,S]:null}var o=l(e,s,Math.ceil(e.length/4)),r=l(e,s,Math.ceil(e.length/2)),i;if(!o&&!r)return null;r?o?i=o[4].length>r[4].length?o:r:i=r:i=o;var c,u,g,p;n.length>a.length?(c=i[0],u=i[1],g=i[2],p=i[3]):(g=i[0],p=i[1],c=i[2],u=i[3]);var f=i[4];return[c,u,g,p,f]}function vx(n){for(var a=!1,e=[],s=0,l=null,o=0,r=0,i=0,c=0,u=0;o<n.length;)n[o][0]==pt?(e[s++]=o,r=c,i=u,c=0,u=0,l=n[o][1]):(n[o][0]==Tt?c+=n[o][1].length:u+=n[o][1].length,l&&l.length<=Math.max(r,i)&&l.length<=Math.max(c,u)&&(n.splice(e[s-1],0,[Vt,l]),n[e[s-1]+1][0]=Tt,s--,s--,o=s>0?e[s-1]:-1,r=0,i=0,c=0,u=0,l=null,a=!0)),o++;for(a&&Co(n),Cx(n),o=1;o<n.length;){if(n[o-1][0]==Vt&&n[o][0]==Tt){var g=n[o-1][1],p=n[o][1],f=Wo(g,p),b=Wo(p,g);f>=b?(f>=g.length/2||f>=p.length/2)&&(n.splice(o,0,[pt,p.substring(0,f)]),n[o-1][1]=g.substring(0,g.length-f),n[o+1][1]=p.substring(f),o++):(b>=g.length/2||b>=p.length/2)&&(n.splice(o,0,[pt,g.substring(0,b)]),n[o-1][0]=Tt,n[o-1][1]=p.substring(0,p.length-b),n[o+1][0]=Vt,n[o+1][1]=g.substring(b),o++),o++}o++}}var Ho=/[^a-zA-Z0-9]/,Zo=/\s/,Go=/[\r\n]/,Ex=/\n\r?\n$/,_x=/^\r?\n\r?\n/;function Cx(n){function a(b,w){if(!b||!w)return 6;var D=b.charAt(b.length-1),v=w.charAt(0),P=D.match(Ho),S=v.match(Ho),A=P&&D.match(Zo),d=S&&v.match(Zo),_=A&&D.match(Go),y=d&&v.match(Go),E=_&&b.match(Ex),C=y&&w.match(_x);return E||C?5:_||y?4:P&&!A&&d?3:A||d?2:P||S?1:0}for(var e=1;e<n.length-1;){if(n[e-1][0]==pt&&n[e+1][0]==pt){var s=n[e-1][1],l=n[e][1],o=n[e+1][1],r=Ul(s,l);if(r){var i=l.substring(l.length-r);s=s.substring(0,s.length-r),l=i+l.substring(0,l.length-r),o=i+o}for(var c=s,u=l,g=o,p=a(s,l)+a(l,o);l.charAt(0)===o.charAt(0);){s+=l.charAt(0),l=l.substring(1)+o.charAt(0),o=o.substring(1);var f=a(s,l)+a(l,o);f>=p&&(p=f,c=s,u=l,g=o)}n[e-1][1]!=c&&(c?n[e-1][1]=c:(n.splice(e-1,1),e--),n[e][1]=u,g?n[e+1][1]=g:(n.splice(e+1,1),e--))}e++}}function Co(n,a){n.push([pt,""]);for(var e=0,s=0,l=0,o="",r="",i;e<n.length;){if(e<n.length-1&&!n[e][1]){n.splice(e,1);continue}switch(n[e][0]){case Tt:l++,r+=n[e][1],e++;break;case Vt:s++,o+=n[e][1],e++;break;case pt:var c=e-l-s-1;if(a){if(c>=0&&zr(n[c][1])){var u=n[c][1].slice(-1);if(n[c][1]=n[c][1].slice(0,-1),o=u+o,r=u+r,!n[c][1]){n.splice(c,1),e--;var g=c-1;n[g]&&n[g][0]===Tt&&(l++,r=n[g][1]+r,g--),n[g]&&n[g][0]===Vt&&(s++,o=n[g][1]+o,g--),c=g}}if(Ur(n[e][1])){var u=n[e][1].charAt(0);n[e][1]=n[e][1].slice(1),o+=u,r+=u}}if(e<n.length-1&&!n[e][1]){n.splice(e,1);break}if(o.length>0||r.length>0){o.length>0&&r.length>0&&(i=_o(r,o),i!==0&&(c>=0?n[c][1]+=r.substring(0,i):(n.splice(0,0,[pt,r.substring(0,i)]),e++),r=r.substring(i),o=o.substring(i)),i=Ul(r,o),i!==0&&(n[e][1]=r.substring(r.length-i)+n[e][1],r=r.substring(0,r.length-i),o=o.substring(0,o.length-i)));var p=l+s;o.length===0&&r.length===0?(n.splice(e-p,p),e=e-p):o.length===0?(n.splice(e-p,p,[Tt,r]),e=e-p+1):r.length===0?(n.splice(e-p,p,[Vt,o]),e=e-p+1):(n.splice(e-p,p,[Vt,o],[Tt,r]),e=e-p+2)}e!==0&&n[e-1][0]===pt?(n[e-1][1]+=n[e][1],n.splice(e,1)):e++,l=0,s=0,o="",r="";break}}n[n.length-1][1]===""&&n.pop();var f=!1;for(e=1;e<n.length-1;)n[e-1][0]===pt&&n[e+1][0]===pt&&(n[e][1].substring(n[e][1].length-n[e-1][1].length)===n[e-1][1]?(n[e][1]=n[e-1][1]+n[e][1].substring(0,n[e][1].length-n[e-1][1].length),n[e+1][1]=n[e-1][1]+n[e+1][1],n.splice(e-1,1),f=!0):n[e][1].substring(0,n[e+1][1].length)==n[e+1][1]&&(n[e-1][1]+=n[e+1][1],n[e][1]=n[e][1].substring(n[e+1][1].length)+n[e+1][1],n.splice(e+1,1),f=!0)),e++;f&&Co(n,a)}function Rr(n){return n>=55296&&n<=56319}function qr(n){return n>=56320&&n<=57343}function Ur(n){return qr(n.charCodeAt(0))}function zr(n){return Rr(n.charCodeAt(n.length-1))}function yx(n){for(var a=[],e=0;e<n.length;e++)n[e][1].length>0&&a.push(n[e]);return a}function Nn(n,a,e,s){return zr(n)||Ur(s)?null:yx([[pt,n],[Vt,a],[Tt,e],[pt,s]])}function bx(n,a,e){var s=typeof e=="number"?{index:e,length:0}:e.oldRange,l=typeof e=="number"?null:e.newRange,o=n.length,r=a.length;if(s.length===0&&(l===null||l.length===0)){var i=s.index,c=n.slice(0,i),u=n.slice(i),g=l?l.index:null;e:{var p=i+r-o;if(g!==null&&g!==p||p<0||p>r)break e;var f=a.slice(0,p),b=a.slice(p);if(b!==u)break e;var w=Math.min(i,p),D=c.slice(0,w),v=f.slice(0,w);if(D!==v)break e;var P=c.slice(w),S=f.slice(w);return Nn(D,P,S,u)}e:{if(g!==null&&g!==i)break e;var A=i,f=a.slice(0,A),b=a.slice(A);if(f!==c)break e;var d=Math.min(o-A,r-A),_=u.slice(u.length-d),y=b.slice(b.length-d);if(_!==y)break e;var P=u.slice(0,u.length-d),S=b.slice(0,b.length-d);return Nn(c,P,S,_)}}if(s.length>0&&l&&l.length===0){e:{var D=n.slice(0,s.index),_=n.slice(s.index+s.length),w=D.length,d=_.length;if(r<w+d)break e;var v=a.slice(0,w),y=a.slice(r-d);if(D!==v||_!==y)break e;var P=n.slice(w,o-d),S=a.slice(w,r-d);return Nn(D,P,S,_)}}return null}function zl(n,a,e,s){return Ys(n,a,e,s,!0)}zl.INSERT=Tt;zl.DELETE=Vt;zl.EQUAL=pt;var Bx=zl,Tl={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=9007199254740991,o="[object Arguments]",r="[object Array]",i="[object Boolean]",c="[object Date]",u="[object Error]",g="[object Function]",p="[object GeneratorFunction]",f="[object Map]",b="[object Number]",w="[object Object]",D="[object Promise]",v="[object RegExp]",P="[object Set]",S="[object String]",A="[object Symbol]",d="[object WeakMap]",_="[object ArrayBuffer]",y="[object DataView]",E="[object Float32Array]",C="[object Float64Array]",L="[object Int8Array]",V="[object Int16Array]",T="[object Int32Array]",q="[object Uint8Array]",H="[object Uint8ClampedArray]",z="[object Uint16Array]",X="[object Uint32Array]",K=/[\\^$.*+?()[\]{}|]/g,te=/\w*$/,le=/^\[object .+?Constructor\]$/,ee=/^(?:0|[1-9]\d*)$/,xe={};xe[o]=xe[r]=xe[_]=xe[y]=xe[i]=xe[c]=xe[E]=xe[C]=xe[L]=xe[V]=xe[T]=xe[f]=xe[b]=xe[w]=xe[v]=xe[P]=xe[S]=xe[A]=xe[q]=xe[H]=xe[z]=xe[X]=!0,xe[u]=xe[g]=xe[d]=!1;var se=typeof ha=="object"&&ha&&ha.Object===Object&&ha,ge=typeof self=="object"&&self&&self.Object===Object&&self,G=se||ge||Function("return this")(),ie=a&&!a.nodeType&&a,ae=ie&&!0&&n&&!n.nodeType&&n,O=ae&&ae.exports===ie;function W(h,R){return h.set(R[0],R[1]),h}function J(h,R){return h.add(R),h}function re(h,R){for(var Z=-1,de=h?h.length:0;++Z<de&&R(h[Z],Z,h)!==!1;);return h}function me(h,R){for(var Z=-1,de=R.length,qe=h.length;++Z<de;)h[qe+Z]=R[Z];return h}function oe(h,R,Z,de){var qe=-1,Ie=h?h.length:0;for(de&&Ie&&(Z=h[++qe]);++qe<Ie;)Z=R(Z,h[qe],qe,h);return Z}function De(h,R){for(var Z=-1,de=Array(h);++Z<h;)de[Z]=R(Z);return de}function _e(h,R){return h?.[R]}function Me(h){var R=!1;if(h!=null&&typeof h.toString!="function")try{R=!!(h+"")}catch{}return R}function Ee(h){var R=-1,Z=Array(h.size);return h.forEach(function(de,qe){Z[++R]=[qe,de]}),Z}function be(h,R){return function(Z){return h(R(Z))}}function Pe(h){var R=-1,Z=Array(h.size);return h.forEach(function(de){Z[++R]=de}),Z}var Ve=Array.prototype,Se=Function.prototype,Be=Object.prototype,pe=G["__core-js_shared__"],ce=function(){var h=/[^.]+$/.exec(pe&&pe.keys&&pe.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),je=Se.toString,he=Be.hasOwnProperty,ke=Be.toString,Oe=RegExp("^"+je.call(he).replace(K,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ke=O?G.Buffer:void 0,Re=G.Symbol,$a=G.Uint8Array,ut=be(Object.getPrototypeOf,Object),tl=Object.create,al=Be.propertyIsEnumerable,Gl=Ve.splice,As=Object.getOwnPropertySymbols,Qa=Ke?Ke.isBuffer:void 0,sl=be(Object.keys,Object),Ka=Jt(G,"DataView"),Na=Jt(G,"Map"),Gt=Jt(G,"Promise"),es=Jt(G,"Set"),Fs=Jt(G,"WeakMap"),Oa=Jt(Object,"create"),Ds=wt(Ka),Ma=wt(Na),ks=wt(Gt),ws=wt(es),Ps=wt(Fs),ba=Re?Re.prototype:void 0,ll=ba?ba.valueOf:void 0;function ua(h){var R=-1,Z=h?h.length:0;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function Jl(){this.__data__=Oa?Oa(null):{}}function Xl(h){return this.has(h)&&delete this.__data__[h]}function Ql(h){var R=this.__data__;if(Oa){var Z=R[h];return Z===s?void 0:Z}return he.call(R,h)?R[h]:void 0}function nl(h){var R=this.__data__;return Oa?R[h]!==void 0:he.call(R,h)}function Ts(h,R){var Z=this.__data__;return Z[h]=Oa&&R===void 0?s:R,this}ua.prototype.clear=Jl,ua.prototype.delete=Xl,ua.prototype.get=Ql,ua.prototype.has=nl,ua.prototype.set=Ts;function Et(h){var R=-1,Z=h?h.length:0;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function Kl(){this.__data__=[]}function en(h){var R=this.__data__,Z=as(R,h);if(Z<0)return!1;var de=R.length-1;return Z==de?R.pop():Gl.call(R,Z,1),!0}function tn(h){var R=this.__data__,Z=as(R,h);return Z<0?void 0:R[Z][1]}function an(h){return as(this.__data__,h)>-1}function sn(h,R){var Z=this.__data__,de=as(Z,h);return de<0?Z.push([h,R]):Z[de][1]=R,this}Et.prototype.clear=Kl,Et.prototype.delete=en,Et.prototype.get=tn,Et.prototype.has=an,Et.prototype.set=sn;function Bt(h){var R=-1,Z=h?h.length:0;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function ln(){this.__data__={hash:new ua,map:new(Na||Et),string:new ua}}function nn(h){return Ra(this,h).delete(h)}function on(h){return Ra(this,h).get(h)}function rn(h){return Ra(this,h).has(h)}function cn(h,R){return Ra(this,h).set(h,R),this}Bt.prototype.clear=ln,Bt.prototype.delete=nn,Bt.prototype.get=on,Bt.prototype.has=rn,Bt.prototype.set=cn;function St(h){this.__data__=new Et(h)}function xn(){this.__data__=new Et}function un(h){return this.__data__.delete(h)}function dn(h){return this.__data__.get(h)}function mn(h){return this.__data__.has(h)}function pn(h,R){var Z=this.__data__;if(Z instanceof Et){var de=Z.__data__;if(!Na||de.length<e-1)return de.push([h,R]),this;Z=this.__data__=new Bt(de)}return Z.set(h,R),this}St.prototype.clear=xn,St.prototype.delete=un,St.prototype.get=dn,St.prototype.has=mn,St.prototype.set=pn;function ts(h,R){var Z=$s(h)||ls(h)?De(h.length,String):[],de=Z.length,qe=!!de;for(var Ie in h)(R||he.call(h,Ie))&&!(qe&&(Ie=="length"||kn(Ie,de)))&&Z.push(Ie);return Z}function ol(h,R,Z){var de=h[R];(!(he.call(h,R)&&ul(de,Z))||Z===void 0&&!(R in h))&&(h[R]=Z)}function as(h,R){for(var Z=h.length;Z--;)if(ul(h[Z][0],R))return Z;return-1}function na(h,R){return h&&Is(R,Os(R),h)}function Ls(h,R,Z,de,qe,Ie,He){var Xe;if(de&&(Xe=Ie?de(h,qe,Ie,He):de(h)),Xe!==void 0)return Xe;if(!ra(h))return h;var dt=$s(h);if(dt){if(Xe=Fn(h),!R)return bn(h,Xe)}else{var et=ma(h),At=et==g||et==p;if(dl(h))return ss(h,R);if(et==w||et==o||At&&!Ie){if(Me(h))return Ie?h:{};if(Xe=oa(At?{}:h),!R)return Bn(h,na(Xe,h))}else{if(!xe[et])return Ie?h:{};Xe=Dn(h,et,Ls,R)}}He||(He=new St);var It=He.get(h);if(It)return It;if(He.set(h,Xe),!dt)var mt=Z?An(h):Os(h);return re(mt||h,function(Ft,_t){mt&&(_t=Ft,Ft=h[_t]),ol(Xe,_t,Ls(Ft,R,Z,de,_t,h,He))}),Xe}function fn(h){return ra(h)?tl(h):{}}function gn(h,R,Z){var de=R(h);return $s(h)?de:me(de,Z(h))}function hn(h){return ke.call(h)}function vn(h){if(!ra(h)||Pn(h))return!1;var R=Ns(h)||Me(h)?Oe:le;return R.test(wt(h))}function En(h){if(!cl(h))return sl(h);var R=[];for(var Z in Object(h))he.call(h,Z)&&Z!="constructor"&&R.push(Z);return R}function ss(h,R){if(R)return h.slice();var Z=new h.constructor(h.length);return h.copy(Z),Z}function Ss(h){var R=new h.constructor(h.byteLength);return new $a(R).set(new $a(h)),R}function Va(h,R){var Z=R?Ss(h.buffer):h.buffer;return new h.constructor(Z,h.byteOffset,h.byteLength)}function rl(h,R,Z){var de=R?Z(Ee(h),!0):Ee(h);return oe(de,W,new h.constructor)}function il(h){var R=new h.constructor(h.source,te.exec(h));return R.lastIndex=h.lastIndex,R}function _n(h,R,Z){var de=R?Z(Pe(h),!0):Pe(h);return oe(de,J,new h.constructor)}function Cn(h){return ll?Object(ll.call(h)):{}}function yn(h,R){var Z=R?Ss(h.buffer):h.buffer;return new h.constructor(Z,h.byteOffset,h.length)}function bn(h,R){var Z=-1,de=h.length;for(R||(R=Array(de));++Z<de;)R[Z]=h[Z];return R}function Is(h,R,Z,de){Z||(Z={});for(var qe=-1,Ie=R.length;++qe<Ie;){var He=R[qe],Xe=de?de(Z[He],h[He],He,Z,h):void 0;ol(Z,He,Xe===void 0?h[He]:Xe)}return Z}function Bn(h,R){return Is(h,da(h),R)}function An(h){return gn(h,Os,da)}function Ra(h,R){var Z=h.__data__;return wn(R)?Z[typeof R=="string"?"string":"hash"]:Z.map}function Jt(h,R){var Z=_e(h,R);return vn(Z)?Z:void 0}var da=As?be(As,Object):Ln,ma=hn;(Ka&&ma(new Ka(new ArrayBuffer(1)))!=y||Na&&ma(new Na)!=f||Gt&&ma(Gt.resolve())!=D||es&&ma(new es)!=P||Fs&&ma(new Fs)!=d)&&(ma=function(h){var R=ke.call(h),Z=R==w?h.constructor:void 0,de=Z?wt(Z):void 0;if(de)switch(de){case Ds:return y;case Ma:return f;case ks:return D;case ws:return P;case Ps:return d}return R});function Fn(h){var R=h.length,Z=h.constructor(R);return R&&typeof h[0]=="string"&&he.call(h,"index")&&(Z.index=h.index,Z.input=h.input),Z}function oa(h){return typeof h.constructor=="function"&&!cl(h)?fn(ut(h)):{}}function Dn(h,R,Z,de){var qe=h.constructor;switch(R){case _:return Ss(h);case i:case c:return new qe(+h);case y:return Va(h,de);case E:case C:case L:case V:case T:case q:case H:case z:case X:return yn(h,de);case f:return rl(h,de,Z);case b:case S:return new qe(h);case v:return il(h);case P:return _n(h,de,Z);case A:return Cn(h)}}function kn(h,R){return R=R??l,!!R&&(typeof h=="number"||ee.test(h))&&h>-1&&h%1==0&&h<R}function wn(h){var R=typeof h;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?h!=="__proto__":h===null}function Pn(h){return!!ce&&ce in h}function cl(h){var R=h&&h.constructor,Z=typeof R=="function"&&R.prototype||Be;return h===Z}function wt(h){if(h!=null){try{return je.call(h)}catch{}try{return h+""}catch{}}return""}function xl(h){return Ls(h,!0,!0)}function ul(h,R){return h===R||h!==h&&R!==R}function ls(h){return Tn(h)&&he.call(h,"callee")&&(!al.call(h,"callee")||ke.call(h)==o)}var $s=Array.isArray;function ns(h){return h!=null&&ml(h.length)&&!Ns(h)}function Tn(h){return pl(h)&&ns(h)}var dl=Qa||Sn;function Ns(h){var R=ra(h)?ke.call(h):"";return R==g||R==p}function ml(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=l}function ra(h){var R=typeof h;return!!h&&(R=="object"||R=="function")}function pl(h){return!!h&&typeof h=="object"}function Os(h){return ns(h)?ts(h):En(h)}function Ln(){return[]}function Sn(){return!1}n.exports=xl})(Tl,Tl.exports);var Ll={exports:{}};(function(n,a){var e=200,s="__lodash_hash_undefined__",l=1,o=2,r=9007199254740991,i="[object Arguments]",c="[object Array]",u="[object AsyncFunction]",g="[object Boolean]",p="[object Date]",f="[object Error]",b="[object Function]",w="[object GeneratorFunction]",D="[object Map]",v="[object Number]",P="[object Null]",S="[object Object]",A="[object Promise]",d="[object Proxy]",_="[object RegExp]",y="[object Set]",E="[object String]",C="[object Symbol]",L="[object Undefined]",V="[object WeakMap]",T="[object ArrayBuffer]",q="[object DataView]",H="[object Float32Array]",z="[object Float64Array]",X="[object Int8Array]",K="[object Int16Array]",te="[object Int32Array]",le="[object Uint8Array]",ee="[object Uint8ClampedArray]",xe="[object Uint16Array]",se="[object Uint32Array]",ge=/[\\^$.*+?()[\]{}|]/g,G=/^\[object .+?Constructor\]$/,ie=/^(?:0|[1-9]\d*)$/,ae={};ae[H]=ae[z]=ae[X]=ae[K]=ae[te]=ae[le]=ae[ee]=ae[xe]=ae[se]=!0,ae[i]=ae[c]=ae[T]=ae[g]=ae[q]=ae[p]=ae[f]=ae[b]=ae[D]=ae[v]=ae[S]=ae[_]=ae[y]=ae[E]=ae[V]=!1;var O=typeof ha=="object"&&ha&&ha.Object===Object&&ha,W=typeof self=="object"&&self&&self.Object===Object&&self,J=O||W||Function("return this")(),re=a&&!a.nodeType&&a,me=re&&!0&&n&&!n.nodeType&&n,oe=me&&me.exports===re,De=oe&&O.process,_e=function(){try{return De&&De.binding&&De.binding("util")}catch{}}(),Me=_e&&_e.isTypedArray;function Ee(h,R){for(var Z=-1,de=h==null?0:h.length,qe=0,Ie=[];++Z<de;){var He=h[Z];R(He,Z,h)&&(Ie[qe++]=He)}return Ie}function be(h,R){for(var Z=-1,de=R.length,qe=h.length;++Z<de;)h[qe+Z]=R[Z];return h}function Pe(h,R){for(var Z=-1,de=h==null?0:h.length;++Z<de;)if(R(h[Z],Z,h))return!0;return!1}function Ve(h,R){for(var Z=-1,de=Array(h);++Z<h;)de[Z]=R(Z);return de}function Se(h){return function(R){return h(R)}}function Be(h,R){return h.has(R)}function pe(h,R){return h?.[R]}function ce(h){var R=-1,Z=Array(h.size);return h.forEach(function(de,qe){Z[++R]=[qe,de]}),Z}function je(h,R){return function(Z){return h(R(Z))}}function he(h){var R=-1,Z=Array(h.size);return h.forEach(function(de){Z[++R]=de}),Z}var ke=Array.prototype,Oe=Function.prototype,Ke=Object.prototype,Re=J["__core-js_shared__"],$a=Oe.toString,ut=Ke.hasOwnProperty,tl=function(){var h=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}(),al=Ke.toString,Gl=RegExp("^"+$a.call(ut).replace(ge,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),As=oe?J.Buffer:void 0,Qa=J.Symbol,sl=J.Uint8Array,Ka=Ke.propertyIsEnumerable,Na=ke.splice,Gt=Qa?Qa.toStringTag:void 0,es=Object.getOwnPropertySymbols,Fs=As?As.isBuffer:void 0,Oa=je(Object.keys,Object),Ds=da(J,"DataView"),Ma=da(J,"Map"),ks=da(J,"Promise"),ws=da(J,"Set"),Ps=da(J,"WeakMap"),ba=da(Object,"create"),ll=wt(Ds),ua=wt(Ma),Jl=wt(ks),Xl=wt(ws),Ql=wt(Ps),nl=Qa?Qa.prototype:void 0,Ts=nl?nl.valueOf:void 0;function Et(h){var R=-1,Z=h==null?0:h.length;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function Kl(){this.__data__=ba?ba(null):{},this.size=0}function en(h){var R=this.has(h)&&delete this.__data__[h];return this.size-=R?1:0,R}function tn(h){var R=this.__data__;if(ba){var Z=R[h];return Z===s?void 0:Z}return ut.call(R,h)?R[h]:void 0}function an(h){var R=this.__data__;return ba?R[h]!==void 0:ut.call(R,h)}function sn(h,R){var Z=this.__data__;return this.size+=this.has(h)?0:1,Z[h]=ba&&R===void 0?s:R,this}Et.prototype.clear=Kl,Et.prototype.delete=en,Et.prototype.get=tn,Et.prototype.has=an,Et.prototype.set=sn;function Bt(h){var R=-1,Z=h==null?0:h.length;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function ln(){this.__data__=[],this.size=0}function nn(h){var R=this.__data__,Z=ss(R,h);if(Z<0)return!1;var de=R.length-1;return Z==de?R.pop():Na.call(R,Z,1),--this.size,!0}function on(h){var R=this.__data__,Z=ss(R,h);return Z<0?void 0:R[Z][1]}function rn(h){return ss(this.__data__,h)>-1}function cn(h,R){var Z=this.__data__,de=ss(Z,h);return de<0?(++this.size,Z.push([h,R])):Z[de][1]=R,this}Bt.prototype.clear=ln,Bt.prototype.delete=nn,Bt.prototype.get=on,Bt.prototype.has=rn,Bt.prototype.set=cn;function St(h){var R=-1,Z=h==null?0:h.length;for(this.clear();++R<Z;){var de=h[R];this.set(de[0],de[1])}}function xn(){this.size=0,this.__data__={hash:new Et,map:new(Ma||Bt),string:new Et}}function un(h){var R=Jt(this,h).delete(h);return this.size-=R?1:0,R}function dn(h){return Jt(this,h).get(h)}function mn(h){return Jt(this,h).has(h)}function pn(h,R){var Z=Jt(this,h),de=Z.size;return Z.set(h,R),this.size+=Z.size==de?0:1,this}St.prototype.clear=xn,St.prototype.delete=un,St.prototype.get=dn,St.prototype.has=mn,St.prototype.set=pn;function ts(h){var R=-1,Z=h==null?0:h.length;for(this.__data__=new St;++R<Z;)this.add(h[R])}function ol(h){return this.__data__.set(h,s),this}function as(h){return this.__data__.has(h)}ts.prototype.add=ts.prototype.push=ol,ts.prototype.has=as;function na(h){var R=this.__data__=new Bt(h);this.size=R.size}function Ls(){this.__data__=new Bt,this.size=0}function fn(h){var R=this.__data__,Z=R.delete(h);return this.size=R.size,Z}function gn(h){return this.__data__.get(h)}function hn(h){return this.__data__.has(h)}function vn(h,R){var Z=this.__data__;if(Z instanceof Bt){var de=Z.__data__;if(!Ma||de.length<e-1)return de.push([h,R]),this.size=++Z.size,this;Z=this.__data__=new St(de)}return Z.set(h,R),this.size=Z.size,this}na.prototype.clear=Ls,na.prototype.delete=fn,na.prototype.get=gn,na.prototype.has=hn,na.prototype.set=vn;function En(h,R){var Z=ls(h),de=!Z&&ul(h),qe=!Z&&!de&&ns(h),Ie=!Z&&!de&&!qe&&pl(h),He=Z||de||qe||Ie,Xe=He?Ve(h.length,String):[],dt=Xe.length;for(var et in h)(R||ut.call(h,et))&&!(He&&(et=="length"||qe&&(et=="offset"||et=="parent")||Ie&&(et=="buffer"||et=="byteLength"||et=="byteOffset")||Dn(et,dt)))&&Xe.push(et);return Xe}function ss(h,R){for(var Z=h.length;Z--;)if(xl(h[Z][0],R))return Z;return-1}function Ss(h,R,Z){var de=R(h);return ls(h)?de:be(de,Z(h))}function Va(h){return h==null?h===void 0?L:P:Gt&&Gt in Object(h)?ma(h):cl(h)}function rl(h){return ra(h)&&Va(h)==i}function il(h,R,Z,de,qe){return h===R?!0:h==null||R==null||!ra(h)&&!ra(R)?h!==h&&R!==R:_n(h,R,Z,de,il,qe)}function _n(h,R,Z,de,qe,Ie){var He=ls(h),Xe=ls(R),dt=He?c:oa(h),et=Xe?c:oa(R);dt=dt==i?S:dt,et=et==i?S:et;var At=dt==S,It=et==S,mt=dt==et;if(mt&&ns(h)){if(!ns(R))return!1;He=!0,At=!1}if(mt&&!At)return Ie||(Ie=new na),He||pl(h)?Is(h,R,Z,de,qe,Ie):Bn(h,R,dt,Z,de,qe,Ie);if(!(Z&l)){var Ft=At&&ut.call(h,"__wrapped__"),_t=It&&ut.call(R,"__wrapped__");if(Ft||_t){var Ba=Ft?h.value():h,pa=_t?R.value():R;return Ie||(Ie=new na),qe(Ba,pa,Z,de,Ie)}}return mt?(Ie||(Ie=new na),An(h,R,Z,de,qe,Ie)):!1}function Cn(h){if(!ml(h)||wn(h))return!1;var R=dl(h)?Gl:G;return R.test(wt(h))}function yn(h){return ra(h)&&Ns(h.length)&&!!ae[Va(h)]}function bn(h){if(!Pn(h))return Oa(h);var R=[];for(var Z in Object(h))ut.call(h,Z)&&Z!="constructor"&&R.push(Z);return R}function Is(h,R,Z,de,qe,Ie){var He=Z&l,Xe=h.length,dt=R.length;if(Xe!=dt&&!(He&&dt>Xe))return!1;var et=Ie.get(h);if(et&&Ie.get(R))return et==R;var At=-1,It=!0,mt=Z&o?new ts:void 0;for(Ie.set(h,R),Ie.set(R,h);++At<Xe;){var Ft=h[At],_t=R[At];if(de)var Ba=He?de(_t,Ft,At,R,h,Ie):de(Ft,_t,At,h,R,Ie);if(Ba!==void 0){if(Ba)continue;It=!1;break}if(mt){if(!Pe(R,function(pa,qa){if(!Be(mt,qa)&&(Ft===pa||qe(Ft,pa,Z,de,Ie)))return mt.push(qa)})){It=!1;break}}else if(!(Ft===_t||qe(Ft,_t,Z,de,Ie))){It=!1;break}}return Ie.delete(h),Ie.delete(R),It}function Bn(h,R,Z,de,qe,Ie,He){switch(Z){case q:if(h.byteLength!=R.byteLength||h.byteOffset!=R.byteOffset)return!1;h=h.buffer,R=R.buffer;case T:return!(h.byteLength!=R.byteLength||!Ie(new sl(h),new sl(R)));case g:case p:case v:return xl(+h,+R);case f:return h.name==R.name&&h.message==R.message;case _:case E:return h==R+"";case D:var Xe=ce;case y:var dt=de&l;if(Xe||(Xe=he),h.size!=R.size&&!dt)return!1;var et=He.get(h);if(et)return et==R;de|=o,He.set(h,R);var At=Is(Xe(h),Xe(R),de,qe,Ie,He);return He.delete(h),At;case C:if(Ts)return Ts.call(h)==Ts.call(R)}return!1}function An(h,R,Z,de,qe,Ie){var He=Z&l,Xe=Ra(h),dt=Xe.length,et=Ra(R),At=et.length;if(dt!=At&&!He)return!1;for(var It=dt;It--;){var mt=Xe[It];if(!(He?mt in R:ut.call(R,mt)))return!1}var Ft=Ie.get(h);if(Ft&&Ie.get(R))return Ft==R;var _t=!0;Ie.set(h,R),Ie.set(R,h);for(var Ba=He;++It<dt;){mt=Xe[It];var pa=h[mt],qa=R[mt];if(de)var Oo=He?de(qa,pa,mt,R,h,Ie):de(pa,qa,mt,h,R,Ie);if(!(Oo===void 0?pa===qa||qe(pa,qa,Z,de,Ie):Oo)){_t=!1;break}Ba||(Ba=mt=="constructor")}if(_t&&!Ba){var fl=h.constructor,gl=R.constructor;fl!=gl&&"constructor"in h&&"constructor"in R&&!(typeof fl=="function"&&fl instanceof fl&&typeof gl=="function"&&gl instanceof gl)&&(_t=!1)}return Ie.delete(h),Ie.delete(R),_t}function Ra(h){return Ss(h,Os,Fn)}function Jt(h,R){var Z=h.__data__;return kn(R)?Z[typeof R=="string"?"string":"hash"]:Z.map}function da(h,R){var Z=pe(h,R);return Cn(Z)?Z:void 0}function ma(h){var R=ut.call(h,Gt),Z=h[Gt];try{h[Gt]=void 0;var de=!0}catch{}var qe=al.call(h);return de&&(R?h[Gt]=Z:delete h[Gt]),qe}var Fn=es?function(h){return h==null?[]:(h=Object(h),Ee(es(h),function(R){return Ka.call(h,R)}))}:Ln,oa=Va;(Ds&&oa(new Ds(new ArrayBuffer(1)))!=q||Ma&&oa(new Ma)!=D||ks&&oa(ks.resolve())!=A||ws&&oa(new ws)!=y||Ps&&oa(new Ps)!=V)&&(oa=function(h){var R=Va(h),Z=R==S?h.constructor:void 0,de=Z?wt(Z):"";if(de)switch(de){case ll:return q;case ua:return D;case Jl:return A;case Xl:return y;case Ql:return V}return R});function Dn(h,R){return R=R??r,!!R&&(typeof h=="number"||ie.test(h))&&h>-1&&h%1==0&&h<R}function kn(h){var R=typeof h;return R=="string"||R=="number"||R=="symbol"||R=="boolean"?h!=="__proto__":h===null}function wn(h){return!!tl&&tl in h}function Pn(h){var R=h&&h.constructor,Z=typeof R=="function"&&R.prototype||Ke;return h===Z}function cl(h){return al.call(h)}function wt(h){if(h!=null){try{return $a.call(h)}catch{}try{return h+""}catch{}}return""}function xl(h,R){return h===R||h!==h&&R!==R}var ul=rl(function(){return arguments}())?rl:function(h){return ra(h)&&ut.call(h,"callee")&&!Ka.call(h,"callee")},ls=Array.isArray;function $s(h){return h!=null&&Ns(h.length)&&!dl(h)}var ns=Fs||Sn;function Tn(h,R){return il(h,R)}function dl(h){if(!ml(h))return!1;var R=Va(h);return R==b||R==w||R==u||R==d}function Ns(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=r}function ml(h){var R=typeof h;return h!=null&&(R=="object"||R=="function")}function ra(h){return h!=null&&typeof h=="object"}var pl=Me?Se(Me):yn;function Os(h){return $s(h)?En(h):bn(h)}function Ln(){return[]}function Sn(){return!1}n.exports=Tn})(Ll,Ll.exports);var yo={};Object.defineProperty(yo,"__esModule",{value:!0});const Ax=Tl.exports,Fx=Ll.exports;var Qn;(function(n){function a(o={},r={},i=!1){typeof o!="object"&&(o={}),typeof r!="object"&&(r={});let c=Ax(r);i||(c=Object.keys(c).reduce((u,g)=>(c[g]!=null&&(u[g]=c[g]),u),{}));for(const u in o)o[u]!==void 0&&r[u]===void 0&&(c[u]=o[u]);return Object.keys(c).length>0?c:void 0}n.compose=a;function e(o={},r={}){typeof o!="object"&&(o={}),typeof r!="object"&&(r={});const i=Object.keys(o).concat(Object.keys(r)).reduce((c,u)=>(Fx(o[u],r[u])||(c[u]=r[u]===void 0?null:r[u]),c),{});return Object.keys(i).length>0?i:void 0}n.diff=e;function s(o={},r={}){o=o||{};const i=Object.keys(r).reduce((c,u)=>(r[u]!==o[u]&&o[u]!==void 0&&(c[u]=r[u]),c),{});return Object.keys(o).reduce((c,u)=>(o[u]!==r[u]&&r[u]===void 0&&(c[u]=null),c),i)}n.invert=s;function l(o,r,i=!1){if(typeof o!="object")return r;if(typeof r!="object")return;if(!i)return r;const c=Object.keys(r).reduce((u,g)=>(o[g]===void 0&&(u[g]=r[g]),u),{});return Object.keys(c).length>0?c:void 0}n.transform=l})(Qn||(Qn={}));yo.default=Qn;var jl={};Object.defineProperty(jl,"__esModule",{value:!0});var Kn;(function(n){function a(e){return typeof e.delete=="number"?e.delete:typeof e.retain=="number"?e.retain:typeof e.retain=="object"&&e.retain!==null?1:typeof e.insert=="string"?e.insert.length:1}n.length=a})(Kn||(Kn={}));jl.default=Kn;var bo={};Object.defineProperty(bo,"__esModule",{value:!0});const Jo=jl;class Dx{constructor(a){this.ops=a,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(a){a||(a=1/0);const e=this.ops[this.index];if(e){const s=this.offset,l=Jo.default.length(e);if(a>=l-s?(a=l-s,this.index+=1,this.offset=0):this.offset+=a,typeof e.delete=="number")return{delete:a};{const o={};return e.attributes&&(o.attributes=e.attributes),typeof e.retain=="number"?o.retain=a:typeof e.retain=="object"&&e.retain!==null?o.retain=e.retain:typeof e.insert=="string"?o.insert=e.insert.substr(s,a):o.insert=e.insert,o}}else return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?Jo.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const a=this.ops[this.index];return a?typeof a.delete=="number"?"delete":typeof a.retain=="number"||typeof a.retain=="object"&&a.retain!==null?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);{const a=this.offset,e=this.index,s=this.next(),l=this.ops.slice(this.index);return this.offset=a,this.index=e,[s].concat(l)}}else return[]}}bo.default=Dx;(function(n,a){Object.defineProperty(a,"__esModule",{value:!0}),a.AttributeMap=a.OpIterator=a.Op=void 0;const e=Bx,s=Tl.exports,l=Ll.exports,o=yo;a.AttributeMap=o.default;const r=jl;a.Op=r.default;const i=bo;a.OpIterator=i.default;const c=String.fromCharCode(0),u=(p,f)=>{if(typeof p!="object"||p===null)throw new Error(`cannot retain a ${typeof p}`);if(typeof f!="object"||f===null)throw new Error(`cannot retain a ${typeof f}`);const b=Object.keys(p)[0];if(!b||b!==Object.keys(f)[0])throw new Error(`embed types not matched: ${b} != ${Object.keys(f)[0]}`);return[b,p[b],f[b]]};class g{constructor(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]}static registerEmbed(f,b){this.handlers[f]=b}static unregisterEmbed(f){delete this.handlers[f]}static getHandler(f){const b=this.handlers[f];if(!b)throw new Error(`no handlers for embed type "${f}"`);return b}insert(f,b){const w={};return typeof f=="string"&&f.length===0?this:(w.insert=f,b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(w.attributes=b),this.push(w))}delete(f){return f<=0?this:this.push({delete:f})}retain(f,b){if(typeof f=="number"&&f<=0)return this;const w={retain:f};return b!=null&&typeof b=="object"&&Object.keys(b).length>0&&(w.attributes=b),this.push(w)}push(f){let b=this.ops.length,w=this.ops[b-1];if(f=s(f),typeof w=="object"){if(typeof f.delete=="number"&&typeof w.delete=="number")return this.ops[b-1]={delete:w.delete+f.delete},this;if(typeof w.delete=="number"&&f.insert!=null&&(b-=1,w=this.ops[b-1],typeof w!="object"))return this.ops.unshift(f),this;if(l(f.attributes,w.attributes)){if(typeof f.insert=="string"&&typeof w.insert=="string")return this.ops[b-1]={insert:w.insert+f.insert},typeof f.attributes=="object"&&(this.ops[b-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof w.retain=="number")return this.ops[b-1]={retain:w.retain+f.retain},typeof f.attributes=="object"&&(this.ops[b-1].attributes=f.attributes),this}}return b===this.ops.length?this.ops.push(f):this.ops.splice(b,0,f),this}chop(){const f=this.ops[this.ops.length-1];return f&&typeof f.retain=="number"&&!f.attributes&&this.ops.pop(),this}filter(f){return this.ops.filter(f)}forEach(f){this.ops.forEach(f)}map(f){return this.ops.map(f)}partition(f){const b=[],w=[];return this.forEach(D=>{(f(D)?b:w).push(D)}),[b,w]}reduce(f,b){return this.ops.reduce(f,b)}changeLength(){return this.reduce((f,b)=>b.insert?f+r.default.length(b):b.delete?f-b.delete:f,0)}length(){return this.reduce((f,b)=>f+r.default.length(b),0)}slice(f=0,b=1/0){const w=[],D=new i.default(this.ops);let v=0;for(;v<b&&D.hasNext();){let P;v<f?P=D.next(f-v):(P=D.next(b-v),w.push(P)),v+=r.default.length(P)}return new g(w)}compose(f){const b=new i.default(this.ops),w=new i.default(f.ops),D=[],v=w.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){let S=v.retain;for(;b.peekType()==="insert"&&b.peekLength()<=S;)S-=b.peekLength(),D.push(b.next());v.retain-S>0&&w.next(v.retain-S)}const P=new g(D);for(;b.hasNext()||w.hasNext();)if(w.peekType()==="insert")P.push(w.next());else if(b.peekType()==="delete")P.push(b.next());else{const S=Math.min(b.peekLength(),w.peekLength()),A=b.next(S),d=w.next(S);if(d.retain){const _={};if(typeof A.retain=="number")_.retain=typeof d.retain=="number"?S:d.retain;else if(typeof d.retain=="number")A.retain==null?_.insert=A.insert:_.retain=A.retain;else{const E=A.retain==null?"insert":"retain",[C,L,V]=u(A[E],d.retain),T=g.getHandler(C);_[E]={[C]:T.compose(L,V,E==="retain")}}const y=o.default.compose(A.attributes,d.attributes,typeof A.retain=="number");if(y&&(_.attributes=y),P.push(_),!w.hasNext()&&l(P.ops[P.ops.length-1],_)){const E=new g(b.rest());return P.concat(E).chop()}}else typeof d.delete=="number"&&(typeof A.retain=="number"||typeof A.retain=="object"&&A.retain!==null)&&P.push(d)}return P.chop()}concat(f){const b=new g(this.ops.slice());return f.ops.length>0&&(b.push(f.ops[0]),b.ops=b.ops.concat(f.ops.slice(1))),b}diff(f,b){if(this.ops===f.ops)return new g;const w=[this,f].map(A=>A.map(d=>{if(d.insert!=null)return typeof d.insert=="string"?d.insert:c;const _=A===f?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")),D=new g,v=e(w[0],w[1],b,!0),P=new i.default(this.ops),S=new i.default(f.ops);return v.forEach(A=>{let d=A[1].length;for(;d>0;){let _=0;switch(A[0]){case e.INSERT:_=Math.min(S.peekLength(),d),D.push(S.next(_));break;case e.DELETE:_=Math.min(d,P.peekLength()),P.next(_),D.delete(_);break;case e.EQUAL:_=Math.min(P.peekLength(),S.peekLength(),d);const y=P.next(_),E=S.next(_);l(y.insert,E.insert)?D.retain(_,o.default.diff(y.attributes,E.attributes)):D.push(E).delete(_);break}d-=_}}),D.chop()}eachLine(f,b=`
`){const w=new i.default(this.ops);let D=new g,v=0;for(;w.hasNext();){if(w.peekType()!=="insert")return;const P=w.peek(),S=r.default.length(P)-w.peekLength(),A=typeof P.insert=="string"?P.insert.indexOf(b,S)-S:-1;if(A<0)D.push(w.next());else if(A>0)D.push(w.next(A));else{if(f(D,w.next(1).attributes||{},v)===!1)return;v+=1,D=new g}}D.length()>0&&f(D,{},v)}invert(f){const b=new g;return this.reduce((w,D)=>{if(D.insert)b.delete(r.default.length(D));else{if(typeof D.retain=="number"&&D.attributes==null)return b.retain(D.retain),w+D.retain;if(D.delete||typeof D.retain=="number"){const v=D.delete||D.retain;return f.slice(w,w+v).forEach(S=>{D.delete?b.push(S):D.retain&&D.attributes&&b.retain(r.default.length(S),o.default.invert(D.attributes,S.attributes))}),w+v}else if(typeof D.retain=="object"&&D.retain!==null){const v=f.slice(w,w+1),P=new i.default(v.ops).next(),[S,A,d]=u(D.retain,P.insert),_=g.getHandler(S);return b.retain({[S]:_.invert(A,d)},o.default.invert(D.attributes,P.attributes)),w+1}}return w},0),b.chop()}transform(f,b=!1){if(b=!!b,typeof f=="number")return this.transformPosition(f,b);const w=f,D=new i.default(this.ops),v=new i.default(w.ops),P=new g;for(;D.hasNext()||v.hasNext();)if(D.peekType()==="insert"&&(b||v.peekType()!=="insert"))P.retain(r.default.length(D.next()));else if(v.peekType()==="insert")P.push(v.next());else{const S=Math.min(D.peekLength(),v.peekLength()),A=D.next(S),d=v.next(S);if(A.delete)continue;if(d.delete)P.push(d);else{const _=A.retain,y=d.retain;let E=typeof y=="object"&&y!==null?y:S;if(typeof _=="object"&&_!==null&&typeof y=="object"&&y!==null){const C=Object.keys(_)[0];if(C===Object.keys(y)[0]){const L=g.getHandler(C);L&&(E={[C]:L.transform(_[C],y[C],b)})}}P.retain(E,o.default.transform(A.attributes,d.attributes,b))}}return P.chop()}transformPosition(f,b=!1){b=!!b;const w=new i.default(this.ops);let D=0;for(;w.hasNext()&&D<=f;){const v=w.peekLength(),P=w.peekType();if(w.next(),P==="delete"){f-=Math.min(v,f-D);continue}else P==="insert"&&(D<f||!b)&&(f+=v);D+=v}return f}}g.Op=r.default,g.OpIterator=i.default,g.AttributeMap=o.default,g.handlers={},a.default=g,n.exports=g,n.exports.default=g})(Nt,Nt.exports);var Te=Ar(Nt.exports);class la extends Rt{static value(){}optimize(){(this.prev||this.next)&&this.remove()}length(){return 0}value(){return""}}la.blotName="break";la.tagName="BR";class aa extends Pl{}const kx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Yl(n){return n.replace(/[&<>"']/g,a=>kx[a])}class Pt extends vo{static allowedChildren=[Pt,la,Rt,aa];static order=["cursor","inline","link","underline","strike","italic","bold","script","code"];static compare(a,e){const s=Pt.order.indexOf(a),l=Pt.order.indexOf(e);return s>=0||l>=0?s-l:a===e?0:a<e?-1:1}formatAt(a,e,s,l){if(Pt.compare(this.statics.blotName,s)<0&&this.scroll.query(s,Le.BLOT)){const o=this.isolate(a,e);l&&o.wrap(s,l)}else super.formatAt(a,e,s,l)}optimize(a){if(super.optimize(a),this.parent instanceof Pt&&Pt.compare(this.statics.blotName,this.parent.statics.blotName)>0){const e=this.parent.isolate(this.offset(),this.length());this.moveChildren(e),e.wrap(this)}}}const Xo=1;class yt extends js{cache={};delta(){return this.cache.delta==null&&(this.cache.delta=jr(this)),this.cache.delta}deleteAt(a,e){super.deleteAt(a,e),this.cache={}}formatAt(a,e,s,l){e<=0||(this.scroll.query(s,Le.BLOCK)?a+e===this.length()&&this.format(s,l):super.formatAt(a,Math.min(e,this.length()-a-1),s,l),this.cache={})}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s),this.cache={};return}if(e.length===0)return;const l=e.split(`
`),o=l.shift();o.length>0&&(a<this.length()-1||this.children.tail==null?super.insertAt(Math.min(a,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});let r=this;l.reduce((i,c)=>(r=r.split(i,!0),r.insertAt(0,c),c.length),a+o.length)}insertBefore(a,e){const{head:s}=this.children;super.insertBefore(a,e),s instanceof la&&s.remove(),this.cache={}}length(){return this.cache.length==null&&(this.cache.length=super.length()+Xo),this.cache.length}moveChildren(a,e){super.moveChildren(a,e),this.cache={}}optimize(a){super.optimize(a),this.cache={}}path(a){return super.path(a,!0)}removeChild(a){super.removeChild(a),this.cache={}}split(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e&&(a===0||a>=this.length()-Xo)){const l=this.clone();return a===0?(this.parent.insertBefore(l,this),this):(this.parent.insertBefore(l,this.next),l)}const s=super.split(a,e);return this.cache={},s}}yt.blotName="block";yt.tagName="P";yt.defaultChild=la;yt.allowedChildren=[la,Pt,Rt,aa];class Yt extends Rt{attach(){super.attach(),this.attributes=new Rl(this.domNode)}delta(){return new Te().insert(this.value(),{...this.formats(),...this.attributes.values()})}format(a,e){const s=this.scroll.query(a,Le.BLOCK_ATTRIBUTE);s!=null&&this.attributes.attribute(s,e)}formatAt(a,e,s,l){this.format(s,l)}insertAt(a,e,s){if(s!=null){super.insertAt(a,e,s);return}const l=e.split(`
`),o=l.pop(),r=l.map(c=>{const u=this.scroll.create(yt.blotName);return u.insertAt(0,c),u}),i=this.split(a);r.forEach(c=>{this.parent.insertBefore(c,i)}),o&&this.parent.insertBefore(this.scroll.create("text",o),i)}}Yt.scope=Le.BLOCK_BLOT;function jr(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return n.descendants(Dt).reduce((e,s)=>s.length()===0?e:e.insert(s.value(),zt(s,{},a)),new Te).insert(`
`,zt(n))}function zt(n){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return n==null||("formats"in n&&typeof n.formats=="function"&&(a={...a,...n.formats()},e&&delete a["code-token"]),n.parent==null||n.parent.statics.blotName==="scroll"||n.parent.statics.scope!==n.statics.scope)?a:zt(n.parent,a,e)}class Qt extends Rt{static blotName="cursor";static className="ql-cursor";static tagName="span";static CONTENTS="\uFEFF";static value(){}constructor(a,e,s){super(a,e),this.selection=s,this.textNode=document.createTextNode(Qt.CONTENTS),this.domNode.appendChild(this.textNode),this.savedLength=0}detach(){this.parent!=null&&this.parent.removeChild(this)}format(a,e){if(this.savedLength!==0){super.format(a,e);return}let s=this,l=0;for(;s!=null&&s.statics.scope!==Le.BLOCK_BLOT;)l+=s.offset(s.parent),s=s.parent;s!=null&&(this.savedLength=Qt.CONTENTS.length,s.optimize(),s.formatAt(l,Qt.CONTENTS.length,a,e),this.savedLength=0)}index(a,e){return a===this.textNode?0:super.index(a,e)}length(){return this.savedLength}position(){return[this.textNode,this.textNode.data.length]}remove(){super.remove(),this.parent=null}restore(){if(this.selection.composing||this.parent==null)return null;const a=this.selection.getNativeRange();for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);const e=this.prev instanceof aa?this.prev:null,s=e?e.length():0,l=this.next instanceof aa?this.next:null,o=l?l.text:"",{textNode:r}=this,i=r.data.split(Qt.CONTENTS).join("");r.data=Qt.CONTENTS;let c;if(e)c=e,(i||l)&&(e.insertAt(e.length(),i+o),l&&l.remove());else if(l)c=l,l.insertAt(0,i);else{const u=document.createTextNode(i);c=this.scroll.create(u),this.parent.insertBefore(c,this)}if(this.remove(),a){const u=(f,b)=>e&&f===e.domNode?b:f===r?s+b-1:l&&f===l.domNode?s+i.length+b:null,g=u(a.start.node,a.start.offset),p=u(a.end.node,a.end.offset);if(g!==null&&p!==null)return{startNode:c.domNode,startOffset:g,endNode:c.domNode,endOffset:p}}return null}update(a,e){if(a.some(s=>s.type==="characterData"&&s.target===this.textNode)){const s=this.restore();s&&(e.range=s)}}optimize(a){super.optimize(a);let{parent:e}=this;for(;e;){if(e.domNode.tagName==="A"){this.savedLength=Qt.CONTENTS.length,e.isolate(this.offset(e),this.length()).unwrap(),this.savedLength=0;break}e=e.parent}}value(){return""}}var Yr={exports:{}};(function(n){var a=Object.prototype.hasOwnProperty,e="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(e=!1));function l(c,u,g){this.fn=c,this.context=u,this.once=g||!1}function o(c,u,g,p,f){if(typeof g!="function")throw new TypeError("The listener must be a function");var b=new l(g,p||c,f),w=e?e+u:u;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],b]:c._events[w].push(b):(c._events[w]=b,c._eventsCount++),c}function r(c,u){--c._eventsCount===0?c._events=new s:delete c._events[u]}function i(){this._events=new s,this._eventsCount=0}i.prototype.eventNames=function(){var u=[],g,p;if(this._eventsCount===0)return u;for(p in g=this._events)a.call(g,p)&&u.push(e?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(g)):u},i.prototype.listeners=function(u){var g=e?e+u:u,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var f=0,b=p.length,w=new Array(b);f<b;f++)w[f]=p[f].fn;return w},i.prototype.listenerCount=function(u){var g=e?e+u:u,p=this._events[g];return p?p.fn?1:p.length:0},i.prototype.emit=function(u,g,p,f,b,w){var D=e?e+u:u;if(!this._events[D])return!1;var v=this._events[D],P=arguments.length,S,A;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),P){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,g),!0;case 3:return v.fn.call(v.context,g,p),!0;case 4:return v.fn.call(v.context,g,p,f),!0;case 5:return v.fn.call(v.context,g,p,f,b),!0;case 6:return v.fn.call(v.context,g,p,f,b,w),!0}for(A=1,S=new Array(P-1);A<P;A++)S[A-1]=arguments[A];v.fn.apply(v.context,S)}else{var d=v.length,_;for(A=0;A<d;A++)switch(v[A].once&&this.removeListener(u,v[A].fn,void 0,!0),P){case 1:v[A].fn.call(v[A].context);break;case 2:v[A].fn.call(v[A].context,g);break;case 3:v[A].fn.call(v[A].context,g,p);break;case 4:v[A].fn.call(v[A].context,g,p,f);break;default:if(!S)for(_=1,S=new Array(P-1);_<P;_++)S[_-1]=arguments[_];v[A].fn.apply(v[A].context,S)}}return!0},i.prototype.on=function(u,g,p){return o(this,u,g,p,!1)},i.prototype.once=function(u,g,p){return o(this,u,g,p,!0)},i.prototype.removeListener=function(u,g,p,f){var b=e?e+u:u;if(!this._events[b])return this;if(!g)return r(this,b),this;var w=this._events[b];if(w.fn)w.fn===g&&(!f||w.once)&&(!p||w.context===p)&&r(this,b);else{for(var D=0,v=[],P=w.length;D<P;D++)(w[D].fn!==g||f&&!w[D].once||p&&w[D].context!==p)&&v.push(w[D]);v.length?this._events[b]=v.length===1?v[0]:v:r(this,b)}return this},i.prototype.removeAllListeners=function(u){var g;return u?(g=e?e+u:u,this._events[g]&&r(this,g)):(this._events=new s,this._eventsCount=0),this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prefixed=e,i.EventEmitter=i,n.exports=i})(Yr);var wx=Yr.exports,eo=new WeakMap;const to=["error","warn","log","info"];let ao="warn";function Wr(n){if(ao&&to.indexOf(n)<=to.indexOf(ao)){for(var a=arguments.length,e=new Array(a>1?a-1:0),s=1;s<a;s++)e[s-1]=arguments[s];console[n](...e)}}function ya(n){return to.reduce((a,e)=>(a[e]=Wr.bind(console,e,n),a),{})}ya.level=n=>{ao=n};Wr.level=ya.level;const On=ya("quill:events"),Px=["selectionchange","mousedown","mouseup","click"];Px.forEach(n=>{document.addEventListener(n,function(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];Array.from(document.querySelectorAll(".ql-container")).forEach(l=>{const o=eo.get(l);o&&o.emitter&&o.emitter.handleDOM(...e)})})});class we extends wx{static events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"};static sources={API:"api",SILENT:"silent",USER:"user"};constructor(){super(),this.domListeners={},this.on("error",On.error)}emit(){for(var a=arguments.length,e=new Array(a),s=0;s<a;s++)e[s]=arguments[s];return On.log.call(On,...e),super.emit(...e)}handleDOM(a){for(var e=arguments.length,s=new Array(e>1?e-1:0),l=1;l<e;l++)s[l-1]=arguments[l];(this.domListeners[a.type]||[]).forEach(o=>{let{node:r,handler:i}=o;(a.target===r||r.contains(a.target))&&i(a,...s)})}listenDOM(a,e,s){this.domListeners[a]||(this.domListeners[a]=[]),this.domListeners[a].push({node:e,handler:s})}}const Mn=ya("quill:selection");class Ya{constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.index=a,this.length=e}}class Tx{constructor(a,e){this.emitter=e,this.scroll=a,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new Ya(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,()=>{!this.mouseDown&&!this.composing&&setTimeout(this.update.bind(this,we.sources.USER),1)}),this.emitter.on(we.events.SCROLL_BEFORE_UPDATE,()=>{if(!this.hasFocus())return;const s=this.getNativeRange();s!=null&&s.start.node!==this.cursor.textNode&&this.emitter.once(we.events.SCROLL_UPDATE,(l,o)=>{try{this.root.contains(s.start.node)&&this.root.contains(s.end.node)&&this.setNativeRange(s.start.node,s.start.offset,s.end.node,s.end.offset);const r=o.some(i=>i.type==="characterData"||i.type==="childList"||i.type==="attributes"&&i.target===this.root);this.update(r?we.sources.SILENT:l)}catch{}})}),this.emitter.on(we.events.SCROLL_OPTIMIZE,(s,l)=>{if(l.range){const{startNode:o,startOffset:r,endNode:i,endOffset:c}=l.range;this.setNativeRange(o,r,i,c),this.update(we.sources.SILENT)}}),this.update(we.sources.SILENT)}handleComposition(){this.emitter.on(we.events.COMPOSITION_BEFORE_START,()=>{this.composing=!0}),this.emitter.on(we.events.COMPOSITION_END,()=>{if(this.composing=!1,this.cursor.parent){const a=this.cursor.restore();if(!a)return;setTimeout(()=>{this.setNativeRange(a.startNode,a.startOffset,a.endNode,a.endOffset)},1)}})}handleDragging(){this.emitter.listenDOM("mousedown",document.body,()=>{this.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,()=>{this.mouseDown=!1,this.update(we.sources.USER)})}focus(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}format(a,e){this.scroll.update();const s=this.getNativeRange();if(!(s==null||!s.native.collapsed||this.scroll.query(a,Le.BLOCK))){if(s.start.node!==this.cursor.textNode){const l=this.scroll.find(s.start.node,!1);if(l==null)return;if(l instanceof Dt){const o=l.split(s.start.offset);l.parent.insertBefore(this.cursor,o)}else l.insertBefore(this.cursor,s.start.node);this.cursor.attach()}this.cursor.format(a,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;const s=this.scroll.length();a=Math.min(a,s-1),e=Math.min(a+e,s-1)-a;let l,[o,r]=this.scroll.leaf(a);if(o==null)return null;if(e>0&&r===o.length()){const[g]=this.scroll.leaf(a+1);if(g){const[p]=this.scroll.line(a),[f]=this.scroll.line(a+1);p===f&&(o=g,r=0)}}[l,r]=o.position(r,!0);const i=document.createRange();if(e>0)return i.setStart(l,r),[o,r]=this.scroll.leaf(a+e),o==null?null:([l,r]=o.position(r,!0),i.setEnd(l,r),i.getBoundingClientRect());let c="left",u;if(l instanceof Text){if(!l.data.length)return null;r<l.data.length?(i.setStart(l,r),i.setEnd(l,r+1)):(i.setStart(l,r-1),i.setEnd(l,r),c="right"),u=i.getBoundingClientRect()}else{if(!(o.domNode instanceof Element))return null;u=o.domNode.getBoundingClientRect(),r>0&&(c="right")}return{bottom:u.top+u.height,height:u.height,left:u[c],right:u[c],top:u.top,width:0}}getNativeRange(){const a=document.getSelection();if(a==null||a.rangeCount<=0)return null;const e=a.getRangeAt(0);if(e==null)return null;const s=this.normalizeNative(e);return Mn.info("getNativeRange",s),s}getRange(){const a=this.scroll.domNode;if("isConnected"in a&&!a.isConnected)return[null,null];const e=this.getNativeRange();return e==null?[null,null]:[this.normalizedToRange(e),e]}hasFocus(){return document.activeElement===this.root||document.activeElement!=null&&Vn(this.root,document.activeElement)}normalizedToRange(a){const e=[[a.start.node,a.start.offset]];a.native.collapsed||e.push([a.end.node,a.end.offset]);const s=e.map(r=>{const[i,c]=r,u=this.scroll.find(i,!0),g=u.offset(this.scroll);return c===0?g:u instanceof Dt?g+u.index(i,c):g+u.length()}),l=Math.min(Math.max(...s),this.scroll.length()-1),o=Math.min(l,...s);return new Ya(o,l-o)}normalizeNative(a){if(!Vn(this.root,a.startContainer)||!a.collapsed&&!Vn(this.root,a.endContainer))return null;const e={start:{node:a.startContainer,offset:a.startOffset},end:{node:a.endContainer,offset:a.endOffset},native:a};return[e.start,e.end].forEach(s=>{let{node:l,offset:o}=s;for(;!(l instanceof Text)&&l.childNodes.length>0;)if(l.childNodes.length>o)l=l.childNodes[o],o=0;else if(l.childNodes.length===o)l=l.lastChild,l instanceof Text?o=l.data.length:l.childNodes.length>0?o=l.childNodes.length:o=l.childNodes.length+1;else break;s.node=l,s.offset=o}),e}rangeToNative(a){const e=this.scroll.length(),s=(l,o)=>{l=Math.min(e-1,l);const[r,i]=this.scroll.leaf(l);return r?r.position(i,o):[null,-1]};return[...s(a.index,!1),...s(a.index+a.length,!0)]}setNativeRange(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:a,l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:e,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(Mn.info("setNativeRange",a,e,s,l),a!=null&&(this.root.parentNode==null||a.parentNode==null||s.parentNode==null))return;const r=document.getSelection();if(r!=null)if(a!=null){this.hasFocus()||this.root.focus({preventScroll:!0});const{native:i}=this.getNativeRange()||{};if(i==null||o||a!==i.startContainer||e!==i.startOffset||s!==i.endContainer||l!==i.endOffset){a instanceof Element&&a.tagName==="BR"&&(e=Array.from(a.parentNode.childNodes).indexOf(a),a=a.parentNode),s instanceof Element&&s.tagName==="BR"&&(l=Array.from(s.parentNode.childNodes).indexOf(s),s=s.parentNode);const c=document.createRange();c.setStart(a,e),c.setEnd(s,l),r.removeAllRanges(),r.addRange(c)}}else r.removeAllRanges(),this.root.blur()}setRange(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:we.sources.API;if(typeof e=="string"&&(s=e,e=!1),Mn.info("setRange",a),a!=null){const l=this.rangeToNative(a);this.setNativeRange(...l,e)}else this.setNativeRange(null);this.update(s)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we.sources.USER;const e=this.lastRange,[s,l]=this.getRange();if(this.lastRange=s,this.lastNative=l,this.lastRange!=null&&(this.savedRange=this.lastRange),!xo(e,this.lastRange)){if(!this.composing&&l!=null&&l.native.collapsed&&l.start.node!==this.cursor.textNode){const r=this.cursor.restore();r&&this.setNativeRange(r.startNode,r.startOffset,r.endNode,r.endOffset)}const o=[we.events.SELECTION_CHANGE,ms(this.lastRange),ms(e),a];this.emitter.emit(we.events.EDITOR_CHANGE,...o),a!==we.sources.SILENT&&this.emitter.emit(...o)}}}function Vn(n,a){try{a.parentNode}catch{return!1}return n.contains(a)}const Lx=/^[ -~]*$/;class Sx{constructor(a){this.scroll=a,this.delta=this.getDelta()}applyDelta(a){this.scroll.update();let e=this.scroll.length();this.scroll.batchStart();const s=Qo(a),l=new Te;return $x(s.ops.slice()).reduce((r,i)=>{const c=Nt.exports.Op.length(i);let u=i.attributes||{},g=!1,p=!1;if(i.insert!=null){if(l.retain(c),typeof i.insert=="string"){const w=i.insert;p=!w.endsWith(`
`)&&(e<=r||!!this.scroll.descendant(Yt,r)[0]),this.scroll.insertAt(r,w);const[D,v]=this.scroll.line(r);let P=wa({},zt(D));if(D instanceof yt){const[S]=D.descendant(Dt,v);S&&(P=wa(P,zt(S)))}u=Nt.exports.AttributeMap.diff(P,u)||{}}else if(typeof i.insert=="object"){const w=Object.keys(i.insert)[0];if(w==null)return r;const D=this.scroll.query(w,Le.INLINE)!=null;if(D)(e<=r||!!this.scroll.descendant(Yt,r)[0])&&(p=!0);else if(r>0){const[v,P]=this.scroll.descendant(Dt,r-1);v instanceof aa?v.value()[P]!==`
`&&(g=!0):v instanceof Rt&&v.statics.scope===Le.INLINE_BLOT&&(g=!0)}if(this.scroll.insertAt(r,w,i.insert[w]),D){const[v]=this.scroll.descendant(Dt,r);if(v){const P=wa({},zt(v));u=Nt.exports.AttributeMap.diff(P,u)||{}}}}e+=c}else if(l.push(i),i.retain!==null&&typeof i.retain=="object"){const w=Object.keys(i.retain)[0];if(w==null)return r;this.scroll.updateEmbedAt(r,w,i.retain[w])}Object.keys(u).forEach(w=>{this.scroll.formatAt(r,c,w,u[w])});const f=g?1:0,b=p?1:0;return e+=f+b,l.retain(f),l.delete(b),r+c+f+b},0),l.reduce((r,i)=>typeof i.delete=="number"?(this.scroll.deleteAt(r,i.delete),r):r+Nt.exports.Op.length(i),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}deleteText(a,e){return this.scroll.deleteAt(a,e),this.update(new Te().retain(a).delete(e))}formatLine(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.scroll.update(),Object.keys(s).forEach(o=>{this.scroll.lines(a,Math.max(e,1)).forEach(r=>{r.format(o,s[o])})}),this.scroll.optimize();const l=new Te().retain(a).retain(e,ms(s));return this.update(l)}formatText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Object.keys(s).forEach(o=>{this.scroll.formatAt(a,e,o,s[o])});const l=new Te().retain(a).retain(e,ms(s));return this.update(l)}getContents(a,e){return this.delta.slice(a,a+e)}getDelta(){return this.scroll.lines().reduce((a,e)=>a.concat(e.delta()),new Te)}getFormat(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=[],l=[];e===0?this.scroll.path(a).forEach(i=>{const[c]=i;c instanceof yt?s.push(c):c instanceof Dt&&l.push(c)}):(s=this.scroll.lines(a,e),l=this.scroll.descendants(Dt,a,e));const[o,r]=[s,l].map(i=>{const c=i.shift();if(c==null)return{};let u=zt(c);for(;Object.keys(u).length>0;){const g=i.shift();if(g==null)return u;u=Ix(zt(g),u)}return u});return{...o,...r}}getHTML(a,e){const[s,l]=this.scroll.line(a);if(s){const o=s.length();return s.length()>=l+e&&!(l===0&&e===o)?Ws(s,l,e,!0):Ws(this.scroll,a,e,!0)}return""}getText(a,e){return this.getContents(a,e).filter(s=>typeof s.insert=="string").map(s=>s.insert).join("")}insertContents(a,e){const s=Qo(e),l=new Te().retain(a).concat(s);return this.scroll.insertContents(a,s),this.update(l)}insertEmbed(a,e,s){return this.scroll.insertAt(a,e,s),this.update(new Te().retain(a).insert({[e]:s}))}insertText(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e=e.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(a,e),Object.keys(s).forEach(l=>{this.scroll.formatAt(a,e.length,l,s[l])}),this.update(new Te().retain(a).insert(e,ms(s)))}isBlank(){if(this.scroll.children.length===0)return!0;if(this.scroll.children.length>1)return!1;const a=this.scroll.children.head;if(a?.statics.blotName!==yt.blotName)return!1;const e=a;return e.children.length>1?!1:e.children.head instanceof la}removeFormat(a,e){const s=this.getText(a,e),[l,o]=this.scroll.line(a+e);let r=0,i=new Te;l!=null&&(r=l.length()-o,i=l.delta().slice(o,o+r-1).insert(`
`));const u=this.getContents(a,e+r).diff(new Te().insert(s).concat(i)),g=new Te().retain(a).concat(u);return this.applyDelta(g)}update(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;const l=this.delta;if(e.length===1&&e[0].type==="characterData"&&e[0].target.data.match(Lx)&&this.scroll.find(e[0].target)){const o=this.scroll.find(e[0].target),r=zt(o),i=o.offset(this.scroll),c=e[0].oldValue.replace(Qt.CONTENTS,""),u=new Te().insert(c),g=new Te().insert(o.value()),p=s&&{oldRange:Ko(s.oldRange,-i),newRange:Ko(s.newRange,-i)};a=new Te().retain(i).concat(u.diff(g,p)).reduce((b,w)=>w.insert?b.insert(w.insert,r):b.push(w),new Te),this.delta=l.compose(a)}else this.delta=this.getDelta(),(!a||!xo(l.compose(a),this.delta))&&(a=l.diff(this.delta,s));return a}}function us(n,a,e){if(n.length===0){const[b]=Rn(e.pop());return a<=0?`</li></${b}>`:`</li></${b}>${us([],a-1,e)}`}const[{child:s,offset:l,length:o,indent:r,type:i},...c]=n,[u,g]=Rn(i);if(r>a)return e.push(i),r===a+1?`<${u}><li${g}>${Ws(s,l,o)}${us(c,r,e)}`:`<${u}><li>${us(n,a+1,e)}`;const p=e[e.length-1];if(r===a&&i===p)return`</li><li${g}>${Ws(s,l,o)}${us(c,r,e)}`;const[f]=Rn(e.pop());return`</li></${f}>${us(n,a-1,e)}`}function Ws(n,a,e){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if("html"in n&&typeof n.html=="function")return n.html(a,e);if(n instanceof aa)return Yl(n.value().slice(a,a+e)).replaceAll(" ","&nbsp;");if(n instanceof ta){if(n.statics.blotName==="list-container"){const u=[];return n.children.forEachAt(a,e,(g,p,f)=>{const b="formats"in g&&typeof g.formats=="function"?g.formats():{};u.push({child:g,offset:p,length:f,indent:b.indent||0,type:b.list})}),us(u,-1,[])}const l=[];if(n.children.forEachAt(a,e,(u,g,p)=>{l.push(Ws(u,g,p))}),s||n.statics.blotName==="list")return l.join("");const{outerHTML:o,innerHTML:r}=n.domNode,[i,c]=o.split(`>${r}<`);return i==="<table"?`<table style="border: 1px solid #000;">${l.join("")}<${c}`:`${i}>${l.join("")}<${c}`}return n.domNode instanceof Element?n.domNode.outerHTML:""}function Ix(n,a){return Object.keys(a).reduce((e,s)=>{if(n[s]==null)return e;const l=a[s];return l===n[s]?e[s]=l:Array.isArray(l)?l.indexOf(n[s])<0?e[s]=l.concat([n[s]]):e[s]=l:e[s]=[l,n[s]],e},{})}function Rn(n){const a=n==="ordered"?"ol":"ul";switch(n){case"checked":return[a,' data-list="checked"'];case"unchecked":return[a,' data-list="unchecked"'];default:return[a,""]}}function Qo(n){return n.reduce((a,e)=>{if(typeof e.insert=="string"){const s=e.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return a.insert(s,e.attributes)}return a.push(e)},new Te)}function Ko(n,a){let{index:e,length:s}=n;return new Ya(e+a,s)}function $x(n){const a=[];return n.forEach(e=>{typeof e.insert=="string"?e.insert.split(`
`).forEach((l,o)=>{o&&a.push({insert:`
`,attributes:e.attributes}),l&&a.push({insert:l,attributes:e.attributes})}):a.push(e)}),a}class xa{static DEFAULTS={};constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.quill=a,this.options=e}}const hl="\uFEFF";class Bo extends Rt{constructor(a,e){super(a,e),this.contentNode=document.createElement("span"),this.contentNode.setAttribute("contenteditable","false"),Array.from(this.domNode.childNodes).forEach(s=>{this.contentNode.appendChild(s)}),this.leftGuard=document.createTextNode(hl),this.rightGuard=document.createTextNode(hl),this.domNode.appendChild(this.leftGuard),this.domNode.appendChild(this.contentNode),this.domNode.appendChild(this.rightGuard)}index(a,e){return a===this.leftGuard?0:a===this.rightGuard?1:super.index(a,e)}restore(a){let e=null,s;const l=a.data.split(hl).join("");if(a===this.leftGuard)if(this.prev instanceof aa){const o=this.prev.length();this.prev.insertAt(o,l),e={startNode:this.prev.domNode,startOffset:o+l.length}}else s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this),e={startNode:s,startOffset:l.length};else a===this.rightGuard&&(this.next instanceof aa?(this.next.insertAt(0,l),e={startNode:this.next.domNode,startOffset:l.length}):(s=document.createTextNode(l),this.parent.insertBefore(this.scroll.create(s),this.next),e={startNode:s,startOffset:l.length}));return a.data=hl,e}update(a,e){a.forEach(s=>{if(s.type==="characterData"&&(s.target===this.leftGuard||s.target===this.rightGuard)){const l=this.restore(s.target);l&&(e.range=l)}})}}class Nx{isComposing=!1;constructor(a,e){this.scroll=a,this.emitter=e,this.setupListeners()}setupListeners(){this.scroll.domNode.addEventListener("compositionstart",a=>{this.isComposing||this.handleCompositionStart(a)}),this.scroll.domNode.addEventListener("compositionend",a=>{this.isComposing&&queueMicrotask(()=>{this.handleCompositionEnd(a)})})}handleCompositionStart(a){const e=a.target instanceof Node?this.scroll.find(a.target,!0):null;e&&!(e instanceof Bo)&&(this.emitter.emit(we.events.COMPOSITION_BEFORE_START,a),this.scroll.batchStart(),this.emitter.emit(we.events.COMPOSITION_START,a),this.isComposing=!0)}handleCompositionEnd(a){this.emitter.emit(we.events.COMPOSITION_BEFORE_END,a),this.scroll.batchEnd(),this.emitter.emit(we.events.COMPOSITION_END,a),this.isComposing=!1}}class Bs{static DEFAULTS={modules:{}};static themes={default:Bs};modules={};constructor(a,e){this.quill=a,this.options=e}init(){Object.keys(this.options.modules).forEach(a=>{this.modules[a]==null&&this.addModule(a)})}addModule(a){const e=this.quill.constructor.import(`modules/${a}`);return this.modules[a]=new e(this.quill,this.options.modules[a]||{}),this.modules[a]}}const Ox=n=>n.parentElement||n.getRootNode().host||null,Mx=n=>{const a=n.getBoundingClientRect(),e="offsetWidth"in n&&Math.abs(a.width)/n.offsetWidth||1,s="offsetHeight"in n&&Math.abs(a.height)/n.offsetHeight||1;return{top:a.top,right:a.left+n.clientWidth*e,bottom:a.top+n.clientHeight*s,left:a.left}},vl=n=>{const a=parseInt(n,10);return Number.isNaN(a)?0:a},er=(n,a,e,s,l,o)=>n<e&&a>s?0:n<e?-(e-n+l):a>s?a-n>s-e?n+l-e:a-s+o:0,Vx=(n,a)=>{const e=n.ownerDocument;let s=a,l=n;for(;l;){const o=l===e.body,r=o?{top:0,right:window.visualViewport?.width??e.documentElement.clientWidth,bottom:window.visualViewport?.height??e.documentElement.clientHeight,left:0}:Mx(l),i=getComputedStyle(l),c=er(s.left,s.right,r.left,r.right,vl(i.scrollPaddingLeft),vl(i.scrollPaddingRight)),u=er(s.top,s.bottom,r.top,r.bottom,vl(i.scrollPaddingTop),vl(i.scrollPaddingBottom));if(c||u)if(o)e.defaultView?.scrollBy(c,u);else{const{scrollLeft:g,scrollTop:p}=l;u&&(l.scrollTop+=u),c&&(l.scrollLeft+=c);const f=l.scrollLeft-g,b=l.scrollTop-p;s={left:s.left-f,top:s.top-b,right:s.right-f,bottom:s.bottom-b}}l=o||i.position==="fixed"?null:Ox(l)}},Rx=100,qx=["block","break","cursor","inline","scroll","text"],Ux=(n,a,e)=>{const s=new Es;return qx.forEach(l=>{const o=a.query(l);o&&s.register(o)}),n.forEach(l=>{let o=a.query(l);o||e.error(`Cannot register "${l}" specified in "formats" config. Are you sure it was registered?`);let r=0;for(;o;)if(s.register(o),o="blotName"in o?o.requiredContainer??null:null,r+=1,r>Rx){e.error(`Cycle detected in registering blot requiredContainer: "${l}"`);break}}),s},fs=ya("quill"),El=new Es;ta.uiClass="ql-ui";class fe{static DEFAULTS={bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:El,theme:"default"};static events=we.events;static sources=we.sources;static version="2.0.3";static imports={delta:Te,parchment:px,"core/module":xa,"core/theme":Bs};static debug(a){a===!0&&(a="log"),ya.level(a)}static find(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return eo.get(a)||El.find(a,e)}static import(a){return this.imports[a]==null&&fs.error(`Cannot import ${a}. Are you sure it was registered?`),this.imports[a]}static register(){if(typeof(arguments.length<=0?void 0:arguments[0])!="string"){const a=arguments.length<=0?void 0:arguments[0],e=!!(!(arguments.length<=1)&&arguments[1]),s="attrName"in a?a.attrName:a.blotName;typeof s=="string"?this.register(`formats/${s}`,a,e):Object.keys(a).forEach(l=>{this.register(l,a[l],e)})}else{const a=arguments.length<=0?void 0:arguments[0],e=arguments.length<=1?void 0:arguments[1],s=!!(!(arguments.length<=2)&&arguments[2]);this.imports[a]!=null&&!s&&fs.warn(`Overwriting ${a} with`,e),this.imports[a]=e,(a.startsWith("blots/")||a.startsWith("formats/"))&&e&&typeof e!="boolean"&&e.blotName!=="abstract"&&El.register(e),typeof e.register=="function"&&e.register(El)}}constructor(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.options=zx(a,e),this.container=this.options.container,this.container==null){fs.error("Invalid Quill container",a);return}this.options.debug&&fe.debug(this.options.debug);const s=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",eo.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new we;const l=Eo.blotName,o=this.options.registry.query(l);if(!o||!("blotName"in o))throw new Error(`Cannot initialize Quill without "${l}" blot`);if(this.scroll=new o(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new Sx(this.scroll),this.selection=new Tx(this.scroll,this.emitter),this.composition=new Nx(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(we.events.EDITOR_CHANGE,r=>{r===we.events.TEXT_CHANGE&&this.root.classList.toggle("ql-blank",this.editor.isBlank())}),this.emitter.on(we.events.SCROLL_UPDATE,(r,i)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),g=c&&u?{oldRange:c,newRange:u}:void 0;Xt.call(this,()=>this.editor.update(null,i,g),r)}),this.emitter.on(we.events.SCROLL_EMBED_UPDATE,(r,i)=>{const c=this.selection.lastRange,[u]=this.selection.getRange(),g=c&&u?{oldRange:c,newRange:u}:void 0;Xt.call(this,()=>{const p=new Te().retain(r.offset(this)).retain({[r.statics.blotName]:i});return this.editor.update(p,[],g)},fe.sources.USER)}),s){const r=this.clipboard.convert({html:`${s}<p><br></p>`,text:`
`});this.setContents(r)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}addContainer(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof a=="string"){const s=a;a=document.createElement("div"),a.classList.add(s)}return this.container.insertBefore(a,e),a}blur(){this.selection.setRange(null)}deleteText(a,e,s){return[a,e,,s]=fa(a,e,s),Xt.call(this,()=>this.editor.deleteText(a,e),s,a,-1*e)}disable(){this.enable(!1)}editReadOnly(a){this.allowReadOnlyEdits=!0;const e=a();return this.allowReadOnlyEdits=!1,e}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(a),this.container.classList.toggle("ql-disabled",!a)}focus(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.selection.focus(),a.preventScroll||this.scrollSelectionIntoView()}format(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:we.sources.API;return Xt.call(this,()=>{const l=this.getSelection(!0);let o=new Te;if(l==null)return o;if(this.scroll.query(a,Le.BLOCK))o=this.editor.formatLine(l.index,l.length,{[a]:e});else{if(l.length===0)return this.selection.format(a,e),o;o=this.editor.formatText(l.index,l.length,{[a]:e})}return this.setSelection(l,we.sources.SILENT),o},s)}formatLine(a,e,s,l,o){let r;return[a,e,r,o]=fa(a,e,s,l,o),Xt.call(this,()=>this.editor.formatLine(a,e,r),o,a,0)}formatText(a,e,s,l,o){let r;return[a,e,r,o]=fa(a,e,s,l,o),Xt.call(this,()=>this.editor.formatText(a,e,r),o,a,0)}getBounds(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=null;if(typeof a=="number"?s=this.selection.getBounds(a,e):s=this.selection.getBounds(a.index,a.length),!s)return null;const l=this.container.getBoundingClientRect();return{bottom:s.bottom-l.top,height:s.height,left:s.left-l.left,right:s.right-l.left,top:s.top-l.top,width:s.width}}getContents(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-a;return[a,e]=fa(a,e),this.editor.getContents(a,e)}getFormat(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof a=="number"?this.editor.getFormat(a,e):this.editor.getFormat(a.index,a.length)}getIndex(a){return a.offset(this.scroll)}getLength(){return this.scroll.length()}getLeaf(a){return this.scroll.leaf(a)}getLine(a){return this.scroll.line(a)}getLines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof a!="number"?this.scroll.lines(a.index,a.length):this.scroll.lines(a,e)}getModule(a){return this.theme.modules[a]}getSelection(){return(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)&&this.focus(),this.update(),this.selection.getRange()[0]}getSemanticHTML(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getHTML(a,e)}getText(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1?arguments[1]:void 0;return typeof a=="number"&&(e=e??this.getLength()-a),[a,e]=fa(a,e),this.editor.getText(a,e)}hasFocus(){return this.selection.hasFocus()}insertEmbed(a,e,s){let l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:fe.sources.API;return Xt.call(this,()=>this.editor.insertEmbed(a,e,s),l,a)}insertText(a,e,s,l,o){let r;return[a,,r,o]=fa(a,0,s,l,o),Xt.call(this,()=>this.editor.insertText(a,e,r),o,a,e.length)}isEnabled(){return this.scroll.isEnabled()}off(){return this.emitter.off(...arguments)}on(){return this.emitter.on(...arguments)}once(){return this.emitter.once(...arguments)}removeFormat(a,e,s){return[a,e,,s]=fa(a,e,s),Xt.call(this,()=>this.editor.removeFormat(a,e),s,a)}scrollRectIntoView(a){Vx(this.root,a)}scrollIntoView(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}scrollSelectionIntoView(){const a=this.selection.lastRange,e=a&&this.selection.getBounds(a.index,a.length);e&&this.scrollRectIntoView(e)}setContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:we.sources.API;return Xt.call(this,()=>{a=new Te(a);const s=this.getLength(),l=this.editor.deleteText(0,s),o=this.editor.insertContents(0,a),r=this.editor.deleteText(this.getLength()-1,1);return l.compose(o).compose(r)},e)}setSelection(a,e,s){a==null?this.selection.setRange(null,e||fe.sources.API):([a,e,,s]=fa(a,e,s),this.selection.setRange(new Ya(Math.max(0,a),e),s),s!==we.sources.SILENT&&this.scrollSelectionIntoView())}setText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:we.sources.API;const s=new Te().insert(a);return this.setContents(s,e)}update(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:we.sources.USER;const e=this.scroll.update(a);return this.selection.update(a),e}updateContents(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:we.sources.API;return Xt.call(this,()=>(a=new Te(a),this.editor.applyDelta(a)),e,!0)}}function tr(n){return typeof n=="string"?document.querySelector(n):n}function qn(n){return Object.entries(n??{}).reduce((a,e)=>{let[s,l]=e;return{...a,[s]:l===!0?{}:l}},{})}function ar(n){return Object.fromEntries(Object.entries(n).filter(a=>a[1]!==void 0))}function zx(n,a){const e=tr(n);if(!e)throw new Error("Invalid Quill container");const l=!a.theme||a.theme===fe.DEFAULTS.theme?Bs:fe.import(`themes/${a.theme}`);if(!l)throw new Error(`Invalid theme ${a.theme}. Did you register it?`);const{modules:o,...r}=fe.DEFAULTS,{modules:i,...c}=l.DEFAULTS;let u=qn(a.modules);u!=null&&u.toolbar&&u.toolbar.constructor!==Object&&(u={...u,toolbar:{container:u.toolbar}});const g=wa({},qn(o),qn(i),u),p={...r,...ar(c),...ar(a)};let f=a.registry;return f?a.formats&&fs.warn('Ignoring "formats" option because "registry" is specified'):f=a.formats?Ux(a.formats,p.registry,fs):p.registry,{...p,registry:f,container:e,theme:l,modules:Object.entries(g).reduce((b,w)=>{let[D,v]=w;if(!v)return b;const P=fe.import(`modules/${D}`);return P==null?(fs.error(`Cannot load ${D} module. Are you sure you registered it?`),b):{...b,[D]:wa({},P.DEFAULTS||{},v)}},{}),bounds:tr(p.bounds)}}function Xt(n,a,e,s){if(!this.isEnabled()&&a===we.sources.USER&&!this.allowReadOnlyEdits)return new Te;let l=e==null?null:this.getSelection();const o=this.editor.delta,r=n();if(l!=null&&(e===!0&&(e=l.index),s==null?l=sr(l,r,a):s!==0&&(l=sr(l,e,s,a)),this.setSelection(l,we.sources.SILENT)),r.length()>0){const i=[we.events.TEXT_CHANGE,r,o,a];this.emitter.emit(we.events.EDITOR_CHANGE,...i),a!==we.sources.SILENT&&this.emitter.emit(...i)}return r}function fa(n,a,e,s,l){let o={};return typeof n.index=="number"&&typeof n.length=="number"?typeof a!="number"?(l=s,s=e,e=a,a=n.length,n=n.index):(a=n.length,n=n.index):typeof a!="number"&&(l=s,s=e,e=a,a=0),typeof e=="object"?(o=e,l=s):typeof e=="string"&&(s!=null?o[e]=s:l=e),l=l||we.sources.API,[n,a,o,l]}function sr(n,a,e,s){const l=typeof e=="number"?e:0;if(n==null)return null;let o,r;return a&&typeof a.transformPosition=="function"?[o,r]=[n.index,n.index+n.length].map(i=>a.transformPosition(i,s!==we.sources.USER)):[o,r]=[n.index,n.index+n.length].map(i=>i<a||i===a&&s===we.sources.USER?i:l>=0?i+l:Math.max(a,i+l)),new Ya(o,r-o)}class Ga extends ql{}function lr(n){return n instanceof yt||n instanceof Yt}function nr(n){return typeof n.updateContent=="function"}class jx extends Eo{static blotName="scroll";static className="ql-editor";static tagName="DIV";static defaultChild=yt;static allowedChildren=[yt,Yt,Ga];constructor(a,e,s){let{emitter:l}=s;super(a,e),this.emitter=l,this.batch=!1,this.optimize(),this.enable(),this.domNode.addEventListener("dragstart",o=>this.handleDragStart(o))}batchStart(){Array.isArray(this.batch)||(this.batch=[])}batchEnd(){if(!this.batch)return;const a=this.batch;this.batch=!1,this.update(a)}emitMount(a){this.emitter.emit(we.events.SCROLL_BLOT_MOUNT,a)}emitUnmount(a){this.emitter.emit(we.events.SCROLL_BLOT_UNMOUNT,a)}emitEmbedUpdate(a,e){this.emitter.emit(we.events.SCROLL_EMBED_UPDATE,a,e)}deleteAt(a,e){const[s,l]=this.line(a),[o]=this.line(a+e);if(super.deleteAt(a,e),o!=null&&s!==o&&l>0){if(s instanceof Yt||o instanceof Yt){this.optimize();return}const r=o.children.head instanceof la?null:o.children.head;s.moveChildren(o,r),s.remove()}this.optimize()}enable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",a?"true":"false")}formatAt(a,e,s,l){super.formatAt(a,e,s,l),this.optimize()}insertAt(a,e,s){if(a>=this.length())if(s==null||this.scroll.query(e,Le.BLOCK)==null){const l=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(l),s==null&&e.endsWith(`
`)?l.insertAt(0,e.slice(0,-1),s):l.insertAt(0,e,s)}else{const l=this.scroll.create(e,s);this.appendChild(l)}else super.insertAt(a,e,s);this.optimize()}insertBefore(a,e){if(a.statics.scope===Le.INLINE_BLOT){const s=this.scroll.create(this.statics.defaultChild.blotName);s.appendChild(a),super.insertBefore(s,e)}else super.insertBefore(a,e)}insertContents(a,e){const s=this.deltaToRenderBlocks(e.concat(new Te().insert(`
`))),l=s.pop();if(l==null)return;this.batchStart();const o=s.shift();if(o){const c=o.type==="block"&&(o.delta.length()===0||!this.descendant(Yt,a)[0]&&a<this.length()),u=o.type==="block"?o.delta:new Te().insert({[o.key]:o.value});Un(this,a,u);const g=o.type==="block"?1:0,p=a+u.length()+g;c&&this.insertAt(p-1,`
`);const f=zt(this.line(a)[0]),b=Nt.exports.AttributeMap.diff(f,o.attributes)||{};Object.keys(b).forEach(w=>{this.formatAt(p-1,1,w,b[w])}),a=p}let[r,i]=this.children.find(a);if(s.length&&(r&&(r=r.split(i),i=0),s.forEach(c=>{if(c.type==="block"){const u=this.createBlock(c.attributes,r||void 0);Un(u,0,c.delta)}else{const u=this.create(c.key,c.value);this.insertBefore(u,r||void 0),Object.keys(c.attributes).forEach(g=>{u.format(g,c.attributes[g])})}})),l.type==="block"&&l.delta.length()){const c=r?r.offset(r.scroll)+i:this.length();Un(this,c,l.delta)}this.batchEnd(),this.optimize()}isEnabled(){return this.domNode.getAttribute("contenteditable")==="true"}leaf(a){const e=this.path(a).pop();if(!e)return[null,-1];const[s,l]=e;return s instanceof Dt?[s,l]:[null,-1]}line(a){return a===this.length()?this.line(a-1):this.descendant(lr,a)}lines(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;const s=(l,o,r)=>{let i=[],c=r;return l.children.forEachAt(o,r,(u,g,p)=>{lr(u)?i.push(u):u instanceof ql&&(i=i.concat(s(u,g,c))),c-=p}),i};return s(this,a,e)}optimize(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch||(super.optimize(a,e),a.length>0&&this.emitter.emit(we.events.SCROLL_OPTIMIZE,a,e))}path(a){return super.path(a).slice(1)}remove(){}update(a){if(this.batch){Array.isArray(a)&&(this.batch=this.batch.concat(a));return}let e=we.sources.USER;typeof a=="string"&&(e=a),Array.isArray(a)||(a=this.observer.takeRecords()),a=a.filter(s=>{let{target:l}=s;const o=this.find(l,!0);return o&&!nr(o)}),a.length>0&&this.emitter.emit(we.events.SCROLL_BEFORE_UPDATE,e,a),super.update(a.concat([])),a.length>0&&this.emitter.emit(we.events.SCROLL_UPDATE,e,a)}updateEmbedAt(a,e,s){const[l]=this.descendant(o=>o instanceof Yt,a);l&&l.statics.blotName===e&&nr(l)&&l.updateContent(s)}handleDragStart(a){a.preventDefault()}deltaToRenderBlocks(a){const e=[];let s=new Te;return a.forEach(l=>{const o=l?.insert;if(!!o)if(typeof o=="string"){const r=o.split(`
`);r.slice(0,-1).forEach(c=>{s.insert(c,l.attributes),e.push({type:"block",delta:s,attributes:l.attributes??{}}),s=new Te});const i=r[r.length-1];i&&s.insert(i,l.attributes)}else{const r=Object.keys(o)[0];if(!r)return;this.query(r,Le.INLINE)?s.push(l):(s.length()&&e.push({type:"block",delta:s,attributes:{}}),s=new Te,e.push({type:"blockEmbed",key:r,value:o[r],attributes:l.attributes??{}}))}}),s.length()&&e.push({type:"block",delta:s,attributes:{}}),e}createBlock(a,e){let s;const l={};Object.entries(a).forEach(i=>{let[c,u]=i;this.query(c,Le.BLOCK&Le.BLOT)!=null?s=c:l[c]=u});const o=this.create(s||this.statics.defaultChild.blotName,s?a[s]:void 0);this.insertBefore(o,e||void 0);const r=o.length();return Object.entries(l).forEach(i=>{let[c,u]=i;o.formatAt(0,r,c,u)}),o}}function Un(n,a,e){e.reduce((s,l)=>{const o=Nt.exports.Op.length(l);let r=l.attributes||{};if(l.insert!=null){if(typeof l.insert=="string"){const i=l.insert;n.insertAt(s,i);const[c]=n.descendant(Dt,s),u=zt(c);r=Nt.exports.AttributeMap.diff(u,r)||{}}else if(typeof l.insert=="object"){const i=Object.keys(l.insert)[0];if(i==null)return s;if(n.insertAt(s,i,l.insert[i]),n.scroll.query(i,Le.INLINE)!=null){const[u]=n.descendant(Dt,s),g=zt(u);r=Nt.exports.AttributeMap.diff(g,r)||{}}}}return Object.keys(r).forEach(i=>{n.formatAt(s,o,i,r[i])}),s+o},a)}const Ao={scope:Le.BLOCK,whitelist:["right","center","justify"]},Yx=new ca("align","align",Ao),Hr=new sa("align","ql-align",Ao),Zr=new Ia("align","text-align",Ao);class Gr extends Ia{value(a){let e=super.value(a);return e.startsWith("rgb(")?(e=e.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),`#${e.split(",").map(l=>`00${parseInt(l,10).toString(16)}`.slice(-2)).join("")}`):e}}const Wx=new sa("color","ql-color",{scope:Le.INLINE}),Fo=new Gr("color","color",{scope:Le.INLINE}),Hx=new sa("background","ql-bg",{scope:Le.INLINE}),Do=new Gr("background","background-color",{scope:Le.INLINE});class Ja extends Ga{static create(a){const e=super.create(a);return e.setAttribute("spellcheck","false"),e}code(a,e){return this.children.map(s=>s.length()<=1?"":s.domNode.innerText).join(`
`).slice(a,a+e)}html(a,e){return`<pre>
${Yl(this.code(a,e))}
</pre>`}}class Lt extends yt{static TAB="  ";static register(){fe.register(Ja)}}class ko extends Pt{}ko.blotName="code";ko.tagName="CODE";Lt.blotName="code-block";Lt.className="ql-code-block";Lt.tagName="DIV";Ja.blotName="code-block-container";Ja.className="ql-code-block-container";Ja.tagName="DIV";Ja.allowedChildren=[Lt];Lt.allowedChildren=[aa,la,Qt];Lt.requiredContainer=Ja;const wo={scope:Le.BLOCK,whitelist:["rtl"]},Jr=new ca("direction","dir",wo),Xr=new sa("direction","ql-direction",wo),Qr=new Ia("direction","direction",wo),Kr={scope:Le.INLINE,whitelist:["serif","monospace"]},ei=new sa("font","ql-font",Kr);class Zx extends Ia{value(a){return super.value(a).replace(/["']/g,"")}}const ti=new Zx("font","font-family",Kr),ai=new sa("size","ql-size",{scope:Le.INLINE,whitelist:["small","large","huge"]}),si=new Ia("size","font-size",{scope:Le.INLINE,whitelist:["10px","18px","32px"]}),Gx=ya("quill:keyboard"),Jx=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey";class Wl extends xa{static match(a,e){return["altKey","ctrlKey","metaKey","shiftKey"].some(s=>!!e[s]!==a[s]&&e[s]!==null)?!1:e.key===a.key||e.key===a.which}constructor(a,e){super(a,e),this.bindings={},Object.keys(this.options.bindings).forEach(s=>{this.options.bindings[s]&&this.addBinding(this.options.bindings[s])}),this.addBinding({key:"Enter",shiftKey:null},this.handleEnter),this.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},()=>{}),/Firefox/i.test(navigator.userAgent)?(this.addBinding({key:"Backspace"},{collapsed:!0},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0},this.handleDelete)):(this.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},this.handleBackspace),this.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},this.handleDelete)),this.addBinding({key:"Backspace"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Delete"},{collapsed:!1},this.handleDeleteRange),this.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},this.handleBackspace),this.listen()}addBinding(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const l=Qx(a);if(l==null){Gx.warn("Attempted to add invalid keyboard binding",l);return}typeof e=="function"&&(e={handler:e}),typeof s=="function"&&(s={handler:s}),(Array.isArray(l.key)?l.key:[l.key]).forEach(r=>{const i={...l,key:r,...e,...s};this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)})}listen(){this.quill.root.addEventListener("keydown",a=>{if(a.defaultPrevented||a.isComposing||a.keyCode===229&&(a.key==="Enter"||a.key==="Backspace"))return;const l=(this.bindings[a.key]||[]).concat(this.bindings[a.which]||[]).filter(P=>Wl.match(a,P));if(l.length===0)return;const o=fe.find(a.target,!0);if(o&&o.scroll!==this.quill.scroll)return;const r=this.quill.getSelection();if(r==null||!this.quill.hasFocus())return;const[i,c]=this.quill.getLine(r.index),[u,g]=this.quill.getLeaf(r.index),[p,f]=r.length===0?[u,g]:this.quill.getLeaf(r.index+r.length),b=u instanceof Pl?u.value().slice(0,g):"",w=p instanceof Pl?p.value().slice(f):"",D={collapsed:r.length===0,empty:r.length===0&&i.length()<=1,format:this.quill.getFormat(r),line:i,offset:c,prefix:b,suffix:w,event:a};l.some(P=>{if(P.collapsed!=null&&P.collapsed!==D.collapsed||P.empty!=null&&P.empty!==D.empty||P.offset!=null&&P.offset!==D.offset)return!1;if(Array.isArray(P.format)){if(P.format.every(S=>D.format[S]==null))return!1}else if(typeof P.format=="object"&&!Object.keys(P.format).every(S=>P.format[S]===!0?D.format[S]!=null:P.format[S]===!1?D.format[S]==null:xo(P.format[S],D.format[S])))return!1;return P.prefix!=null&&!P.prefix.test(D.prefix)||P.suffix!=null&&!P.suffix.test(D.suffix)?!1:P.handler.call(this,r,D,P)!==!0})&&a.preventDefault()})}handleBackspace(a,e){const s=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(a.index===0||this.quill.getLength()<=1)return;let l={};const[o]=this.quill.getLine(a.index);let r=new Te().retain(a.index-s).delete(s);if(e.offset===0){const[i]=this.quill.getLine(a.index-1);if(i&&!(i.statics.blotName==="block"&&i.length()<=1)){const u=o.formats(),g=this.quill.getFormat(a.index-1,1);if(l=Nt.exports.AttributeMap.diff(u,g)||{},Object.keys(l).length>0){const p=new Te().retain(a.index+o.length()-2).retain(1,l);r=r.compose(p)}}}this.quill.updateContents(r,fe.sources.USER),this.quill.focus()}handleDelete(a,e){const s=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(a.index>=this.quill.getLength()-s)return;let l={};const[o]=this.quill.getLine(a.index);let r=new Te().retain(a.index).delete(s);if(e.offset>=o.length()-1){const[i]=this.quill.getLine(a.index+1);if(i){const c=o.formats(),u=this.quill.getFormat(a.index,1);l=Nt.exports.AttributeMap.diff(c,u)||{},Object.keys(l).length>0&&(r=r.retain(i.length()-1).retain(1,l))}}this.quill.updateContents(r,fe.sources.USER),this.quill.focus()}handleDeleteRange(a){Po({range:a,quill:this.quill}),this.quill.focus()}handleEnter(a,e){const s=Object.keys(e.format).reduce((o,r)=>(this.quill.scroll.query(r,Le.BLOCK)&&!Array.isArray(e.format[r])&&(o[r]=e.format[r]),o),{}),l=new Te().retain(a.index).delete(a.length).insert(`
`,s);this.quill.updateContents(l,fe.sources.USER),this.quill.setSelection(a.index+1,fe.sources.SILENT),this.quill.focus()}}const Xx={bindings:{bold:zn("bold"),italic:zn("italic"),underline:zn("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","+1",fe.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler(n,a){return a.collapsed&&a.offset!==0?!0:(this.quill.format("indent","-1",fe.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler(n,a){a.format.indent!=null?this.quill.format("indent","-1",fe.sources.USER):a.format.list!=null&&this.quill.format("list",!1,fe.sources.USER)}},"indent code-block":or(!0),"outdent code-block":or(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler(n){this.quill.deleteText(n.index-1,1,fe.sources.USER)}},tab:{key:"Tab",handler(n,a){if(a.format.table)return!0;this.quill.history.cutoff();const e=new Te().retain(n.index).delete(n.length).insert("	");return this.quill.updateContents(e,fe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index+1,fe.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler(){this.quill.format("blockquote",!1,fe.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler(n,a){const e={list:!1};a.format.indent&&(e.indent=!1),this.quill.formatLine(n.index,n.length,e,fe.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler(n){const[a,e]=this.quill.getLine(n.index),s={...a.formats(),list:"checked"},l=new Te().retain(n.index).insert(`
`,s).retain(a.length()-e-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,fe.sources.USER),this.quill.setSelection(n.index+1,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler(n,a){const[e,s]=this.quill.getLine(n.index),l=new Te().retain(n.index).insert(`
`,a.format).retain(e.length()-s-1).retain(1,{header:null});this.quill.updateContents(l,fe.sources.USER),this.quill.setSelection(n.index+1,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler(n){const a=this.quill.getModule("table");if(a){const[e,s,l,o]=a.getTable(n),r=Kx(e,s,l,o);if(r==null)return;let i=e.offset();if(r<0){const c=new Te().retain(i).insert(`
`);this.quill.updateContents(c,fe.sources.USER),this.quill.setSelection(n.index+1,n.length,fe.sources.SILENT)}else if(r>0){i+=e.length();const c=new Te().retain(i).insert(`
`);this.quill.updateContents(c,fe.sources.USER),this.quill.setSelection(i,fe.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler(n,a){const{event:e,line:s}=a,l=s.offset(this.quill.scroll);e.shiftKey?this.quill.setSelection(l-1,fe.sources.USER):this.quill.setSelection(l+s.length(),fe.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler(n,a){if(this.quill.scroll.query("list")==null)return!0;const{length:e}=a.prefix,[s,l]=this.quill.getLine(n.index);if(l>e)return!0;let o;switch(a.prefix.trim()){case"[]":case"[ ]":o="unchecked";break;case"[x]":o="checked";break;case"-":case"*":o="bullet";break;default:o="ordered"}this.quill.insertText(n.index," ",fe.sources.USER),this.quill.history.cutoff();const r=new Te().retain(n.index-l).delete(e+1).retain(s.length()-2-l).retain(1,{list:o});return this.quill.updateContents(r,fe.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(n.index-e,fe.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler(n){const[a,e]=this.quill.getLine(n.index);let s=2,l=a;for(;l!=null&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,s-=1,s<=0){const o=new Te().retain(n.index+a.length()-e-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(o,fe.sources.USER),this.quill.setSelection(n.index-1,fe.sources.SILENT),!1}return!0}},"embed left":_l("ArrowLeft",!1),"embed left shift":_l("ArrowLeft",!0),"embed right":_l("ArrowRight",!1),"embed right shift":_l("ArrowRight",!0),"table down":rr(!1),"table up":rr(!0)}};Wl.DEFAULTS=Xx;function or(n){return{key:"Tab",shiftKey:!n,format:{"code-block":!0},handler(a,e){let{event:s}=e;const l=this.quill.scroll.query("code-block"),{TAB:o}=l;if(a.length===0&&!s.shiftKey){this.quill.insertText(a.index,o,fe.sources.USER),this.quill.setSelection(a.index+o.length,fe.sources.SILENT);return}const r=a.length===0?this.quill.getLines(a.index,1):this.quill.getLines(a);let{index:i,length:c}=a;r.forEach((u,g)=>{n?(u.insertAt(0,o),g===0?i+=o.length:c+=o.length):u.domNode.textContent.startsWith(o)&&(u.deleteAt(0,o.length),g===0?i-=o.length:c-=o.length)}),this.quill.update(fe.sources.USER),this.quill.setSelection(i,c,fe.sources.SILENT)}}}function _l(n,a){return{key:n,shiftKey:a,altKey:null,[n==="ArrowLeft"?"prefix":"suffix"]:/^$/,handler(s){let{index:l}=s;n==="ArrowRight"&&(l+=s.length+1);const[o]=this.quill.getLeaf(l);return o instanceof Rt?(n==="ArrowLeft"?a?this.quill.setSelection(s.index-1,s.length+1,fe.sources.USER):this.quill.setSelection(s.index-1,fe.sources.USER):a?this.quill.setSelection(s.index,s.length+1,fe.sources.USER):this.quill.setSelection(s.index+s.length+1,fe.sources.USER),!1):!0}}}function zn(n){return{key:n[0],shortKey:!0,handler(a,e){this.quill.format(n,!e.format[n],fe.sources.USER)}}}function rr(n){return{key:n?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler(a,e){const s=n?"prev":"next",l=e.line,o=l.parent[s];if(o!=null){if(o.statics.blotName==="table-row"){let r=o.children.head,i=l;for(;i.prev!=null;)i=i.prev,r=r.next;const c=r.offset(this.quill.scroll)+Math.min(e.offset,r.length()-1);this.quill.setSelection(c,0,fe.sources.USER)}}else{const r=l.table()[s];r!=null&&(n?this.quill.setSelection(r.offset(this.quill.scroll)+r.length()-1,0,fe.sources.USER):this.quill.setSelection(r.offset(this.quill.scroll),0,fe.sources.USER))}return!1}}}function Qx(n){if(typeof n=="string"||typeof n=="number")n={key:n};else if(typeof n=="object")n=ms(n);else return null;return n.shortKey&&(n[Jx]=n.shortKey,delete n.shortKey),n}function Po(n){let{quill:a,range:e}=n;const s=a.getLines(e);let l={};if(s.length>1){const o=s[0].formats(),r=s[s.length-1].formats();l=Nt.exports.AttributeMap.diff(r,o)||{}}a.deleteText(e,fe.sources.USER),Object.keys(l).length>0&&a.formatLine(e.index,1,l,fe.sources.USER),a.setSelection(e.index,fe.sources.SILENT)}function Kx(n,a,e,s){return a.prev==null&&a.next==null?e.prev==null&&e.next==null?s===0?-1:1:e.prev==null?-1:1:a.prev==null?-1:a.next==null?1:null}const eu=/font-weight:\s*normal/,tu=["P","OL","UL"],ir=n=>n&&tu.includes(n.tagName),au=n=>{Array.from(n.querySelectorAll("br")).filter(a=>ir(a.previousElementSibling)&&ir(a.nextElementSibling)).forEach(a=>{a.parentNode?.removeChild(a)})},su=n=>{Array.from(n.querySelectorAll('b[style*="font-weight"]')).filter(a=>a.getAttribute("style")?.match(eu)).forEach(a=>{const e=n.createDocumentFragment();e.append(...a.childNodes),a.parentNode?.replaceChild(e,a)})};function lu(n){n.querySelector('[id^="docs-internal-guid-"]')&&(su(n),au(n))}const nu=/\bmso-list:[^;]*ignore/i,ou=/\bmso-list:[^;]*\bl(\d+)/i,ru=/\bmso-list:[^;]*\blevel(\d+)/i,iu=(n,a)=>{const e=n.getAttribute("style"),s=e?.match(ou);if(!s)return null;const l=Number(s[1]),o=e?.match(ru),r=o?Number(o[1]):1,i=new RegExp(`@list l${l}:level${r}\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)`,"i"),c=a.match(i),u=c&&c[1]==="bullet"?"bullet":"ordered";return{id:l,indent:r,type:u,element:n}},cu=n=>{const a=Array.from(n.querySelectorAll("[style*=mso-list]")),e=[],s=[];a.forEach(r=>{(r.getAttribute("style")||"").match(nu)?e.push(r):s.push(r)}),e.forEach(r=>r.parentNode?.removeChild(r));const l=n.documentElement.innerHTML,o=s.map(r=>iu(r,l)).filter(r=>r);for(;o.length;){const r=[];let i=o.shift();for(;i;)r.push(i),i=o.length&&o[0]?.element===i.element.nextElementSibling&&o[0].id===i.id?o.shift():null;const c=document.createElement("ul");r.forEach(p=>{const f=document.createElement("li");f.setAttribute("data-list",p.type),p.indent>1&&f.setAttribute("class",`ql-indent-${p.indent-1}`),f.innerHTML=p.element.innerHTML,c.appendChild(f)});const u=r[0]?.element,{parentNode:g}=u??{};u&&g?.replaceChild(c,u),r.slice(1).forEach(p=>{let{element:f}=p;g?.removeChild(f)})}};function xu(n){n.documentElement.getAttribute("xmlns:w")==="urn:schemas-microsoft-com:office:word"&&cu(n)}const uu=[xu,lu],du=n=>{n.documentElement&&uu.forEach(a=>{a(n)})},mu=ya("quill:clipboard"),pu=[[Node.TEXT_NODE,Du],[Node.TEXT_NODE,xr],["br",_u],[Node.ELEMENT_NODE,xr],[Node.ELEMENT_NODE,Eu],[Node.ELEMENT_NODE,vu],[Node.ELEMENT_NODE,Au],["li",bu],["ol, ul",Bu],["pre",Cu],["tr",Fu],["b",jn("bold")],["i",jn("italic")],["strike",jn("strike")],["style",yu]],fu=[Yx,Jr].reduce((n,a)=>(n[a.keyName]=a,n),{}),cr=[Zr,Do,Fo,Qr,ti,si].reduce((n,a)=>(n[a.keyName]=a,n),{});class gu extends xa{static DEFAULTS={matchers:[]};constructor(a,e){super(a,e),this.quill.root.addEventListener("copy",s=>this.onCaptureCopy(s,!1)),this.quill.root.addEventListener("cut",s=>this.onCaptureCopy(s,!0)),this.quill.root.addEventListener("paste",this.onCapturePaste.bind(this)),this.matchers=[],pu.concat(this.options.matchers??[]).forEach(s=>{let[l,o]=s;this.addMatcher(l,o)})}addMatcher(a,e){this.matchers.push([a,e])}convert(a){let{html:e,text:s}=a,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(l[Lt.blotName])return new Te().insert(s||"",{[Lt.blotName]:l[Lt.blotName]});if(!e)return new Te().insert(s||"",l);const o=this.convertHTML(e);return Xs(o,`
`)&&(o.ops[o.ops.length-1].attributes==null||l.table)?o.compose(new Te().retain(o.length()-1).delete(1)):o}normalizeHTML(a){du(a)}convertHTML(a){const e=new DOMParser().parseFromString(a,"text/html");this.normalizeHTML(e);const s=e.body,l=new WeakMap,[o,r]=this.prepareMatching(s,l);return To(this.quill.scroll,s,o,r,l)}dangerouslyPasteHTML(a,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fe.sources.API;if(typeof a=="string"){const l=this.convert({html:a,text:""});this.quill.setContents(l,e),this.quill.setSelection(0,fe.sources.SILENT)}else{const l=this.convert({html:e,text:""});this.quill.updateContents(new Te().retain(a).concat(l),s),this.quill.setSelection(a+l.length(),fe.sources.SILENT)}}onCaptureCopy(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(a.defaultPrevented)return;a.preventDefault();const[s]=this.quill.selection.getRange();if(s==null)return;const{html:l,text:o}=this.onCopy(s,e);a.clipboardData?.setData("text/plain",o),a.clipboardData?.setData("text/html",l),e&&Po({range:s,quill:this.quill})}normalizeURIList(a){return a.split(/\r?\n/).filter(e=>e[0]!=="#").join(`
`)}onCapturePaste(a){if(a.defaultPrevented||!this.quill.isEnabled())return;a.preventDefault();const e=this.quill.getSelection(!0);if(e==null)return;const s=a.clipboardData?.getData("text/html");let l=a.clipboardData?.getData("text/plain");if(!s&&!l){const r=a.clipboardData?.getData("text/uri-list");r&&(l=this.normalizeURIList(r))}const o=Array.from(a.clipboardData?.files||[]);if(!s&&o.length>0){this.quill.uploader.upload(e,o);return}if(s&&o.length>0){const r=new DOMParser().parseFromString(s,"text/html");if(r.body.childElementCount===1&&r.body.firstElementChild?.tagName==="IMG"){this.quill.uploader.upload(e,o);return}}this.onPaste(e,{html:s,text:l})}onCopy(a){const e=this.quill.getText(a);return{html:this.quill.getSemanticHTML(a),text:e}}onPaste(a,e){let{text:s,html:l}=e;const o=this.quill.getFormat(a.index),r=this.convert({text:s,html:l},o);mu.log("onPaste",r,{text:s,html:l});const i=new Te().retain(a.index).delete(a.length).concat(r);this.quill.updateContents(i,fe.sources.USER),this.quill.setSelection(i.length()-a.length,fe.sources.SILENT),this.quill.scrollSelectionIntoView()}prepareMatching(a,e){const s=[],l=[];return this.matchers.forEach(o=>{const[r,i]=o;switch(r){case Node.TEXT_NODE:l.push(i);break;case Node.ELEMENT_NODE:s.push(i);break;default:Array.from(a.querySelectorAll(r)).forEach(c=>{e.has(c)?e.get(c)?.push(i):e.set(c,[i])});break}}),[s,l]}}function Xa(n,a,e,s){return s.query(a)?n.reduce((l,o)=>{if(!o.insert)return l;if(o.attributes&&o.attributes[a])return l.push(o);const r=e?{[a]:e}:{};return l.insert(o.insert,{...r,...o.attributes})},new Te):n}function Xs(n,a){let e="";for(let s=n.ops.length-1;s>=0&&e.length<a.length;--s){const l=n.ops[s];if(typeof l.insert!="string")break;e=l.insert+e}return e.slice(-1*a.length)===a}function Da(n,a){if(!(n instanceof Element))return!1;const e=a.query(n);return e&&e.prototype instanceof Rt?!1:["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(n.tagName.toLowerCase())}function hu(n,a){return n.previousElementSibling&&n.nextElementSibling&&!Da(n.previousElementSibling,a)&&!Da(n.nextElementSibling,a)}const Cl=new WeakMap;function li(n){return n==null?!1:(Cl.has(n)||(n.tagName==="PRE"?Cl.set(n,!0):Cl.set(n,li(n.parentNode))),Cl.get(n))}function To(n,a,e,s,l){return a.nodeType===a.TEXT_NODE?s.reduce((o,r)=>r(a,o,n),new Te):a.nodeType===a.ELEMENT_NODE?Array.from(a.childNodes||[]).reduce((o,r)=>{let i=To(n,r,e,s,l);return r.nodeType===a.ELEMENT_NODE&&(i=e.reduce((c,u)=>u(r,c,n),i),i=(l.get(r)||[]).reduce((c,u)=>u(r,c,n),i)),o.concat(i)},new Te):new Te}function jn(n){return(a,e,s)=>Xa(e,n,!0,s)}function vu(n,a,e){const s=ca.keys(n),l=sa.keys(n),o=Ia.keys(n),r={};return s.concat(l).concat(o).forEach(i=>{let c=e.query(i,Le.ATTRIBUTE);c!=null&&(r[c.attrName]=c.value(n),r[c.attrName])||(c=fu[i],c!=null&&(c.attrName===i||c.keyName===i)&&(r[c.attrName]=c.value(n)||void 0),c=cr[i],c!=null&&(c.attrName===i||c.keyName===i)&&(c=cr[i],r[c.attrName]=c.value(n)||void 0))}),Object.entries(r).reduce((i,c)=>{let[u,g]=c;return Xa(i,u,g,e)},a)}function Eu(n,a,e){const s=e.query(n);if(s==null)return a;if(s.prototype instanceof Rt){const l={},o=s.value(n);if(o!=null)return l[s.blotName]=o,new Te().insert(l,s.formats(n,e))}else if(s.prototype instanceof js&&!Xs(a,`
`)&&a.insert(`
`),"blotName"in s&&"formats"in s&&typeof s.formats=="function")return Xa(a,s.blotName,s.formats(n,e),e);return a}function _u(n,a){return Xs(a,`
`)||a.insert(`
`),a}function Cu(n,a,e){const s=e.query("code-block"),l=s&&"formats"in s&&typeof s.formats=="function"?s.formats(n,e):!0;return Xa(a,"code-block",l,e)}function yu(){return new Te}function bu(n,a,e){const s=e.query(n);if(s==null||s.blotName!=="list"||!Xs(a,`
`))return a;let l=-1,o=n.parentNode;for(;o!=null;)["OL","UL"].includes(o.tagName)&&(l+=1),o=o.parentNode;return l<=0?a:a.reduce((r,i)=>i.insert?i.attributes&&typeof i.attributes.indent=="number"?r.push(i):r.insert(i.insert,{indent:l,...i.attributes||{}}):r,new Te)}function Bu(n,a,e){const s=n;let l=s.tagName==="OL"?"ordered":"bullet";const o=s.getAttribute("data-checked");return o&&(l=o==="true"?"checked":"unchecked"),Xa(a,"list",l,e)}function xr(n,a,e){if(!Xs(a,`
`)){if(Da(n,e)&&(n.childNodes.length>0||n instanceof HTMLParagraphElement))return a.insert(`
`);if(a.length()>0&&n.nextSibling){let s=n.nextSibling;for(;s!=null;){if(Da(s,e))return a.insert(`
`);const l=e.query(s);if(l&&l.prototype instanceof Yt)return a.insert(`
`);s=s.firstChild}}}return a}function Au(n,a,e){const s={},l=n.style||{};return l.fontStyle==="italic"&&(s.italic=!0),l.textDecoration==="underline"&&(s.underline=!0),l.textDecoration==="line-through"&&(s.strike=!0),(l.fontWeight?.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(s.bold=!0),a=Object.entries(s).reduce((o,r)=>{let[i,c]=r;return Xa(o,i,c,e)},a),parseFloat(l.textIndent||0)>0?new Te().insert("	").concat(a):a}function Fu(n,a,e){const s=n.parentElement?.tagName==="TABLE"?n.parentElement:n.parentElement?.parentElement;if(s!=null){const o=Array.from(s.querySelectorAll("tr")).indexOf(n)+1;return Xa(a,"table",o,e)}return a}function Du(n,a,e){let s=n.data;if(n.parentElement?.tagName==="O:P")return a.insert(s.trim());if(!li(n)){if(s.trim().length===0&&s.includes(`
`)&&!hu(n,e))return a;s=s.replace(/[^\S\u00a0]/g," "),s=s.replace(/ {2,}/g," "),(n.previousSibling==null&&n.parentElement!=null&&Da(n.parentElement,e)||n.previousSibling instanceof Element&&Da(n.previousSibling,e))&&(s=s.replace(/^ /,"")),(n.nextSibling==null&&n.parentElement!=null&&Da(n.parentElement,e)||n.nextSibling instanceof Element&&Da(n.nextSibling,e))&&(s=s.replace(/ $/,"")),s=s.replaceAll("\xA0"," ")}return a.insert(s)}class ku extends xa{static DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};lastRecorded=0;ignoreChange=!1;stack={undo:[],redo:[]};currentRange=null;constructor(a,e){super(a,e),this.quill.on(fe.events.EDITOR_CHANGE,(s,l,o,r)=>{s===fe.events.SELECTION_CHANGE?l&&r!==fe.sources.SILENT&&(this.currentRange=l):s===fe.events.TEXT_CHANGE&&(this.ignoreChange||(!this.options.userOnly||r===fe.sources.USER?this.record(l,o):this.transform(l)),this.currentRange=so(this.currentRange,l))}),this.quill.keyboard.addBinding({key:"z",shortKey:!0},this.undo.bind(this)),this.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},this.redo.bind(this)),/Win/i.test(navigator.platform)&&this.quill.keyboard.addBinding({key:"y",shortKey:!0},this.redo.bind(this)),this.quill.root.addEventListener("beforeinput",s=>{s.inputType==="historyUndo"?(this.undo(),s.preventDefault()):s.inputType==="historyRedo"&&(this.redo(),s.preventDefault())})}change(a,e){if(this.stack[a].length===0)return;const s=this.stack[a].pop();if(!s)return;const l=this.quill.getContents(),o=s.delta.invert(l);this.stack[e].push({delta:o,range:so(s.range,o)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(s.delta,fe.sources.USER),this.ignoreChange=!1,this.restoreSelection(s)}clear(){this.stack={undo:[],redo:[]}}cutoff(){this.lastRecorded=0}record(a,e){if(a.ops.length===0)return;this.stack.redo=[];let s=a.invert(e),l=this.currentRange;const o=Date.now();if(this.lastRecorded+this.options.delay>o&&this.stack.undo.length>0){const r=this.stack.undo.pop();r&&(s=s.compose(r.delta),l=r.range)}else this.lastRecorded=o;s.length()!==0&&(this.stack.undo.push({delta:s,range:l}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}redo(){this.change("redo","undo")}transform(a){ur(this.stack.undo,a),ur(this.stack.redo,a)}undo(){this.change("undo","redo")}restoreSelection(a){if(a.range)this.quill.setSelection(a.range,fe.sources.USER);else{const e=Pu(this.quill.scroll,a.delta);this.quill.setSelection(e,fe.sources.USER)}}}function ur(n,a){let e=a;for(let s=n.length-1;s>=0;s-=1){const l=n[s];n[s]={delta:e.transform(l.delta,!0),range:l.range&&so(l.range,e)},e=l.delta.transform(e),n[s].delta.length()===0&&n.splice(s,1)}}function wu(n,a){const e=a.ops[a.ops.length-1];return e==null?!1:e.insert!=null?typeof e.insert=="string"&&e.insert.endsWith(`
`):e.attributes!=null?Object.keys(e.attributes).some(s=>n.query(s,Le.BLOCK)!=null):!1}function Pu(n,a){const e=a.reduce((l,o)=>l+(o.delete||0),0);let s=a.length()-e;return wu(n,a)&&(s-=1),s}function so(n,a){if(!n)return n;const e=a.transformPosition(n.index),s=a.transformPosition(n.index+n.length);return{index:e,length:s-e}}class ni extends xa{constructor(a,e){super(a,e),a.root.addEventListener("drop",s=>{s.preventDefault();let l=null;if(document.caretRangeFromPoint)l=document.caretRangeFromPoint(s.clientX,s.clientY);else if(document.caretPositionFromPoint){const r=document.caretPositionFromPoint(s.clientX,s.clientY);l=document.createRange(),l.setStart(r.offsetNode,r.offset),l.setEnd(r.offsetNode,r.offset)}const o=l&&a.selection.normalizeNative(l);if(o){const r=a.selection.normalizedToRange(o);s.dataTransfer?.files&&this.upload(r,s.dataTransfer.files)}})}upload(a,e){const s=[];Array.from(e).forEach(l=>{l&&this.options.mimetypes?.includes(l.type)&&s.push(l)}),s.length>0&&this.options.handler.call(this,a,s)}}ni.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler(n,a){if(!this.quill.scroll.query("image"))return;const e=a.map(s=>new Promise(l=>{const o=new FileReader;o.onload=()=>{l(o.result)},o.readAsDataURL(s)}));Promise.all(e).then(s=>{const l=s.reduce((o,r)=>o.insert({image:r}),new Te().retain(n.index).delete(n.length));this.quill.updateContents(l,we.sources.USER),this.quill.setSelection(n.index+s.length,we.sources.SILENT)})}};const Tu=["insertText","insertReplacementText"];class Lu extends xa{constructor(a,e){super(a,e),a.root.addEventListener("beforeinput",s=>{this.handleBeforeInput(s)}),/Android/i.test(navigator.userAgent)||a.on(fe.events.COMPOSITION_BEFORE_START,()=>{this.handleCompositionStart()})}deleteRange(a){Po({range:a,quill:this.quill})}replaceText(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(a.length===0)return!1;if(e){const s=this.quill.getFormat(a.index,1);this.deleteRange(a),this.quill.updateContents(new Te().retain(a.index).insert(e,s),fe.sources.USER)}else this.deleteRange(a);return this.quill.setSelection(a.index+e.length,0,fe.sources.SILENT),!0}handleBeforeInput(a){if(this.quill.composition.isComposing||a.defaultPrevented||!Tu.includes(a.inputType))return;const e=a.getTargetRanges?a.getTargetRanges()[0]:null;if(!e||e.collapsed===!0)return;const s=Su(a);if(s==null)return;const l=this.quill.selection.normalizeNative(e),o=l?this.quill.selection.normalizedToRange(l):null;o&&this.replaceText(o,s)&&a.preventDefault()}handleCompositionStart(){const a=this.quill.getSelection();a&&this.replaceText(a)}}function Su(n){return typeof n.data=="string"?n.data:n.dataTransfer?.types.includes("text/plain")?n.dataTransfer.getData("text/plain"):null}const Iu=/Mac/i.test(navigator.platform),$u=100,Nu=n=>!!(n.key==="ArrowLeft"||n.key==="ArrowRight"||n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="Home"||Iu&&n.key==="a"&&n.ctrlKey===!0);class Ou extends xa{isListening=!1;selectionChangeDeadline=0;constructor(a,e){super(a,e),this.handleArrowKeys(),this.handleNavigationShortcuts()}handleArrowKeys(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler(a,e){let{line:s,event:l}=e;if(!(s instanceof ta)||!s.uiNode)return!0;const o=getComputedStyle(s.domNode).direction==="rtl";return o&&l.key!=="ArrowRight"||!o&&l.key!=="ArrowLeft"?!0:(this.quill.setSelection(a.index-1,a.length+(l.shiftKey?1:0),fe.sources.USER),!1)}})}handleNavigationShortcuts(){this.quill.root.addEventListener("keydown",a=>{!a.defaultPrevented&&Nu(a)&&this.ensureListeningToSelectionChange()})}ensureListeningToSelectionChange(){if(this.selectionChangeDeadline=Date.now()+$u,this.isListening)return;this.isListening=!0;const a=()=>{this.isListening=!1,Date.now()<=this.selectionChangeDeadline&&this.handleSelectionChange()};document.addEventListener("selectionchange",a,{once:!0})}handleSelectionChange(){const a=document.getSelection();if(!a)return;const e=a.getRangeAt(0);if(e.collapsed!==!0||e.startOffset!==0)return;const s=this.quill.scroll.find(e.startContainer);if(!(s instanceof ta)||!s.uiNode)return;const l=document.createRange();l.setStartAfter(s.uiNode),l.setEndAfter(s.uiNode),a.removeAllRanges(),a.addRange(l)}}fe.register({"blots/block":yt,"blots/block/embed":Yt,"blots/break":la,"blots/container":Ga,"blots/cursor":Qt,"blots/embed":Bo,"blots/inline":Pt,"blots/scroll":jx,"blots/text":aa,"modules/clipboard":gu,"modules/history":ku,"modules/keyboard":Wl,"modules/uploader":ni,"modules/input":Lu,"modules/uiNode":Ou});class Mu extends sa{add(a,e){let s=0;if(e==="+1"||e==="-1"){const l=this.value(a)||0;s=e==="+1"?l+1:l-1}else typeof e=="number"&&(s=e);return s===0?(this.remove(a),!0):super.add(a,s.toString())}canAdd(a,e){return super.canAdd(a,e)||super.canAdd(a,parseInt(e,10))}value(a){return parseInt(super.value(a),10)||void 0}}const Vu=new Mu("indent","ql-indent",{scope:Le.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});class Ru extends yt{static blotName="blockquote";static tagName="blockquote"}class qu extends yt{static blotName="header";static tagName=["H1","H2","H3","H4","H5","H6"];static formats(a){return this.tagName.indexOf(a.tagName)+1}}class Qs extends Ga{}Qs.blotName="list-container";Qs.tagName="OL";class Ks extends yt{static create(a){const e=super.create();return e.setAttribute("data-list",a),e}static formats(a){return a.getAttribute("data-list")||void 0}static register(){fe.register(Qs)}constructor(a,e){super(a,e);const s=e.ownerDocument.createElement("span"),l=o=>{if(!a.isEnabled())return;const r=this.statics.formats(e,a);r==="checked"?(this.format("list","unchecked"),o.preventDefault()):r==="unchecked"&&(this.format("list","checked"),o.preventDefault())};s.addEventListener("mousedown",l),s.addEventListener("touchstart",l),this.attachUI(s)}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-list",e):super.format(a,e)}}Ks.blotName="list";Ks.tagName="LI";Qs.allowedChildren=[Ks];Ks.requiredContainer=Qs;class Lo extends Pt{static blotName="bold";static tagName=["STRONG","B"];static create(){return super.create()}static formats(){return!0}optimize(a){super.optimize(a),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}class Uu extends Lo{static blotName="italic";static tagName=["EM","I"]}class Sl extends Pt{static blotName="link";static tagName="A";static SANITIZED_URL="about:blank";static PROTOCOL_WHITELIST=["http","https","mailto","tel","sms"];static create(a){const e=super.create(a);return e.setAttribute("href",this.sanitize(a)),e.setAttribute("rel","noopener noreferrer"),e.setAttribute("target","_blank"),e}static formats(a){return a.getAttribute("href")}static sanitize(a){return oi(a,this.PROTOCOL_WHITELIST)?a:this.SANITIZED_URL}format(a,e){a!==this.statics.blotName||!e?super.format(a,e):this.domNode.setAttribute("href",this.constructor.sanitize(e))}}function oi(n,a){const e=document.createElement("a");e.href=n;const s=e.href.slice(0,e.href.indexOf(":"));return a.indexOf(s)>-1}class zu extends Pt{static blotName="script";static tagName=["SUB","SUP"];static create(a){return a==="super"?document.createElement("sup"):a==="sub"?document.createElement("sub"):super.create(a)}static formats(a){if(a.tagName==="SUB")return"sub";if(a.tagName==="SUP")return"super"}}class ju extends Lo{static blotName="strike";static tagName=["S","STRIKE"]}class Yu extends Pt{static blotName="underline";static tagName="U"}class Wu extends Bo{static blotName="formula";static className="ql-formula";static tagName="SPAN";static create(a){if(window.katex==null)throw new Error("Formula module requires KaTeX.");const e=super.create(a);return typeof a=="string"&&(window.katex.render(a,e,{throwOnError:!1,errorColor:"#f00"}),e.setAttribute("data-value",a)),e}static value(a){return a.getAttribute("data-value")}html(){const{formula:a}=this.value();return`<span>${a}</span>`}}const dr=["alt","height","width"];class Hu extends Rt{static blotName="image";static tagName="IMG";static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("src",this.sanitize(a)),e}static formats(a){return dr.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static match(a){return/\.(jpe?g|gif|png)$/.test(a)||/^data:image\/.+;base64/.test(a)}static sanitize(a){return oi(a,["http","https","data"])?a:"//:0"}static value(a){return a.getAttribute("src")}format(a,e){dr.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}}const mr=["height","width"];class Zu extends Yt{static blotName="video";static className="ql-video";static tagName="IFRAME";static create(a){const e=super.create(a);return e.setAttribute("frameborder","0"),e.setAttribute("allowfullscreen","true"),e.setAttribute("src",this.sanitize(a)),e}static formats(a){return mr.reduce((e,s)=>(a.hasAttribute(s)&&(e[s]=a.getAttribute(s)),e),{})}static sanitize(a){return Sl.sanitize(a)}static value(a){return a.getAttribute("src")}format(a,e){mr.indexOf(a)>-1?e?this.domNode.setAttribute(a,e):this.domNode.removeAttribute(a):super.format(a,e)}html(){const{video:a}=this.value();return`<a href="${a}">${a}</a>`}}const Vs=new sa("code-token","hljs",{scope:Le.INLINE});class va extends Pt{static formats(a,e){for(;a!=null&&a!==e.domNode;){if(a.classList&&a.classList.contains(Lt.className))return super.formats(a,e);a=a.parentNode}}constructor(a,e,s){super(a,e,s),Vs.add(this.domNode,s)}format(a,e){a!==va.blotName?super.format(a,e):e?Vs.add(this.domNode,e):(Vs.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}optimize(){super.optimize(...arguments),Vs.value(this.domNode)||this.unwrap()}}va.blotName="code-token";va.className="ql-token";class jt extends Lt{static create(a){const e=super.create(a);return typeof a=="string"&&e.setAttribute("data-language",a),e}static formats(a){return a.getAttribute("data-language")||"plain"}static register(){}format(a,e){a===this.statics.blotName&&e?this.domNode.setAttribute("data-language",e):super.format(a,e)}replaceWith(a,e){return this.formatAt(0,this.length(),va.blotName,!1),super.replaceWith(a,e)}}class Us extends Ja{attach(){super.attach(),this.forceNext=!1,this.scroll.emitMount(this)}format(a,e){a===jt.blotName&&(this.forceNext=!0,this.children.forEach(s=>{s.format(a,e)}))}formatAt(a,e,s,l){s===jt.blotName&&(this.forceNext=!0),super.formatAt(a,e,s,l)}highlight(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.children.head==null)return;const l=`${Array.from(this.domNode.childNodes).filter(r=>r!==this.uiNode).map(r=>r.textContent).join(`
`)}
`,o=jt.formats(this.children.head.domNode);if(e||this.forceNext||this.cachedText!==l){if(l.trim().length>0||this.cachedText==null){const r=this.children.reduce((c,u)=>c.concat(jr(u,!1)),new Te),i=a(l,o);r.diff(i).reduce((c,u)=>{let{retain:g,attributes:p}=u;return g?(p&&Object.keys(p).forEach(f=>{[jt.blotName,va.blotName].includes(f)&&this.formatAt(c,g,f,p[f])}),c+g):c},0)}this.cachedText=l,this.forceNext=!1}}html(a,e){const[s]=this.children.find(a);return`<pre data-language="${s?jt.formats(s.domNode):"plain"}">
${Yl(this.code(a,e))}
</pre>`}optimize(a){if(super.optimize(a),this.parent!=null&&this.children.head!=null&&this.uiNode!=null){const e=jt.formats(this.children.head.domNode);e!==this.uiNode.value&&(this.uiNode.value=e)}}}Us.allowedChildren=[jt];jt.requiredContainer=Us;jt.allowedChildren=[va,Qt,aa,la];const Gu=(n,a,e)=>{if(typeof n.versionString=="string"){const s=n.versionString.split(".")[0];if(parseInt(s,10)>=11)return n.highlight(e,{language:a}).value}return n.highlight(a,e).value};class ri extends xa{static register(){fe.register(va,!0),fe.register(jt,!0),fe.register(Us,!0)}constructor(a,e){if(super(a,e),this.options.hljs==null)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");this.languages=this.options.languages.reduce((s,l)=>{let{key:o}=l;return s[o]=!0,s},{}),this.highlightBlot=this.highlightBlot.bind(this),this.initListener(),this.initTimer()}initListener(){this.quill.on(fe.events.SCROLL_BLOT_MOUNT,a=>{if(!(a instanceof Us))return;const e=this.quill.root.ownerDocument.createElement("select");this.options.languages.forEach(s=>{let{key:l,label:o}=s;const r=e.ownerDocument.createElement("option");r.textContent=o,r.setAttribute("value",l),e.appendChild(r)}),e.addEventListener("change",()=>{a.format(jt.blotName,e.value),this.quill.root.focus(),this.highlight(a,!0)}),a.uiNode==null&&(a.attachUI(e),a.children.head&&(e.value=jt.formats(a.children.head.domNode)))})}initTimer(){let a=null;this.quill.on(fe.events.SCROLL_OPTIMIZE,()=>{a&&clearTimeout(a),a=setTimeout(()=>{this.highlight(),a=null},this.options.interval)})}highlight(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(this.quill.selection.composing)return;this.quill.update(fe.sources.USER);const s=this.quill.getSelection();(a==null?this.quill.scroll.descendants(Us):[a]).forEach(o=>{o.highlight(this.highlightBlot,e)}),this.quill.update(fe.sources.SILENT),s!=null&&this.quill.setSelection(s,fe.sources.SILENT)}highlightBlot(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"plain";if(e=this.languages[e]?e:"plain",e==="plain")return Yl(a).split(`
`).reduce((l,o,r)=>(r!==0&&l.insert(`
`,{[Lt.blotName]:e}),l.insert(o)),new Te);const s=this.quill.root.ownerDocument.createElement("div");return s.classList.add(Lt.className),s.innerHTML=Gu(this.options.hljs,e,a),To(this.quill.scroll,s,[(l,o)=>{const r=Vs.value(l);return r?o.compose(new Te().retain(o.length(),{[va.blotName]:r})):o}],[(l,o)=>l.data.split(`
`).reduce((r,i,c)=>(c!==0&&r.insert(`
`,{[Lt.blotName]:e}),r.insert(i)),o)],new WeakMap)}}ri.DEFAULTS={hljs:(()=>window.hljs)(),interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};class Kt extends yt{static blotName="table";static tagName="TD";static create(a){const e=super.create();return a?e.setAttribute("data-row",a):e.setAttribute("data-row",So()),e}static formats(a){if(a.hasAttribute("data-row"))return a.getAttribute("data-row")}cellOffset(){return this.parent?this.parent.children.indexOf(this):-1}format(a,e){a===Kt.blotName&&e?this.domNode.setAttribute("data-row",e):super.format(a,e)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}class Wa extends Ga{static blotName="table-row";static tagName="TR";checkMerge(){if(super.checkMerge()&&this.next.children.head!=null){const a=this.children.head.formats(),e=this.children.tail.formats(),s=this.next.children.head.formats(),l=this.next.children.tail.formats();return a.table===e.table&&a.table===s.table&&a.table===l.table}return!1}optimize(a){super.optimize(a),this.children.forEach(e=>{if(e.next==null)return;const s=e.formats(),l=e.next.formats();if(s.table!==l.table){const o=this.splitAfter(e);o&&o.optimize(),this.prev&&this.prev.optimize()}})}rowOffset(){return this.parent?this.parent.children.indexOf(this):-1}table(){return this.parent&&this.parent.parent}}class Pa extends Ga{static blotName="table-body";static tagName="TBODY"}class Il extends Ga{static blotName="table-container";static tagName="TABLE";balanceCells(){const a=this.descendants(Wa),e=a.reduce((s,l)=>Math.max(l.children.length,s),0);a.forEach(s=>{new Array(e-s.children.length).fill(0).forEach(()=>{let l;s.children.head!=null&&(l=Kt.formats(s.children.head.domNode));const o=this.scroll.create(Kt.blotName,l);s.appendChild(o),o.optimize()})})}cells(a){return this.rows().map(e=>e.children.at(a))}deleteColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a);l?.remove()})}insertColumn(a){const[e]=this.descendant(Pa);e==null||e.children.head==null||e.children.forEach(s=>{const l=s.children.at(a),o=Kt.formats(s.children.head.domNode),r=this.scroll.create(Kt.blotName,o);s.insertBefore(r,l)})}insertRow(a){const[e]=this.descendant(Pa);if(e==null||e.children.head==null)return;const s=So(),l=this.scroll.create(Wa.blotName);e.children.head.children.forEach(()=>{const r=this.scroll.create(Kt.blotName,s);l.appendChild(r)});const o=e.children.at(a);e.insertBefore(l,o)}rows(){const a=this.children.head;return a==null?[]:a.children.map(e=>e)}}Il.allowedChildren=[Pa];Pa.requiredContainer=Il;Pa.allowedChildren=[Wa];Wa.requiredContainer=Pa;Wa.allowedChildren=[Kt];Kt.requiredContainer=Wa;function So(){return`row-${Math.random().toString(36).slice(2,6)}`}class Ju extends xa{static register(){fe.register(Kt),fe.register(Wa),fe.register(Pa),fe.register(Il)}constructor(){super(...arguments),this.listenBalanceCells()}balanceTables(){this.quill.scroll.descendants(Il).forEach(a=>{a.balanceCells()})}deleteColumn(){const[a,,e]=this.getTable();e!=null&&(a.deleteColumn(e.cellOffset()),this.quill.update(fe.sources.USER))}deleteRow(){const[,a]=this.getTable();a!=null&&(a.remove(),this.quill.update(fe.sources.USER))}deleteTable(){const[a]=this.getTable();if(a==null)return;const e=a.offset();a.remove(),this.quill.update(fe.sources.USER),this.quill.setSelection(e,fe.sources.SILENT)}getTable(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.quill.getSelection();if(a==null)return[null,null,null,-1];const[e,s]=this.quill.getLine(a.index);if(e==null||e.statics.blotName!==Kt.blotName)return[null,null,null,-1];const l=e.parent;return[l.parent.parent,l,e,s]}insertColumn(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const r=o.cellOffset();s.insertColumn(r+a),this.quill.update(fe.sources.USER);let i=l.rowOffset();a===0&&(i+=1),this.quill.setSelection(e.index+i,e.length,fe.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(a){const e=this.quill.getSelection();if(!e)return;const[s,l,o]=this.getTable(e);if(o==null)return;const r=l.rowOffset();s.insertRow(r+a),this.quill.update(fe.sources.USER),a>0?this.quill.setSelection(e,fe.sources.SILENT):this.quill.setSelection(e.index+l.children.length,e.length,fe.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertTable(a,e){const s=this.quill.getSelection();if(s==null)return;const l=new Array(a).fill(0).reduce(o=>{const r=new Array(e).fill(`
`).join("");return o.insert(r,{table:So()})},new Te().retain(s.index));this.quill.updateContents(l,fe.sources.USER),this.quill.setSelection(s.index,fe.sources.SILENT),this.balanceTables()}listenBalanceCells(){this.quill.on(fe.events.SCROLL_OPTIMIZE,a=>{a.some(e=>["TD","TR","TBODY","TABLE"].includes(e.target.tagName)?(this.quill.once(fe.events.TEXT_CHANGE,(s,l,o)=>{o===fe.sources.USER&&this.balanceTables()}),!0):!1)})}}const pr=ya("quill:toolbar");class Io extends xa{constructor(a,e){if(super(a,e),Array.isArray(this.options.container)){const s=document.createElement("div");s.setAttribute("role","toolbar"),Xu(s,this.options.container),a.container?.parentNode?.insertBefore(s,a.container),this.container=s}else typeof this.options.container=="string"?this.container=document.querySelector(this.options.container):this.container=this.options.container;if(!(this.container instanceof HTMLElement)){pr.error("Container required for toolbar",this.options);return}this.container.classList.add("ql-toolbar"),this.controls=[],this.handlers={},this.options.handlers&&Object.keys(this.options.handlers).forEach(s=>{const l=this.options.handlers?.[s];l&&this.addHandler(s,l)}),Array.from(this.container.querySelectorAll("button, select")).forEach(s=>{this.attach(s)}),this.quill.on(fe.events.EDITOR_CHANGE,()=>{const[s]=this.quill.selection.getRange();this.update(s)})}addHandler(a,e){this.handlers[a]=e}attach(a){let e=Array.from(a.classList).find(l=>l.indexOf("ql-")===0);if(!e)return;if(e=e.slice(3),a.tagName==="BUTTON"&&a.setAttribute("type","button"),this.handlers[e]==null&&this.quill.scroll.query(e)==null){pr.warn("ignoring attaching to nonexistent format",e,a);return}const s=a.tagName==="SELECT"?"change":"click";a.addEventListener(s,l=>{let o;if(a.tagName==="SELECT"){if(a.selectedIndex<0)return;const i=a.options[a.selectedIndex];i.hasAttribute("selected")?o=!1:o=i.value||!1}else a.classList.contains("ql-active")?o=!1:o=a.value||!a.hasAttribute("value"),l.preventDefault();this.quill.focus();const[r]=this.quill.selection.getRange();if(this.handlers[e]!=null)this.handlers[e].call(this,o);else if(this.quill.scroll.query(e).prototype instanceof Rt){if(o=prompt(`Enter ${e}`),!o)return;this.quill.updateContents(new Te().retain(r.index).delete(r.length).insert({[e]:o}),fe.sources.USER)}else this.quill.format(e,o,fe.sources.USER);this.update(r)}),this.controls.push([e,a])}update(a){const e=a==null?{}:this.quill.getFormat(a);this.controls.forEach(s=>{const[l,o]=s;if(o.tagName==="SELECT"){let r=null;if(a==null)r=null;else if(e[l]==null)r=o.querySelector("option[selected]");else if(!Array.isArray(e[l])){let i=e[l];typeof i=="string"&&(i=i.replace(/"/g,'\\"')),r=o.querySelector(`option[value="${i}"]`)}r==null?(o.value="",o.selectedIndex=-1):r.selected=!0}else if(a==null)o.classList.remove("ql-active"),o.setAttribute("aria-pressed","false");else if(o.hasAttribute("value")){const r=e[l],i=r===o.getAttribute("value")||r!=null&&r.toString()===o.getAttribute("value")||r==null&&!o.getAttribute("value");o.classList.toggle("ql-active",i),o.setAttribute("aria-pressed",i.toString())}else{const r=e[l]!=null;o.classList.toggle("ql-active",r),o.setAttribute("aria-pressed",r.toString())}})}}Io.DEFAULTS={};function fr(n,a,e){const s=document.createElement("button");s.setAttribute("type","button"),s.classList.add(`ql-${a}`),s.setAttribute("aria-pressed","false"),e!=null?(s.value=e,s.setAttribute("aria-label",`${a}: ${e}`)):s.setAttribute("aria-label",a),n.appendChild(s)}function Xu(n,a){Array.isArray(a[0])||(a=[a]),a.forEach(e=>{const s=document.createElement("span");s.classList.add("ql-formats"),e.forEach(l=>{if(typeof l=="string")fr(s,l);else{const o=Object.keys(l)[0],r=l[o];Array.isArray(r)?Qu(s,o,r):fr(s,o,r)}}),n.appendChild(s)})}function Qu(n,a,e){const s=document.createElement("select");s.classList.add(`ql-${a}`),e.forEach(l=>{const o=document.createElement("option");l!==!1?o.setAttribute("value",String(l)):o.setAttribute("selected","selected"),s.appendChild(o)}),n.appendChild(s)}Io.DEFAULTS={container:null,handlers:{clean(){const n=this.quill.getSelection();if(n!=null)if(n.length===0){const a=this.quill.getFormat();Object.keys(a).forEach(e=>{this.quill.scroll.query(e,Le.INLINE)!=null&&this.quill.format(e,!1,fe.sources.USER)})}else this.quill.removeFormat(n.index,n.length,fe.sources.USER)},direction(n){const{align:a}=this.quill.getFormat();n==="rtl"&&a==null?this.quill.format("align","right",fe.sources.USER):!n&&a==="right"&&this.quill.format("align",!1,fe.sources.USER),this.quill.format("direction",n,fe.sources.USER)},indent(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a),s=parseInt(e.indent||0,10);if(n==="+1"||n==="-1"){let l=n==="+1"?1:-1;e.direction==="rtl"&&(l*=-1),this.quill.format("indent",s+l,fe.sources.USER)}},link(n){n===!0&&(n=prompt("Enter link URL:")),this.quill.format("link",n,fe.sources.USER)},list(n){const a=this.quill.getSelection(),e=this.quill.getFormat(a);n==="check"?e.list==="checked"||e.list==="unchecked"?this.quill.format("list",!1,fe.sources.USER):this.quill.format("list","unchecked",fe.sources.USER):this.quill.format("list",n,fe.sources.USER)}}};const Ku='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',ed='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',td='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',ad='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>',sd='<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',ld='<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',nd='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',od='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',gr='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',rd='<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',id='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',cd='<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>',xd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',ud='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',dd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',md='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.65186,12.30664a2.6742,2.6742,0,0,1-2.915,2.68457,3.96592,3.96592,0,0,1-2.25537-.6709.56007.56007,0,0,1-.13232-.83594L11.64648,13c.209-.34082.48389-.36328.82471-.1543a2.32654,2.32654,0,0,0,1.12256.33008c.71484,0,1.12207-.35156,1.12207-.78125,0-.61523-.61621-.86816-1.46338-.86816H13.2085a.65159.65159,0,0,1-.68213-.41895l-.05518-.10937a.67114.67114,0,0,1,.14307-.78125l.71533-.86914a8.55289,8.55289,0,0,1,.68213-.7373V8.58887a3.93913,3.93913,0,0,1-.748.05469H11.9873a.54085.54085,0,0,1-.605-.60547V7.59863a.54085.54085,0,0,1,.605-.60547h3.75146a.53773.53773,0,0,1,.60547.59375v.17676a1.03723,1.03723,0,0,1-.27539.748L14.74854,10.0293A2.31132,2.31132,0,0,1,16.65186,12.30664ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',pd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm7.05371,7.96582v.38477c0,.39648-.165.60547-.46191.60547h-.47314v1.29785a.54085.54085,0,0,1-.605.60547h-.69336a.54085.54085,0,0,1-.605-.60547V12.95605H11.333a.5412.5412,0,0,1-.60547-.60547v-.15332a1.199,1.199,0,0,1,.22021-.748l2.56348-4.05957a.7819.7819,0,0,1,.72607-.39648h1.27637a.54085.54085,0,0,1,.605.60547v3.7627h.33008A.54055.54055,0,0,1,17.05371,11.96582ZM14.28125,8.7207h-.022a4.18969,4.18969,0,0,1-.38525.81348l-1.188,1.80469v.02246h1.5293V9.60059A7.04058,7.04058,0,0,1,14.28125,8.7207Z"/></svg>',fd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.74023,12.18555a2.75131,2.75131,0,0,1-2.91553,2.80566,3.908,3.908,0,0,1-2.25537-.68164.54809.54809,0,0,1-.13184-.8252L11.73438,13c.209-.34082.48389-.36328.8252-.1543a2.23757,2.23757,0,0,0,1.1001.33008,1.01827,1.01827,0,0,0,1.1001-.96777c0-.61621-.53906-.97949-1.25439-.97949a2.15554,2.15554,0,0,0-.64893.09961,1.15209,1.15209,0,0,1-.814.01074l-.12109-.04395a.64116.64116,0,0,1-.45117-.71484l.231-3.00391a.56666.56666,0,0,1,.62744-.583H15.541a.54085.54085,0,0,1,.605.60547v.43945a.54085.54085,0,0,1-.605.60547H13.41748l-.04395.72559a1.29306,1.29306,0,0,1-.04395.30859h.022a2.39776,2.39776,0,0,1,.57227-.07715A2.53266,2.53266,0,0,1,16.74023,12.18555ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>',gd='<svg viewBox="0 0 18 18"><path class="ql-fill" d="M14.51758,9.64453a1.85627,1.85627,0,0,0-1.24316.38477H13.252a1.73532,1.73532,0,0,1,1.72754-1.4082,2.66491,2.66491,0,0,1,.5498.06641c.35254.05469.57227.01074.70508-.40723l.16406-.5166a.53393.53393,0,0,0-.373-.75977,4.83723,4.83723,0,0,0-1.17773-.14258c-2.43164,0-3.7627,2.17773-3.7627,4.43359,0,2.47559,1.60645,3.69629,3.19043,3.69629A2.70585,2.70585,0,0,0,16.96,12.19727,2.43861,2.43861,0,0,0,14.51758,9.64453Zm-.23047,3.58691c-.67187,0-1.22168-.81445-1.22168-1.45215,0-.47363.30762-.583.72559-.583.96875,0,1.27734.59375,1.27734,1.12207A.82182.82182,0,0,1,14.28711,13.23145ZM10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Z"/></svg>',hd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',vd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',Ed='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',_d='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>',Cd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',yd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',bd='<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',Bd='<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>',Ad='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',Fd='<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>',Dd='<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',kd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',wd='<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',Pd='<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>';var Hs={align:{"":Ku,center:ed,right:td,justify:ad},background:sd,blockquote:ld,bold:nd,clean:od,code:gr,"code-block":gr,color:rd,direction:{"":id,rtl:cd},formula:xd,header:{"1":ud,"2":dd,"3":md,"4":pd,"5":fd,"6":gd},italic:hd,image:vd,indent:{"+1":Ed,"-1":_d},link:Cd,list:{bullet:yd,check:bd,ordered:Bd},script:{sub:Ad,super:Fd},strike:Dd,table:kd,underline:wd,video:Pd};const Td='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>';let hr=0;function vr(n,a){n.setAttribute(a,`${n.getAttribute(a)!=="true"}`)}class Hl{constructor(a){this.select=a,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",()=>{this.togglePicker()}),this.label.addEventListener("keydown",e=>{switch(e.key){case"Enter":this.togglePicker();break;case"Escape":this.escape(),e.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}togglePicker(){this.container.classList.toggle("ql-expanded"),vr(this.label,"aria-expanded"),vr(this.options,"aria-hidden")}buildItem(a){const e=document.createElement("span");e.tabIndex="0",e.setAttribute("role","button"),e.classList.add("ql-picker-item");const s=a.getAttribute("value");return s&&e.setAttribute("data-value",s),a.textContent&&e.setAttribute("data-label",a.textContent),e.addEventListener("click",()=>{this.selectItem(e,!0)}),e.addEventListener("keydown",l=>{switch(l.key){case"Enter":this.selectItem(e,!0),l.preventDefault();break;case"Escape":this.escape(),l.preventDefault();break}}),e}buildLabel(){const a=document.createElement("span");return a.classList.add("ql-picker-label"),a.innerHTML=Td,a.tabIndex="0",a.setAttribute("role","button"),a.setAttribute("aria-expanded","false"),this.container.appendChild(a),a}buildOptions(){const a=document.createElement("span");a.classList.add("ql-picker-options"),a.setAttribute("aria-hidden","true"),a.tabIndex="-1",a.id=`ql-picker-options-${hr}`,hr+=1,this.label.setAttribute("aria-controls",a.id),this.options=a,Array.from(this.select.options).forEach(e=>{const s=this.buildItem(e);a.appendChild(s),e.selected===!0&&this.selectItem(s)}),this.container.appendChild(a)}buildPicker(){Array.from(this.select.attributes).forEach(a=>{this.container.setAttribute(a.name,a.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}escape(){this.close(),setTimeout(()=>this.label.focus(),1)}close(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}selectItem(a){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const s=this.container.querySelector(".ql-selected");a!==s&&(s?.classList.remove("ql-selected"),a!=null&&(a.classList.add("ql-selected"),this.select.selectedIndex=Array.from(a.parentNode.children).indexOf(a),a.hasAttribute("data-value")?this.label.setAttribute("data-value",a.getAttribute("data-value")):this.label.removeAttribute("data-value"),a.hasAttribute("data-label")?this.label.setAttribute("data-label",a.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}update(){let a;if(this.select.selectedIndex>-1){const s=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];a=this.select.options[this.select.selectedIndex],this.selectItem(s)}else this.selectItem(null);const e=a!=null&&a!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",e)}}class ii extends Hl{constructor(a,e){super(a),this.label.innerHTML=e,this.container.classList.add("ql-color-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach(s=>{s.classList.add("ql-primary")})}buildItem(a){const e=super.buildItem(a);return e.style.backgroundColor=a.getAttribute("value")||"",e}selectItem(a,e){super.selectItem(a,e);const s=this.label.querySelector(".ql-color-label"),l=a&&a.getAttribute("data-value")||"";s&&(s.tagName==="line"?s.style.stroke=l:s.style.fill=l)}}class ci extends Hl{constructor(a,e){super(a),this.container.classList.add("ql-icon-picker"),Array.from(this.container.querySelectorAll(".ql-picker-item")).forEach(s=>{s.innerHTML=e[s.getAttribute("data-value")||""]}),this.defaultItem=this.container.querySelector(".ql-selected"),this.selectItem(this.defaultItem)}selectItem(a,e){super.selectItem(a,e);const s=a||this.defaultItem;if(s!=null){if(this.label.innerHTML===s.innerHTML)return;this.label.innerHTML=s.innerHTML}}}const Ld=n=>{const{overflowY:a}=getComputedStyle(n,null);return a!=="visible"&&a!=="clip"};class xi{constructor(a,e){this.quill=a,this.boundsContainer=e||document.body,this.root=a.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,Ld(this.quill.root)&&this.quill.root.addEventListener("scroll",()=>{this.root.style.marginTop=`${-1*this.quill.root.scrollTop}px`}),this.hide()}hide(){this.root.classList.add("ql-hidden")}position(a){const e=a.left+a.width/2-this.root.offsetWidth/2,s=a.bottom+this.quill.root.scrollTop;this.root.style.left=`${e}px`,this.root.style.top=`${s}px`,this.root.classList.remove("ql-flip");const l=this.boundsContainer.getBoundingClientRect(),o=this.root.getBoundingClientRect();let r=0;if(o.right>l.right&&(r=l.right-o.right,this.root.style.left=`${e+r}px`),o.left<l.left&&(r=l.left-o.left,this.root.style.left=`${e+r}px`),o.bottom>l.bottom){const i=o.bottom-o.top,c=a.bottom-a.top+i;this.root.style.top=`${s-c}px`,this.root.classList.add("ql-flip")}return r}show(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}const Sd=[!1,"center","right","justify"],Id=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],$d=[!1,"serif","monospace"],Nd=["1","2","3",!1],Od=["small",!1,"large","huge"];class el extends Bs{constructor(a,e){super(a,e);const s=l=>{if(!document.body.contains(a.root)){document.body.removeEventListener("click",s);return}this.tooltip!=null&&!this.tooltip.root.contains(l.target)&&document.activeElement!==this.tooltip.textbox&&!this.quill.hasFocus()&&this.tooltip.hide(),this.pickers!=null&&this.pickers.forEach(o=>{o.container.contains(l.target)||o.close()})};a.emitter.listenDOM("click",document.body,s)}addModule(a){const e=super.addModule(a);return a==="toolbar"&&this.extendToolbar(e),e}buildButtons(a,e){Array.from(a).forEach(s=>{(s.getAttribute("class")||"").split(/\s+/).forEach(o=>{if(!!o.startsWith("ql-")&&(o=o.slice(3),e[o]!=null))if(o==="direction")s.innerHTML=e[o][""]+e[o].rtl;else if(typeof e[o]=="string")s.innerHTML=e[o];else{const r=s.value||"";r!=null&&e[o][r]&&(s.innerHTML=e[o][r])}})})}buildPickers(a,e){this.pickers=Array.from(a).map(l=>{if(l.classList.contains("ql-align")&&(l.querySelector("option")==null&&Ms(l,Sd),typeof e.align=="object"))return new ci(l,e.align);if(l.classList.contains("ql-background")||l.classList.contains("ql-color")){const o=l.classList.contains("ql-background")?"background":"color";return l.querySelector("option")==null&&Ms(l,Id,o==="background"?"#ffffff":"#000000"),new ii(l,e[o])}return l.querySelector("option")==null&&(l.classList.contains("ql-font")?Ms(l,$d):l.classList.contains("ql-header")?Ms(l,Nd):l.classList.contains("ql-size")&&Ms(l,Od)),new Hl(l)});const s=()=>{this.pickers.forEach(l=>{l.update()})};this.quill.on(we.events.EDITOR_CHANGE,s)}}el.DEFAULTS=wa({},Bs.DEFAULTS,{modules:{toolbar:{handlers:{formula(){this.quill.theme.tooltip.edit("formula")},image(){let n=this.container.querySelector("input.ql-image[type=file]");n==null&&(n=document.createElement("input"),n.setAttribute("type","file"),n.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),n.classList.add("ql-image"),n.addEventListener("change",()=>{const a=this.quill.getSelection(!0);this.quill.uploader.upload(a,n.files),n.value=""}),this.container.appendChild(n)),n.click()},video(){this.quill.theme.tooltip.edit("video")}}}}});class ui extends xi{constructor(a,e){super(a,e),this.textbox=this.root.querySelector('input[type="text"]'),this.listen()}listen(){this.textbox.addEventListener("keydown",a=>{a.key==="Enter"?(this.save(),a.preventDefault()):a.key==="Escape"&&(this.cancel(),a.preventDefault())})}cancel(){this.hide(),this.restoreFocus()}edit(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),this.textbox==null)return;e!=null?this.textbox.value=e:a!==this.root.getAttribute("data-mode")&&(this.textbox.value="");const s=this.quill.getBounds(this.quill.selection.savedRange);s!=null&&this.position(s),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute(`data-${a}`)||""),this.root.setAttribute("data-mode",a)}restoreFocus(){this.quill.focus({preventScroll:!0})}save(){let{value:a}=this.textbox;switch(this.root.getAttribute("data-mode")){case"link":{const{scrollTop:e}=this.quill.root;this.linkRange?(this.quill.formatText(this.linkRange,"link",a,we.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",a,we.sources.USER)),this.quill.root.scrollTop=e;break}case"video":a=Md(a);case"formula":{if(!a)break;const e=this.quill.getSelection(!0);if(e!=null){const s=e.index+e.length;this.quill.insertEmbed(s,this.root.getAttribute("data-mode"),a,we.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(s+1," ",we.sources.USER),this.quill.setSelection(s+2,we.sources.USER)}break}}this.textbox.value="",this.hide()}}function Md(n){let a=n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||n.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return a?`${a[1]||"https"}://www.youtube.com/embed/${a[2]}?showinfo=0`:(a=n.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?`${a[1]||"https"}://player.vimeo.com/video/${a[2]}/`:n}function Ms(n,a){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;a.forEach(s=>{const l=document.createElement("option");s===e?l.setAttribute("selected","selected"):l.setAttribute("value",String(s)),n.appendChild(l)})}const Vd=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]];class Rd extends ui{static TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join("");constructor(a,e){super(a,e),this.quill.on(we.events.EDITOR_CHANGE,(s,l,o,r)=>{if(s===we.events.SELECTION_CHANGE)if(l!=null&&l.length>0&&r===we.sources.USER){this.show(),this.root.style.left="0px",this.root.style.width="",this.root.style.width=`${this.root.offsetWidth}px`;const i=this.quill.getLines(l.index,l.length);if(i.length===1){const c=this.quill.getBounds(l);c!=null&&this.position(c)}else{const c=i[i.length-1],u=this.quill.getIndex(c),g=Math.min(c.length()-1,l.index+l.length-u),p=this.quill.getBounds(new Ya(u,g));p!=null&&this.position(p)}}else document.activeElement!==this.textbox&&this.quill.hasFocus()&&this.hide()})}listen(){super.listen(),this.root.querySelector(".ql-close").addEventListener("click",()=>{this.root.classList.remove("ql-editing")}),this.quill.on(we.events.SCROLL_OPTIMIZE,()=>{setTimeout(()=>{if(this.root.classList.contains("ql-hidden"))return;const a=this.quill.getSelection();if(a!=null){const e=this.quill.getBounds(a);e!=null&&this.position(e)}},1)})}cancel(){this.show()}position(a){const e=super.position(a),s=this.root.querySelector(".ql-tooltip-arrow");return s.style.marginLeft="",e!==0&&(s.style.marginLeft=`${-1*e-s.offsetWidth/2}px`),e}}class di extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=Vd),super(a,e),this.quill.container.classList.add("ql-bubble")}extendToolbar(a){this.tooltip=new Rd(this.quill,this.options.bounds),a.container!=null&&(this.tooltip.root.appendChild(a.container),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs))}}di.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){n?this.quill.theme.tooltip.edit():this.quill.format("link",!1,fe.sources.USER)}}}}});const qd=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]];class Ud extends ui{static TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join("");preview=this.root.querySelector("a.ql-preview");listen(){super.listen(),this.root.querySelector("a.ql-action").addEventListener("click",a=>{this.root.classList.contains("ql-editing")?this.save():this.edit("link",this.preview.textContent),a.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",a=>{if(this.linkRange!=null){const e=this.linkRange;this.restoreFocus(),this.quill.formatText(e,"link",!1,we.sources.USER),delete this.linkRange}a.preventDefault(),this.hide()}),this.quill.on(we.events.SELECTION_CHANGE,(a,e,s)=>{if(a!=null){if(a.length===0&&s===we.sources.USER){const[l,o]=this.quill.scroll.descendant(Sl,a.index);if(l!=null){this.linkRange=new Ya(a.index-o,l.length());const r=Sl.formats(l.domNode);this.preview.textContent=r,this.preview.setAttribute("href",r),this.show();const i=this.quill.getBounds(this.linkRange);i!=null&&this.position(i);return}}else delete this.linkRange;this.hide()}})}show(){super.show(),this.root.removeAttribute("data-mode")}}class mi extends el{constructor(a,e){e.modules.toolbar!=null&&e.modules.toolbar.container==null&&(e.modules.toolbar.container=qd),super(a,e),this.quill.container.classList.add("ql-snow")}extendToolbar(a){a.container!=null&&(a.container.classList.add("ql-snow"),this.buildButtons(a.container.querySelectorAll("button"),Hs),this.buildPickers(a.container.querySelectorAll("select"),Hs),this.tooltip=new Ud(this.quill,this.options.bounds),a.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(e,s)=>{a.handlers.link.call(a,!s.format.link)}))}}mi.DEFAULTS=wa({},el.DEFAULTS,{modules:{toolbar:{handlers:{link(n){if(n){const a=this.quill.getSelection();if(a==null||a.length===0)return;let e=this.quill.getText(a);/^\S+@\S+\.\S+$/.test(e)&&e.indexOf("mailto:")!==0&&(e=`mailto:${e}`);const{tooltip:s}=this.quill.theme;s.edit("link",e)}else this.quill.format("link",!1,fe.sources.USER)}}}}});fe.register({"attributors/attribute/direction":Jr,"attributors/class/align":Hr,"attributors/class/background":Hx,"attributors/class/color":Wx,"attributors/class/direction":Xr,"attributors/class/font":ei,"attributors/class/size":ai,"attributors/style/align":Zr,"attributors/style/background":Do,"attributors/style/color":Fo,"attributors/style/direction":Qr,"attributors/style/font":ti,"attributors/style/size":si},!0);fe.register({"formats/align":Hr,"formats/direction":Xr,"formats/indent":Vu,"formats/background":Do,"formats/color":Fo,"formats/font":ei,"formats/size":ai,"formats/blockquote":Ru,"formats/code-block":Lt,"formats/header":qu,"formats/list":Ks,"formats/bold":Lo,"formats/code":ko,"formats/italic":Uu,"formats/link":Sl,"formats/script":zu,"formats/strike":ju,"formats/underline":Yu,"formats/formula":Wu,"formats/image":Hu,"formats/video":Zu,"modules/syntax":ri,"modules/table":Ju,"modules/toolbar":Io,"themes/bubble":di,"themes/snow":mi,"ui/icons":Hs,"ui/picker":Hl,"ui/icon-picker":ci,"ui/color-picker":ii,"ui/tooltip":xi},!0);const zd={props:{content:String,value:String,disabled:{type:Boolean,default:!1},options:{type:Object,default:()=>({})}},emits:["ready","change","input","blur","focus","update:value"],setup(n,{emit:a}){const e=n,s={theme:"snow",boundary:document.body,modules:{toolbar:[["bold","italic","underline","strike"],["blockquote","code-block"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"],["link","image","video"]]},placeholder:"Insert content here ...",readOnly:!1},l=g=>{const p=new MutationObserver(f=>{f.forEach(()=>{})});return p.observe(g,{childList:!0,subtree:!0}),p},o=M(null);let r=null,i="";const c=(g,p)=>{for(const f in p)!g[f]||f!=="modules"?g[f]=p[f]:c(g[f],p[f]);return g},u=()=>{if(o.value){const g=c(s,e.options);g.readOnly=!!e.disabled,r=new fe(o.value,g),e.value&&r.clipboard.dangerouslyPasteHTML(e.value),r.on("selection-change",p=>{a(p?"focus":"blur",r)}),r.on("text-change",()=>{e.disabled&&r.enable(!1);let p=o.value.children[0].innerHTML;const f=r.getText();p==="<p><br></p>"&&(p=""),i=p,a("update:value",i),a("change",{html:p,text:f,quill:r})}),a("ready",r)}};return xt(()=>e.value,g=>{r&&g!==i?(i=g,r.clipboard.dangerouslyPasteHTML(g)):g||r.setText("")}),xt(()=>e.disabled,g=>{r&&r.enable(!g)}),Ze(()=>{if(u(),o.value){const g=l(o.value);Yn(()=>{g.disconnect()})}}),ji(()=>{const g=o.value.previousSibling;g&&g.nodeType===1&&g.className.indexOf("ql-toolbar")>-1&&g.parentNode.removeChild(g)}),Yn(()=>{r=null}),(g,p)=>(x(),F("section",{ref_key:"editor",ref:o},null,512))}};const jd={class:"am-desc-editor__header"},Yd={class:"am-desc-editor__header-warning"},Wd=m("span",{class:"am-icon-triangle-info"},null,-1),Hd={key:1,class:"am-quill-wrapper"},pi={props:{modelValue:{type:String,default:""},mode:{type:String,default:"html"}},emits:["update:modelValue","setMode"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=M(e.mode),o=B({get:()=>e.modelValue,set:p=>{a("update:modelValue",p)}});function r(){l.value="text",a("setMode","text")}function i(){l.value="html",a("setMode","html")}const c={theme:"snow",modules:{toolbar:[["bold","italic","underline","strike"],["blockquote"],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{color:[]},{background:[]}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{font:[]}],[{align:[]}],["clean"],["link","image"]]},readOnly:!1};let u=U("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),g=B(()=>({"--am-c-desce-text-op03":Q(u.value.colorMainText,.03),"--am-c-desce-warn-op10":Q(u.value.colorWarning,.1)}));return(p,f)=>t(l)?(x(),F("div",{key:0,class:"am-desc-editor",style:Ce(t(g))},[m("div",jd,[$(Yi,null,{default:I(()=>[$(Fe,{category:t(l)==="text"?"primary":"secondary",type:t(l)==="text"?"filled":"plain",size:"small",onClick:r},{default:I(()=>[ue(k(t(s).text_mode),1)]),_:1},8,["category","type"]),$(Fe,{category:t(l)==="html"?"primary":"secondary",type:t(l)==="html"?"filled":"plain",size:"small",onClick:i},{default:I(()=>[ue(k(t(s).html_mode),1)]),_:1},8,["category","type"])]),_:1}),m("div",Yd,[Wd,ue(" "+k(t(s).content_mode_tooltip),1)])]),t(l)==="html"?(x(),Y(ct,{key:0,modelValue:t(o),"onUpdate:modelValue":f[0]||(f[0]=b=>Ae(o)?o.value=b:o=b),type:"textarea",rows:3,style:{width:"100%"}},null,8,["modelValue"])):N("",!0),t(l)==="text"?(x(),F("div",Hd,[$(zd,{value:t(o),"onUpdate:value":f[1]||(f[1]=b=>Ae(o)?o.value=b:o=b),options:c},null,8,["value"])])):N("",!0)],4)):N("",!0)}};const Zd=["innerHTML"],Gd={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Ne(),l=U("settings");let o=U("amLabels"),r=B(()=>s.getters["entities/getEmployee"](s.getters["employee/getId"])),i=B(()=>s.getters["entities/getLocations"]),c=B(()=>i.value.map(D=>({value:D.id,label:D.name}))),u=M(null),g=M(!1),p=M({firstName:B({get:()=>s.getters["employee/getFirstName"],set:D=>{s.commit("employee/setFirstName",D||"")}}),lastName:B({get:()=>s.getters["employee/getLastName"],set:D=>{s.commit("employee/setLastName",D||"")}}),email:B({get:()=>s.getters["employee/getEmail"],set:D=>{s.commit("employee/setEmail",D||"")}}),phone:B({get:()=>s.getters["employee/getPhone"],set:D=>{s.commit("employee/setPhone",D||"")}}),locationId:B({get:()=>s.getters["employee/getLocationId"],set:D=>{s.commit("employee/setLocationId",D||"")}}),description:B({get:()=>s.getters["employee/getDescription"],set:D=>{s.commit("employee/setDescription",D||"")}})}),f=B(()=>({firstName:[{required:!0,message:o.enter_first_name_warning,trigger:["submit","change"]}],lastName:[{required:!0,message:o.enter_last_name_warning,trigger:["submit","change"]}],email:[{required:!0,message:o.enter_email_warning,trigger:["submit","change"]}],locationId:[{required:i.value.filter(D=>D.status==="visible").length>0,message:o.enter_location_warning,trigger:["submit","change"]}]})),b=M({firstName:{template:We.text,props:{itemName:"firstName",label:o.first_name_colon,placeholder:o.enter_first_name,class:B(()=>`am-caepif__item ${e.responsiveClass}`)}},lastName:{template:We.text,props:{itemName:"lastName",label:o.last_name_colon,placeholder:o.enter_last_name,class:B(()=>`am-caepif__item ${e.responsiveClass}`)}},email:{template:We.text,props:{itemName:"email",label:o.email_colon,placeholder:o.enter_email,class:B(()=>`am-caepif__item ${e.responsiveClass}`)}},phone:{countryPhoneIso:B({get:()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:"",set:D=>{s.commit("auth/setProfileCountryPhoneIso",D?D.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:o.phone_colon,placeholder:o.enter_phone,defaultCode:B(()=>s.getters["auth/getProfile"].countryPhoneIso?s.getters["auth/getProfile"].countryPhoneIso:""),phoneError:B(()=>g.value),whatsAppLabel:o.whatsapp_opt_in_text,isWhatsApp:l.notifications.whatsAppEnabled&&l.notifications.whatsAppAccessToken&&l.notifications.whatsAppBusinessID&&l.notifications.whatsAppPhoneID,class:B(()=>`am-caepif__item ${e.responsiveClass}`)}}}),w=M({locationId:{template:We.select,props:{itemName:"locationId",label:`${o.location}:`,placeholder:o.select_location,class:B(()=>`am-caepif__item ${e.responsiveClass} ${l.zoom.enabled||"am-w-100"}`),options:c.value}}});return Gs(()=>{i.value.length||delete w.value.locationId}),a({employeeFormRef:u}),(D,v)=>{const P=vt,S=st;return x(),Y(S,{ref_key:"employeeFormRef",ref:u,model:t(p),rules:t(f),"label-position":"top",class:j(["am-caepif",e.responsiveClass])},{default:I(()=>[m("div",{class:j(["am-caepif__block",[{"am-w-70":t(r).pictureFullPath},e.responsiveClass]])},[(x(!0),F(ne,null,ve(t(b),(A,d)=>(x(),Y(ft(A.template),kt({key:d,ref_for:!0,ref:"customerCollectorRef",modelValue:t(p)[d],"onUpdate:modelValue":_=>t(p)[d]=_,countryPhoneIso:A.countryPhoneIso,"onUpdate:countryPhoneIso":_=>A.countryPhoneIso=_},A.props),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))],2),t(r).pictureFullPath?(x(),F("div",{key:0,class:j(["am-caepif__block am-w-30",e.responsiveClass])},[m("div",{class:"am-caepif__img",style:Ce({backgroundImage:`url(${t(r).pictureFullPath})`})},null,4)],2)):N("",!0),m("div",{class:j(["am-caepif__block",e.responsiveClass])},[(x(!0),F(ne,null,ve(t(w),(A,d)=>(x(),Y(ft(A.template),kt({key:d,ref_for:!0,ref:"customerCollectorRef",modelValue:t(p)[d],"onUpdate:modelValue":_=>t(p)[d]=_},A.props,uo(A.handlers?A.handlers:{})),{default:I(()=>[A.slots&&A.slots.default?(x(),F("div",{key:0,innerHTML:A.slots.default},null,8,Zd)):N("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128)),$(P,{label:t(o).description_colon},{default:I(()=>[$(pi,{modelValue:t(p).description,"onUpdate:modelValue":v[0]||(v[0]=A=>t(p).description=A),mode:t(s).getters["employee/getDescriptionMode"],onSetMode:v[1]||(v[1]=A=>t(s).commit("employee/setDescriptionMode",A))},null,8,["modelValue","mode"])]),_:1},8,["label"])],2)]),_:1},8,["model","rules","class"])}}};const Jd={class:"am-caes__category-header"},Xd={class:"am-caes__category-header__text"},Qd={class:"am-caes__service-header"},Kd={class:"am-caes__service-header__text"},em={class:"am-caes__service-content"},tm={class:"am-caes__service-content__text"},am={class:"am-caes__service-content__text"},sm={class:"am-caes__service-content__text"},lm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},nm={class:"am-caes__service-content__text"},om={class:"am-caes__service-content__text"},rm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},im={class:"am-caes__service-content__text"},cm={class:"am-caes__service-content__text"},xm={class:"am-caes__service-content__inner am-caes__service-content__disabled"},um={class:"am-caes__service-content__text"},dm={class:"am-caes__service__week-days"},mm={class:"am-caes__service__week-periods"},pm={class:"am-caes__service__week-periods-item-range"},fm=ue(" - "),gm={class:"am-caes__service__date"},hm=m("span",{class:"am-icon-calendar"},null,-1),vm={class:"am-caes__service__week-periods"},Em={class:"am-caes__service__week-periods-item-range"},_m=ue(" - "),Cm={name:"CabinetEmployeeProfileServices"},ym=Object.assign(Cm,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=U("licence"),s=Ne(),l=U("amLabels"),o=M(""),r={components:{IconComponent:Ge},template:'<IconComponent icon="search"/>'},i=M([{label:"Mon",labelFull:"Monday",value:0},{label:"Tue",labelFull:"Tuesday",value:1},{label:"Wed",labelFull:"Wednesday",value:2},{label:"Thu",labelFull:"Thursday",value:3},{label:"Fri",labelFull:"Friday",value:4},{label:"Sat",labelFull:"Saturday",value:5},{label:"Sun",labelFull:"Sunday",value:6}]),c=M({}),u=B(()=>s.getters["employee/getEmployee"]),g=B(()=>s.getters["entities/getCategories"].filter(S=>S.status==="visible"&&S.serviceList.length>0&&(!o.value.trim()||S.serviceList.filter(A=>A.name.toLowerCase().includes(o.value.toLowerCase().trim())).length))),p=M(g.value.length===1?"category_"+g.value[0].id:null),f=M(0);function b(S){const A=S.serviceList.filter(d=>u.value.serviceList[S.id][d.id].enabled);return A.length>0&&A.length<S.serviceList.length}function w(S){const A=S.serviceList.filter(d=>u.value.serviceList[S.id][d.id].enabled);c.value[S.id]=A.length!==0}function D(S,A){A.serviceList.forEach(d=>{s.commit("employee/setServiceEnabled",{categoryId:A.id,serviceId:d.id,value:S})})}Ze(()=>{qs&&(i.value=i.value.map((S,A)=>({...S,label:Fr[A],labelFull:Dr[A]}))),g.value.forEach(S=>{c.value[S.id]=S.serviceList.filter(A=>u.value.serviceList[S.id][A.id].enabled).length!==0})});let v=U("amColors"),P=B(()=>({"--am-c-caes-primary":v.value.colorPrimary,"--am-c-caes-primary-op03":Q(v.value.colorPrimary,.3),"--am-c-caes-text":v.value.colorMainText,"--am-c-caes-text-op03":Q(v.value.colorMainText,.03),"--am-c-caes-text-op50":Q(v.value.colorMainText,.5),"--am-c-caes-inp-bgr-op03":Q(v.value.colorInpBgr,.03),"--am-c-caes-border":v.value.colorInpBorder}));return(S,A)=>{const d=_a,_=Ca,y=Cs,E=ys;return x(),F("div",null,[m("div",null,[$(ct,{modelValue:t(o),"onUpdate:modelValue":A[0]||(A[0]=C=>Ae(o)?o.value=C:o=C),"prefix-icon":t(r),"aria-label":"Search"},null,8,["modelValue","prefix-icon"])]),$(E,{modelValue:t(p),"onUpdate:modelValue":A[2]||(A[2]=C=>Ae(p)?p.value=C:p=C),class:"am-caes",style:Ce(t(P))},{default:I(()=>[(x(!0),F(ne,null,ve(t(g),C=>(x(),Y(y,{key:"category_"+C.id,name:"category_"+C.id,class:"am-caes__category"},{title:I(()=>[m("div",Jd,[$(ht,{modelValue:t(c)[C.id],"onUpdate:modelValue":L=>t(c)[C.id]=L,indeterminate:b(C),onClick:L=>{L.stopPropagation(),Ae(p)?p.value=`category_${C.id}`:p=`category_${C.id}`},onChange:L=>D(L,C),onKeydown:Vo(L=>{L.stopPropagation(),Ae(p)?p.value=`category_${C.id}`:p=`category_${C.id}`,t(c)[C.id]=!t(c)[C.id],D(t(c)[C.id],C)},["enter"])},null,8,["modelValue","onUpdate:modelValue","indeterminate","onClick","onChange","onKeydown"]),m("div",Xd,k(C.name),1)])]),default:I(()=>[$(E,{modelValue:t(f),"onUpdate:modelValue":A[1]||(A[1]=L=>Ae(f)?f.value=L:f=L),class:"am-caes__inner"},{default:I(()=>[(x(!0),F(ne,null,ve(t(g).find(L=>L.id===C.id).serviceList.filter(L=>!t(o).trim()||L.name.toLowerCase().includes(t(o).toLowerCase())),L=>(x(),Y(y,{key:`service_${L.id}`,name:`service_${L.id}`,class:"am-caes__service"},{title:I(()=>[m("div",Qd,[$(ht,{modelValue:t(u).serviceList[C.id][L.id].enabled,"onUpdate:modelValue":V=>t(u).serviceList[C.id][L.id].enabled=V,onClick:V=>{V.stopPropagation(),Ae(f)?f.value=`service_${L.id}`:f=`service_${L.id}`},onChange:V=>w(C),onKeydown:Vo(V=>{V.stopPropagation(),Ae(f)?f.value=`service_${L.id}`:f=`service_${L.id}`,t(u).serviceList[C.id][L.id].enabled=!t(u).serviceList[C.id][L.id].enabled,w(C)},["enter"])},null,8,["modelValue","onUpdate:modelValue","onClick","onChange","onKeydown"]),m("div",Kd,k(L.name),1)])]),default:I(()=>[m("div",em,[m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",tm,k(t(l).minimum_capacity),1),$(Ct,{modelValue:t(u).serviceList[C.id][L.id].minCapacity,"onUpdate:modelValue":V=>t(u).serviceList[C.id][L.id].minCapacity=V,class:"am-caes__service-content__inner",min:1,size:"small"},null,8,["modelValue","onUpdate:modelValue"])],2),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",am,k(t(l).maximum_capacity),1),$(Ct,{modelValue:t(u).serviceList[C.id][L.id].maxCapacity,"onUpdate:modelValue":V=>t(u).serviceList[C.id][L.id].maxCapacity=V,class:"am-caes__service-content__inner",min:t(u).serviceList[C.id][L.id].minCapacity,size:"small","aria-label":t(l).maximum_capacity},null,8,["modelValue","onUpdate:modelValue","min","aria-label"])],2),(x(!0),F(ne,null,ve(t(u).serviceList[C.id][L.id].customPricing.enabled==="duration"?t(u).serviceList[C.id][L.id].customPricing.durations:[],(V,T)=>(x(),F(ne,{key:T},[t(u).serviceList[C.id][L.id].customPricing.enabled==="duration"?(x(),F("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",sm,k(t(l).duration),1),m("div",lm,k(t(hs)(T,t(l).h,t(l).min)),1)],2)):N("",!0),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",nm,k(t(l).price),1),$(ct,{modelValue:V.price,"onUpdate:modelValue":q=>V.price=q,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)],64))),128)),t(u).serviceList[C.id][L.id].customPricing.enabled==="period"||t(u).serviceList[C.id][L.id].customPricing.enabled===null?(x(),F("div",{key:0,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",om,k(t(l).duration),1),m("div",rm,k(t(hs)(L.duration,t(l).h,t(l).min)),1)],2)):N("",!0),t(u).serviceList[C.id][L.id].customPricing.enabled==="period"||t(u).serviceList[C.id][L.id].customPricing.enabled===null?(x(),F("div",{key:1,class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",im,k(t(l).price),1),$(ct,{modelValue:t(u).serviceList[C.id][L.id].price,"onUpdate:modelValue":V=>t(u).serviceList[C.id][L.id].price=V,class:"am-caes__service-content__inner",placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)):N("",!0),(x(!0),F(ne,null,ve(t(u).serviceList[C.id][L.id].customPricing.enabled==="person"?t(u).serviceList[C.id][L.id].customPricing.persons:[],(V,T)=>(x(),F(ne,{key:T},[m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",cm,k(t(l).capacity),1),m("div",xm,k(V.from)+" - "+k(T),1)],2),m("div",{class:j(["am-caes__service-content__item",a.responsiveClass])},[m("div",um,k(t(l).price),1),$(ct,{modelValue:V.price,"onUpdate:modelValue":q=>V.price=q,class:"am-caes__service-content__inner",placeholder:"",size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue"])],2)],64))),128))]),t(u).serviceList[C.id][L.id].customPricing.enabled==="period"&&!t(e).isLite&&!t(e).isStarter&&!t(e).isBasic?(x(),Y(_,{key:0,class:"am-caes__service-tabs",stretch:!0},{default:I(()=>[t(u).serviceList[C.id][L.id].customPricing.periods.default.length?(x(),Y(d,{key:0,label:t(l).week_days},{default:I(()=>[(x(!0),F(ne,null,ve(t(u).serviceList[C.id][L.id].customPricing.periods.default,(V,T)=>(x(),F("div",{key:T,class:"am-caes__service__week"},[m("div",dm,[(x(!0),F(ne,null,ve(t(i),(q,H)=>(x(),F("div",{key:H,class:j(["am-caes__service__week-day",{"am-caes__service__week-day-selected":V.days.indexOf(q.value)!==-1}])},[m("span",null,k(q.label),1)],2))),128))]),m("div",mm,[(x(!0),F(ne,null,ve(V.ranges,(q,H)=>(x(),F("div",{key:H,class:"am-caes__service__week-periods-item"},[m("div",pm,[m("span",null,k(q.from),1),fm,m("span",null,k(q.to),1)]),m("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[$(ct,{modelValue:q.price,"onUpdate:modelValue":z=>q.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):N("",!0),t(u).serviceList[C.id][L.id].customPricing.periods.custom.length?(x(),Y(d,{key:1,label:t(l).custom_days},{default:I(()=>[(x(!0),F(ne,null,ve(t(u).serviceList[C.id][L.id].customPricing.periods.custom,(V,T)=>(x(),F("div",{key:T,class:"am-caes__service__week"},[m("div",gm,[hm,ue(k(t(it)(V.dates.start))+" - "+k(t(it)(V.dates.end)),1)]),m("div",vm,[(x(!0),F(ne,null,ve(V.ranges,(q,H)=>(x(),F("div",{key:H,class:"am-caes__service__week-periods-item"},[m("div",Em,[m("span",null,k(q.from),1),_m,m("span",null,k(q.to),1)]),m("div",{class:j([a.responsiveClass,"am-caes__service__week-periods-item-price"])},[$(ct,{modelValue:q.price,"onUpdate:modelValue":z=>q.price=z,placeholder:"","aria-label":t(l).price,size:"small","is-money":!0},null,8,["modelValue","onUpdate:modelValue","aria-label"])],2)]))),128))])]))),128))]),_:2},1032,["label"])):N("",!0)]),_:2},1024)):N("",!0)]),_:2},1032,["name"]))),128))]),_:2},1032,["modelValue"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])])}}});const ka={props:{modelValue:{type:String},id:{type:String,default:""},disabled:{type:Boolean,default:!1},editable:{type:Boolean,default:!0},clearable:{type:Boolean,default:!0},includeEndTime:{type:Boolean,default:!1},size:{type:String,default:"default",validator(n){return["default","medium","small","mini","micro"].includes(n)}},placeholder:{type:String,default:""},name:{type:String},effect:{type:String,default:"light",validator(n){return["dark","light"].includes(n)}},prefixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="clock"/>'})},suffixIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="arrow-up"/>'})},clearIcon:{type:[String,Object,Function],default:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="close"/>'})},start:{type:String,default:""},end:{type:String,default:""},step:{type:String,default:""},minTime:{type:String,default:""},maxTime:{type:String,default:""},format:{type:String,default:"HH:mm"},popperClass:{type:String,default:""},class:{type:String,default:""},parentClass:{type:String,default:""}},emits:["update:modelValue"],setup(n,{emit:a}){const e=n,{modelValue:s}=ro(e),l=B({get:()=>s.value,set:u=>{a("update:modelValue",u)}}),o=M(null);let r=U("amFonts",M({fontFamily:"Amelia Roboto, sans-serif",fontUrl:"",customFontFamily:"",fontFormat:"",customFontSelected:!1})),i=U("amColors",M({colorPrimary:"#1246D6",colorSuccess:"#019719",colorError:"#B4190F",colorWarning:"#CCA20C",colorMainBgr:"#FFFFFF",colorMainHeadingText:"#33434C",colorMainText:"#1A2C37",colorSbBgr:"#17295A",colorSbText:"#FFFFFF",colorInpBgr:"#FFFFFF",colorInpBorder:"#D1D5D7",colorInpText:"#1A2C37",colorInpPlaceHolder:"#808A90",colorDropBgr:"#FFFFFF",colorDropBorder:"#D1D5D7",colorDropText:"#0E1920",colorBtnPrim:"#265CF2",colorBtnPrimText:"#FFFFFF",colorBtnSec:"#1A2C37",colorBtnSecText:"#FFFFFF"})),c=B(()=>({"--am-c-timeselect-shadow":Q(i.value.colorInpText,.05),"--am-c-timeselect-text-op60":Q(i.value.colorInpText,.6),"--am-c-timeselect-text-op40":Q(i.value.colorInpText,.4),"--am-c-timeselect-text-op10":Q(i.value.colorInpText,.03),"--am-font-family":r.value.fontFamily}));return Ze(()=>{const u=document.querySelector("[id^='el-popper-container']");u.style.setProperty("--am-c-option-bgr",i.value.colorDropBgr),u.style.setProperty("--am-c-option-border",i.value.colorDropBorder),u.style.setProperty("--am-c-option-text",i.value.colorDropText),u.style.setProperty("--am-c-option-text-op65",Q(i.value.colorDropText,.65)),u.style.setProperty("--am-c-option-text-op50",Q(i.value.colorDropText,.5)),u.style.setProperty("--am-c-option-hover",Q(i.value.colorDropText,.1)),u.style.setProperty("--am-c-option-selected",i.value.colorPrimary),u.style.setProperty("--am-c-option-selected-op10",Q(i.value.colorPrimary,.1)),u.style.setProperty("--am-c-option-img-bgr",i.value.colorSuccess),u.style.setProperty("--am-c-option-img-text",i.value.colorMainBgr),u.style.setProperty("--am-font-family",r.value.fontFamily)}),(u,g)=>{const p=Wi;return x(),F("div",{class:j(["am-time-select__wrapper",n.parentClass]),style:Ce(t(c))},[$(p,{id:e.id,ref_key:"amTimeSelect",ref:o,modelValue:t(l),"onUpdate:modelValue":g[0]||(g[0]=f=>Ae(l)?l.value=f:null),class:j(["am-time-select",[`am-time-select--${n.size}`,{"am-time-select--disabled":n.disabled},{"am-time-select--prefix":e.prefixIcon},{"am-time-select--suffix":e.suffixIcon||e.clearIcon&&u.pross.clearable},e.class]]),disabled:e.disabled,placeholder:e.placeholder,"clear-icon":e.clearIcon,clearable:e.clearable,editable:e.editable,name:e.name,"popper-class":`am-time-select__popper${e.popperClass?" "+e.popperClass:e.popperClass}`,"prefix-icon":e.prefixIcon,"suffix-icon":e.suffixIcon,end:e.end,"max-time":e.maxTime,"min-time":e.minTime,start:e.start,step:e.step,format:e.format,"include-end-time":e.includeEndTime,effect:e.effect},null,8,["id","modelValue","class","disabled","placeholder","clear-icon","clearable","editable","name","popper-class","prefix-icon","suffix-icon","end","max-time","min-time","start","step","format","include-end-time","effect"])],6)}}};const bm={class:"am-csd__period-header"},Bm={class:"am-csd__period-content__inner"},Am=m("span",{class:"am-icon-clearable"},null,-1),Fm={name:"WorkPeriod"},Dm=Object.assign(Fm,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},periodIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Ne();const l=U("settings");let o=U("amLabels"),r=U("pageWidth"),i=M(null),c=B(()=>e.visibility);const{width:u}=Za(i),g=B(()=>ot(u.value));xt(c,X=>{X&&setTimeout(()=>{D.value=JSON.parse(JSON.stringify(y.value[e.periodIndex]))},300)});let p=M(!1),f=M(null),b=M("");function w(){p.value=!1,b.value=""}let D=M(null),v=M({startTime:B({get:()=>E.value.startTime,set:X=>{E.value.startTime=X}}),endTime:B({get:()=>E.value.endTime,set:X=>{E.value.endTime=X}}),periodServiceList:B({get:()=>E.value.periodServiceList,set:X=>{E.value.periodServiceList=X}}),periodLocationList:B({get:()=>E.value.periodLocationList,set:X=>{E.value.periodLocationList=X}})}),P=M(null),S=B(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),A=M();ze("formWrapper",A);let d=M(s.getters["entities/getLocations"]),_=B(()=>{let X=kr(s),K=E.value.periodServiceList.filter(te=>X.map(le=>le.id).indexOf(te)===-1);return X.concat(s.getters["entities/getServices"].filter(te=>K.indexOf(te.id)!==-1))}),y=B(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),E=B(()=>e.periodIndex!==null?y.value[e.periodIndex]:null);function C(X){return Mt(Ut(X)-l.general.timeSlotLength)}function L(X){let K=Mt(Ut(X)+l.general.timeSlotLength);return K==="00:00"?null:K}function V(){P.value.validate(X=>{X&&a("close")})}function T(){e.isNew?y.value.pop():y.value[e.periodIndex]=D.value,a("close")}let q=U("amFonts"),H=U("amColors"),z=B(()=>({"--am-c-csd-text":H.value.colorMainText,"--am-c-csd-bgr":H.value.colorMainBgr,"--am-c-csd-text-op10":Q(H.value.colorMainText,.1),"--am-c-scroll-op30":Q(H.value.colorPrimary,.3),"--am-c-scroll-op10":Q(H.value.colorPrimary,.1),"--am-font-family":q.value.fontFamily}));return(X,K)=>{const te=vt,le=st;return x(),Y(Sa,{visibility:t(e).visibility,style:Ce(t(z)),"custom-class":`am-csd am-csd__period${t(r)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":T},wr({footer:I(()=>[m("div",{class:j(["am-csd__period-footer",t(g)])},[$(Fe,{category:"secondary",type:"plain",size:t(r)>430?"default":"small",onClick:T},{default:I(()=>[ue(k(t(o).cancel),1)]),_:1},8,["size"]),$(Fe,{size:t(r)>430?"default":"small",onClick:V},{default:I(()=>[ue(k(t(o).save),1)]),_:1},8,["size"])],2)]),default:I(()=>[t(E)?(x(),F("div",{key:0,ref_key:"popupPeriodRef",ref:i,class:"am-csd__period-content"},[m("div",Bm,[t(p)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:f,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:w,onTriggerClose:w},{title:I(()=>[Am,ue(" "+k(t(b)),1)]),_:1},512)):N("",!0),$(le,{ref_key:"periodFormRef",ref:P,class:"am-csd__period-form",rules:t(S),model:t(v),"label-position":"top"},{default:I(()=>[$(te,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__period-form__item am-w-50",t(g)])},{default:I(()=>[$(ka,{modelValue:t(E).startTime,"onUpdate:modelValue":K[0]||(K[0]=ee=>t(E).startTime=ee),placeholder:t(o).from,start:"00:00",end:C("24:00"),"min-time":t(e).periodIndex===0?null:C(t(y)[t(e).periodIndex-1].endTime),"max-time":t(e).periodIndex===t(y).length-1?null:t(E).endTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","end","min-time","max-time","step"])]),_:1},8,["label","class"]),$(te,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__period-form__item am-w-50",t(g)])},{default:I(()=>[$(ka,{modelValue:t(E).endTime,"onUpdate:modelValue":K[1]||(K[1]=ee=>t(E).endTime=ee),placeholder:t(o).to_upper,disabled:!t(E).startTime,start:L("00:00"),end:"24:00","min-time":t(E).startTime,"max-time":t(e).periodIndex===t(y).length-1?null:L(t(y)[t(e).periodIndex+1].startTime),step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","min-time","max-time","step"])]),_:1},8,["label","class"]),$(te,{label:`${t(o).heading_services}:`,prop:"periodServiceList",class:"am-csd__period-form__item"},{default:I(()=>[$(Je,{modelValue:t(E).periodServiceList,"onUpdate:modelValue":K[2]||(K[2]=ee=>t(E).periodServiceList=ee),placeholder:`${t(o).all_services}`,multiple:"",clearable:""},{default:I(()=>[(x(!0),F(ne,null,ve(t(_),ee=>(x(),Y(Ye,{key:ee.id,value:ee.id,label:ee.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),t(d).length>0?(x(),Y(te,{key:0,label:`${t(o).location}:`,prop:"periodLocationList",class:"am-csd__period-form__item"},{default:I(()=>[$(Je,{modelValue:t(E).periodLocationList,"onUpdate:modelValue":K[3]||(K[3]=ee=>t(E).periodLocationList=ee),placeholder:`${t(o).all_locations}`,multiple:"",clearable:""},{default:I(()=>[(x(!0),F(ne,null,ve(t(d),ee=>(x(),Y(Ye,{key:ee.id,value:ee.id,label:ee.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0)]),_:1},8,["rules","model"])])],512)):N("",!0)]),_:2},[t(e).title?{name:"header",fn:I(()=>[m("div",bm,k(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const km={class:"am-csd__timeOut-header"},wm={class:"am-csd__timeOut-content__inner"},Pm=m("span",{class:"am-icon-clearable"},null,-1),Tm={name:"WorkTimeOut"},Lm=Object.assign(Tm,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},origin:{type:String,default:""},timeOutIndex:{type:Number,default:0},originIndex:{type:Number,default:0},isNew:{type:Boolean,default:!1}},emits:["close"],setup(n,{emit:a}){const e=n;let s=Ne();const l=U("settings");let o=U("amLabels"),r=U("pageWidth"),i=M(null),c=B(()=>e.visibility);const{width:u}=Za(i),g=B(()=>ot(u.value));xt(c,z=>{z&&setTimeout(()=>{D.value=JSON.parse(JSON.stringify(d.value[e.timeOutIndex]))},300)});let p=M(!1),f=M(null),b=M("");function w(){p.value=!1,b.value=""}let D=M(null),v=M({startTime:B({get:()=>y.value.startTime,set:z=>{y.value.startTime=z}}),endTime:B({get:()=>y.value.endTime,set:z=>{y.value.endTime=z}})}),P=M(null),S=B(()=>({startTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}],endTime:[{required:!0,message:o.select_time_warning,trigger:["submit","change"]}]})),A=M();ze("formWrapper",A);let d=B(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].timeOutList),_=B(()=>s.getters["employee/getEmployee"][e.origin][e.originIndex].periodList),y=B(()=>e.timeOutIndex!==null?d.value[e.timeOutIndex]:null);B(()=>_.value.length?C(_.value[0].startTime):"00:00"),B(()=>_.value.length?E(_.value[_.value.length-1].endTime):"00:00");function E(z){return Mt(Ut(z)-l.general.timeSlotLength)}function C(z){let X=Mt(Ut(z)+l.general.timeSlotLength);return X==="00:00"?null:X}function L(){P.value.validate(z=>{z&&a("close")})}function V(){e.isNew?d.value.pop():d.value[e.timeOutIndex]=D.value,a("close")}let T=U("amFonts"),q=U("amColors"),H=B(()=>({"--am-c-csd-text":q.value.colorMainText,"--am-c-csd-bgr":q.value.colorMainBgr,"--am-c-csd-text-op10":Q(q.value.colorMainText,.1),"--am-c-scroll-op30":Q(q.value.colorPrimary,.3),"--am-c-scroll-op10":Q(q.value.colorPrimary,.1),"--am-font-family":T.value.fontFamily}));return(z,X)=>{const K=vt,te=st;return x(),Y(Sa,{visibility:t(e).visibility,style:Ce(t(H)),"custom-class":`am-csd am-csd__timeOut${t(r)<=400?" am-w-100":""}`,position:"center","onUpdate:visibility":V},wr({footer:I(()=>[m("div",{class:j(["am-csd__timeOut-footer",t(g)])},[$(Fe,{category:"secondary",type:"plain",size:t(r)>430?"default":"small",onClick:V},{default:I(()=>[ue(k(t(o).cancel),1)]),_:1},8,["size"]),$(Fe,{size:t(r)>430?"default":"small",onClick:L},{default:I(()=>[ue(k(t(o).save),1)]),_:1},8,["size"])],2)]),default:I(()=>[t(y)?(x(),F("div",{key:0,ref_key:"popupTimeOutRef",ref:i,class:"am-csd__timeOut-content"},[m("div",wm,[t(p)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:f,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:w,onTriggerClose:w},{title:I(()=>[Pm,ue(" "+k(t(b)),1)]),_:1},512)):N("",!0),$(te,{ref_key:"timeOutFormRef",ref:P,class:"am-csd__timeOut-form",rules:t(S),model:t(v),"label-position":"top"},{default:I(()=>[$(K,{label:`${t(o).time}:`,prop:"startTime",class:j(["am-csd__timeOut-form__item am-w-50",t(g)])},{default:I(()=>[$(ka,{modelValue:t(y).startTime,"onUpdate:modelValue":X[0]||(X[0]=le=>t(y).startTime=le),placeholder:t(o).from,start:C(t(_)[0].startTime),end:E(t(_)[t(_).length-1].endTime),step:t(Mt)(t(l).general.timeSlotLength),"max-time":t(d)[t(e).timeOutIndex].endTime},null,8,["modelValue","placeholder","start","end","step","max-time"])]),_:1},8,["label","class"]),$(K,{label:`${t(o).time}:`,prop:"endTime",class:j(["am-csd__timeOut-form__item am-w-50",t(g)])},{default:I(()=>[$(ka,{modelValue:t(y).endTime,"onUpdate:modelValue":X[1]||(X[1]=le=>t(y).endTime=le),placeholder:t(o).to_upper,disabled:!t(y).startTime,start:C(t(_)[0].startTime),end:E(t(_)[t(_).length-1].endTime),"min-time":t(d)[t(e).timeOutIndex].startTime,step:t(Mt)(t(l).general.timeSlotLength)},null,8,["modelValue","placeholder","disabled","start","end","min-time","step"])]),_:1},8,["label","class"])]),_:1},8,["rules","model"])])],512)):N("",!0)]),_:2},[t(e).title?{name:"header",fn:I(()=>[m("div",km,k(t(e).title),1)])}:void 0]),1032,["visibility","style","custom-class"])}}});const Sm={class:"am-cc__edit"},Im=m("span",{class:"am-icon-edit"},null,-1),$m={class:"am-cc__edit-text"},Nm=m("span",{class:"am-icon-search"},null,-1),Om={class:"am-cc__edit-text"},Mm=m("span",{class:"am-icon-clearable"},null,-1),Vm={class:"am-cc__edit-text"},Rm=m("span",{class:"am-icon-clearable"},null,-1),qm={class:"am-cc__edit-text"},Um={name:"DotsPopup"},Ea=Object.assign(Um,{props:{index:{type:Number,default:0},referenceClass:{type:String,default:""},haveDuplicate:{type:Boolean,default:!1},haveDelete:{type:Boolean,default:!0},haveEdit:{type:Boolean,default:!0},haveView:{type:Boolean,default:!1}},emits:["remove","edit","duplicate"],setup(n,{emit:a}){const e=n;let s=U("amLabels"),l=M(!1);function o(){l.value=!0}function r(){a("edit",e.index),u()}function i(){a("remove",e.index),u()}function c(){a("duplicate",e.index),u()}function u(){l.value=!1}let g=U("amFonts"),p=U("amColors"),f=B(()=>({"--am-c-cc-error":p.value.colorError,"--am-c-cc-error-op15":Q(p.value.colorError,.15),"--am-c-cc-bgr":p.value.colorMainBgr,"--am-c-cc-text":p.value.colorMainText,"--am-c-cc-text-op10":Q(p.value.colorMainText,.1),"--am-c-cc-text-op15":Q(p.value.colorMainText,.15),"--am-font-family":g.value.fontFamily}));return(b,w)=>{const D=bs;return x(),Y(D,{ref:"editRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(f),trigger:"click"},{reference:I(()=>[m("span",{class:j(["am-cc__edit-btn am-icon-dots-vertical",t(e).referenceClass]),onClick:o},null,2)]),default:I(()=>[$t((x(),F("div",Sm,[t(e).haveEdit?(x(),F("div",{key:0,class:"am-cc__edit-item",onClick:r},[Im,m("span",$m,k(t(s).edit),1)])):N("",!0),t(e).haveView?(x(),F("div",{key:1,class:"am-cc__edit-item",onClick:r},[Nm,m("span",Om,k(t(s).view),1)])):N("",!0),t(e).haveDelete?(x(),F("div",{key:2,class:"am-cc__edit-item am-delete",onClick:i},[Mm,m("span",Vm,k(t(s).delete),1)])):N("",!0),t(e).haveDuplicate?(x(),F("div",{key:3,class:"am-cc__edit-item am-clone",onClick:c},[Rm,m("span",qm,k(t(s).duplicate),1)])):N("",!0)])),[[t(ea),u]])]),_:1},8,["visible","popper-style"])}}});const zm={class:"am-caeper__heading-item am-w-20"},jm={class:"am-caeper__heading-item am-w-40"},Ym={class:"am-caeper__heading-item am-w-40"},Wm={key:1},Hm={class:"am-caeper__heading-item am-w-20"},Zm={key:0,class:"am-caeper__error"},Gm={name:"WorkPeriods"},fi=Object.assign(Gm,{props:{title:{type:String,default:""},type:{type:String,default:""},index:{type:Number,default:0},enabled:{type:Boolean,default:!1},headerVisible:{type:Boolean,default:!0},applyToAllDaysVisible:{type:Boolean,default:!0},footerVisible:{type:Boolean,default:!0},editVisible:{type:Boolean,default:!0},error:{type:String,default:""},responsiveClass:{type:String,default:""}},emits:["addPeriod"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("amLabels"),o=B(()=>s.getters["entities/getLocations"]),r=B(()=>s.getters["entities/getServices"]),i=B(()=>kr(s)),c=B(()=>{let S=s.getters["employee/getEmployee"];switch(e.type){case"weekDayList":return S.weekDayList[e.index].periodList;case"specialDayList":return S.specialDayList[e.index].periodList}return[]}),u=B(()=>{let S=s.getters["employee/getEmployee"];return e.type==="weekDayList"?S.weekDayList[e.index].timeOutList:[]}),g=M(null),p=M(null),f=M(null);function b(){c.value.push({id:null,locationId:null,startTime:"",endTime:"",periodLocationList:[],periodServiceList:[],editing:!0}),f.value=!0,g.value=c.value.length-1,a("addPeriod")}function w(){let S=[];s.getters["employee/getEmployee"].weekDayList[e.index].periodList.forEach(A=>{S.push({id:null,locationId:null,startTime:A.startTime,endTime:A.endTime,periodLocationList:[...A.periodLocationList],periodServiceList:[...A.periodServiceList],editing:!1})}),s.getters["employee/getEmployee"].weekDayList.forEach((A,d)=>{d!==e.index&&(A.periodList=JSON.parse(JSON.stringify(S)))})}function D(){return!c.value.length||!c.value.filter(S=>S.startTime&&S.endTime).length||c.value[c.value.length-1].endTime!=="00:00"}let v=U("amColors"),P=B(()=>({"--am-c-caeper-bgr":v.value.colorMainBgr,"--am-c-caeper-text":v.value.colorMainText,"--am-c-caeper-text-op80":Q(v.value.colorMainText,.8)}));return(S,A)=>$t((x(),F("div",{class:"am-caeper",style:Ce(t(P))},[t(e).headerVisible&&t(c).length?(x(),F("div",{key:0,class:j(["am-caeper__heading",t(e).responsiveClass])},[m("div",zm,k(t(l).time),1),m("div",jm,k(t(l).service_colon),1),m("div",Ym,k(t(l).location),1)],2)):N("",!0),(x(!0),F(ne,null,ve(t(c),(d,_)=>(x(),F("div",{key:_,class:"am-caeper__content"},[m("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},k(d.startTime?d.startTime.substring(0,5):"")+" - "+k(d.endTime?d.endTime.substring(0,5):""),3),m("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!d.periodServiceList.length}]])},k(d.periodServiceList.filter(y=>t(i).map(E=>E.id).indexOf(y)!==-1).map(y=>t(r).find(E=>E.id===y).name).join(", ")),3),m("div",{class:j(["am-caeper__content-item am-w-40",[t(e).responsiveClass,{"am-cabinet-empty":!d.periodLocationList.length}]])},k(d.periodLocationList.map(y=>t(o).find(E=>E.id===y).name).join(", ")),3),t(e).editVisible?(x(),Y(Ea,{key:0,index:_,onRemove:y=>t(c).splice(_,1),onEdit:y=>Ae(g)?g.value=_:g=_},null,8,["index","onRemove","onEdit"])):N("",!0)]))),128)),t(u).length?(x(),F("span",Wm,k(t(l).breaks),1)):N("",!0),t(e).headerVisible&&t(u).length?(x(),F("div",{key:2,class:j(["am-caeper__heading",t(e).responsiveClass])},[m("div",Hm,k(t(l).time),1)],2)):N("",!0),(x(!0),F(ne,null,ve(t(u),(d,_)=>(x(),F("div",{key:_,class:"am-caeper__content"},[m("div",{class:j(["am-caeper__content-item am-w-20",t(e).responsiveClass])},k(d.startTime?d.startTime.substring(0,5):"")+" - "+k(d.endTime?d.endTime.substring(0,5):""),3),t(e).editVisible?(x(),Y(Ea,{key:0,index:_,onRemove:y=>t(u).splice(_,1),onEdit:y=>Ae(p)?p.value=_:p=_},null,8,["index","onRemove","onEdit"])):N("",!0)]))),128)),t(e).footerVisible?(x(),F("div",{key:3,class:j(["am-caeper__footer",[{"am-error":t(e).error},t(e).responsiveClass]])},[t(e).error?(x(),F("div",Zm,k(t(e).error),1)):N("",!0),D()?(x(),Y(Fe,{key:1,prefix:"plus",size:"small",onClick:A[0]||(A[0]=d=>b())},{default:I(()=>[ue(k(t(l).add_period),1)]),_:1})):N("",!0),t(e).applyToAllDaysVisible?(x(),Y(Fe,{key:2,size:"small",category:"secondary",type:"plain",onClick:w},{default:I(()=>[ue(k(t(l).apply_to_all_days),1)]),_:1})):N("",!0)],2)):N("",!0),$(Dm,{title:t(e).title,visibility:t(g)!==null,origin:t(e).type,"period-index":t(g),"origin-index":n.index,"is-new":t(f),onClose:A[1]||(A[1]=()=>{Ae(g)?g.value=null:g=null,Ae(f)?f.value=null:f=null})},null,8,["title","visibility","origin","period-index","origin-index","is-new"]),$(Lm,{title:t(l).break_hours,visibility:t(p)!==null,origin:t(e).type,"time-out-index":t(p),"origin-index":n.index,"is-new":!1,"is-break":!0,onClose:A[2]||(A[2]=()=>{Ae(p)?p.value=null:p=null})},null,8,["title","visibility","origin","time-out-index","origin-index"])],4)),[[mo,t(e).enabled]])}});const Jm={class:"am-caewh__header"},Xm={class:"am-caewh__header-text"},Qm={class:"am-caewh__content"},Km={name:"WeekDays"},ep=Object.assign(Km,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Ne(),s=U("amLabels"),l=B(()=>e.getters["employee/getEmployee"]),o=M([{label:s.weekday_monday,value:"monday"},{label:s.weekday_tuesday,value:"tuesday"},{label:s.weekday_wednesday,value:"wednesday"},{label:s.weekday_thursday,value:"thursday"},{label:s.weekday_friday,value:"friday"},{label:s.weekday_saturday,value:"saturday"},{label:s.weekday_sunday,value:"sunday"}]),r=U("amColors"),i=B(()=>({"--am-c-caewh-primary":r.value.colorPrimary,"--am-c-caewh-bgr":r.value.colorMainBgr,"--am-c-caewh-text":r.value.colorMainText,"--am-c-caewh-text-op03":Q(r.value.colorMainText,.03),"--am-c-caewh-bgr-op03":Q(r.value.colorInpBgr,.03)}));return(c,u)=>(x(),F("div",{class:"am-caewh",style:Ce(t(i))},[(x(!0),F(ne,null,ve(t(l).weekDayList,(g,p)=>(x(),F("div",{key:p,class:"am-caewh__item"},[m("div",Jm,[m("div",Xm,k(t(o)[p].label),1),$(rt,{modelValue:g.enabled,"onUpdate:modelValue":f=>g.enabled=f,size:"small","aria-label":t(o)[p].label},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),m("div",Qm,[$(fi,{title:t(s).working_hours,enabled:g.enabled,index:p,type:"weekDayList","responsive-class":t(a).responsiveClass},null,8,["title","enabled","index","responsive-class"])])]))),128))],4))}});const tp={class:"am-caesd__item"},ap={class:"am-caesd__item-header"},sp={key:2},lp={key:0,class:"am-caesd__footer"},np={name:"SpecialDays"},op=Object.assign(np,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Ne(),s=U("amLabels"),l=U("localLanguage"),o=B(()=>e.getters["employee/getEmployee"].specialDayList),r=tt({data:null,index:null}),i=M({range:B({get:()=>e.getters["employee/getEmployee"].specialDayList[r.index].range,set:d=>{e.getters["employee/getEmployee"].specialDayList[r.index].range=d}})}),c=M([]),u=B(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}]}));function g(d){o.value.splice(d,1)}function p(d){r.index=d,r.data=JSON.parse(JSON.stringify(o.value[d]))}function f(d){let _=[];o.value[d].periodList.forEach(y=>{_.push({id:null,locationId:null,startTime:y.startTime,endTime:y.endTime,periodLocationList:[...y.periodLocationList],periodServiceList:[...y.periodServiceList],editing:!1})}),e.getters["employee/getEmployee"].specialDayList.push({id:null,range:[],periodList:_}),r.index=o.value.length-1,r.data={}}let b=M("");function w(d){let _=e.getters["employee/getEmployee"].specialDayList[d].periodList;c.value[d].validate(y=>{y&&_.length>0?(b.value="",r.index=null,r.data=null):b.value="Please add period to special day"})}function D(d){Object.keys(r.data).length===0?o.value.pop():o.value[d]=r.data,r.index=null,r.data=null,b.value=""}function v(){o.value.push({id:null,range:[],periodList:[]}),r.index=o.value.length-1,r.data={}}function P(d,_){d?c.value[_]=d:c.value.splice(_,1)}let S=U("amColors"),A=B(()=>({"--am-c-caesd-bgr":S.value.colorMainBgr,"--am-c-caesd-text":S.value.colorMainText,"--am-c-caesd-text-op03":Q(S.value.colorMainText,.03),"--am-c-caesd-text-op80":Q(S.value.colorMainText,.8)}));return(d,_)=>{const y=vt,E=st;return x(),F("div",{class:"am-caesd",style:Ce(t(A))},[(x(!0),F(ne,null,ve(t(o),(C,L)=>(x(),F("div",{key:L,class:"am-caesd__content"},[m("div",tp,[m("div",ap,[t(r).index!==L?(x(),F(ne,{key:0},[m("div",null,k(C.range[0]?t(it)(t(ye)(C.range[0]).format("YYYY-MM-DD")):"")+" - "+k(C.range[1]?t(it)(t(ye)(C.range[1]).format("YYYY-MM-DD")):""),1),$(Ea,{index:L,"have-duplicate":!0,onRemove:V=>g(L),onEdit:V=>p(L),onDuplicate:V=>f(L)},null,8,["index","onRemove","onEdit","onDuplicate"])],64)):N("",!0),t(r).index===L?(x(),Y(E,{key:1,ref_for:!0,ref:V=>P(V,L),class:"am-caesd__form",rules:t(u),model:t(i),"label-position":"top"},{default:I(()=>[$(y,{prop:"range"},{default:I(()=>[$(Ht,{modelValue:t(i).range,"onUpdate:modelValue":_[0]||(_[0]=V=>t(i).range=V),type:"daterange",size:"small","popper-class":"am-cap__datepicker-popper","prefix-icon":Qe({components:{IconComponent:Ge},template:"<IconComponent icon='calendar'/>"}),format:t(Wt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","prefix-icon","format","placeholder","lang"])]),_:1})]),_:2},1032,["rules","model"])):N("",!0),t(b)?(x(),F("div",sp)):N("",!0)]),m("div",{class:j(["am-caesd__item-inner",{"am-editable":t(r).index===L}])},[$(fi,{title:t(s).special_days,enabled:!0,index:L,type:"specialDayList","apply-to-all-days-visible":!1,"header-visible":t(r).index===L,"edit-visible":t(r).index===L,"footer-visible":t(r).index===L,error:t(r).index===L?t(b):"","responsive-class":t(a).responsiveClass,onAddPeriod:_[1]||(_[1]=()=>{Ae(b)?b.value="":b=""})},null,8,["title","index","header-visible","edit-visible","footer-visible","error","responsive-class"])],2)]),t(r).index===L?(x(),F("div",lp,[$(Fe,{category:"secondary",type:"plain",size:"small",onClick:V=>D(L)},{default:I(()=>[ue(k(t(s).cancel),1)]),_:2},1032,["onClick"]),$(Fe,{size:"small",onClick:V=>w(L)},{default:I(()=>[ue(k(t(s).save),1)]),_:2},1032,["onClick"])])):N("",!0)]))),128)),t(o).length===0?(x(),Y(Ta,{key:0,heading:t(s).no_special_days_yet},null,8,["heading"])):N("",!0),t(r).index===null?(x(),F("div",{key:1,class:j(t(o).length===0?"add-btn":"")},[$(Fe,{size:"small",onClick:_[2]||(_[2]=C=>v())},{default:I(()=>[ue(k(t(s).add_special_day),1)]),_:1})],2)):N("",!0)],4)}}});const rp={key:0,class:"am-caedo__title_emp"},ip={class:"am-caedo__heading-item am-w-50"},cp={class:"am-caedo__heading-item am-w-30"},xp={class:"am-caedo__heading-item am-w-20"},up={class:"am-caedo__content-item"},dp={key:0,class:"am-caedo__wrapper"},mp={class:"am-caedo__footer"},pp={key:4,class:"am-caedo__title_global"},fp={class:"am-caedo__heading-item am-w-50"},gp={class:"am-caedo__heading-item am-w-30"},hp={class:"am-caedo__heading-item am-w-20"},vp={class:"am-caedo__content-item"},Ep={name:"DaysOff"},_p=Object.assign(Ep,{props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=Ne(),s=U("amLabels"),l=U("localLanguage");const o=U("settings");let r=B(()=>e.getters["employee/getEmployee"].dayOffList),i=M([]),c=tt({data:null,index:null}),u=M({range:B({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].range,set:_=>{e.getters["employee/getEmployee"].dayOffList[c.index].range=_}}),name:B({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].name,set:_=>{e.getters["employee/getEmployee"].dayOffList[c.index].name=_}}),repeat:B({get:()=>e.getters["employee/getEmployee"].dayOffList[c.index].repeat,set:_=>{e.getters["employee/getEmployee"].dayOffList[c.index].repeat=_}})}),g=M([]),p=B(()=>({range:[{required:!0,message:s.select_date_warning,trigger:["submit","change"]}],name:[{required:!0,message:s.days_off_name_warning,trigger:["submit","change"]}]}));function f(_){r.value.splice(_,1)}function b(_){c.index=_,c.data=JSON.parse(JSON.stringify(r.value[_]))}function w(_){g.value[_].validate(y=>{y&&(c.index=null,c.data=null)})}function D(_){Object.keys(c.data).length===0?r.value.pop():r.value[_]=c.data,c.index=null,c.data=null}function v(){r.value.push({id:null,name:"",repeat:!1,range:[]}),c.index=r.value.length-1,c.data={}}function P(_){let y=_.range[0]?it(ye(_.range[0]).format("YYYY-MM-DD")):"",E=_.range[1]?it(ye(_.range[1]).format("YYYY-MM-DD")):"";return`${y} - ${E}`}function S(_,y){_?g.value[y]=_:g.value.splice(y,1)}Ze(()=>{i.value=o.daysOff.map(_=>new Object({range:[_.startDate,_.endDate],name:_.name,repeat:_.repeat}))});let A=U("amColors"),d=B(()=>({"--am-c-caedo-bgr":A.value.colorMainBgr,"--am-c-caedo-text":A.value.colorMainText,"--am-c-caedo-text-op80":Q(A.value.colorMainText,.8),"--am-c-caedo-text-op03":Q(A.value.colorMainText,.03)}));return(_,y)=>{const E=vt,C=st;return x(),F("div",{class:"am-caedo",style:Ce(t(d))},[t(i).length?(x(),F("span",rp,k(t(s).employee_days_off),1)):N("",!0),t(r).length||t(i).length?(x(),F("div",{key:1,class:j(["am-caedo__heading",t(a).responsiveClass])},[m("div",ip,k(t(s).date),1),m("div",cp,k(t(s).name),1),m("div",xp,k(t(s).days_off_repeat_yearly),1)],2)):N("",!0),(x(!0),F(ne,null,ve(t(r),(L,V)=>(x(),F("div",{key:V,class:"am-caedo__content"},[m("div",up,[m("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).date),3),ue(" "+k(P(L)),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).name),3),ue(" "+k(L.name),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).days_off_repeat_yearly),3),ue(" "+k(L.repeat?t(s).yes:t(s).no),1)],2),t(c).index===null?(x(),Y(Ea,{key:0,index:V,onRemove:T=>f(V),onEdit:T=>b(V)},null,8,["index","onRemove","onEdit"])):N("",!0)]),t(c).index===V?(x(),F("div",dp,[$(C,{ref_for:!0,ref:T=>S(T,V),class:"am-caedo__form",rules:t(p),model:t(u),"label-position":"top"},{default:I(()=>[$(E,{label:`${t(s).date}:`,prop:"range"},{default:I(()=>[$(Ht,{modelValue:t(u).range,"onUpdate:modelValue":y[0]||(y[0]=T=>t(u).range=T),type:"daterange","popper-class":"am-cap__datepicker-popper",format:t(Wt)(),placeholder:t(s).select_date,lang:t(l)},null,8,["modelValue","format","placeholder","lang"])]),_:1},8,["label"]),$(E,{label:`${t(s).name}:`,prop:"name"},{default:I(()=>[$(ct,{modelValue:t(u).name,"onUpdate:modelValue":y[1]||(y[1]=T=>t(u).name=T)},null,8,["modelValue"])]),_:1},8,["label"]),$(E,{prop:"repeat"},{default:I(()=>[$(ht,{modelValue:t(u).repeat,"onUpdate:modelValue":y[2]||(y[2]=T=>t(u).repeat=T),label:t(s).days_off_repeat_yearly},null,8,["modelValue","label"])]),_:1})]),_:2},1032,["rules","model"]),m("div",mp,[$(Fe,{category:"secondary",size:"small",type:"plain",onClick:T=>D(V)},{default:I(()=>[ue(k(t(s).cancel),1)]),_:2},1032,["onClick"]),$(Fe,{size:"small",onClick:T=>w(V)},{default:I(()=>[ue(k(t(s).save),1)]),_:2},1032,["onClick"])])])):N("",!0)]))),128)),t(r).length===0&&t(i).length===0?(x(),Y(Ta,{key:2,heading:t(s).no_days_off_yet},null,8,["heading"])):N("",!0),t(c).index===null?(x(),F("div",{key:3,class:j(t(r).length===0&&t(i).length===0?"add-btn":"")},[$(Fe,{size:"small",onClick:y[3]||(y[3]=L=>v())},{default:I(()=>[ue(k(t(s).add_day_off),1)]),_:1})],2)):N("",!0),t(i).length?(x(),F("span",pp,k(t(s).company_days_off),1)):N("",!0),t(i).length?(x(),F("div",{key:5,class:j(["am-caedo__heading",t(a).responsiveClass])},[m("div",fp,k(t(s).date),1),m("div",gp,k(t(s).name),1),m("div",hp,k(t(s).days_off_repeat_yearly),1)],2)):N("",!0),(x(!0),F(ne,null,ve(t(i),(L,V)=>(x(),F("div",{key:V,class:"am-caedo__content"},[m("div",vp,[m("div",{class:j(["am-caedo__content-item__inner am-w-50",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).date),3),ue(" "+k(P(L)),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-30",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).name),3),ue(" "+k(L.name),1)],2),m("div",{class:j(["am-caedo__content-item__inner am-w-20",t(a).responsiveClass])},[m("div",{class:j(["am-caedo__content-item__label",t(a).responsiveClass])},k(t(s).days_off_repeat_yearly),3),ue(" "+k(L.repeat?t(s).yes:t(s).no),1)],2)])]))),128))],4)}}});const Cp={class:"am-cc__edit"},yp={class:"am-cc__edit-text"},bp={class:"am-cc__edit-text"},Bp={class:"am-cc__edit"},Ap={class:"am-cc__edit-text"},Fp={class:"am-cc__edit-text"},Dp={class:"am-cc__edit"},kp={class:"am-cc__edit-text"},wp={class:"am-cc__edit-text"},Pp={name:"StripeConnect"},Tp=Object.assign(Pp,{setup(n){let a=Ne(),e=U("amLabels"),s=B(()=>a.getters["auth/getStripeProvider"]),l=M(!1);function o(b){b.stopPropagation(),l.value=!l.value}function r(b){K0(a,b),u()}function i(){tc(a),u()}function c(){ec(a),u()}function u(){l.value=!1}let g=U("amFonts"),p=U("amColors"),f=B(()=>({"--am-c-cc-error":p.value.colorError,"--am-c-cc-error-op15":Q(p.value.colorError,.15),"--am-c-cc-bgr":p.value.colorMainBgr,"--am-c-cc-text":p.value.colorMainText,"--am-c-cc-text-op10":Q(p.value.colorMainText,.1),"--am-c-cc-text-op15":Q(p.value.colorMainText,.15),"--am-font-family":g.value.fontFamily}));return(b,w)=>{const D=bs;return t(s)&&t(s).id&&t(s).completed?(x(),Y(D,{key:0,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(f),trigger:"click"},{reference:I(()=>[$(Fe,{onClick:o},{default:I(()=>[ue(k(t(e).stripe_connect)+" "+k("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:I(()=>[$t((x(),F("div",Cp,[m("div",{class:"am-cc__edit-item",onClick:w[0]||(w[0]=v=>i())},[m("span",yp,k(t(e).stripe_preview),1)]),m("div",{class:"am-cc__edit-item",onClick:w[1]||(w[1]=v=>c())},[m("span",bp,k(t(e).disconnect),1)])])),[[t(ea),u]])]),_:1},8,["visible","popper-style"])):t(s)&&t(s).id&&!t(s).completed?(x(),Y(D,{key:1,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(f),trigger:"click"},{reference:I(()=>[$(Fe,{onClick:o},{default:I(()=>[ue(k(t(e).stripe_connect)+" "+k("("+(t(s).email?t(s).email:t(s).id)+")"),1)]),_:1})]),default:I(()=>[$t((x(),F("div",Bp,[m("div",{class:"am-cc__edit-item",onClick:w[2]||(w[2]=v=>r(t(s).type))},[m("span",Ap,k(t(e).stripe_onboard),1)]),m("div",{class:"am-cc__edit-item",onClick:w[3]||(w[3]=v=>c())},[m("span",Fp,k(t(e).disconnect),1)])])),[[t(ea),u]])]),_:1},8,["visible","popper-style"])):(x(),Y(D,{key:2,ref:"stripeConnectRef",visible:t(l),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(f),trigger:"click"},{reference:I(()=>[$(Fe,{onClick:o},{default:I(()=>[ue(k(t(e).stripe_connect),1)]),_:1})]),default:I(()=>[$t((x(),F("div",Dp,[m("div",{class:"am-cc__edit-item",onClick:w[4]||(w[4]=v=>r("standard"))},[m("span",kp,k(t(e).stripe_account_standard),1)]),m("div",{class:"am-cc__edit-item",onClick:w[5]||(w[5]=v=>r("express"))},[m("span",wp,k(t(e).stripe_account_express),1)])])),[[t(ea),u]])]),_:1},8,["visible","popper-style"]))}}});const Lp=["innerHTML"],Sp={key:2,class:"am-caedo__apple"},Ip={class:"am-caedo__apple__connect"},$p={props:{responsiveClass:{type:String,default:""}},setup(n){const a=n;let e=M(""),s=M("error"),l=M(!1);function o(){l.value=!1,e.value=""}const r=Ne(),i=U("baseUrls"),c=U("settings");let u=U("amLabels"),g=B(()=>r.getters["auth/getGoogleLoading"]||r.getters["auth/getOutlookLoading"]||r.getters["auth/getAppleLoading"]||r.getters["auth/getStripeLoading"]||r.getters["auth/getZoomLoading"]),p=B(()=>{let E=r.getters["auth/getZoomUsers"];return E.length?E.map(C=>({value:C.id,label:`${C.first_name} ${C.last_name} (${C.email})`})):[]}),f=B(()=>{let E=r.getters["auth/getGoogleCalendars"];return E.length?E.map(C=>({value:C.calendarId,label:C.summary})):[]}),b=B(()=>{let E=r.getters["auth/getOutlookCalendars"];return E.length?E.map(C=>({value:C.id,label:C.name})):[]}),w=B(()=>{let E=r.getters["auth/getAppleCalendars"];return E.length?E.map(C=>({value:C.id,label:C.name})):[]}),D=M(null),v=M({iCloudId:B({get:()=>r.getters["employee/getEmployeeAppleCalendarICloudId"],set:E=>{r.commit("employee/setEmployeeAppleCalendarICloudId",E||"")}}),appSpecificPassword:B({get:()=>r.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"],set:E=>{r.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",E||null)}})}),P=B(()=>r.getters["employee/getGoogleToken"]?u.google_sign_out:u.google_sign_in),S=B(()=>r.getters["employee/getOutlookToken"]?u.outlook_sign_out:u.outlook_sign_in),A=M({googleId:B({get:()=>r.getters["employee/getGoogleCalendarId"],set:E=>{r.commit("employee/setGoogleCalendarId",E||"")}}),googleBtn:"",outlookId:B({get:()=>r.getters["employee/getOutlookCalendarId"],set:E=>{r.commit("employee/setOutlookCalendarId",E||"")}}),outlookBtn:"",zoomUserId:B({get:()=>r.getters["employee/getZoomUserId"],set:E=>{r.commit("employee/setZoomUserId",E||"")}}),appleId:B({get:()=>r.getters["employee/getAppleCalendarId"],set:E=>{r.commit("employee/setAppleCalendarId",E||"")}})}),d=M({googleId:{template:We.select,props:{itemName:"googleId",label:u.google_calendar,placeholder:"",class:B(()=>`am-caepif__item ${a.responsiveClass}`),disabled:B(()=>!r.getters["employee/getGoogleToken"]),clearable:!1,options:f.value,loading:B(()=>r.getters["auth/getGoogleLoading"]),loadingIcon:"loading"}},googleBtn:{template:Qe(Fe),props:{class:B(()=>`am-caepif__item am-google-calendar-button ${a.responsiveClass}`),category:B(()=>"primary")},slots:{default:B(()=>`<img src="${i.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/google-button.svg" alt="Google" />${P.value}`)},handlers:{click:()=>{r.getters["employee/getGoogleToken"]?H0(r):W0(r)}}},outlookId:{template:We.select,props:{itemName:"outlookId",label:u.outlook_calendar,placeholder:"",class:B(()=>`am-caepif__item ${a.responsiveClass}`),disabled:B(()=>!r.getters["employee/getOutlookToken"]),clearable:!1,options:b.value,loading:B(()=>r.getters["auth/getOutlookLoading"]),loadingIcon:"loading"}},outlookBtn:{template:Qe(Fe),props:{class:B(()=>`am-caepif__item am-outlook-button ${a.responsiveClass}`),category:B(()=>"primary")},slots:{default:B(()=>`<div class="am-outlook-img"><img src="${i.wpAmeliaPluginURL}/v3/src/assets/img/cabinet/outlook-calendar.png" alt="Outlook"/></div>${S.value}`)},handlers:{click:()=>{r.getters["employee/getOutlookToken"]?J0(r):G0(r)}}},zoomUserId:{template:We.select,props:{itemName:"zoomUserId",label:u.zoom_user,placeholder:u.zoom_user_placeholder,class:B(()=>`am-caepif__item ${a.responsiveClass}`),options:p.value}},appleId:{template:We.select,props:{itemName:"appleId",label:u.apple_calendar,placeholder:u.apple_calendar_placeholder,class:B(()=>`am-caepif__item ${a.responsiveClass}`),disabled:!1,clearable:B(()=>!Aa.value),options:B(()=>w.value),loading:B(()=>r.getters["auth/getAppleLoading"]),loadingText:"Loading..."}}});Ze(()=>{c.appleCalendar&&D.value&&(D.value.contentVisibility=Aa.value)}),Gs(()=>{c.zoom.enabled||delete d.value.zoomUserId,c.googleCalendar.enabled||(delete d.value.googleId,delete d.value.googleBtn),c.outlookCalendar.enabled||(delete d.value.outlookId,delete d.value.outlookBtn),c.appleCalendar||delete d.value.appleId});function _(E){const C={iCloudId:E.getters["employee/getEmployeeAppleCalendarICloudId"],appSpecificPassword:E.getters["employee/getEmployeeAppleCalendarAppSpecificPassword"]};$e.post("/apple/connect/"+E.getters["employee/getId"],{employeeAppleCalendar:C}).then(()=>{E.commit("employee/setEmployeeAppleCalendarICloudId",C.iCloudId),E.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",C.appSpecificPassword),Hn(E)}).catch(L=>{l.value=!0,e.value=L.response.data.message,s.value="error"}).finally(()=>{l.value=!0})}function y(E){E.commit("auth/setAppleLoading",!0),$e.post("/apple/disconnect-employee/"+E.getters["employee/getId"]).then(()=>{E.commit("employee/setEmployeeAppleCalendarICloudId",null),E.commit("employee/setEmployeeAppleCalendarAppSpecificPassword",null),Aa.value=!1,Hn(E),w.value=E.getters["auth/getAppleCalendars"]}).catch(C=>{console.log(C)}).finally(()=>{E.commit("auth/setAppleLoading",!1)})}return(E,C)=>{const L=vt,V=st;return t(g)?(x(),Y(Zt,{key:1})):(x(),Y(V,{key:0,ref:"employeeFormRef",model:t(A),"label-position":"top",class:j(["am-caedo",a.responsiveClass])},{default:I(()=>[t(c).payments.stripe.enabled&&t(c).payments.stripe.connect.enabled?(x(),Y(Tp,{key:0})):N("",!0),m("div",{class:j(["am-caepif__block",a.responsiveClass])},[(x(!0),F(ne,null,ve(t(d),(T,q)=>(x(),Y(ft(T.template),kt({key:q,ref_for:!0,ref:"customerCollectorRef",modelValue:t(A)[q],"onUpdate:modelValue":H=>t(A)[q]=H},T.props,uo(T.handlers?T.handlers:{})),{default:I(()=>[T.slots&&T.slots.default?(x(),F("div",{key:0,innerHTML:T.slots.default},null,8,Lp)):N("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue"]))),128))],2),t(l)?(x(),Y(bt,{key:1,type:"error","show-border":!0,"close-after":5e3,onClose:o,onTriggerClose:o},{default:I(()=>[ue(k(t(e)),1)]),_:1})):N("",!0),t(c).appleCalendar?(x(),F("div",Sp,[$(fo,null,{default:I(()=>[$(po,{ref_key:"appleVisibility",ref:D,side:!0,delay:500},{heading:I(()=>[ue(k(t(u).apple_calendar_personal),1)]),default:I(()=>[m("div",Ip,[$(L,{label:t(u).apple_icloud_id,class:"am-caedo__apple__connect__item"},{default:I(()=>[$(ct,{modelValue:t(v).iCloudId,"onUpdate:modelValue":C[0]||(C[0]=T=>t(v).iCloudId=T),disabled:t(Aa),placeholder:t(u).apple_icloud_id},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),$(L,{label:t(u).apple_app_specific_password,class:"am-caedo__apple__connect__item"},{default:I(()=>[$(ct,{modelValue:t(v).appSpecificPassword,"onUpdate:modelValue":C[1]||(C[1]=T=>t(v).appSpecificPassword=T),type:"password","show-password":!0,disabled:t(Aa),placeholder:t(u).apple_app_specific_password},null,8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),$(Fe,{onClick:C[2]||(C[2]=T=>t(Aa)?y(t(r)):_(t(r)))},{default:I(()=>[ue(k(t(Aa)?t(u).apple_disconnect:t(u).apple_connect),1)]),_:1})])]),_:1},512)]),_:1})])):N("",!0)]),_:1},8,["model","class"]))}}};const Np={props:{tabActive:{type:String,required:!0},passwordActive:{type:Boolean,default:!1}},emits:["changePassword","savePassword","saveChanges"],setup(n,{emit:a}){const e=n;let s=U("amLabels");function l(){e.tabActive==="password"?a("savePassword"):a("saveChanges")}let o=U("amColors"),r=B(()=>({"--am-c-caepf-text-op15":Q(o.value.colorMainText,.15)}));return(i,c)=>(x(),F("div",{class:j(["am-caepf",{"am-single-btn":e.tabActive!=="details"||e.passwordActive}]),style:Ce(t(r))},[e.tabActive==="details"&&!e.passwordActive?(x(),Y(Fe,{key:0,size:"medium",category:"secondary",type:"plain",onClick:c[0]||(c[0]=u=>a("changePassword"))},{default:I(()=>[ue(k(t(s).change_password),1)]),_:1})):N("",!0),$(Fe,{size:"medium",onClick:l},{default:I(()=>[ue(k(e.tabActive!=="password"?t(s).save:t(s).change_password),1)]),_:1})],6))}},Op={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n,s=Ne();let l=U("amLabels"),o=M(null),r=M({newPass:B({get:()=>s.getters["auth/getNewPassword"],set:u=>{s.commit("auth/setNewPassword",u||"")}}),confirmPass:B({get:()=>s.getters["auth/getConfirmPassword"],set:u=>{s.commit("auth/setConfirmPassword",u||"")}})}),i=M({newPass:{template:We.text,props:{itemName:"newPass",itemType:"password",showPassword:!0,label:l.new_password_colon,placeholder:"",minLength:3,class:B(()=>`am-capp__item ${e.responsiveClass}`)}},confirmPass:{template:We.text,props:{itemName:"confirmPass",itemType:"password",showPassword:!0,label:l.new_password_colon_retype,placeholder:"",minLength:3,class:B(()=>`am-capp__item ${e.responsiveClass}`)}}}),c=M({newPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"}],confirmPass:[{required:!0,message:l.new_password_required,trigger:"submit"},{min:4,message:l.new_password_length,trigger:"submit"},{validator:()=>s.getters["auth/getNewPassword"]===s.getters["auth/getConfirmPassword"],message:l.passwords_not_match,trigger:"submit"}]});return a({passFormRef:o}),(u,g)=>{const p=st;return x(),Y(p,{ref_key:"passFormRef",ref:o,model:t(r),rules:t(c),"label-position":"top",class:j(["am-capi__form",n.responsiveClass])},{default:I(()=>[(x(!0),F(ne,null,ve(t(i),(f,b)=>(x(),Y(ft(f.template),kt({key:f.props.itemName,ref_for:!0,ref:"customerPassCollectorRef",modelValue:t(r)[b],"onUpdate:modelValue":w=>t(r)[b]=w},f.props),null,16,["modelValue","onUpdate:modelValue"]))),128))]),_:1},8,["model","rules","class"])}}};const Mp=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Vp={name:"CabinetEmployeeProfile"},Rp=Object.assign(Vp,{setup(n){let a=Ne();const e=U("settings");let s=U("amLabels"),l=M(null);const{width:o}=Za(l);let r=B(()=>ot(o.value));ze("pageWidth",o);let i=B(()=>a.getters["entities/getReady"]);const c=M("details");let u=M(""),g=M("success"),p=M(!1);function f(){p.value=!1}function b(){p.value=!1,u.value=""}let w=M(null),D=B(()=>a.getters["employee/getEmployee"]),v=B(()=>a.getters["auth/getGoogleLoading"]||a.getters["auth/getOutlookLoading"]||a.getters["auth/getAppleLoading"]||a.getters["auth/getStripeLoading"]||a.getters["auth/getZoomLoading"]),P=M(!1),S=U("timeZone");function A(){w.value.employeeFormRef.validate(V=>{!V||(P.value=!0,$e.post("/users/providers/"+D.value.id,Hi(a,S.value),Object.assign(Ue(a),{params:{source:"cabinet-provider"}})).then(()=>{u.value=s.profile_data_success,g.value="success"}).catch(T=>{u.value=T.response.data.message,g.value="error"}).finally(()=>{p.value=!0,P.value=!1}))})}let d=M(null),_=M(!1);function y(){_.value=!0,c.value="password"}function E(){d.value.passFormRef.validate(V=>{if(V){let T=a.getters["auth/getProfile"];P.value=!0,$e.post("/users/providers/"+T.id,{password:a.getters["auth/getNewPassword"]},Ue(a)).then(()=>{u.value=s.password_success,_.value=!1,c.value="details",a.commit("auth/setNewPassword",""),a.commit("auth/setConfirmPassword","")}).catch(()=>{p.value=!0}).finally(()=>{P.value=!1})}})}let C=U("amColors"),L=B(()=>({"--am-c-caep-primary":C.value.colorPrimary,"--am-c-caep-text":C.value.colorMainText,"--am-c-caep-text-op10":Q(C.value.colorMainText,.1)}));return(V,T)=>{const q=_a,H=Ca;return x(),F("div",{ref_key:"pageContainer",ref:l,class:"am-caep",style:Ce(t(L))},[t(i)&&!t(P)&&!t(v)?(x(),F("div",{key:0,class:j(["am-caep__inner",t(r)])},[t(p)?(x(),Y(bt,{key:0,type:t(g),"show-border":!0,"close-after":5e3,"custom-class":"am-capi__alert",onClose:b,onTriggerClose:b},{title:I(()=>[Mp,ue(" "+k(t(u)),1)]),_:1},8,["type"])):N("",!0),$(H,{modelValue:c.value,"onUpdate:modelValue":T[0]||(T[0]=z=>c.value=z)},{default:I(()=>[$(q,{label:t(s).details,name:"details",onClick:f},{default:I(()=>[$(Gd,{ref_key:"detailsRef",ref:w,"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"]),t(e).roles.allowConfigureServices?(x(),Y(q,{key:0,label:t(s).heading_services,name:"services"},{default:I(()=>[$(ym,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(e).roles.allowConfigureSchedule?(x(),Y(q,{key:1,label:t(s).working_hours,name:"workingHours"},{default:I(()=>[$(ep,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(e).roles.allowConfigureSpecialDays?(x(),Y(q,{key:2,label:t(s).special_days,name:"specialDays"},{default:I(()=>[$(op,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(e).roles.allowConfigureDaysOff?(x(),Y(q,{key:3,label:t(s).days_off,name:"daysOff"},{default:I(()=>[$(_p,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(_)?(x(),Y(q,{key:4,label:t(s).password,name:"password"},{default:I(()=>[t(P)?(x(),Y(Bl,{key:1,"item-direction":"column",count:2})):(x(),Y(Op,{key:0,ref_key:"changePassRef",ref:d},null,512))]),_:1},8,["label"])):N("",!0),t(e).zoom.enabled||t(e).googleCalendar.enabled||t(e).outlookCalendar.enabled||t(e).appleCalendar||t(e).payments.stripe.enabled&&t(e).payments.stripe.connect.enabled?(x(),Y(q,{key:5,label:t(s).integrations_settings,name:"integrations"},{default:I(()=>[$($p,{"responsive-class":t(r)},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0)]),_:1},8,["modelValue"]),$(Np,{"tab-active":c.value,"password-active":t(_),onChangePassword:y,onSavePassword:E,onSaveChanges:A},null,8,["tab-active","password-active"])],2)):(x(),Y(Zt,{key:1}))],4)}}});function gi(n,a){$e.get("/users/customers",{params:Js(n)}).then(e=>{a(e.data.data.users)}).catch(()=>{a([])})}function Zs(n,a="",e={},s=()=>{}){n.commit("customerInfo/setLoading",!0),setTimeout(()=>{gi(Object.assign({search:a,page:1,limit:lt.general.customersFilterLimit,skipCount:1},e),l=>{n.commit("customerInfo/setCustomers",l),n.commit("customerInfo/setLoading",!1),s()})},500)}function $o(n){n.getters["customerInfo/getCustomers"].length||Zs(n)}const qp={key:0,class:"am-capf__zone"},Up={class:"am-capf__menu"},zp=m("span",{class:"am-icon-filter"},null,-1),jp={key:0},Yp={key:0,class:"am-capf__list"},Wp={name:"CabinetFilters"},No=Object.assign(Wp,{props:{paramList:{type:[Object,Array],default:()=>[]},stepKey:{type:String,default:""},responsiveClass:{type:String,default:""},empty:{type:Boolean,default:!1}},emits:["changeFilters","addAppointment"],setup(n,{emit:a}){const e=n;let s=Ne(),l=B(()=>s.getters["entities/getReady"]),o=B(()=>s.getters.getLoading),r=M({customers:!1,events:!1}),i=B(()=>e.stepKey==="packages"?"packagesList":e.stepKey);const c=U("shortcodeData"),u=U("settings");let g=U("amCustomize");const p=U("labels"),f=U("localLanguage");let b=B(()=>u.general.usedLanguages.includes(f.value)),w=B(()=>{let K=tt({...p});if(e.stepKey){let te=g.value[i.value].translations;te&&Object.keys(te).forEach(le=>{te[le][f.value]&&b.value?K[le]=te[le][f.value]:te[le].default&&(K[le]=te[le].default)})}return K});function D(K){return K==="customers"?"user":K==="services"?"service":K==="providers"?"employee":K==="locations"?"locations":K==="packages"?"shipment":K==="events"?"star-outline":""}function v(){a("changeFilters")}let P=U("containerWidth"),S={components:{IconComponent:Ge},template:'<IconComponent icon="filter"/>'},A=M(!1),d=M({dates:B({get:()=>s.getters["cabinetFilters/getDates"],set:K=>{Zi(K[0],K[1]),s.commit("cabinetFilters/setDates",K),a("changeFilters")}}),customers:B({get:()=>s.getters["cabinetFilters/getCustomers"],set:K=>{s.commit("cabinetFilters/setCustomers",K||[])}}),services:B({get:()=>s.getters["cabinetFilters/getServices"],set:K=>{s.commit("cabinetFilters/setServices",K)}}),providers:B({get:()=>s.getters["cabinetFilters/getProviders"],set:K=>{s.commit("cabinetFilters/setProviders",K)}}),locations:B({get:()=>s.getters["cabinetFilters/getLocations"],set:K=>{s.commit("cabinetFilters/setLocations",K)}}),packages:B({get:()=>s.getters["cabinetFilters/getPackages"],set:K=>{s.commit("cabinetFilters/setPackages",K)}}),events:B({get:()=>s.getters["cabinetFilters/getEvents"],set:K=>{s.commit("cabinetFilters/setEvents",K||[])}})}),_=B(()=>e.stepKey==="events"?s.getters["cabinetFilters/getEventFiltersOption"](c.value.cabinetType):e.stepKey==="packages"?s.getters["cabinetFilters/getPackageFilterOptions"]:s.getters["cabinetFilters/getAppointmentFilterOptions"](c.value.cabinetType)),y=B(()=>{let K=0;return Object.keys(_.value).forEach(te=>{g.value[i.value].options[`${te}Filter`].visibility&&(te==="customers"||te==="events"||_.value[te].length>0)&&K++}),K});function E(K,te){switch(K){case"customers":L(te);break;case"events":V(te);break}}function C(){c.value.cabinetType==="employee"&&L("",s.getters["auth/getPreloadedCustomers"])}function L(K="",te=[]){if(r.value.customers=!0,te.length){s.dispatch("cabinetFilters/injectCustomerOptions",te),r.value.customers=!1;return}setTimeout(()=>{gi({search:K,page:1,limit:lt.general.customersFilterLimit,skipCount:1},le=>{s.dispatch("cabinetFilters/injectCustomerOptions",le),s.getters["auth/getPreloadedCustomers"].length===0&&s.commit("auth/setPreloadedCustomers",le),r.value.customers=!1})},500)}function V(K="",te=[]){if(r.value.events=!0,te.length){s.dispatch("cabinetFilters/injectEventsOptions",te),r.value.events=!1;return}setTimeout(()=>{p0({dates:[ye().format("YYYY-MM-DD")],timeZone:s.getters["cabinet/getTimeZone"],group:!0,page:1,limit:u.general.itemsPerPageBackEnd,search:K},le=>{s.dispatch("cabinetFilters/injectEventsOptions",le),r.value.events=!1})},500)}let T=B(()=>g.value[i.value].options),q=B(()=>e.stepKey==="appointments"?c.value.cabinetType==="employee"?T.value.servicesFilter.visibility||T.value.customersFilter.visibility||T.value.locationsFilter.visibility:T.value.servicesFilter.visibility||T.value.providersFilter.visibility||T.value.locationsFilter.visibility:e.stepKey==="events"?c.value.cabinetType==="employee"?T.value.eventsFilter.visibility||T.value.customersFilter.visibility||T.value.locationsFilter.visibility:T.value.eventsFilter.visibility||T.value.providersFilter.visibility||T.value.locationsFilter.visibility:T.value.packagesFilter.visibility||T.value.servicesFilter.visibility||T.value.providersFilter.visibility||T.value.locationsFilter.visibility),H=B(()=>e.stepKey==="appointments"?c.value.cabinetType==="employee"?!!(_.value.services.length||_.value.customers.length||_.value.locations.length):!!(_.value.services.length||_.value.providers.length||_.value.locations.length):e.stepKey==="events"?c.value.cabinetType==="employee"?!!(_.value.events.length||_.value.customers.length||_.value.locations.length):!!(_.value.events.length||_.value.providers.length||_.value.locations.length):!!(_.value.packages.length||_.value.services.length||_.value.providers.length||_.value.locations.length));Ze(()=>{C()});let z=U("amColors"),X=B(()=>({"--am-c-capf-heading-text":z.value.colorMainText,"--am-c-capf-text":z.value.colorInpText,"--am-c-capf-text-op10":Q(z.value.colorInpText,.1),"--am-c-select-border":z.value.colorInpBorder,"--am-c-select-bgr":z.value.colorInpBgr}));return(K,te)=>!t(o)&&t(l)?(x(),F("div",{key:0,class:"am-capf",style:Ce(t(X))},[t(P)<=480&&t(T).timeZone.visibility&&t(e).stepKey!=="packages"?(x(),F("div",qp,[$(Wn,{size:"small"})])):N("",!0),m("div",Up,[t(P)<=480&&t(T).timeZone.visibility&&t(e).stepKey==="packages"?(x(),Y(Wn,{key:0,size:"small"})):N("",!0),t(e).stepKey!=="packages"?(x(),Y(Ht,{key:1,modelValue:t(d).dates,"onUpdate:modelValue":te[0]||(te[0]=le=>t(d).dates=le),type:"daterange",editable:!1,size:"small",clearable:!1,format:t(Wt)(),style:Ce(t(X)),lang:t(f),class:j(["am-capf__menu-datepicker",t(e).responsiveClass]),"popper-class":"am-capf__menu-datepicker-popper","start-placeholder":t(w).start_date,"end-placeholder":t(w).end_date},null,8,["modelValue","format","style","lang","class","start-placeholder","end-placeholder"])):N("",!0),!t(e).empty&&t(q)&&t(H)?(x(),Y(Fe,{key:2,icon:t(S),"icon-only":t(P)<=700,"custom-class":"am-capf__menu-btn",size:"small",category:"primary","aria-label":t(w).filters,type:t(T).filterBtn?t(T).filterBtn.buttonType:"filled",onClick:te[1]||(te[1]=le=>Ae(A)?A.value=!t(A):A=!t(A))},{default:I(()=>[zp,t(P)>700?(x(),F("span",jp,k(t(w).filters),1)):N("",!0)]),_:1},8,["icon","icon-only","aria-label","type"])):N("",!0)]),$(ga,{name:"am-slide-fade"},{default:I(()=>[t(A)&&!t(e).empty?(x(),F("div",Yp,[(x(!0),F(ne,null,ve(Object.keys(t(_)),le=>(x(),F(ne,{key:le},[(t(_)[le].length>0||le==="customers"||le==="events")&&t(g)[t(i)].options[`${le}Filter`].visibility?(x(),F("span",{key:0,class:j(["am-capf__list-item",[{"am-selected":t(d)[le].length>0},`am-capf__list-item-${t(y)}`,t(e).responsiveClass]])},[$(Je,{id:`am-select-${le}`,modelValue:t(d)[le],"onUpdate:modelValue":ee=>t(d)[le]=ee,multiple:le!=="customers"&&le!=="events",loading:le!=="customers"&&le!=="events"?!1:t(r)[le],remote:"",clearable:"",filterable:le==="customers"||le==="events",placeholder:t(w)[le+(le==="customers"?"":"_dropdown")],"prefix-icon":D(le),"collapse-tags":!0,size:"small","popper-class":"am-filter-select-popper","remote-method":ee=>{E(le,ee)},onChange:v,onClear:C},{default:I(()=>[(x(!0),F(ne,null,ve(t(_)[le],ee=>(x(),Y(Ye,{key:ee.id,value:ee.id,label:ee.firstName?ee.firstName+" "+ee.lastName:ee.name},null,8,["value","label"]))),128))]),_:2},1032,["id","modelValue","onUpdate:modelValue","multiple","loading","filterable","placeholder","prefix-icon","remote-method"])],2)):N("",!0)],64))),128))])):N("",!0)]),_:1})],4)):N("",!0)}});function Hp(n,a){let e=n.getters["entities/getService"](a.serviceId),s=0,l=0;return a.bookings.forEach(o=>{if(["approved","pending"].includes(o.status)){let r=o.duration?o.duration:e.duration;r>s&&(s=r);let i=0;o.extras.forEach(c=>{i+=e.extras.find(g=>g.id===c.extraId).duration*c.quantity}),i>l&&(l=i)}}),s+l}function hi(n,a,e){for(let s in n)n[s].appointments.forEach(l=>{let o={};l.bookings.forEach(i=>{i.customerId in o||(o[i.customerId]=[]),o[i.customerId][i.id]=i.status});let r={};for(let i in o)for(let c in o[i])(!(i in r)||o[i][c]==="approved"||o[i][c]==="pending")&&(r[i]=c);l.bookings.forEach(i=>{i.customerId in r&&parseInt(i.id)!==parseInt(r[i.customerId])||(a===""&&(l.bookingStart=Al(l.bookingStart),l.bookingEnd=Al(l.bookingEnd)),e||(l.bookings=[i]))})});if(a===""){let s={};for(let l in n)n[l].appointments.forEach(o=>{let r=o.bookingStart.split(" ")[0];r in s?s[r].appointments.push(o):s[r]={appointments:[o],date:r}});return s}return n}function vi(n,a){let e=[];return n.forEach(s=>{if(["approved","pending"].includes(s.status)&&s.customFields){let l=JSON.parse(s.customFields);Object.keys(l).forEach(o=>{if(l[o]){let r=l[o].type==="file"?l[o]?.value?l[o].value:"":l[o].value;(Array.isArray(r)?r.length:r)&&e.push({label:l[o].label,value:r})}})}}),a==="customer"?e:[...new Set(e.filter(s=>s.value).map(s=>s.label))].map(s=>new Object({label:s}))}function Zp(n,a){let e={};return n.forEach(s=>{["approved","pending"].includes(s.status)&&s.extras.forEach(l=>{l.extraId in e||(e[l.extraId]={quantity:0,price:l.price,name:a.extras.find(o=>o.id===l.extraId).name}),e[l.extraId].quantity=e[l.extraId].quantity+l.quantity})}),e}const Gp={class:"am-cc__periods-date"},Jp={class:"am-cc__periods-time"},Xp={key:0,class:"am-cc__periods-link__list"},Qp=["href"],Kp=m("span",{class:"am-icon-link"},null,-1),ef=["href"],tf=m("span",{class:"am-icon-link"},null,-1),af=["href"],sf=m("span",{class:"am-icon-link"},null,-1),lf=["href"],nf=m("span",{class:"am-icon-link"},null,-1),of={name:"TemplatePeriods"},rf=Object.assign(of,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels");let s=U("containerWidth"),l=B(()=>ot(s.value));return(o,r)=>(x(),F("div",{class:j(["am-cc__periods",t(l)])},[(x(!0),F(ne,null,ve(t(a).data,(i,c)=>(x(),F("div",{key:c,class:"am-cc__periods-item"},[m("span",Gp,k(t(it)(i.date)),1),m("span",Jp,k(`${t(vs)(i.startTime)} - ${t(vs)(i.endTime)}`),1),i.googleMeetLink||i.zoomLink||i.lessonSpaceLink||i.microsoftTeamsLink?(x(),F("div",Xp,[i.googleMeetLink?(x(),F("a",{key:0,class:"am-cc__periods-link",href:i.googleMeetLink,target:"_blank"},[Kp,ue(" "+k(t(e).google_meet_link),1)],8,Qp)):N("",!0),i.microsoftTeamsLink?(x(),F("a",{key:1,class:"am-cc__periods-link",href:i.microsoftTeamsLink,target:"_blank"},[tf,ue(" "+k(t(e).microsoft_teams_link),1)],8,ef)):N("",!0),i.zoomLink?(x(),F("a",{key:2,class:"am-cc__periods-link",href:i.zoomLink,target:"_blank"},[sf,ue(" "+k(t(e).zoom_link),1)],8,af)):N("",!0),i.lessonSpaceLink?(x(),F("a",{key:3,class:"am-cc__periods-link",href:i.lessonSpaceLink,target:"_blank"},[nf,ue(" "+k(t(e).lesson_space_link),1)],8,lf)):N("",!0)])):N("",!0)]))),128))],2))}});const cf={class:"am-cc__extras-name"},xf={key:0,class:"am-cc__extras-duration"},uf={key:1,class:"am-cc__extras-price"},df={key:2,class:"am-cc__extras-quantity"},mf={name:"TemplateExtras"},pf=Object.assign(mf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=B(()=>ot(l.value));return(r,i)=>(x(),F("div",{class:j(["am-cc__extras",t(o)])},[(x(!0),F(ne,null,ve(t(a).data,(c,u)=>(x(),F("div",{key:u,class:"am-cc__extras-item"},[m("span",cf,k(c.name),1),c.duration||c.price||c.quantity?(x(),F("div",{key:0,class:j(["am-cc__extras-item__inner",[{"am-flex-space":!c.price&&c.duration},{"am-flex-end":!c.duration}]])},[c.duration?(x(),F("span",xf,k(t(hs)(c.duration,t(e).h,t(e).min)),1)):N("",!0),t(s).cabinetType==="customer"&&c.price?(x(),F("span",uf,k(t(nt)(c.price)),1)):N("",!0),c.quantity?(x(),F("span",df," x"+k(c.quantity),1)):N("",!0)],2)):N("",!0)]))),128))],2))}});const ff={class:"am-cc__tickets-item_inner"},gf={class:"am-cc__tickets-name"},hf={class:"am-cc__tickets-calc"},vf={key:0,class:"am-cc__tickets-price"},Ef={name:"TemplateTickets"},_f=Object.assign(Ef,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n,e=U("amLabels"),s=U("shortcodeData");let l=U("containerWidth"),o=B(()=>ot(l.value));return(r,i)=>(x(),F("div",{class:j(["am-cc__tickets",t(o)])},[(x(!0),F(ne,null,ve(t(a).data,(c,u)=>(x(),F("div",{key:u,class:"am-cc__tickets-item"},[m("div",ff,[m("span",gf,k(c.name),1),m("span",hf,k(`${c.persons} ${c.persons>1?t(e).event_tickets:t(e).event_ticket}${t(s).cabinetType==="customer"?" x "+t(nt)(c.price):""}`),1)]),t(s).cabinetType==="customer"?(x(),F("div",vf,k(t(nt)(c.persons*c.price)),1)):N("",!0)]))),128))],2))}});const Cf=["innerHTML"],yf={key:0,class:"am-cc__cf-value"},bf={class:"am-cc__cf-value__inner"},Bf={name:"TemplateCustomFields"},Af=Object.assign(Bf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=B(()=>ot(e.value));function l(o){return o?Array.isArray(o)?o.length===0?"/":o.map(r=>typeof r=="object"&&r!==null&&!Array.isArray(r)?r.name||"/":r||"/").join(", "):o:"/"}return(o,r)=>(x(),F("div",{class:j(["am-cc__cf",t(s)])},[(x(!0),F(ne,null,ve(t(a).data,(i,c)=>(x(),F("div",{key:c,class:"am-cc__cf-item"},[m("span",{class:"am-cc__cf-name",innerHTML:i.label},null,8,Cf),"value"in i?(x(),F("div",yf,[m("span",bf,k(l(i.value)),1)])):N("",!0)]))),128))],2))}});const Ff={class:"am-cc__employee-heading"},Df={class:"am-cc__employee-heading__inner"},kf={class:"am-cc__employee-name"},wf=["innerHTML"],Pf={key:1,class:"am-cc__employee-wrapper"},Tf={class:"am-cc__employee-heading"},Lf={class:"am-cc__employee-heading__inner"},Sf={class:"am-cc__employee-name"},If=["innerHTML"],$f={name:"TemplateEmployee"},Nf=Object.assign($f,{props:{data:{type:[Object,Array]}},setup(n){const a=n;let e=B(()=>!Array.isArray(a.data)),s=U("containerWidth"),l=B(()=>ot(s.value));function o(c){let u=c.firstName.charAt(0).toUpperCase(),g=c.lastName.charAt(0).toUpperCase();return`${u}${g}`}function r(c){return c.pictureThumbPath?{backgroundImage:`url(${c.pictureThumbPath})`}:{}}function i(c){return c&&c.includes("<!-- Content -->")?c.slice(16).length:c?c.length:!1}return(c,u)=>(x(),F("div",{class:j(["am-cc__employee",t(l)])},[t(e)?(x(),F(ne,{key:0},[m("div",Ff,[m("span",{class:"am-cc__employee-img",style:Ce(r(t(a).data))},[t(a).data.pictureThumbPath?N("",!0):(x(),F(ne,{key:0},[ue(k(o(t(a).data)),1)],64))],4),m("div",Df,[m("span",kf,k(`${t(a).data.firstName} ${t(a).data.lastName}`),1),t(a).data.badge?(x(),F("span",{key:0,class:"am-cc__employee-badge",style:Ce({background:t(a).data.badge.color})},k(t(a).data.badge.content),5)):N("",!0)])]),t(a).data.description?(x(),F("div",{key:0,class:j(["am-cc__employee-desc",{"ql-description":t(a).data.description.includes("<!-- Content -->")}]),innerHTML:t(a).data.description},null,10,wf)):N("",!0)],64)):(x(),F("div",Pf,[(x(!0),F(ne,null,ve(t(a).data,g=>(x(),F(ne,{key:g.id},[m("div",Tf,[m("span",{class:"am-cc__employee-img",style:Ce(r(g))},[g.pictureThumbPath?N("",!0):(x(),F(ne,{key:0},[ue(k(o(g)),1)],64))],4),m("div",Lf,[m("span",Sf,k(`${g.firstName} ${g.lastName}`),1),g.badge?(x(),F("span",{key:0,class:"am-cc__employee-badge",style:Ce({background:g.badge.color})},k(g.badge.content),5)):N("",!0)])]),i(g.description)?(x(),F("div",{key:0,class:j(["am-cc__employee-desc",{"ql-description":g.description.includes("<!-- Content -->")}]),innerHTML:g.description},null,10,If)):N("",!0)],64))),128))]))],2))}});const Of={class:"am-cc__customers-item_inner"},Mf={class:"am-cc__customers-name"},Vf={class:"am-cc__customers-info"},Rf={class:"am-cc__customers-info"},qf={name:"TemplateCustomers"},Uf=Object.assign(qf,{props:{data:{type:[Array,Object,String]}},setup(n){const a=n;let e=U("containerWidth"),s=B(()=>ot(e.value));return(l,o)=>(x(),F("div",{class:j(["am-cc__customers",t(s)])},[(x(!0),F(ne,null,ve(t(a).data,(r,i)=>(x(),F("div",{key:i,class:"am-cc__customers-item"},[m("div",Of,[m("span",Mf,k(r.firstName)+" "+k(r.lastName),1),m("span",Vf,k(r.email),1),m("span",Rf,k(r.phone),1)])]))),128))],2))}});const zf={class:"am-cc__qr-codes"},jf={key:0,class:"am-cc__qr-codes__message"},Yf=m("span",{class:"am-icon-info-reverse"},null,-1),Wf=["onClick"],Hf={props:{data:{type:[Array]}},setup(n){const a=n,e=Ne();let s=M("");function l(r){$e.get("/etickets",Object.assign({params:{source:"cabinet-customer",timeZone:e.getters["cabinet/getTimeZone"],eventId:r.eventId,bookingId:r.bookingId,ticketManualCode:r.ticketManualCode}},Ue(e))).then(i=>{s.value="",window.open(o(i.data))}).catch(i=>{i.response&&i.response.data&&i.response.data.message?s.value=i.response.data.message:s.value="An error occurred while fetching the QR code."})}function o(r){const i=atob(r),c=new Array(i.length);for(let p=0;p<i.length;p++)c[p]=i.charCodeAt(p);const u=new Uint8Array(c),g=new Blob([u],{type:"application/pdf;base64"});return URL.createObjectURL(g)}return Ze(()=>{s.value=""}),(r,i)=>(x(),F("div",zf,[t(s)?(x(),F("div",jf,[Yf,ue(" "+k(t(s)),1)])):N("",!0),(x(!0),F(ne,null,ve(t(a).data,(c,u)=>(x(),F("div",{key:u,class:"am-cc__qr-codes__item",onClick:g=>l(c)},k(`${c.eventName} - ${c.type==="ticket"?"Single Ticket.pdf":"Group Ticket.pdf"}`),9,Wf))),128))]))}};const Zf={class:"am-cc__popover-inner"},Gf={key:0,class:"am-cc__popover-heading"},Jf={name:"CollapseCardPopoverTemplate"},Ua=Object.assign(Jf,{props:{headerText:{type:String,default:""},type:{type:String,required:!0},contentData:{type:[Array,Object,String],default:""}},setup(n){const a=n;let e=M({period:Qe(rf),extras:Qe(pf),ticket:Qe(_f),customField:Qe(Af),employee:Qe(Nf),customers:Qe(Uf),qrCode:Qe(Hf)}),s=U("amFonts"),l=U("amColors"),o=B(()=>({"--am-c-cc-primary":l.value.colorPrimary,"--am-c-cc-primary-op70":Q(l.value.colorPrimary,.7),"--am-c-cc-success":l.value.colorSuccess,"--am-c-cc-success-op15":Q(l.value.colorSuccess,.15),"--am-c-cc-error":l.value.colorError,"--am-c-cc-error-op15":Q(l.value.colorError,.15),"--am-c-cc-bgr":l.value.colorMainBgr,"--am-c-cc-text":l.value.colorMainText,"--am-c-cc-text-op10":Q(l.value.colorMainText,.1),"--am-c-cc-text-op15":Q(l.value.colorMainText,.15),"--am-c-cc-text-op70":Q(l.value.colorMainText,.7),"--am-c-cc-text-op80":Q(l.value.colorMainText,.8),"--am-c-cc-text-op90":Q(l.value.colorMainText,.9),"--am-c-scroll-op30":Q(l.value.colorPrimary,.3),"--am-c-scroll-op10":Q(l.value.colorPrimary,.1),"--am-font-family":s.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(r,i)=>{const c=bs;return x(),Y(c,{"show-arrow":!1,persistent:!1,width:"auto","popper-class":"am-cc__popover","popper-style":t(o),trigger:"click"},{reference:I(()=>[yr(r.$slots,"default")]),default:I(()=>[m("div",Zf,[t(a).headerText?(x(),F("div",Gf,k(t(a).headerText),1)):N("",!0),(x(),Y(ft(t(e)[t(a).type]),{class:"am-cc__popover-content",data:t(a).contentData},null,8,["data"]))])]),_:3},8,["popper-style"])}}});function Xf(n){let a=io(null,n.coupon,n.tax?n.tax[0]:null,n.price-n.price/100*n.discount,!1);return a.price-a.discount+a.tax}const za=tt(window.wpAmeliaLabels);function Er(n,a,e){e.type==="package"&&n.commit("cabinet/setPackageLoading",!0),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!0),e.type==="event"&&n.commit("cabinet/setEventsLoading",!0),n.commit("cabinet/setPaymentLinkLoader",e.bookings?e.bookings[0].id:e.id);let s=JSON.parse(JSON.stringify(e)),l=JSON.parse(JSON.stringify(n.getters["auth/getProfile"]));l.birthday=null,s.customer=l,s.type!=="package"?(s[s.type]=e,s.booking=e.bookings[0],s.paymentId=e.bookings[0].payments[0].id):s=Object.assign(s,s.package),$e.post("/payments/link",{data:s,paymentMethod:a}).then(o=>{!o.data.data.error&&o.data.data.paymentLink?window.location.href=o.data.data.paymentLink:n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).catch(o=>{n.commit("cabinet/setPaymentLinkError",{value:!0,type:e.type})}).finally(()=>{n.commit("cabinet/setPaymentLinkLoader",null),e.type==="package"&&n.commit("cabinet/setPackageLoading",!1),e.type==="appointment"&&n.commit("cabinet/setAppointmentsLoading",!1),e.type==="event"&&n.commit("cabinet/setEventsLoading",!1)})}function lo(n,a){if(n.type!=="package"&&(!n.bookings||n.bookings.length===0))return!1;a=JSON.parse(a);let e=a&&"payments"in a&&a.payments&&"paymentLinks"in a.payments&&a.payments.paymentLinks?a.payments.paymentLinks:lt.payments.paymentLinks;return no(lt).length&&lt&&e&&e.enabled}function no(n){typeof n=="string"&&(n=JSON.parse(n));let a=[];return n=n.payments,lt.payments.wc.enabled?a.push({value:"wc",label:za.wc}):lt.payments.mollie.enabled&&(!("mollie"in n)||n.mollie.enabled)?a.push({value:"mollie",label:za.on_line}):(lt.payments.payPal.enabled&&(!("payPal"in n)||n.payPal.enabled)&&a.push({value:"payPal",label:za.pay_pal}),lt.payments.stripe.enabled&&(!("stripe"in n)||n.stripe.enabled)&&a.push({value:"stripe",label:za.credit_card}),lt.payments.razorpay.enabled&&(!("razorpay"in n)||n.razorpay.enabled)&&a.push({value:"razorpay",label:za.razorpay}),lt.payments.square.enabled&&(!("square"in n)||n.square.enabled)&&a.push({value:"square",label:za.square}),lt.payments.barion.enabled&&(!("barion"in n)||n.barion.enabled)&&a.push({value:"barion",label:za.barion})),a}function yl(n,a){switch(a.type){case"appointment":{let e=go(n,{price:a.bookings[0].price,persons:a.bookings[0].persons,aggregatedPrice:a.bookings[0].aggregatedPrice,extras:a.bookings[0].extras,serviceId:null,tax:a.bookings[0].tax,coupon:a.bookings[0].coupon},!1);return e.total-e.discount+e.tax>a.bookings[0].payments.filter(s=>s.status!=="refunded"&&s.status!=="pending").reduce((s,l)=>s+l.amount,0)}case"event":return Lr(a)>a.bookings[0].payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0);case"package":return Xf(a)>a.payments.filter(e=>e.status!=="refunded"&&e.status!=="pending").reduce((e,s)=>e+s.amount,0)}}const Qf={class:"am-cc__edit"},Kf=["onClick"],eg={class:"am-cc__edit-text"},tg={name:"PaymentButton"},Ei=Object.assign(tg,{props:{reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},type:{type:String},btnSize:{type:String,default:"mini"},class:{type:String,default:""}},setup(n){const a=n;let e=Ne();const s=U("amLabels");let l=B(()=>no(a.bookable.settings)),o=B(()=>e.getters["cabinet/getPaymentLinkLoader"]),r={components:{IconComponent:Ge},template:'<IconComponent icon="arrow-down"></IconComponent>'},i=M(!1);function c(D){D.stopPropagation(),l.value.length===1?Er(e,l.value[0].value,a.reservation):i.value=!i.value}function u(){i.value=!1}let g=M(!1);function p(){g.value=!1}let f=U("amFonts"),b=U("amColors"),w=B(()=>({"--am-c-cc-primary":b.value.colorPrimary,"--am-c-cc-primary-op70":Q(b.value.colorPrimary,.7),"--am-c-cc-error":b.value.colorError,"--am-c-cc-error-op15":Q(b.value.colorError,.15),"--am-c-cc-warning":b.value.colorWarning,"--am-c-cc-warning-op15":Q(b.value.colorWarning,.15),"--am-c-cc-success":b.value.colorSuccess,"--am-c-cc-success-op15":Q(b.value.colorSuccess,.15),"--am-c-cc-bgr":b.value.colorMainBgr,"--am-c-cc-text":b.value.colorMainText,"--am-c-cc-text-op10":Q(b.value.colorMainText,.1),"--am-c-cc-text-op15":Q(b.value.colorMainText,.15),"--am-c-cc-text-op70":Q(b.value.colorMainText,.7),"--am-c-cc-text-op90":Q(b.value.colorMainText,.9),"--am-font-family":f.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(D,v)=>{const P=bs;return t(lo)(t(a).reservation,t(a).bookable.settings)?(x(),Y(P,{key:0,ref:"payRef",visible:t(i),persistent:!1,"show-arrow":!1,"popper-class":"am-cc__popper","popper-style":t(w),trigger:"click"},{reference:I(()=>[$(Fe,{size:t(a).btnSize,type:t(a).type,suffix:t(l).length>1&&t(yl)(t(e),t(a).reservation)?t(r):"",class:j([{"am-button-single":t(l).length===1||!t(yl)(t(e),t(a).reservation)},t(a).class]),loading:!!t(o),"loading-icon":"loading",disabled:!t(yl)(t(e),t(a).reservation),onClick:c},{default:I(()=>[ue(k(t(yl)(t(e),t(a).reservation)?t(s).pay_now_btn:t(s).paid),1)]),_:1},8,["size","type","suffix","class","loading","disabled"])]),default:I(()=>[$t((x(),F("div",Qf,[(x(!0),F(ne,null,ve(t(no)(t(a).bookable.settings),S=>$t((x(),F("div",{key:S.value,class:"am-cc__edit-item",onClick:A=>t(Er)(t(e),S.value,t(a).reservation)},[m("span",eg,k(S.label),1)],8,Kf)),[[t(ea),u]])),128))])),[[t(ea),p]])]),_:1},8,["visible","popper-style"])):N("",!0)}}}),os=tt(window.wpAmeliaLabels);function _i(){return[{value:"approved",label:os.approved,icon:"check",color:"var(--am-c-success)"},{value:"pending",label:os.pending,icon:"refresh",color:"var(--am-c-warning)"},{value:"canceled",label:os.canceled,icon:"close",color:"var(--am-c-error)"},{value:"rejected",label:os.rejected,icon:"info-reverse",color:"var(--am-c-main-text)"},{value:"waiting",label:os.waiting,icon:"clock",color:"var(--am-c-warning)"},{value:"no-show",label:os["no-show"],icon:"clock",color:"var(--am-c-warning)"}]}const ag={name:"CollapseCard"},_r=Object.assign(ag,{props:{id:{type:[Number],default:0},status:{type:String,default:""}},emits:["statusChange"],setup(n,{emit:a}){const e=n,s=U("shortcodeData");let l=U("amLabels"),o=Ne(),r=B(()=>_i().filter(g=>g.value!=="waiting"));function i(){c.value=!0,$e.post("/appointments/status/"+e.id,{status:u.value},Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(g=>{let p=l.value.appointment_status_changed+l.value[g.data.data.status].toLowerCase(),f="success";"maximumCapacityReached"in g.data.data&&g.data.data.maximumCapacityReached===!0&&(p=l.value.maximum_capacity_reached,f="error",u.value=e.status),a("statusChange",p,f),c.value=!1}).catch(g=>{let p=l.value.error,f="error";"response"in g&&"data"in g.response&&"data"in g.response.data&&"timeSlotUnavailable"in g.response.data.data&&g.response.data.data.timeSlotUnavailable===!0&&(p=l.value.time_slot_unavailable),u.value=e.status,a("statusChange",p,f),c.value=!1})}let c=M(!1),u=M("");return Ze(()=>{u.value=e.status}),(g,p)=>(x(),F("div",null,[t(u)&&t(s).cabinetType==="employee"?(x(),Y(Je,{key:0,modelValue:t(u),"onUpdate:modelValue":p[0]||(p[0]=f=>Ae(u)?u.value=f:u=f),"prefix-icon":t(r).find(f=>f.value===t(u)).icon,"prefix-icon-color":t(r).find(f=>f.value===t(u)).color,disabled:t(c),size:"small",onClick:p[1]||(p[1]=f=>f.stopPropagation()),onChange:i},{default:I(()=>[(x(!0),F(ne,null,ve(t(r),f=>(x(),Y(Ye,{key:f.value,value:f.value,label:f.label},{default:I(()=>[m("span",{class:j(`am-icon-${f.icon}`),style:Ce(`color: ${f.color}`)},null,6),ue(" "+k(f.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","prefix-icon","prefix-icon-color","disabled"])):N("",!0)]))}});const sg={class:"am-cc__time"},lg={key:0,class:"am-cc__name"},ng={key:0,class:"am-cc__name"},og={key:1,class:"am-cc__places"},rg={key:2,class:"am-cc__customer"},ig={key:0,class:"am-cc__edit"},cg=m("span",{class:"am-icon-edit"},null,-1),xg={class:"am-cc__edit-text"},ug={key:0,class:"am-cc__edit"},dg=m("span",{class:"am-icon-users-plus"},null,-1),mg={class:"am-cc__edit-text"},pg={class:"am-cc__edit"},fg=m("span",{class:"am-icon-user"},null,-1),gg={class:"am-cc__edit-text"},hg={class:"am-cc__edit"},vg=m("span",{class:"am-icon-date-time"},null,-1),Eg={class:"am-cc__edit-text"},_g=m("span",{class:"am-icon-eye"},null,-1),Cg={class:"am-cc__edit-text"},yg=m("span",{class:"am-icon-download"},null,-1),bg={class:"am-cc__edit-text"},Bg=m("span",{class:"am-icon-clearable"},null,-1),Ag={class:"am-cc__edit-text"},Fg={class:"am-cc__content-inner"},Dg={class:"am-cc__data"},kg=m("span",{class:"am-icon-user"},null,-1),wg={class:"am-cc__data-text"},Pg={class:"am-cc__data"},Tg=m("span",{class:"am-icon-user"},null,-1),Lg={class:"am-cc__data-text"},Sg={key:2,class:"am-cc__data"},Ig=m("span",{class:"am-icon-payments"},null,-1),$g={class:"am-cc__data-text"},Ng={key:3,class:"am-cc__data"},Og=m("span",{class:"am-icon-clock"},null,-1),Mg={class:"am-cc__data-text"},Vg={class:"am-cc__data"},Rg=m("span",{class:"am-icon-clock"},null,-1),qg={class:"am-cc__data-text"},Ug={key:5,class:"am-cc__data link"},zg=m("span",{class:"am-icon-link"},null,-1),jg=["href"],Yg={key:6,class:"am-cc__data link"},Wg=m("span",{class:"am-icon-link"},null,-1),Hg=["href"],Zg={key:7,class:"am-cc__data link"},Gg=m("span",{class:"am-icon-link"},null,-1),Jg=["href"],Xg={key:8,class:"am-cc__data link"},Qg=m("span",{class:"am-icon-link"},null,-1),Kg=["href"],e9={class:"am-cc__data"},t9=m("span",{class:"am-icon-border-plus"},null,-1),a9={class:"am-cc__data-text"},s9={class:"am-cc__data"},l9=m("span",{class:"am-icon-file-text"},null,-1),n9={class:"am-cc__data-text"},o9={class:"am-cc__data"},r9=m("span",{class:"am-icon-tickets"},null,-1),i9={class:"am-cc__data-text"},c9=m("span",{class:"am-icon-locations"},null,-1),x9=["href"],u9={key:1,class:"am-cc__data-text"},d9={class:"am-cc__data"},m9=m("span",{class:"am-icon-tickets"},null,-1),p9={class:"am-cc__data-text"},f9={name:"CollapseCard"},Ci=Object.assign(f9,{props:{id:{type:Number,default:0},start:{type:[String,Object,Array,Function],required:!0},name:{type:String,default:""},employee:{type:[Object,Array],default:()=>{}},customers:{type:[Array],default:()=>{}},location:{type:[String,Object],default:""},qrCodes:{type:Array,default:()=>[]},price:{type:Number,default:0},duration:{type:Number,default:0},periods:{type:Array,default:()=>{}},extras:{type:Object,default:()=>{}},tickets:{type:Object,default:()=>{}},customFields:{type:Array,default:()=>[]},googleMeetLink:{type:String,default:""},microsoftTeamsLink:{type:String,default:""},zoomLink:{type:String,default:""},lessonSpaceLink:{type:String,default:""},reservation:{type:Object,default:()=>{}},bookable:{type:Object,default:()=>{}},booking:{type:Object,default:()=>{}},isPackageBooking:{type:Boolean,default:!1},responsiveClass:{type:String,default:""},parentWidth:{type:Number,default:1200},customizedOptions:{type:Object,required:!0}},emits:["cancelBooking","rescheduling","editAppointment","editEvent","addEventAttendee","listEventAttendees","statusChange","showQrCodes"],setup(n,{emit:a}){const e=n;let s=Ne();const l=U("shortcodeData"),o=U("settings");let r=U("originKey");const i=U("amLabels");let c=U("licence"),u=M(!1);function g(q){q.stopPropagation(),u.value=!u.value}function p(){return f()&&(!e.isPackageBooking&&e.booking.price>0&&lo(e.reservation,e.bookable.settings)||!!(e.reservation.cancelable||o.roles.allowCustomerReschedule&&e.reservation.reschedulable))}function f(){return e.booking&&e.booking.status==="approved"||e.booking.status==="pending"||e.booking.status==="waiting"}function b(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0),$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(q=>{window.open(kl(q))}).catch(q=>{console.log(q.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function w(){e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!0),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!0);const q=o.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.reservation.bookings[0].payments[0].id,{format:q},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(H=>{let z=kl(H,q);const X=document.createElement("a");X.href=z,X.download=`Invoice.${q}`,document.body.appendChild(X),X.click(),document.body.removeChild(X)}).catch(H=>{console.log(H.message)}).finally(()=>{e.reservation.type==="appointment"&&s.commit("cabinet/setAppointmentsLoading",!1),e.reservation.type==="event"&&s.commit("cabinet/setEventsLoading",!1)})}function D(){u.value=!1}function v(){a("cancelBooking",e.booking),u.value=!1}function P(q){a("edit"+q.charAt(0).toUpperCase()+q.slice(1),e.reservation),u.value=!1}function S(q){a("addEventAttendee",q),u.value=!1}function A(q){a("listEventAttendees",q),u.value=!1}function d(){a("rescheduling",e.reservation,e.booking),u.value=!1}function _(q){return Array.isArray(q)?i.value.event_staff:!Array.isArray(q)&&q.rank&&q.rank==="organizer"?i.value.event_organizer:`${e.employee.firstName} ${e.employee.lastName}`}let y=B(()=>e.reservation.type==="event"?e.reservation.maxCapacity-e.reservation.places+"/"+e.reservation.maxCapacity:""),E=B(()=>{if(e.reservation.type==="appointment")return{label:i.value[l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status],class:l.value.cabinetType==="employee"||e.booking.status==="approved"?e.reservation.status:e.booking.status};if(e.reservation.type==="event"){if(l.value.cabinetType==="customer")return{label:i.value[e.booking.status],class:e.booking.status};switch(e.reservation.status){case"rejected":case"canceled":return{label:i.value.canceled,class:"canceled"};case"full":return{label:i.value.full,class:"full"};case"waiting":return{label:i.value.waiting_list,class:"waiting"};case"upcoming":return{label:i.value.upcoming,class:"upcoming"};case"approved":if(e.reservation.closed)return{label:i.value.closed,class:"closed"};if(e.reservation.opened&&e.reservation.places>0)return{label:i.value.opened,class:"opened"}}}return{label:"",class:""}}),C=B(()=>e.reservation&&e.reservation.type==="appointment"&&l.value.cabinetType==="employee"&&o.roles.allowWriteAppointments?e.parentWidth<=440?"70px":e.parentWidth<=690?"130px":"160px":"auto"),L=U("amFonts"),V=U("amColors"),T=B(()=>({"--am-c-cc-primary":V.value.colorPrimary,"--am-c-cc-primary-op15":Q(V.value.colorPrimary,.15),"--am-c-cc-primary-op70":Q(V.value.colorPrimary,.7),"--am-c-cc-error":V.value.colorError,"--am-c-cc-error-op15":Q(V.value.colorError,.15),"--am-c-cc-warning":V.value.colorWarning,"--am-c-cc-warning-op15":Q(V.value.colorWarning,.15),"--am-c-cc-success":V.value.colorSuccess,"--am-c-cc-success-op15":Q(V.value.colorSuccess,.15),"--am-c-cc-bgr":V.value.colorMainBgr,"--am-c-cc-text":V.value.colorMainText,"--am-c-cc-text-op03":Q(V.value.colorMainText,.03),"--am-c-cc-text-op10":Q(V.value.colorMainText,.1),"--am-c-cc-text-op15":Q(V.value.colorMainText,.15),"--am-c-cc-text-op70":Q(V.value.colorMainText,.7),"--am-c-cc-text-op90":Q(V.value.colorMainText,.9),"--am-font-family":L.value.fontFamily,"--am-status-width":C.value,"--am-rad-inp":"6px","--am-fs-inp":"15px"}));return(q,H)=>{const z=bs;return x(),F("div",{class:"am-cc",style:Ce(t(T))},[$(fo,null,{default:I(()=>[$(po,{"heading-class":"am-cc__heading-wrapper",side:t(e).parentWidth>500},{heading:I(()=>[m("div",{class:j(["am-cc__heading",t(e).responsiveClass])},[m("div",{class:j(["am-cc__heading-info",t(e).responsiveClass])},[m("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[m("div",sg,k(t(e).start),1),t(e).parentWidth>650?(x(),F("div",lg,k(t(e).name),1)):N("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth<=650?(x(),F("div",{key:1,class:j(["am-cc__places",t(e).responsiveClass])},k(t(y)),3)):N("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth<=650?(x(),F("div",{key:2,class:j(["am-cc__customer",t(e).responsiveClass])},k(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),3)):N("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth<=650?(x(),Y(_r,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[0]||(H[0]=(X,K)=>t(a)("statusChange",X,K))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth<=650?(x(),F("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(E).class}`])},k(t(E).label),3)):N("",!0)],2),m("div",{class:j(["am-cc__heading-info__part",t(e).responsiveClass])},[t(e).parentWidth<=650?(x(),F("div",ng,k(t(e).name),1)):N("",!0),t(e).reservation.type==="event"&&t(l).cabinetType==="employee"&&t(e).parentWidth>650?(x(),F("div",og,k(t(y)),1)):N("",!0),t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(e).customers.length===1&&t(e).customizedOptions.customer.visibility&&t(e).parentWidth>650?(x(),F("div",rg,k(`${t(e).customers[0].firstName} ${t(e).customers[0].lastName}`),1)):N("",!0),t(e).reservation&&t(e).reservation.type==="appointment"&&t(l).cabinetType==="employee"&&t(o).roles.allowWriteAppointments&&t(e).parentWidth>650?(x(),Y(_r,{key:3,id:t(e).reservation.id,status:t(e).reservation.status,class:"am-cc__status am-cc__status--dropdown",onStatusChange:H[1]||(H[1]=(X,K)=>t(a)("statusChange",X,K))},null,8,["id","status"])):t(e).booking&&t(e).parentWidth>650?(x(),F("div",{key:4,class:j(["am-cc__status",`am-cc__status-${t(E).class}`])},k(t(E).label),3)):N("",!0)],2)],2),t(l).cabinetType==="employee"?(x(),F("div",{key:0,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[t(e).reservation.type!=="appointment"||t(o).roles.allowWriteAppointments?(x(),Y(z,{key:0,ref:"editRef",visible:t(u),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(T),trigger:"click"},{reference:I(()=>[t(e).reservation?(x(),F("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:g})):N("",!0)]),default:I(()=>[t(e).reservation.type==="appointment"&&t(o).roles.allowWriteAppointments||t(e).reservation.type==="event"&&t(o).roles.allowWriteEvents?$t((x(),F("div",ig,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[2]||(H[2]=X=>P(t(e).reservation.type))},[cg,m("span",xg,k(t(i).edit),1)])])),[[t(ea),D]]):N("",!0),t(e).reservation.type==="event"?(x(),F(ne,{key:1},[t(o).roles.allowWriteEvents?$t((x(),F("div",ug,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[3]||(H[3]=X=>S(t(e).reservation))},[dg,m("span",mg,k(t(i).event_add_attendee),1)])])),[[t(ea),D]]):N("",!0),$t((x(),F("div",pg,[m("div",{class:"am-cc__edit-item am-edit",onClick:H[4]||(H[4]=X=>A(t(e).reservation))},[fg,m("span",gg,k(t(i).attendees),1)])])),[[t(ea),D]])],64)):N("",!0)]),_:1},8,["visible","popper-style"])):N("",!0)],2)):!t(c).isStarter||p()?(x(),F("div",{key:1,class:j(["am-cc__heading-actions",t(e).responsiveClass])},[f()&&t(e).booking.status!=="waiting"&&!t(e).isPackageBooking&&!t(e).booking.packageCustomerService&&t(e).booking.price>0&&t(lo)(t(e).reservation,t(e).bookable.settings)?(x(),Y(Ei,{key:0,reservation:t(e).reservation,bookable:t(e).bookable},null,8,["reservation","bookable"])):N("",!0),!t(c).isStarter||f()&&(t(e).reservation.cancelable||t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable)?(x(),Y(z,{key:1,ref:"editRef",visible:t(u),persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-cc__popper","popper-style":t(T),trigger:"click"},{reference:I(()=>[t(e).booking?(x(),F("span",{key:0,class:"am-cc__edit-btn am-icon-dots-vertical",onClick:g})):N("",!0)]),default:I(()=>[$t((x(),F("div",hg,[t(e).reservation.type==="appointment"&&f()&&t(o).roles.allowCustomerReschedule&&t(e).reservation.reschedulable?(x(),F("div",{key:0,class:"am-cc__edit-item",onClick:d},[vg,m("span",Eg,k(t(i).reschedule),1)])):N("",!0),t(c).isStarter?N("",!0):(x(),F("div",{key:1,class:"am-cc__edit-item",onClick:b},[_g,m("span",Cg,k(t(i).preview_invoice),1)])),t(c).isStarter?N("",!0):(x(),F("div",{key:2,class:"am-cc__edit-item",onClick:w},[yg,m("span",bg,k(t(i).download_invoice),1)])),t(e).reservation.cancelable&&f()?(x(),F("div",{key:3,class:"am-cc__edit-item am-delete",onClick:v},[Bg,m("span",Ag,k(t(i).cancel),1)])):N("",!0)])),[[t(ea),D]])]),_:1},8,["visible","popper-style"])):N("",!0)],2)):N("",!0)],2)]),default:I(()=>[m("div",{class:j(["am-cc__content",t(e).responsiveClass])},[m("div",Fg,[t(r)==="capc"&&n.customizedOptions.employee.visibility?(x(),F(ne,{key:0},[(Array.isArray(t(e).employee)?t(e).employee.length:Object.keys(t(e).employee).length)?(x(),Y(Ua,{key:0,"header-text":Array.isArray(t(e).employee)?t(i).view_employees:t(i).provider_profile,type:"employee","content-data":t(e).employee},{default:I(()=>[m("div",Dg,[kg,m("span",wg,k(_(t(e).employee)),1)])]),_:1},8,["header-text","content-data"])):N("",!0)],64)):N("",!0),t(r)==="cape"&&t(e).reservation.type==="appointment"&&t(e).customers.length>1&&t(e).customizedOptions.customer.visibility?(x(),F(ne,{key:1},[t(e).customers.length?(x(),Y(Ua,{key:0,"header-text":t(i).customers,type:"customers","content-data":t(e).customers},{default:I(()=>[m("div",Pg,[Tg,m("span",Lg,k(t(i).customers),1)])]),_:1},8,["header-text","content-data"])):N("",!0)],64)):N("",!0),t(e).price&&t(e).customizedOptions.price.visibility?(x(),F("div",Sg,[Ig,m("span",$g,k(t(nt)(t(e).price)),1)])):N("",!0),t(e).duration?(x(),F("div",Ng,[Og,m("span",Mg,k(t(hs)(t(e).duration,t(i).h,t(i).min)),1)])):N("",!0),n.periods.length?(x(),Y(Ua,{key:4,"header-text":t(i).event_timetable,type:"period","content-data":t(e).periods},{default:I(()=>[m("div",Vg,[Rg,m("span",qg,k(t(i).event_timetable),1)])]),_:1},8,["header-text","content-data"])):N("",!0),t(e).googleMeetLink?(x(),F("div",Ug,[zg,m("a",{class:"am-cc__data-text link",href:t(e).googleMeetLink,target:"_blank",tabindex:"-1"},k(t(i).google_meet_link),9,jg)])):N("",!0),t(e).microsoftTeamsLink?(x(),F("div",Yg,[Wg,m("a",{class:"am-cc__data-text link",href:t(e).microsoftTeamsLink,target:"_blank",tabindex:"-1"},k(t(i).microsoft_teams_link),9,Hg)])):N("",!0),t(e).zoomLink?(x(),F("div",Zg,[Gg,m("a",{class:"am-cc__data-text link",href:t(e).zoomLink,target:"_blank",tabindex:"-1"},k(t(i).zoom_link),9,Jg)])):N("",!0),t(e).lessonSpaceLink?(x(),F("div",Xg,[Qg,m("a",{class:"am-cc__data-text link",href:t(e).lessonSpaceLink,target:"_blank",tabindex:"-1"},k(t(i).lesson_space_link),9,Kg)])):N("",!0),Object.keys(t(e).extras).length?(x(),Y(Ua,{key:9,"header-text":`${Object.keys(t(e).extras).length} ${t(i).extras}`,type:"extras","content-data":t(e).extras},{default:I(()=>[m("div",e9,[t9,m("span",a9,k(`${Object.keys(t(e).extras).length} ${t(i).extras}`),1)])]),_:1},8,["header-text","content-data"])):N("",!0),t(e).customFields.length?(x(),Y(Ua,{key:10,"header-text":t(i).custom_fields,type:"customField","content-data":t(e).customFields},{default:I(()=>[m("div",s9,[l9,m("span",n9,k(t(i).custom_fields),1)])]),_:1},8,["header-text","content-data"])):N("",!0),Object.keys(t(e).tickets).length?(x(),Y(Ua,{key:11,"header-text":t(i).event_tickets,type:"ticket","content-data":t(e).tickets},{default:I(()=>[m("div",o9,[r9,m("span",i9,k(t(i).event_tickets),1)])]),_:1},8,["header-text","content-data"])):N("",!0),t(e).location?(x(),F("div",{key:12,class:j(["am-cc__data",{link:t(e).location.address}])},[c9,t(e).location.address?(x(),F("a",{key:0,class:"am-cc__data-text",href:`https://maps.google.com/?q=${t(e).location.address}`,target:"_blank",tabindex:"-1"},k(t(e).location.name),9,x9)):(x(),F("span",u9,k(t(e).location.name),1))],2)):N("",!0),t(e).qrCodes.length?(x(),Y(Ua,{key:13,type:"qrCode","header-text":t(i).e_tickets,"content-data":t(e).qrCodes},{default:I(()=>[m("div",d9,[m9,m("span",p9,k(t(i).e_tickets),1)])]),_:1},8,["header-text","content-data"])):N("",!0)])],2)]),_:1},8,["side"])]),_:1})],4)}}});const g9={class:"am-csd__header"},h9={class:"am-csd__header-text"},v9=m("span",{class:"am-icon-clearable"},null,-1),E9={class:"am-csd__footer"},_9={name:"AppointmentBooking"},yi=Object.assign(_9,{props:{visibility:{type:Boolean,default:!1},appointment:{type:Object,default:null},employees:{type:Array,default:()=>[]},locations:{type:Array,default:()=>[]},slotsParams:{type:Object,default:()=>{}},isPackage:{type:Boolean,default:!1},labels:{type:Object,required:!0},customizedOptions:{type:Object,required:!0}},emits:["close","success","error","employee-selection","location-selection"],setup(n,{emit:a}){const e=n;let s=Ne();const l=U("settings");let o=M("");function r(pe){o.value=pe.toLowerCase()}let i=B(()=>o.value?e.employees.filter(pe=>`${pe.firstName} ${pe.lastName}`.toLowerCase().includes(o.value)&&pe.show):e.employees.filter(pe=>pe.show)),c=M("");function u(pe){c.value=pe.toLowerCase()}let g=B(()=>c.value?e.locations.filter(pe=>pe.name.toLowerCase().includes(c.value)):e.locations),p=U("amLabels"),f=M(null),b=M(null);xt(()=>e.appointment,pe=>{setTimeout(()=>{q.value++},200);let ce=JSON.parse(JSON.stringify(pe));ce&&ce.bookingStart&&(f.value=ce.bookingStart.split(" ")[0],b.value=ce.bookingStart.split(" ")[1].substring(0,5))});let w=M(null),D=M(0),v=U("sidebarCollapsed");window.addEventListener("resize",P);function P(){w.value&&(D.value=w.value.offsetWidth)}xt(v,pe=>{pe?setTimeout(()=>{S()},1500):setTimeout(()=>{S()},500)});function S(){D.value=w.value.offsetWidth}Ze(()=>{co(()=>{D.value=w.value.offsetWidth})});let A=B(()=>e.visibility);xt(A,pe=>{pe&&setTimeout(()=>{D.value=w.value.offsetWidth},300)});let d=B(()=>ot(D.value)),_=M(!1),y=M(null),E=M("");function C(){_.value=!1,E.value=""}let L=M(null),V=B(()=>L.value?L.value.calendarSlotsLoading:!0),T=U("cabinetType"),q=M(0),H=M(!1),z=M({employee:null,location:null}),X=M(!0),K=M(!0),te=B(()=>e.appointment&&!e.appointment.id&&(e.employees.length||e.locations.length)&&(e.customizedOptions.employee.visibility||e.customizedOptions.location.visibility)&&(X.value||K.value)),le=M(null),ee=B(()=>te.value?{employee:[{required:"employee"in e.customizedOptions?e.customizedOptions.employee.required:!1,message:e.labels.please_select_employee,trigger:"submit"}],location:[{required:"location"in e.customizedOptions?e.customizedOptions.location.required:!1,message:e.labels.please_select_location,trigger:"submit"}]}:{}),xe=B(()=>{let pe={};return z.value.employee?pe.providerIds=[z.value.employee]:"providerIds"in e.slotsParams&&e.slotsParams.providerIds.length&&(pe.providerIds=e.slotsParams.providerIds),z.value.location?pe.locationId=z.value.location:"locationId"in e.slotsParams&&e.slotsParams.locationId?pe.locationId=e.slotsParams.locationId:pe.locationId=null,Object.assign({},e.slotsParams,pe)});function se(){le.value&&le.value.clearValidate(),H.value=!0,q.value++,a("employee-selection",z.value.employee),a("location-selection",z.value.location)}function ge(pe){z.value.employee=pe,se()}function G(){te.value&&(z.value.employee=null,z.value.location=null,X.value=!0,K.value=!0,se()),a("close")}xt(A,pe=>{pe&&e.employees.length===1&&(z.value.employee=e.employees[0].id,X.value=!1),pe&&e.locations.length===1&&(z.value.location=e.locations[0].id,K.value=!1),pe&&(e.locations.length===1||e.employees.length===1)&&se()});let ie=M();ze("formWrapper",ie);let ae=B(()=>s.getters["entities/getService"](e.appointment.serviceId).duration);ze("calendarSlotDuration",ae);let O=M(!0);ze("calendarChangeSideBar",O);let W=M(0);ze("calendarServiceDuration",W);function J(){"id"in e.appointment?me():De()}function re(pe){let ce=pe?"UTC":s.getters["cabinet/getTimeZone"],je=f.value+" "+b.value,he=null,ke=null;if(pe){let Oe=qo(je);ke=Ro(Oe),he=Oe}else he=je;return{utcOffset:ke,bookingStart:he,timeZone:ce}}function me(){L.value.calendarSlotsLoading=!0;let pe=re(!1);zs()===s.getters["cabinet/getTimeZone"]&&l.general.showClientTimeZone&&(pe.utcOffset=Ro(qo(f.value+" "+b.value))),$e.post("/bookings/reassign/"+e.appointment.bookings.filter(ce=>ce.status==="approved"||ce.status==="pending")[0].id,pe,Object.assign(Ue(s),{params:{source:"cabinet-"+T.value}})).then(()=>{L.value.calendarSlotsLoading=!1,a("success",{message:p.value.appointment_rescheduled})}).catch(ce=>{L.value.calendarSlotsLoading=!1,ce.response&&(!("data"in ce.response.data)&&"message"in ce.response.data&&(_.value=!0,E.value=ce.response.data.message,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"data"in ce.response&&"data"in ce.response.data&&"customerAlreadyBooked"in ce.response.data.data&&(_.value=!0,E.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"data"in ce.response&&"data"in ce.response.data&&"cancelBookingUnavailable"in ce.response.data.data&&(_.value=!0,E.value=e.labels.booking_cancel_exception,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"data"in ce.response&&"data"in ce.response.data&&"timeSlotUnavailable"in ce.response.data.data&&ce.response.data.data.timeSlotUnavailable===!0&&(_.value=!0,E.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"data"in ce.response&&"data"in ce.response.data&&"rescheduleBookingUnavailable"in ce.response.data.data&&ce.response.data.data.rescheduleBookingUnavailable===!0&&(_.value=!0,E.value=e.labels.booking_reschedule_exception,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500))),a("error")})}function oe(){L.value.calendarSlotsLoading=!0;let pe=re(l.general.showClientTimeZone&&s.getters["cabinet/getTimeZone"]===zs()),ce=JSON.parse(JSON.stringify(e.appointment));ce.bookingStart=pe.bookingStart,ce.bookings[0].utcOffset=pe.utcOffset,ce.bookings[0].timeZone=pe.timeZone,ce.providerId=parseInt(_e.value),ce.locationId=parseInt(Me.value),$e.post("/bookings",ce,Ue(s)).then(je=>{L.value.calendarSlotsLoading=!1,Xi(s,je),a("success",{message:p.value.booking_added_success})}).catch(je=>{L.value.calendarSlotsLoading=!1,je.response&&("customerAlreadyBooked"in je.response.data.data&&je.response.data.data.customerAlreadyBooked===!0&&(_.value=!0,E.value=e.labels.customer_already_booked_app,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"timeSlotUnavailable"in je.response.data.data&&je.response.data.data.timeSlotUnavailable===!0&&(_.value=!0,E.value=e.labels.time_slot_unavailable,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"packageBookingUnavailable"in je.response.data.data&&je.response.data.data.packageBookingUnavailable===!0&&(_.value=!0,E.value=e.labels.package_booking_unavailable,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500)),"customerBlocked"in je.response.data.data&&je.response.data.data.customerBlocked===!0&&(_.value=!0,E.value=e.labels.customer_blocked,setTimeout(function(){gt(ie.value,y.value.$el,0,300)},500))),a("error",je)})}function De(){te.value?le.value.validate(pe=>{pe?oe():setTimeout(()=>{gt(ie.value,le.value.$el,0,300)},200)}):oe()}let _e=M(null),Me=M(null),Ee=M(null);function be(pe,ce){if(Ee.value=ce,H.value=!1,!e.appointment.bookingStart){let he=Pr(Object.keys(ce));return{calendarStartDate:he[0],calendarEventSlots:[],calendarEventDate:he[0],calendarEventSlot:null}}let je=e.appointment.bookingStart.split(" ");return{calendarStartDate:je[0],calendarEventSlots:je[0]in ce?Object.keys(ce[je[0]]):[],calendarEventDate:je[0],calendarEventSlot:je[1].slice(0,5)}}ze("useSlotsCallback",be),ze("useRange",()=>{if(!e.appointment.bookingStart)return{start:null,end:null};let pe=e.appointment.bookingStart.split(" ")[0];return{start:ye(pe,"YYYY-MM-DD").startOf("month").subtract(6,"days").format("YYYY-MM-DD"),end:ye(pe,"YYYY-MM-DD").endOf("month").add(12,"days").format("YYYY-MM-DD")}}),ze("useSelectedDuration",()=>{});function Pe(){let pe=Object.keys(Ee.value[f.value]);pe.length&&(_e.value=b.value&&Ee.value[f.value][b.value]?Ee.value[f.value][b.value][0].e:Ee.value[f.value][pe[0]][0].e,Me.value=b.value&&Ee.value[f.value][b.value]?Ee.value[f.value][b.value][0].l:Ee.value[f.value][pe[0]][0].l)}ze("useBusySlots",()=>[]),ze("useSelectedDate",(pe,ce)=>(f.value=ce,e.appointment&&e.appointment.bookingStart&&(b.value=e.appointment.bookingStart.split(" ")[1].substring(0,5)),Pe(),Object.keys(Ee.value[ce]))),ze("useSelectedTime",(pe,ce)=>{b.value=ce.substring(0,5),f.value?Pe():e.appointment&&(f.value=e.appointment.bookingStart.split(" ")[0],Pe())}),ze("useDeselectedDate",()=>{f.value="",b.value="",_e.value=null,Me.value=null});let Ve=U("amFonts"),Se=U("amColors"),Be=B(()=>({"--am-c-csd-text":Se.value.colorMainText,"--am-c-csd-bgr":Se.value.colorMainBgr,"--am-c-csd-text-op10":Q(Se.value.colorMainText,.1),"--am-c-scroll-op30":Q(Se.value.colorPrimary,.3),"--am-c-scroll-op10":Q(Se.value.colorPrimary,.1),"--am-font-family":Ve.value.fontFamily}));return(pe,ce)=>{const je=vt,he=st;return x(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__reschedule",style:Ce(t(Be)),position:"center"},{footer:I(()=>[m("div",E9,[$(Fe,{category:"secondary",size:t(D)<=360?"small":"default",type:t(e).customizedOptions.cancelBtn.buttonType,disabled:t(H)||t(V),onClick:G},{default:I(()=>[ue(k(n.labels.cancel),1)]),_:1},8,["size","type","disabled"]),$(Fe,{size:t(D)<=360?"small":"default",type:t(e).customizedOptions.continueBtn.buttonType,disabled:!!(t(H)||t(V)||!t(f)||!t(b)),onClick:J},{default:I(()=>[ue(k(n.labels.continue),1)]),_:1},8,["size","type","disabled"])])]),default:I(()=>[m("div",{ref_key:"popupInnerRef",ref:w,class:"am-csd__inner"},[m("div",g9,[m("div",h9,k(n.labels.no_selected_slot_requirements),1),m("div",{class:"am-csd__header-btn",onClick:G},[$(Ge,{icon:"close"})])]),m("div",{ref_key:"rescheduleRef",ref:ie,class:"am-csd__content"},[t(_)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:y,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:C,onTriggerClose:C},{title:I(()=>[v9,ue(" "+k(t(E)),1)]),_:1},512)):N("",!0),t(te)?(x(),Y(he,{key:1,ref_key:"packageFormRef",ref:le,class:"am-csd__filter-wrapper",rules:t(ee),model:t(z),"label-position":"top"},{default:I(()=>[m("div",{class:j(["am-csd__filter am-csd__filter-employee",t(d)])},[t(e).employees.length&&t(X)&&t(e).customizedOptions.employee.visibility?(x(),Y(je,{key:0,class:j([{"am-csd__filter-full":!(t(e).locations.length&&t(K)&&t(e).customizedOptions.location.visibility)},t(d)]),label:`${n.labels.package_appointment_employee}:`,prop:"employee"},{default:I(()=>[$(Je,{modelValue:t(z).employee,"onUpdate:modelValue":ce[0]||(ce[0]=ke=>t(z).employee=ke),clearable:"",filterable:t(e).customizedOptions.employee.filterable,placeholder:`${n.labels.package_select_employee}...`,"fit-input-width":!0,"popper-class":"am-csd__filter-employees",disabled:t(H),"filter-method":r,onChange:se},{default:I(()=>[(x(!0),F(ne,null,ve(t(i),ke=>(x(),Y(Ye,{key:ke.id,value:ke.id,label:`${ke.firstName} ${ke.lastName}`},{default:I(()=>[$(Gi,{identifier:ke.id,label:`${ke.firstName} ${ke.lastName}`,price:0,"image-thumb":ke.pictureThumbPath,description:ke.description,"dialog-title":n.labels.employee_information_package,"dialog-button-text":n.labels.select_this_employee_package,badge:ke.badge,onClick:ge},null,8,["identifier","label","image-thumb","description","dialog-title","dialog-button-text","badge"])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):N("",!0),t(e).locations.length&&t(K)&&t(e).customizedOptions.location.visibility?(x(),Y(je,{key:1,class:j([{"am-csd__filter-full":!(t(e).employees.length&&t(X)&&t(e).customizedOptions.employee.visibility)},t(d)]),label:`${n.labels.package_appointment_location}:`,prop:"location"},{default:I(()=>[$(Je,{modelValue:t(z).location,"onUpdate:modelValue":ce[1]||(ce[1]=ke=>t(z).location=ke),clearable:"",filterable:t(e).customizedOptions.location.filterable,placeholder:`${n.labels.package_select_location}...`,"fit-input-width":!0,disabled:t(H),"filter-method":u,onChange:se},{default:I(()=>[(x(!0),F(ne,null,ve(t(g),ke=>(x(),Y(Ye,{key:ke.id,value:ke.id,label:ke.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","filterable","placeholder","disabled"])]),_:1},8,["class","label"])):N("",!0)],2)]),_:1},8,["rules","model"])):N("",!0),t(e).appointment!==null?(x(),Y(Ji,{key:2,id:0,ref_key:"calendarRef",ref:L,"preselect-slot":!1,"load-counter":t(q),"end-time":t(e).customizedOptions.endTimeVisibility.visibility,"time-zone":t(e).customizedOptions.timeZoneVisibility.visibility,"show-estimated-pricing":t(e).appointment.id&&"estimatedPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.estimatedPricingVisibility.visibility:!1,"show-indicator-pricing":t(e).appointment.id&&"indicatorPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.indicatorPricingVisibility.visibility:!1,"show-slot-pricing":t(e).appointment.id&&"slotPricingVisibility"in t(e).customizedOptions?t(e).customizedOptions.slotPricingVisibility.visibility:!1,"label-slots-selected":n.labels.date_time_slots_selected,"fetched-slots":null,"service-id":parseInt(t(e).appointment.serviceId),"is-package":t(e).appointment.bookings[0].packageCustomerService!==null,date:t(e).appointment&&t(e).appointment.bookingStart?t(e).appointment.bookingStart.split(" ")[0]:"","slots-params":t(xe)},null,8,["load-counter","end-time","time-zone","show-estimated-pricing","show-indicator-pricing","show-slot-pricing","label-slots-selected","service-id","is-package","date","slots-params"])):N("",!0)],512)],512)]),_:1},8,["visibility","style"])}}});const C9={class:"am-csd__inner"},y9={class:"am-csd__header"},b9={class:"am-csd__header-text"},B9={class:"am-csd__content"},A9={class:"am-ccpss__heading"},F9={class:"am-csd__footer"},D9={name:"CancelBooking"},Ha=Object.assign(D9,{props:{visibility:{type:Boolean,required:!0},title:{type:String,default:""},description:{type:String,default:""},closeBtnText:{type:String,required:!0},confirmBtnText:{type:String,required:!0},loading:{type:Boolean,default:!1},count:{type:Number,default:1},customizedOptions:{type:Object,required:!0}},emits:["close","confirm","decline"],setup(n,{emit:a}){const e=n;let s=U("containerWidth"),l=U("amFonts"),o=U("amColors"),r=B(()=>({"--am-c-csd-text":o.value.colorMainText,"--am-c-csd-bgr":o.value.colorMainBgr,"--am-font-family":l.value.fontFamily}));return(i,c)=>{const u=Nl,g=Ol;return x(),Y(Sa,{visibility:t(e).visibility,"custom-class":"am-csd am-csd__cancel",style:Ce(t(r)),position:"center"},{footer:I(()=>[m("div",F9,[$(Fe,{category:"secondary",size:t(s)<=360?"small":"default",type:n.customizedOptions.cancelBtn.buttonType,disabled:n.loading,onClick:c[1]||(c[1]=()=>{a("decline")})},{default:I(()=>[ue(k(t(e).closeBtnText),1)]),_:1},8,["size","type","disabled"]),$(Fe,{category:"danger",size:t(s)<=360?"small":"default",type:n.customizedOptions.confirmBtn.buttonType,disabled:n.loading,onClick:c[2]||(c[2]=()=>{a("confirm")})},{default:I(()=>[ue(k(t(e).confirmBtnText),1)]),_:1},8,["size","type","disabled"])])]),default:I(()=>[m("div",C9,[n.loading?(x(),Y(g,{key:1,animated:"",class:"am-ccpss"},{template:I(()=>[m("div",A9,[$(u,{variant:"rect"})]),(x(!0),F(ne,null,ve(new Array(t(e).count),p=>(x(),F("div",{key:p,class:"am-ccpss__text"},[$(u,{variant:"rect"})]))),128))]),_:1})):(x(),F(ne,{key:0},[m("div",y9,[m("div",b9,k(t(e).title),1),m("div",{class:"am-csd__header-btn",onClick:c[0]||(c[0]=()=>{a("close")})},[$(Ge,{icon:"close"})])]),m("div",B9,[m("p",null,k(t(e).description),1)])],64))])]),_:1},8,["visibility","style"])}}});const k9={name:"CabinetAppointmentsList"},bi=Object.assign(k9,{props:{groupedAppointments:{type:Object,default:null},responsiveClass:{type:String,default:""},pageWidth:{type:Number},isPackageBooking:{type:Boolean,default:!1},stepKey:{type:String,required:!0}},emits:["booked","canceled","editAppointment","statusChange"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("originKey");const o=U("settings");let r=U("amLabels"),i=U("cabinetType"),c=M(null),u=M(null),g=M(null);function p(V=null){u.value=null,a("booked",V)}let f=M(!1);function b(){f.value=!0,$e.post("/bookings/cancel/"+c.value.id,{type:"appointment"},Object.assign(Ue(s),{params:{source:"cabinet-"+i.value}})).then(()=>{c.value=null,a("canceled",{message:r.value.appointment_canceled})}).catch(V=>{console.log(V)}).finally(()=>{f.value=!1})}function w(V){let T={total:0,bookable:0,discount:0,tax:0};return V.bookings.forEach(q=>{if(q.status==="approved"||q.status==="pending"){let H=go(s,{price:q.price,persons:q.persons,aggregatedPrice:q.aggregatedPrice,extras:q.extras,tax:q.tax,coupon:q.coupon},!1);T.total+=H.total,T.bookable+=H.bookable,T.discount+=H.discount,T.tax+=H.tax}}),T.total-T.discount+T.tax}function D(V){let T=[],q=0,H=V;H.bookings.forEach(X=>{X.extras.forEach(K=>{T.push({id:K.extraId,quantity:K.quantity})}),"duration"in X&&X.duration&&X.duration>q&&(X.status==="approved"||X.status==="pending")&&(q=X.duration)});let z={serviceId:H.serviceId,serviceDuration:q||null,locationId:H.locationId,providerIds:[H.providerId],extras:JSON.stringify(T),excludeAppointmentId:H.isGroup?null:H.id,group:1,timeZone:s.getters["cabinet/getTimeZone"],page:"cabinet",structured:!0};u.value=V,g.value=z}function v(V){return s.getters["entities/getEmployee"](V)}function P(V){return V.bookings.filter(T=>T.status!=="rejected"&&T.status!=="canceled").map(T=>{if("info"in T&&T.info){let q="customer"in T?T.customer:{};return Object.assign(q,JSON.parse(T.info))}else return T.customer})}let S=U("amCustomize");const A=U("labels"),d=U("localLanguage");let _=B(()=>o.general.usedLanguages.includes(d.value));function y(V){let T=tt({...A}),q=S.value[V].translations;return q&&Object.keys(q).forEach(H=>{q[H][d.value]&&_.value?T[H]=q[H][d.value]:q[H].default&&(T[H]=q[H].default)}),T}function E(V){return S.value[V].options}let C=U("amColors"),L=B(()=>({"--am-c-capa-bgr":C.value.colorMainBgr,"--am-c-capa-text":C.value.colorMainText,"--am-c-capa-text-op70":Q(C.value.colorMainText,.7),"--am-c-capa-text-op25":Q(C.value.colorMainText,.25),"--am-c-capa-primary":C.value.colorPrimary}));return(V,T)=>(x(),F(ne,null,[m("div",{class:j(["am-capa__wrapper",[{"am-no-border":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]]),style:Ce(t(L))},[(x(!0),F(ne,null,ve(t(e).groupedAppointments,(q,H)=>(x(),F("div",{key:H,class:"am-capa"},[m("div",{class:j(["am-capa__date",[{"am-today":t(it)(H)===t(it)(t(at)().format("YYYY-MM-DD"))},{"am-no-flag":t(e).groupedAppointments&&Object.keys(t(e).groupedAppointments).length===1},t(e).responsiveClass]])},k(t(it)(H)),3),(x(!0),F(ne,null,ve(q.appointments,(z,X)=>(x(),F(ne,{key:X},[t(s).getters["entities/getService"](z.serviceId)?(x(),Y(Ci,{key:0,start:t(vs)(z.bookingStart.split(" ")[1].slice(0,5)),name:t(s).getters["entities/getService"](z.serviceId).name,employee:v(z.provider.id),customers:P(z),price:w(z),duration:t(Hp)(t(s),z),periods:[],extras:t(Zp)(z.bookings,t(s).getters["entities/getService"](z.serviceId)),tickets:[],"custom-fields":t(vi)(z.bookings,t(i)),location:z.locationId?t(s).getters["entities/getLocation"](z.locationId):null,"google-meet-link":z.googleMeetUrl,"microsoft-teams-link":z.microsoftTeamsUrl,"zoom-link":z.zoomMeeting?z.zoomMeeting.joinUrl:"","lesson-space-link":z.lessonSpace,bookable:z.service,reservation:z,booking:z.bookings[0],"is-package-booking":t(e).isPackageBooking,"responsive-class":t(e).responsiveClass,"parent-width":t(e).pageWidth,"customized-options":E(t(e).stepKey),onCancelBooking:T[0]||(T[0]=K=>{Ae(c)?c.value=K:c=K}),onRescheduling:D,onEditAppointment:T[1]||(T[1]=K=>{t(a)("editAppointment",K)}),onStatusChange:T[2]||(T[2]=(K,te)=>t(a)("statusChange",K,te))},null,8,["start","name","employee","customers","price","duration","extras","custom-fields","location","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","is-package-booking","responsive-class","parent-width","customized-options"])):N("",!0)],64))),128))]))),128))],6),t(l)==="capc"?(x(),Y(Ha,{key:0,visibility:t(c)!==null,title:y("cancelAppointment").cancel_appointment,description:y("cancelAppointment").confirm_cancel_appointment,"close-btn-text":y("cancelAppointment").close,"confirm-btn-text":y("cancelAppointment").confirm,"customized-options":E("cancelAppointment"),loading:t(f),onClose:T[3]||(T[3]=q=>Ae(c)?c.value=null:c=null),onDecline:T[4]||(T[4]=q=>Ae(c)?c.value=null:c=null),onConfirm:b},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):N("",!0),t(l)==="capc"?(x(),Y(yi,{key:1,visibility:t(u)!==null,appointment:t(u),"slots-params":t(g),labels:y("rescheduleAppointment"),"customized-options":E("rescheduleAppointment"),onClose:T[5]||(T[5]=q=>Ae(u)?u.value=null:u=null),onSuccess:p,onError:T[6]||(T[6]=()=>{})},null,8,["visibility","appointment","slots-params","labels","customized-options"])):N("",!0)],64))}});const w9={style:{float:"right"}},P9={class:"am-capai-def__notify"},T9=["innerHTML"],L9={class:"am-capai-def__notify"},S9=["innerHTML"],I9={props:{slotsProps:{type:Object,required:!0},slotsLoading:{type:Boolean,required:!0},isDisabledDate:{type:Function,required:!0},freeSlots:{type:Object,required:!0},times:{type:Array,required:!0},getFreeTimes:{type:Function,required:!0}},emits:["removeSlots","fetchSlots","changedSlotCondition","getSelectedDatesTimes","filterOut","getFreeTimes","selectDate","selectTime"],setup(n,{expose:a,emit:e}){const s=n;let l=Ne(),o=U("amLabels"),r=U("localLanguage");const i=U("settings");let c=U("licence"),u=U("slotsPricing");function g(O){return""}let p=O=>{let W=ye(O).format("YYYY-MM-DD");return W in u.value?"am-slots-"+u.value[W].type:""};const f=M(null);let{width:b}=Za(f),w=B(()=>ot(b.value)),D=M({categoryId:B({get:()=>l.getters["appointment/getCategoryId"],set:O=>{l.commit("appointment/setCategoryId",O||null)}}),serviceId:B({get:()=>l.getters["appointment/getServiceId"],set:O=>{l.commit("appointment/setServiceId",O||null)}}),providerId:B({get:()=>l.getters["appointment/getProviderId"],set:O=>{l.commit("appointment/setProviderId",O||null)}}),locationId:B({get:()=>l.getters["appointment/getLocationId"],set:O=>{l.commit("appointment/setLocationId",O||null)}}),lessonSpace:B({get:()=>l.getters["appointment/getLessonSpace"],set:O=>{l.commit("appointment/setLessonSpace",O||"")}}),startDate:B({get:()=>l.getters["appointment/getStartDate"],set:O=>{l.commit("appointment/setStartDate",O||"")}}),startTime:B({get:()=>l.getters["appointment/getStartTime"],set:O=>{l.commit("appointment/setStartTime",O||"")}}),notifyParticipants:B({get:()=>l.getters["appointment/getNotifyParticipants"],set:O=>{l.commit("appointment/setNotifyParticipants",O)}}),createPaymentLinks:B({get:()=>l.getters["appointment/getCreatePaymentLinks"],set:O=>{l.commit("appointment/setCreatePaymentLinks",O)}}),internalNotes:B({get:()=>l.getters["appointment/getInternalNotes"],set:O=>{l.commit("appointment/setInternalNotes",O||"")}})}),v=B(()=>({serviceId:[{required:!0,message:o.value.please_select_service,trigger:["submit","change"]}],startDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],startTime:[{required:!0,message:o.value.select_time_warning,trigger:["submit","change"]}]})),P=B(()=>l.getters["entities/filteredCategories"](l.getters["appointment/getSelection"])),S=M(l.getters["entities/filteredCategories"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),A=M("");function d(O){A.value=O.toLowerCase()}let _=B(()=>A.value?S.value.filter(O=>O.name.toLowerCase().includes(A.value)):S.value),y=B(()=>l.getters["entities/filteredServices"](l.getters["appointment/getSelection"])),E=M(l.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null}));function C(O){let W=l.getters["entities/getService"](O),J=W&&W.settings?JSON.parse(W.settings):null,re=J&&"payments"in J&&J.payments&&"paymentLinks"in J.payments&&J.payments.paymentLinks?J.payments.paymentLinks:i.payments.paymentLinks;return re&&re.enabled}let L=M("");function V(O){L.value=O.toLowerCase()}let T=B(()=>L.value?E.value.filter(O=>O.name.toLowerCase().includes(L.value)):E.value),q=B(()=>l.getters["appointment/getId"]&&l.getters["appointment/getServiceId"]&&E.value.map(O=>O.id).indexOf(l.getters["appointment/getServiceId"])===-1?l.getters["entities/getService"](l.getters["appointment/getServiceId"]):null),H=B(()=>l.getters["entities/filteredLocations"](l.getters["appointment/getSelection"])),z=M(l.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:l.getters["appointment/getProviderId"],locationId:null})),X=M("");function K(O){X.value=O.toLowerCase()}let te=B(()=>X.value?z.value.filter(O=>O.name.toLowerCase().includes(X.value)):z.value),le=B(()=>l.getters["appointment/getId"]&&l.getters["appointment/getLocationId"]&&z.value.map(O=>O.id).indexOf(l.getters["appointment/getLocationId"])===-1?l.getters["entities/getLocation"](l.getters["appointment/getLocationId"]):null),ee=M(l.getters["entities/getSpaces"]);function xe(){l.commit("appointment/setTargetedDate",null),l.commit("appointment/setStartDate",null),l.commit("appointment/setStartTime",null),e("removeSlots")}function se(O,W=null,J=!1){let re=l.getters["appointment/getTargetedDate"];!O&&!re?O=ye().toDate():!O&&re&&(O=re),l.commit("appointment/setTargetedDate",O&&J?O:re),D.value.serviceId&&e("fetchSlots",O,W,J)}function ge(){D.value.startDate&&se(D.value.startDate)}function G(O){e("selectTime",O)}function ie(O){O?e("selectDate",O):xe()}function ae(O){O?(clearTimeout(this.searchSpacesTimer),l.commit("auth/setSpacesLoading",!0),$e.get("/entities",{params:{types:["spaces"],lessonSpaceSearch:O}}).then(W=>{ee.value=W.data.data.spaces}).catch(W=>{console.log(W)}).finally(()=>{l.commit("auth/setSpacesLoading",!1)})):ee.value=l.getters["entities/getSpaces"]}return xt(()=>D.value.serviceId,O=>{l.dispatch("appointment/updateEmployeeService",O||null),O&&(l.dispatch("appointment/recreateAllBookingCustomFields",{label:o.value.required_field}),ge())}),Ze(()=>{E.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setServiceId",E.value[0].id),z.value.length===1&&!l.getters["appointment/getId"]&&l.commit("appointment/setLocationId",z.value[0].id)}),a({detailsFormRef:f}),(O,W)=>{const J=vt,re=Ml,me=st;return x(),Y(me,{ref_key:"detailsFormRef",ref:f,model:t(D),rules:t(v),class:"am-capai-def"},{default:I(()=>[t(S).length>1?(x(),Y(J,{key:0,label:`${t(o).category}`,class:"am-capai-def__item"},{default:I(()=>[$(Je,{modelValue:t(D).categoryId,"onUpdate:modelValue":W[0]||(W[0]=oe=>t(D).categoryId=oe),clearable:"",filterable:"",placeholder:`${t(o).select_service_category}`,"filter-method":d},{default:I(()=>[(x(!0),F(ne,null,ve(t(_),oe=>(x(),Y(Ye,{key:oe.id,value:oe.id,label:oe.name,disabled:t(D).serviceId&&typeof t(P).find(De=>De.id===oe.id)>"u"},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0),$(J,{label:`${t(o).services_dropdown}`,prop:"serviceId",class:"am-capai-def__item"},{default:I(()=>[$(Je,{modelValue:t(D).serviceId,"onUpdate:modelValue":W[1]||(W[1]=oe=>t(D).serviceId=oe),disabled:t(E).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_service}`,"filter-method":V},{default:I(()=>[(x(!0),F(ne,null,ve(t(T),oe=>(x(),Y(Ye,{key:oe.id,value:oe.id,label:oe.name,disabled:typeof t(y).find(De=>De.id===oe.id)>"u"},null,8,["value","label","disabled"]))),128)),t(q)?(x(),Y(Ye,{key:t(q).id,value:t(q).id,label:t(q).name},null,8,["value","label"])):N("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"]),!t(c).isStarter&&t(z).length>1?(x(),Y(J,{key:1,label:`${t(o).location}`,class:"am-capai-def__item"},{default:I(()=>[$(Je,{modelValue:t(D).locationId,"onUpdate:modelValue":W[2]||(W[2]=oe=>t(D).locationId=oe),disabled:t(z).length===1,clearable:"",filterable:"",placeholder:`${t(o).select_location}`,"filter-method":K,onChange:ge},{default:I(()=>[(x(!0),F(ne,null,ve(t(te),oe=>(x(),Y(Ye,{key:oe.id,value:oe.id,label:oe.name,disabled:t(le)===null&&typeof t(H).find(De=>De.id===oe.id)>"u"},null,8,["value","label","disabled"]))),128)),t(le)?(x(),Y(Ye,{key:t(le).id,value:t(le).id,label:t(le).name},null,8,["value","label"])):N("",!0)]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["label"])):N("",!0),t(i).lessonSpace.enabled?(x(),Y(J,{key:2,label:`${t(o).lesson_space}`,class:"am-capai-def__item"},{default:I(()=>[$(Je,{modelValue:t(D).lessonSpace,"onUpdate:modelValue":W[3]||(W[3]=oe=>t(D).lessonSpace=oe),filterable:"",clearable:"",remote:"","remote-method":ae,placeholder:`${t(o).select}`},{default:I(()=>[(x(),Y(Ye,{key:0,value:0,label:t(o).lesson_space_new_space},null,8,["label"])),(x(!0),F(ne,null,ve(t(ee),oe=>(x(),Y(Ye,{key:oe.id,value:oe.id,label:oe.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0),$(J,{label:`${t(o).date}`,prop:"startDate",class:j(["am-capai-def__item am-w-50",t(w)])},{default:I(()=>[$(Ht,{modelValue:t(D).startDate,"onUpdate:modelValue":W[4]||(W[4]=oe=>t(D).startDate=oe),type:"date",format:t(Wt)(),placeholder:t(o).select_date,clearable:!0,lang:t(r),disabled:!t(D).serviceId,"disabled-date":(oe,De)=>t(s).isDisabledDate(oe,null,!0,De),"popper-class":n.slotsLoading?"am-slots-loader":"","cell-class-name":t(p),onPanelChange:W[5]||(W[5]=oe=>{se(oe,null,!0)}),onChange:ie,onFocus:W[6]||(W[6]=oe=>t(D).serviceId&&!t(D).startDate?se(null,null,!0):!1)},null,8,["modelValue","format","placeholder","lang","disabled","disabled-date","popper-class","cell-class-name"])]),_:1},8,["label","class"]),$(J,{label:`${t(o).time}`,prop:"startTime",class:j(["am-capai-def__item am-w-50",t(w)])},{default:I(()=>[$(Je,{modelValue:t(D).startTime,"onUpdate:modelValue":W[7]||(W[7]=oe=>t(D).startTime=oe),placeholder:`${t(o).select_time}`,disabled:!t(D).startDate,"prefix-icon":"clock",onChange:G},{default:I(()=>[(x(!0),F(ne,null,ve(t(s).getFreeTimes(null,{date:t(D).startDate,times:t(s).times,time:t(D).startTime},!0),oe=>(x(),Y(Ye,{key:oe,value:oe,label:oe},{default:I(()=>[ue(k(t(vs)(oe))+" ",1),m("span",w9,k(g()),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","class"]),$(J,{class:"am-capai-def__item"},{default:I(()=>[m("div",P9,[$(ht,{modelValue:t(D).notifyParticipants,"onUpdate:modelValue":W[8]||(W[8]=oe=>t(D).notifyParticipants=oe),label:t(o).notify_customers},null,8,["modelValue","label"]),$(re,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(o).notify_customers_tooltip},null,8,T9)]),default:I(()=>[$(Ge,{icon:"info-reverse"})]),_:1})])]),_:1}),t(D).notifyParticipants&&t(D).serviceId&&C(t(D).serviceId)?(x(),Y(J,{key:3,class:"am-capai-def__item"},{default:I(()=>[m("div",L9,[$(ht,{modelValue:t(D).createPaymentLinks,"onUpdate:modelValue":W[9]||(W[9]=oe=>t(D).createPaymentLinks=oe),label:t(o).generate_payment_links},null,8,["modelValue","label"]),$(re,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(o).generate_payment_links_tooltip},null,8,S9)]),default:I(()=>[$(Ge,{icon:"info-reverse"})]),_:1})])]),_:1})):N("",!0),$(J,{label:`${t(o).note_internal}`,class:"am-capai-def__item"},{default:I(()=>[$(ct,{modelValue:t(D).internalNotes,"onUpdate:modelValue":W[10]||(W[10]=oe=>t(D).internalNotes=oe),type:"textarea"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};function Bi(n,a){return Object.assign({},a,{gender:a.gender?a.gender:"",note:a.note?a.note:"",phone:a.phone?a.phone:"",birthday:a.birthday?ye(a.birthday.date.split(" ")[0]).toDate():null,translations:a.translations?JSON.parse(a.translations):{defaultLanguage:""}})}function $9(n){let a=n.getters["customerInfo/getCustomer"];return Object.assign({},a,{birthday:a.birthday?ye(a.birthday).format("YYYY-MM-DD"):null,translations:a.translations.defaultLanguage?JSON.stringify(a.translations):null})}const N9=m("span",{class:"am-icon-triangle-info"},null,-1),O9={key:0,class:"am-capai-warn__content"},M9={key:0,class:"am-capai-warn__heading"},V9={key:1,class:"am-capai-warn__text"},Ai={props:{heading:{type:String,default:""},text:{type:String,default:""}},setup(n){const a=n;let e=U("amColors"),s=B(()=>({"--am-c-warning":e.value.colorWarning,"--am-c-warning-op10":Q(e.value.colorWarning,.1),"--am-c-main-text":e.value.colorMainText,"--am-c-main-text-op10":Q(e.value.colorMainText,.1)}));return(l,o)=>(x(),F("div",{class:"am-capai-warn",style:Ce(t(s))},[N9,a.heading||a.text?(x(),F("div",O9,[a.heading?(x(),F("div",M9,k(a.heading),1)):N("",!0),a.text?(x(),F("div",V9,k(a.text),1)):N("",!0)])):N("",!0)],4))}};const R9={class:"am-cap-aec__header"},q9=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Fi={props:{visibility:{type:Boolean,required:!0},customCss:{type:Object,default:()=>{}},responsiveClass:{type:String,default:""}},emits:["update:visibility","addedCustomer"],setup(n,{emit:a}){const e=n,s=U("settings");let l=U("amLabels");const o=Ne();let r=M("details"),i=M(null),c=M(!1),u=M("success"),g=M("");function p(){c.value=!1,o.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let f=B(()=>o.getters["customerInfo/getCustomerId"]),b=B(()=>{let z=[];return s.wordpress.locale in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[s.wordpress.locale].wp_locale,label:o.getters["entities/getSettings"].languages[s.wordpress.locale].name}),s.general.usedLanguages.forEach(X=>{X in o.getters["entities/getSettings"].languages&&z.push({value:o.getters["entities/getSettings"].languages[X].wp_locale,label:o.getters["entities/getSettings"].languages[X].name})}),z}),w=M(null),D=M(!1),v=M({firstName:B({get:()=>o.getters["customerInfo/getCustomerFirstName"],set:z=>{o.commit("customerInfo/setCustomerFirstName",z||"")}}),lastName:B({get:()=>o.getters["customerInfo/getCustomerLastName"],set:z=>{o.commit("customerInfo/setCustomerLastName",z||"")}}),email:B({get:()=>o.getters["customerInfo/getCustomerEmail"],set:z=>{o.commit("customerInfo/setCustomerEmail",z||"")}}),phone:B({get:()=>o.getters["customerInfo/getCustomerPhone"],set:z=>{o.commit("customerInfo/setCustomerPhone",z||"")}}),language:B({get:()=>o.getters["customerInfo/getCustomerLanguage"],set:z=>{o.commit("customerInfo/setCustomerLanguage",z||"")}}),gender:B({get:()=>o.getters["customerInfo/getCustomerGender"],set:z=>{o.commit("customerInfo/setCustomerGender",z||"")}}),birthday:B({get:()=>o.getters["customerInfo/getCustomerBirthday"]||"",set:z=>{o.commit("customerInfo/setCustomerBirthday",z?ye(z).format("YYYY-MM-DD"):"")}}),note:B({get:()=>o.getters["customerInfo/getCustomerNote"],set:z=>{o.commit("customerInfo/setCustomerNote",z||"")}})}),P=M({firstName:[{required:!0,message:l.value.enter_first_name_warning,trigger:["submit","blur"]}],lastName:[{required:!0,message:l.value.enter_last_name_warning,trigger:["submit","blur"]}]}),S=M({firstName:{template:We.text,props:{itemName:"firstName",label:l.value.first_name_colon,placeholder:l.value.enter_first_name,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="user"/>'})}},lastName:{template:We.text,props:{itemName:"lastName",label:l.value.last_name_colon,placeholder:l.value.enter_last_name,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="user"/>'})}},email:{template:We.text,props:{itemName:"email",label:l.value.email_colon,placeholder:l.value.enter_email,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:'<IconComponent icon="email"/>'})}},phone:{countryPhoneIso:B({get:()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]||"",set:z=>{o.commit("customerInfo/setCustomerCountryPhoneIso",z?z.toLowerCase():"")}}),template:We.phone,props:{itemName:"phone",label:l.value.phone_colon,placeholder:l.value.enter_phone,defaultCode:B(()=>o.getters["customerInfo/getCustomerCountryPhoneIso"]?o.getters["customerInfo/getCustomerCountryPhoneIso"]:s.general.phoneDefaultCountryCode&&s.general.phoneDefaultCountryCode!=="auto"?s.general.phoneDefaultCountryCode:""),phoneError:B(()=>D.value),whatsAppLabel:l.value.whatsapp_opt_in_text,isWhatsApp:s.notifications.whatsAppEnabled&&s.notifications.whatsAppAccessToken&&s.notifications.whatsAppBusinessID&&s.notifications.whatsAppPhoneID,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},language:{template:We.select,props:{itemName:"language",label:l.value.notification_language,placeholder:l.value.language,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:`
          <IconComponent icon="pennant"/>`}),options:b.value}},gender:{template:We.select,props:{itemName:"gender",label:l.value.gender,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`),prefixIcon:Qe({components:{IconComponent:Ge},template:`
          <IconComponent icon="gender"/>`}),options:[{label:l.value.female,value:"female"},{label:l.value.male,value:"male"}]}},birthday:{template:We.datepicker,props:{itemName:"birthday",label:l.value.date_of_birth,placeholder:l.value.enter_date_of_birth,clearable:!0,readonly:!1,class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}},note:{template:We["text-area"],props:{itemName:"note",label:l.value.note_internal,itemType:"textarea",class:B(()=>`am-cap-aec__form-item ${e.responsiveClass}`)}}});function A(){o.dispatch("customerInfo/resetCustomer"),a("update:visibility",!1)}let d=B(()=>o.getters["customerInfo/getLoading"]);function _(){w.value.validate(z=>{if(!z){r.value="details";return}o.commit("customerInfo/setLoading",!0);let X=$9(o);const K={};for(const te in L){const le=L[te],ee=E[te];K[te]={label:le.label,type:le.type,value:typeof ee=="string"?ee.trim():ee}}X.customFields=JSON.stringify(K),$e.post("/users/customers"+(X.id?"/"+X.id:""),X,Object.assign(Ue(o),{params:{source:"cabinet-provider"}})).then(te=>{o.commit("auth/setPreloadedCustomers",o.getters["auth/getPreloadedCustomers"].concat([te.data.data.user]).sort((le,ee)=>le.id-ee.id)),a("addedCustomer",te.data.data.user),A()}).catch(te=>{"response"in te&&te.response&&(g.value=te.response.data.message,c.value=!0)}).finally(()=>{o.commit("customerInfo/setLoading",!1)})})}Qi(()=>{f.value!==null&&T()});const y=M(null),E=tt({}),C=tt({}),L=tt({});function V(z,X){if(C[X]={template:We[z.type],props:{id:X,itemName:X.toString(),label:z.label,options:z.options,class:`am-cap-aec-cf__item am-cf-width-${z.width}`}},z.type==="text-area"&&(C[X].props.itemType="textarea"),z.type==="datepicker"&&(C[X].props.weekStartsFromDay=s.wordpress.startOfWeek),z.type==="file"){let K=o.getters["auth/getProfile"]?o.getters["auth/getProfile"].id:null;C[X].props={...C[X].props,btnLabel:l.value.upload_file_here,isUpload:!0,bookingId:K,source:"cabinet-customer"}}}function T(){const z=o.getters["entities/getCustomFields"],X=B(()=>{const K=o.getters["customerInfo/getCustomerCustomFields"];return K?JSON.parse(K):null});z.filter(K=>K.saveType==="customer"&&K.type!=="content").forEach(K=>{const{id:te}=K,le=f.value&&X.value?X.value[te]?.value:null;L[te]={...K,value:le??(K.type==="checkbox"||K.type==="file"?[]:"")},E[te]=L[te].value??"",V(K,te)})}let q=U("amColors"),H=B(()=>({"--am-c-aec-text":q.value.colorMainText}));return(z,X)=>{const K=st,te=_a,le=Ca;return x(),Y(Sa,{visibility:e.visibility,position:"center","custom-class":"am-slide-popup-aec","custom-css":{...n.customCss,...t(H)},"onUpdate:visibility":A},{header:I(()=>[m("div",R9,[t(f)?(x(),F(ne,{key:0},[ue(k(t(l).edit_customer),1)],64)):(x(),F(ne,{key:1},[ue(k(t(l).add_customer),1)],64))])]),footer:I(()=>[$(Fe,{type:"plain",category:"secondary",onClick:A},{default:I(()=>[ue(k(t(l).cancel),1)]),_:1}),$(Fe,{onClick:_},{default:I(()=>[ue(k(t(l).save),1)]),_:1})]),default:I(()=>[t(c)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:i,type:t(u),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:p,onTriggerClose:p},{title:I(()=>[q9,ue(" "+k(t(g)),1)]),_:1},8,["type"])):N("",!0),t(d)?(x(),Y(Zt,{key:2})):(x(),Y(le,{key:1,modelValue:t(r),"onUpdate:modelValue":X[0]||(X[0]=ee=>Ae(r)?r.value=ee:r=ee)},{default:I(()=>[$(te,{class:"am-cap__tabs-item",label:t(l).details,name:"details"},{default:I(()=>[$(K,{ref_key:"customerFormRef",ref:w,model:t(v),rules:t(P),"label-position":"top",class:"am-cap-aec__form"},{default:I(()=>[(x(!0),F(ne,null,ve(t(S),(ee,xe)=>(x(),Y(ft(ee.template),kt({key:xe},ee.props,{modelValue:t(v)[xe],"onUpdate:modelValue":se=>t(v)[xe]=se,countryPhoneIso:ee.countryPhoneIso,"onUpdate:countryPhoneIso":se=>ee.countryPhoneIso=se}),null,16,["modelValue","onUpdate:modelValue","countryPhoneIso","onUpdate:countryPhoneIso"]))),128))]),_:1},8,["model","rules"])]),_:1},8,["label"]),Object.keys(t(L)).length?(x(),Y(te,{key:0,class:"am-cap__tabs-item",label:t(l).custom_fields,name:"customFields"},{default:I(()=>[t(d)?N("",!0):(x(),Y(K,{key:0,ref_key:"customFieldsFormRef",ref:y,model:t(E),"label-position":"top",class:j(["am-cap-aec__form",n.responsiveClass])},{default:I(()=>[(x(!0),F(ne,null,ve(Object.keys(t(L)),ee=>(x(),F(ne,{key:ee},[ee in t(E)?(x(),Y(ft(t(C)[ee]?.template),kt({key:0,modelValue:t(E)[ee],"onUpdate:modelValue":xe=>t(E)[ee]=xe},t(C)[ee]?.props),null,16,["modelValue","onUpdate:modelValue"])):N("",!0)],64))),128))]),_:1},8,["model","class"]))]),_:1},8,["label"])):N("",!0)]),_:1},8,["modelValue"]))]),_:1},8,["visibility","custom-css"])}}};const U9={class:"am-cap__cust-option"},z9={class:"am-cap__cust-option__heading"},j9={key:0,class:"am-cap__cust-option__inner"},Y9={key:1,class:"am-cap__cust-option__inner"},W9={class:"am-capai-cuf__content"},H9={class:"am-capai-cuf__bulk-label"},Z9={key:0,class:"am-capai-customer__data"},G9=m("span",{class:"am-icon-phone"},null,-1),J9=["href"],X9={key:1,class:"am-capai-customer__data"},Q9=m("span",{class:"am-icon-email"},null,-1),K9=["href"],e8={props:{responsiveClass:{type:String,default:""},capacityWarning:{type:String,default:""},appointmentCapacity:{type:Number,default:0},savedAppointment:{type:Object,default:()=>{}}},emits:["changedSlotCondition"],setup(n,{expose:a,emit:e}){const s=n;let l=Ne();const o=U("shortcodeData"),r=U("settings");let i=U("amCustomize"),c=U("amLabels"),u=U("pageWidth"),g=B(()=>l.getters["appointment/getEmployeeService"]),p=M(null),f=M({customersIds:B({get:()=>l.getters["customerInfo/getCustomersIds"],set:ee=>l.commit("customerInfo/setCustomersIds",ee)})}),b=M({customersIds:[{required:!0,message:c.value.select_customers,trigger:["submit","change"]}]}),w=B(()=>l.getters["customerInfo/getLoading"]),D=B(()=>l.getters["customerInfo/getCustomers"]),v=M(r.general.defaultAppointmentStatus),P=B(()=>_i().filter(ee=>l.getters["appointment/getId"]?ee.value!=="waiting":(ee.value==="approved"||ee.value==="pending")&&ee.value!=="no-show")),S=B(()=>l.getters["appointment/getBookings"]?l.getters["appointment/getBookings"]:[]),A=M(!1);function d(ee){l.commit("customerInfo/setCustomersIds",[ee.id].concat(l.getters["customerInfo/getCustomersIds"])),l.commit("customerInfo/setCustomers",[ee].concat(l.getters["customerInfo/getCustomers"])),_()}function _(){let ee=l.getters["appointment/getBookings"].map(ae=>parseInt(ae.customer.id)),xe=!1,se=g.value.settings?JSON.parse(g.value.settings):null;f.value.customersIds.filter(ae=>!ee.includes(ae)).forEach(ae=>{let O={};s.savedAppointment&&s.savedAppointment.bookings.forEach(W=>{parseInt(W.customer.id)===parseInt(ae)&&(O=W)}),xe=l.getters["appointment/getBookings"].length>1,l.getters["appointment/getBookings"].push(Object.assign({id:null,customer:D.value.find(W=>W.id===parseInt(ae)),persons:1,status:se&&"general"in se&&"defaultAppointmentStatus"in se.general?se.general.defaultAppointmentStatus:r.general.defaultAppointmentStatus,duration:Object.keys(g.value.customPricing.durations)[0],extras:g.value.extras.map(W=>new Object({extraId:W.id,quantity:0})),customFields:{}},O)),l.dispatch("appointment/resetBookingCustomFields",l.getters["appointment/getBookings"].length-1),l.dispatch("appointment/addCustomFieldsFormRules",{key:l.getters["appointment/getBookings"].length-1,label:c.value.required_field}),l.commit("appointment/setBooking",{index:l.getters["appointment/getBookings"].length-1,value:l.getters["appointment/getBookings"][l.getters["appointment/getBookings"].length-1]})});let ge=ee.filter(ae=>!f.value.customersIds.includes(ae)),G=[];l.getters["appointment/getBookings"].forEach((ae,O)=>{ge.indexOf(ae.customer.id)!==-1&&G.push(O)});let ie=l.getters["appointment/getBookings"].length;for(let ae=ie-1;ae>=0;ae--)G.indexOf(ae)!==-1&&(xe=!0,l.dispatch("appointment/removeBooking",ae));xe&&e("changedSlotCondition")}function y(){l.dispatch("customerInfo/resetCustomer"),A.value=!0}function E(ee){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),A.value=!0,$e.get("/users/customers/"+ee,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(xe=>{l.commit("customerInfo/setCustomer",Bi(l,xe.data.data.user))}).catch(xe=>{console.log(xe)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}function C(ee){l.dispatch("appointment/removeBooking",ee),l.dispatch("appointment/deleteAllCustomFieldsFormRules"),l.dispatch("appointment/addAllCustomFieldsFormRules",{label:c.value.required_field}),e("changedSlotCondition")}const{noShowData:L}=U("noShowData");function V(ee,xe){return ee&&xe?"am-w-50":""}function T(ee){ee&&l.commit("appointment/setAllBookingsStatus",ee)}function q(ee,xe){l.commit("appointment/setBookingStatus",{index:ee,value:xe})}function H(ee,xe){l.commit("appointment/setBookingPersons",{index:ee,value:xe}),e("changedSlotCondition")}function z(ee,xe){l.commit("appointment/setBookingDuration",{index:ee,value:xe}),e("changedSlotCondition")}let X=B(()=>o.value.cabinetType==="employee"?i.value.appointments.options.customerPhone.visibility:!0),K=B(()=>o.value.cabinetType==="employee"?i.value.appointments.options.customerEmail.visibility:!0),te=U("amColors"),le=B(()=>({"--am-c-card-text":te.value.colorMainText}));return Ze(()=>{if(l.getters["appointment/getId"]){let ee=l.getters["appointment/getBookings"].map(xe=>xe.customer.id);l.commit("customerInfo/setCustomersIds",ee),Zs(l,"",{limit:ee.length,customers:ee},()=>{l.commit("customerInfo/setCustomers",l.getters["customerInfo/getCustomers"].concat(l.getters["auth/getPreloadedCustomers"].filter(xe=>l.getters["customerInfo/getCustomers"].map(se=>se.id).indexOf(xe.id)===-1)).sort((xe,se)=>xe.id-se.id))})}else l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({customersFormRef:p}),(ee,xe)=>{const se=vt,ge=st;return x(),F("div",{class:"am-capai-cuf",style:Ce(t(le))},[s.capacityWarning?(x(),Y(Ai,{key:0,heading:s.capacityWarning},null,8,["heading"])):N("",!0),m("div",{class:j(["am-capai-cuf__heading",s.responsiveClass])},[$(ge,{ref_key:"customersFormRef",ref:p,model:t(f),rules:t(b),class:j(["am-capai-cuf__heading-form",s.responsiveClass])},{default:I(()=>[$(se,{prop:"customersIds",class:"am-capai-cuf__heading-form__item"},{default:I(()=>[$(Je,{modelValue:t(f).customersIds,"onUpdate:modelValue":xe[0]||(xe[0]=G=>t(f).customersIds=G),filterable:"",clearable:"",multiple:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","popper-class":"am-capai-cuf__popper-customer",placeholder:`${t(c).select_customers}`,"remote-method":G=>{t(Zs)(t(l),G)},loading:t(w),onChange:_,onFocus:xe[1]||(xe[1]=G=>t($o)(t(l)))},{default:I(()=>[(x(!0),F(ne,null,ve(t(D),G=>(x(),Y(Ye,{key:G.id,disabled:t(g)?.maxCapacity===n.appointmentCapacity&&t(f).customersIds.indexOf(G.id)===-1,value:G.id,label:G.email&&t(K)?G.email:G.firstName+" "+G.lastName},{default:I(()=>[m("div",U9,[m("div",z9,k(G.firstName+" "+G.lastName),1),t(K)&&G.email?(x(),F("div",j9,k(G.email),1)):N("",!0),t(X)&&G.phone?(x(),F("div",Y9,k(G.phone),1)):N("",!0)])]),_:2},1032,["disabled","value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})]),_:1},8,["model","rules","class"]),t(r).roles.allowWriteCustomers?(x(),Y(Fe,{key:0,class:j(["am-capai-cuf__heading-add",s.responsiveClass]),size:"default",prefix:"plus",icon:"plus","icon-only":t(u)<=540,disabled:t(g)?.maxCapacity===n.appointmentCapacity,onClick:y},{default:I(()=>[ue(k(t(c).new_customer),1)]),_:1},8,["class","icon-only","disabled"])):N("",!0)],2),m("div",W9,[t(l).getters["appointment/getBookings"].length>1?(x(),F("div",{key:0,class:j(["am-capai-cuf__bulk",s.responsiveClass])},[m("div",H9,k(t(c).change_group_status),1),$(Je,{modelValue:t(v),"onUpdate:modelValue":xe[2]||(xe[2]=G=>Ae(v)?v.value=G:v=G),clearable:"",size:"small",placeholder:"Group Status","popper-class":"am-capai-cuf__popper","parent-class":`am-capai-cuf__bulk-status ${s.responsiveClass}`,"prefix-icon":t(v)?t(P).find(G=>G.value===t(v)).icon:"circle-empty","prefix-icon-color":t(v)?t(P).find(G=>G.value===t(v)).color:"var(--am-c-select-text-op40)",onChange:T},{default:I(()=>[(x(!0),F(ne,null,ve(t(P),G=>(x(),Y(Ye,{key:G.value,value:G.value,label:G.label},{default:I(()=>[m("span",{class:j(`am-icon-${G.icon}`),style:Ce(`color: ${G.color}`)},null,6),ue(" "+k(G.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","parent-class","prefix-icon","prefix-icon-color"])],2)):N("",!0),(x(!0),F(ne,null,ve(t(S),(G,ie)=>(x(),F("div",{key:ie,class:j(["am-capai-cuf__card",s.responsiveClass])},[m("div",{class:j(["am-capai-cuf__card-info",s.responsiveClass])},[m("div",{class:j(["am-capai-customer__name",t(L)(G.customer.noShowCount).class])},[t(L)(G.customer.noShowCount).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(L)(G.customer.noShowCount).icon}`)},null,2)):N("",!0),ue(" "+k(G.customer.firstName+" "+G.customer.lastName),1)],2),G.customer.phone&&t(X)?(x(),F("div",Z9,[G9,m("a",{href:`tel:${G.customer.phone}`},k(G.customer.phone),9,J9)])):N("",!0),G.customer.email&&t(K)?(x(),F("div",X9,[Q9,m("a",{href:`mailto:${G.customer.email}`},k(G.customer.email),9,K9)])):N("",!0)],2),m("div",{class:j(["am-capai-cuf__card-booking",s.responsiveClass])},[$(Je,{modelValue:G.status,"onUpdate:modelValue":ae=>G.status=ae,"prefix-icon":t(P).find(ae=>ae.value===G.status).icon,"prefix-icon-color":t(P).find(ae=>ae.value===G.status).color,"popper-class":"am-capai-cuf__popper",size:"small",onChange:ae=>q(ie,ae)},{default:I(()=>[(x(!0),F(ne,null,ve(t(P),ae=>(x(),Y(Ye,{key:ae.value,value:ae.value,label:t(P).find(O=>O.value===G.status).label},{default:I(()=>[m("span",{class:j(`am-icon-${ae.icon}`),style:Ce(`color: ${ae.color}`)},null,6),ue(" "+k(ae.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","prefix-icon","prefix-icon-color","onChange"]),t(g).maxCapacity>1?(x(),Y(Je,{key:0,modelValue:G.persons,"onUpdate:modelValue":ae=>G.persons=ae,"parent-class":`${V(t(g).maxCapacity>1,t(g).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(c).persons,"prefix-icon":"users","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:ae=>H(ie,ae)},{default:I(()=>[(x(!0),F(ne,null,ve(t(g)?.maxCapacity,ae=>(x(),Y(Ye,{key:ae,disabled:n.appointmentCapacity-G.persons+ae>t(g)?.maxCapacity,value:ae,label:ae},null,8,["disabled","value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):N("",!0),t(g).customPricing.enabled==="duration"?(x(),Y(Je,{key:1,modelValue:G.duration,"onUpdate:modelValue":ae=>G.duration=ae,"parent-class":`${V(t(g).maxCapacity>1,t(g).customPricing.enabled==="duration")} ${s.responsiveClass}`,placeholder:t(c).duration,"prefix-icon":"clock","prefix-icon-color":"var(--am-c-card-text)",size:"small",onChange:ae=>z(ie,ae)},{default:I(()=>[(x(!0),F(ne,null,ve(Object.keys(t(g).customPricing.durations),ae=>(x(),Y(Ye,{key:ae,value:ae,label:t(hs)(ae,t(c).h,t(c).min)},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","parent-class","placeholder","onChange"])):N("",!0)],2),$(Ea,{index:ie,"reference-class":s.responsiveClass,"have-edit":t(r).roles.allowWriteCustomers,onRemove:C,onEdit:ae=>E(G.customer.id)},null,8,["index","reference-class","have-edit","onEdit"])],2))),128))]),t(A)?(x(),Y(Fi,{key:1,visibility:t(A),"responsive-class":s.responsiveClass,"onUpdate:visibility":xe[3]||(xe[3]=G=>Ae(A)?A.value=G:A=G),onAddedCustomer:d},null,8,["visibility","responsive-class"])):N("",!0)],4)}}};const t8=m("span",{class:"am-icon-email"},null,-1),a8=["href"],s8=m("span",{class:"am-icon-phone"},null,-1),l8=["href"],n8={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Ne();const l=U("shortcodeData");let o=U("amCustomize");const r=U("settings");let i=U("amLabels"),c=M(null),u=M({}),g=B(()=>s.getters["appointment/getCustomFieldsRules"]),p=M({}),f=B(()=>s.getters["appointment/getCustomFields"]),b=B(()=>s.getters["appointment/getServiceId"]),w=B(()=>s.getters["customerInfo/getCustomersIds"]),D=M(null);function v(y,E){let C=s.getters["appointment/getBookings"][y].id;(E.type!=="file"||C)&&(u.value[`${y}cf${E.id}`]=B({get:()=>{let L=s.getters["appointment/getBookings"][y].customFields[E.id]?.value;return L||""},set:L=>s.dispatch("appointment/updateBookingCustomField",{bookingKey:y,fieldId:E.id,value:L})}))}function P(y,E){let C=s.getters["appointment/getBookings"][y].id;(E.type!=="file"||C)&&(p.value[y][E.id]={template:We[E.type],props:{id:E.id,itemName:`${y}cf${E.id}`,label:E.label,options:E.options,class:`am-capai-cfields__item am-cf-width-${E.width}`}}),(E.type==="checkbox"||E.type==="radio")&&(p.value[y][E.id].props.options=p.value[y][E.id].props.options.map(L=>({...L,value:L.label}))),E.type==="text-area"&&(p.value[y][E.id].props={...p.value[y][E.id].props,itemType:"textarea"}),E.type==="file"&&C&&(p.value[y][E.id].props={...p.value[y][E.id].props,btnLabel:i.value.upload_file_here,isUpload:!1,bookingId:C}),E.type==="datepicker"&&(p.value[y][E.id].props={...p.value[y][E.id].props,weekStartsFromDay:r.wordpress.startOfWeek})}function S(){u.value={},s.getters["appointment/getBookings"].forEach((y,E)=>{p.value[E]={},s.getters["appointment/getCustomFields"].forEach(C=>{v(E,C),P(E,C)})})}const{noShowData:A}=U("noShowData");let d=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),_=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0);return xt([b,w],()=>{S()}),Gs(()=>{S()}),Ze(()=>{s.getters["appointment/getBookings"].filter(y=>y.status!=="canceled"&&y.status!=="rejected").length<2&&(D.value=0)}),a({customFieldsFormRef:c}),(y,E)=>{const C=Cs,L=ys,V=st;return x(),Y(V,{ref_key:"customFieldsFormRef",ref:c,model:t(u),rules:t(g),"label-position":"top",class:j(["am-capai-cfields am-capai-cfields__form",e.responsiveClass])},{default:I(()=>[$(L,{modelValue:t(D),"onUpdate:modelValue":E[0]||(E[0]=T=>Ae(D)?D.value=T:D=T),class:"am-capai-collapse",accordion:""},{default:I(()=>[(x(!0),F(ne,null,ve(t(s).getters["appointment/getBookings"].filter(T=>T.status!=="canceled"&&T.status!=="rejected"),(T,q)=>(x(),Y(C,{key:q,name:q,class:"am-capai-collapse__item"},{title:I(()=>[m("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(T.customer.email&&t(_)||T.customer.phone&&t(d))},t(A)(T.customer.noShowCount).class]])},[t(A)(T.customer.noShowCount).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(A)(T.customer.noShowCount).icon}`)},null,2)):N("",!0),ue(" "+k(T.customer.firstName+" "+T.customer.lastName),1)],2)]),default:I(()=>[T.customer.email&&t(_)||T.customer.phone&&t(d)?(x(),F("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[T.customer.email&&t(_)?(x(),F("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[t8,m("a",{href:`mailto:${T.customer.email}`},k(T.customer.email),9,a8)],2)):N("",!0),T.customer.phone&&t(d)?(x(),F("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[s8,m("a",{href:`tel:${T.customer.phone}`},k(T.customer.phone),9,l8)],2)):N("",!0)],2)):N("",!0),(x(!0),F(ne,null,ve(t(f),H=>(x(),F(ne,{key:q+"_"+H.id},[q in t(p)&&`${q}cf${H.id}`in t(u)?(x(),Y(ft(t(p)[q][H.id].template),kt({key:0,modelValue:t(u)[`${q}cf${H.id}`],"onUpdate:modelValue":z=>t(u)[`${q}cf${H.id}`]=z},t(p)[q][H.id].props),null,16,["modelValue","onUpdate:modelValue"])):N("",!0)],64))),128))]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["model","rules","class"])}}};const o8={key:0,class:"am-capai-ext__heading-extra"},r8=m("span",{class:"am-icon-email"},null,-1),i8=["href"],c8=m("span",{class:"am-icon-phone"},null,-1),x8=["href"],u8={class:"am-capai-ext__wrapper"},d8={class:"am-capai-ext__inner-info"},m8={class:"am-capai-ext__inner-name"},p8={key:0,class:"am-capai-ext__inner-duration"},f8={class:"am-capai-ext__total"},g8={props:{responsiveClass:{type:String,default:""}},emits:["changedSlotCondition"],setup(n,{emit:a}){const e=n,s=Ne(),l=U("shortcodeData");let o=U("amCustomize"),r=U("amLabels"),i=B(()=>s.getters["appointment/getEmployeeService"]),c=B(()=>s.getters["appointment/getBookings"]),u=M(null);function g(S,A,d){S.duration&&(d.extras[A].quantity===0||d.extras[A].quantity===1)&&a("changedSlotCondition")}function p(S){return S.extras.length?S.extras.reduce((A,d)=>A+("price"in d?d.price:i.value.extras.find(_=>_.id===d.extraId).price)*d.quantity,0):0}function f(S){return S.filter(A=>A.quantity>0).length}const{noShowData:b}=U("noShowData");let w=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),D=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),v=U("amColors"),P=B(()=>({"--am-c-ext-text-op60":Q(v.value.colorMainText,.6)}));return Ze(()=>{c.value.filter(S=>S.status!=="canceled"&&S.status!=="rejected").length<2&&(u.value=0)}),(S,A)=>{const d=Cs,_=ys;return x(),Y(_,{modelValue:t(u),"onUpdate:modelValue":A[0]||(A[0]=y=>Ae(u)?u.value=y:u=y),class:"am-capai-ext am-capai-collapse",accordion:"",style:Ce(t(P))},{default:I(()=>[(x(!0),F(ne,null,ve(t(c).filter(y=>y.status!=="canceled"&&y.status!=="rejected"),(y,E)=>(x(),Y(d,{key:E,name:E,class:"am-capai-ext__item am-capai-collapse__item"},{title:I(()=>[m("div",{class:j(["am-capai-ext__heading",{"am-pb-16":!(y.customer.email&&t(D)||y.customer.phone&&t(w))}])},[m("div",{class:j(["am-capai-customer__name",t(b)(y.customer.noShowCount).class])},[t(b)(y.customer.noShowCount).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(b)(y.customer.noShowCount).icon}`)},null,2)):N("",!0),ue(" "+k(y.customer.firstName+" "+y.customer.lastName),1)],2),f(y.extras)>0?(x(),F("div",o8,k(`${t(r).extras}: ${f(y.extras)}`),1)):N("",!0)],2)]),default:I(()=>[y.customer.email&&t(D)||y.customer.phone&&t(w)?(x(),F("div",{key:0,class:j(["am-capai-customer__data-wrapper",e.responsiveClass])},[y.customer.email&&t(D)?(x(),F("div",{key:0,class:j(["am-capai-customer__data",e.responsiveClass])},[r8,m("a",{href:`mailto:${y.customer.email}`},k(y.customer.email),9,i8)],2)):N("",!0),y.customer.phone&&t(w)?(x(),F("div",{key:1,class:j(["am-capai-customer__data",e.responsiveClass])},[c8,m("a",{href:`tel:${y.customer.phone}`},k(y.customer.phone),9,x8)],2)):N("",!0)],2)):N("",!0),m("div",u8,[(x(!0),F(ne,null,ve(t(i).extras,(C,L)=>(x(),F("div",{key:L,class:j(["am-capai-ext__inner",[{"am-border-bottom":L!==t(i).extras.length-1},e.responsiveClass]])},[m("div",d8,[m("div",m8,k(C.name),1),C.duration?(x(),F("div",p8,k(`${t(r).duration}: ${t(hs)(C.duration,t(r).h,t(r).min)}`),1)):N("",!0)]),m("div",{class:j(["am-capai-ext__inner-selection",e.responsiveClass])},[m("div",{class:j(["am-capai-ext__inner-price",e.responsiveClass])},[C.price?(x(),F(ne,{key:0},[ue(k(t(nt)("price"in y.extras[L]?y.extras[L].price:C.price)),1)],64)):(x(),F(ne,{key:1},[ue(k(t(r).free),1)],64))],2),$(Ct,{modelValue:y.extras[L].quantity,"onUpdate:modelValue":V=>y.extras[L].quantity=V,class:j(e.responsiveClass),size:"small",min:0,max:C.maxQuantity,onChange:V=>g(C,L,y)},null,8,["modelValue","onUpdate:modelValue","class","max","onChange"])],2)],2))),128)),m("div",f8,k(`${t(r).subtotal}: ${t(nt)(p(y))}`),1)])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const h8={class:"am-fs__rs-every"},v8={key:1},E8={class:"am-fs__rs-on-week"},_8=["onClick"],C8={key:2},y8={class:"am-fs__rs-on-month"},b8={class:"am-fs__rs-ends"},B8={class:"am-fs__rs-ends-choose"},A8={class:"am-fs__rs-ends-options"},F8={class:"am-fs__rs-ends-after"},D8={class:"am-fs__rs-summary"},k8={key:0},w8={key:1},P8={key:0},T8=ue(", "),L8={key:0},S8={key:1},I8={name:"RecurringSetup"},$8=Object.assign(I8,{props:{service:{type:Object,default:()=>{}},startDate:{type:String,default:""},startTime:{type:String,default:""},maxDate:{type:String,default:""},globalClass:{type:String,default:""}},setup(n){const a=n;let e=U("amLabels"),s=U("amCustomize"),l=Ne(),o=U("containerWidth",0),r=B(()=>o.value<560||o.value-240<520),i=B({get:()=>l.getters["recurring/getRepeatType"],set:y=>{l.commit("recurring/setRepeatType",y)}}),c=B({get:()=>l.getters["recurring/getRepeatInterval"],set:y=>{l.commit("recurring/setRepeatInterval",y)}}),u=B({get:()=>l.getters["recurring/getOccurrenceType"],set:y=>{l.commit("recurring/setOccurrenceType",y)}}),g=B({get:()=>l.getters["recurring/getOccurrenceDate"]?l.getters["recurring/getOccurrenceDate"]:new Date(a.startDate),set:y=>{l.commit("recurring/setOccurrenceDate",y)}}),p=B({get:()=>l.getters["recurring/getOccurrenceCount"],set:y=>{l.commit("recurring/setOccurrenceCount",y)}}),f=B({get:()=>l.getters["recurring/getMonthly"],set:y=>{l.commit("recurring/setMonthly",y)}});const b=M([{label:e.value.recurrence_day,labelPlural:e.value.recurrence_days,value:"daily"},{label:e.value.recurrence_week,labelPlural:e.value.recurrence_weeks,value:"weekly"},{label:e.value.recurrence_month,labelPlural:e.value.recurrence_months,value:"monthly"}]),w=M([{label:e.value.recurrence_specific_date,value:0},{label:e.value.recurrence_first,value:1},{label:e.value.recurrence_second,value:2},{label:e.value.recurrence_third,value:3},{label:e.value.recurrence_fourth,value:4},{label:e.value.recurrence_last,value:5}]);let D=M(ye(a.startDate).format("dddd").toLowerCase()),v=M([{label:"Mon",labelFull:"Monday",value:"monday",selected:!1},{label:"Tue",labelFull:"Tuesday",value:"tuesday",selected:!1},{label:"Wed",labelFull:"Wednesday",value:"wednesday",selected:!1},{label:"Thu",labelFull:"Thursday",value:"thursday",selected:!1},{label:"Fri",labelFull:"Friday",value:"friday",selected:!1},{label:"Sat",labelFull:"Saturday",value:"saturday",selected:!1},{label:"Sun",labelFull:"Sunday",value:"sunday",selected:!1}]),P=B(()=>v.value.find(y=>y.value===ye(a.startDate,"YYYY-MM-DD").format("dddd").toLowerCase()).labelFull);function S(y){g.value=ye(y,"YYYY-MM-DD").toDate()}function A(y,E=!1){let C=v.value.find(L=>L.value===y);C.selected=E?!0:!C.selected,l.commit("recurring/setDays",{value:y,selected:C.selected})}Ze(()=>{qs&&(v.value=v.value.map((E,C)=>({...E,label:Fr[C],labelFull:Dr[C]})));let y=l.getters["recurring/getDays"].filter(E=>E.selected);y.length===0?A(v.value.find(E=>D.value&&E.value===D.value).value,!0):y.forEach(E=>{A(E.value,!0)}),a.service.recurringCycle!=="all"&&l.commit("recurring/setRepeatType",a.service.recurringCycle)});let d=U("amColors"),_=B(()=>({"--am-c-rs-text":d.value.colorMainText,"--am-c-rs-text-op60":Q(d.value.colorMainText,.6),"--am-c-rs-bgr":d.value.colorMainBgr,"--am-c-rs-primary":d.value.colorPrimary,"--am-c-rs-inp-border":d.value.colorInpBorder}));return(y,E)=>(x(),F("div",{class:j(["am-fs__rs",[{"am-fs__rs-mobile":t(r)},t(a).globalClass]]),style:Ce(t(_))},[t(s)&&t(s).recurringStep&&t(s).recurringStep.options.heading.visibility?(x(),F(ne,{key:0},[m("p",null,k(t(e).recurrence),1),m("span",null,k(t(e).recurrence_choosing_time),1)],64)):N("",!0),m("p",null,k(t(e).repeat_every)+":",1),m("div",h8,[$(t(Ct),{modelValue:t(c),"onUpdate:modelValue":E[0]||(E[0]=C=>Ae(c)?c.value=C:c=C),min:1,max:100},null,8,["modelValue"]),$(t(Je),{modelValue:t(i),"onUpdate:modelValue":E[1]||(E[1]=C=>Ae(i)?i.value=C:i=C),disabled:t(a).service.recurringCycle!=="all"},{default:I(()=>[(x(!0),F(ne,null,ve(b.value,(C,L)=>(x(),Y(t(Ye),{key:L,label:C.label,value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled"])]),t(i)==="weekly"?(x(),F("div",v8,[m("p",null,k(`${t(e).recurrence_repeat_on}:`),1),m("div",E8,[(x(!0),F(ne,null,ve(t(v),(C,L)=>(x(),F("div",{key:L,class:j({"am-fs__rs-on-week-selected":t(v).find(V=>V.value===C.value).selected}),onClick:V=>A(C.value)},k(C.label),11,_8))),128))])])):N("",!0),t(i)==="monthly"?(x(),F("div",C8,[m("p",null,k(`${t(e).recurrence_repeat_on}:`),1),m("div",y8,[$(t(Je),{modelValue:t(f),"onUpdate:modelValue":E[2]||(E[2]=C=>Ae(f)?f.value=C:f=C)},{default:I(()=>[(x(!0),F(ne,null,ve(w.value,(C,L)=>(x(),Y(t(Ye),{key:L,label:C.label+(L!==0?" "+t(P):""),value:C.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])])):N("",!0),m("p",null,k(`${t(e).recurrence_ends}:`),1),m("span",null,k(t(e).recurrence_choose_ends),1),m("div",b8,[m("div",B8,[$(t(Vl),{modelValue:t(u),"onUpdate:modelValue":E[3]||(E[3]=C=>Ae(u)?u.value=C:u=C)},{default:I(()=>[$(t(La),{value:"On"},{default:I(()=>[ue(k(t(e).recurrence_on),1)]),_:1}),$(t(La),{value:"After"},{default:I(()=>[ue(k(t(e).recurrence_after),1)]),_:1})]),_:1},8,["modelValue"])]),m("div",A8,[$(t(Ki),{"calendar-minimum-date":t(a).startDate,disabled:t(u)!=="On","input-placeholder":t(e).recurrence_select_date,"calendar-maximum-date":t(a).maxDate,onSelectedDate:S},null,8,["calendar-minimum-date","disabled","input-placeholder","calendar-maximum-date"]),m("div",F8,[$(t(Ct),{modelValue:t(p),"onUpdate:modelValue":E[4]||(E[4]=C=>Ae(p)?p.value=C:p=C),disabled:t(u)!=="After",min:1,max:100},null,8,["modelValue","disabled"]),m("span",null,k(` ${t(e).occurrences}`),1)])])]),m("div",D8,[m("p",null,k(`${t(e).appointment_repeats}:`),1),m("p",null,[ue(k(`${t(e).recurrence_every} ${t(c)>1?t(c):""} ${b.value.find(C=>C.value===t(i))?b.value.find(C=>C.value===t(i)).label:""}`)+" ",1),t(i)==="weekly"?(x(),F("span",k8,k(`${t(e).repeats_on} ${t(v).filter(C=>C.selected).map(C=>C.labelFull).join(", ")}`),1)):N("",!0),t(i)==="monthly"?(x(),F("span",w8,[ue(k(` ${t(e).repeats_on} ${w.value[t(f)].label}`)+" ",1),t(f)!==0?(x(),F("span",P8,k(` ${t(P)}`),1)):N("",!0),T8])):N("",!0),m("span",null,k(` ${t(e).repeats_from} ${t(it)(t(a).startDate)} ${t(e).repeats_at} ${t(vs)(t(a).startTime)}`),1)]),m("p",null,[t(u)==="After"?(x(),F("span",L8,k(t(e).number_of_recurrences)+" "+k(` ${t(p)}`),1)):t(g)?(x(),F("span",S8,k(t(e).ends_on)+" "+k(` ${t(it)(t(e0)(t(g)))}`),1)):N("",!0)])])],6))}});const N8={class:"am-capai-recurr__enable"},O8={key:0,class:"am-capai-recurr__content"},M8={key:1,class:"am-capai-recurr__list"},V8={class:"am-capai-recurr__list-heading"},R8={class:"am-capai-recurr__list-heading__text"},q8=m("span",{class:"am-icon-refresh"},null,-1),U8={class:"am-capai-recurr__table"},z8={key:2,class:"am-capai-recurr__actions"},j8={props:{responsiveClass:{type:String,default:""},maximumBookingStartDate:{type:String,required:!0},slotsLoading:{type:Boolean,required:!0},slotsProps:{type:Object,required:!0},freeSlots:{type:Object,required:!0},getFreeTimes:{type:Function,required:!0},isDisabledDate:{type:Function,required:!0},getSelectedDatesTimes:{type:Function,required:!0}},emits:["fetchSlots"],setup(n,{emit:a}){const e=n,s=Ne(),l=U("settings");let o=U("amLabels"),r=U("localLanguage"),i=B(()=>s.getters["appointment/getEmployeeService"]),c=M(!1),u=M(2),g=M(!1),p=U("recurringList"),f=M(!0);function b(){let E=s.getters["recurring/getOccurrenceType"]==="On"?at(s.getters["recurring/getOccurrenceDate"]).format("YYYY-MM-DD"):null,C=t0(e.maximumBookingStartDate,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),E,l.general.numberOfDaysAvailableForBooking,s.getters["recurring/getRepeatType"],s.getters["recurring/getRepeatInterval"],s.getters["recurring/getDays"],s.getters["recurring/getMonthly"]);u.value=s.getters["recurring/getOccurrenceType"]==="On"?Object.keys(C).length:s.getters["recurring/getOccurrenceCount"],g.value=!0;let L=Pr(Object.keys(C));Tr(Object.assign({startDateTime:at(s.getters["appointment/getStartDate"]).startOf("month").subtract(6,"days").format("YYYY-MM-DD"),endDateTime:L.length?at(L[L.length-1]).endOf("month").add(11,"days").format("YYYY-MM-DD"):at().add(l.general.numberOfDaysAvailableForBooking,"days").format("YYYY-MM-DD")},e.slotsProps),null,V=>{let T=a0(i.value,V,C,at(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),s.getters["appointment/getStartTime"],E,s.getters["recurring/getOccurrenceType"]==="After"?s.getters["recurring/getOccurrenceCount"]:null);p.value=[],Object.keys(T).forEach(q=>{p.value.push(Object.assign({date:at(q).toDate(),editing:!1},T[q]))}),g.value=!1})}function w(){p.value=null}function D(E){let C=at(p.value[E].date).format("YYYY-MM-DD");p.value[E].times=Object.keys(e.freeSlots[C]);let L=e.getSelectedDatesTimes(E,!1);C in L&&p.value[E].time in L[C]&&(p.value[E].time="")}function v(E){p.value.splice(E,1)}function P(E){p.value[E].editing=!0}function S(E){p.value[E].editing=!1}let A=M(null);function d(E,C,L=!1){!E&&!A.value?E=at().toDate():!E&&A.value&&(E=A.value),A.value=E&&L?E:A.value,a("fetchSlots",E,C,L)}let _=U("amColors"),y=B(()=>({"--am-c-recurr-bgr-op05":Q(_.value.colorPrimary,.05),"--am-c-warning-op10":Q(_.value.colorWarning,.1),"--am-c-main-text-op10":Q(_.value.colorMainText,.1)}));return xt(c,E=>{E||(p.value=null)}),(E,C)=>(x(),F("div",{class:"am-capai-recurr",style:Ce(t(y))},[m("div",N8,[$(ht,{modelValue:t(c),"onUpdate:modelValue":C[0]||(C[0]=L=>Ae(c)?c.value=L:c=L),label:"Enable Recurring appointment"},null,8,["modelValue"])]),t(c)?(x(),F("div",O8,[!t(g)&&!t(p)?(x(),Y($8,{key:0,"start-date":t(at)(t(s).getters["appointment/getStartDate"]).format("YYYY-MM-DD"),"start-time":t(s).getters["appointment/getStartTime"],"max-date":t(e).maximumBookingStartDate,service:t(i)},null,8,["start-date","start-time","max-date","service"])):(x(),F(ne,{key:1},[t(p)?(x(),F("div",M8,[m("div",V8,[m("div",R8,[q8,m("div",null,k(`${t(p).length} appointments total`),1)]),m("div",{class:"am-capai-recurr__list-heading__action",onClick:C[1]||(C[1]=()=>{Ae(f)?f.value=!t(f):f=!t(f)})},k(t(f)?t(o).show_less:t(o).show_more),1)]),t(f)?(x(),F(ne,{key:0},[t(p).filter(L=>L.isSubstituteDate||L.isSubstituteTime).length?(x(),Y(Ai,{key:0,heading:t(o).recurring_unavailable_slots,text:t(o).recurring_sub_message1},null,8,["heading","text"])):N("",!0),m("div",U8,[(x(!0),F(ne,null,ve(t(p),(L,V)=>(x(),F("div",{key:V,class:j(["am-capai-recurr__row",[{"am-warn":L.isSubstituteDate||L.isSubstituteTime},t(e).responsiveClass]])},[m("div",{class:j(["am-capai-recurr__row-num",t(e).responsiveClass])},k(V+1),3),m("div",{class:j(["am-capai-recurr__row-date",[{"am-disable":!L.editing},t(e).responsiveClass]])},[$(Ht,{modelValue:L.date,"onUpdate:modelValue":T=>L.date=T,type:"date",format:t(Wt)(),placeholder:"Pick a day",size:"small",lang:t(r),"disabled-date":(T,q)=>t(e).isDisabledDate(T,L.editing,!1,q),"popper-class":t(e).slotsLoading?"slots-loader":"",onPanelChange:T=>{d(T,V,!0)},onChange:T=>D(V),onFocus:T=>d(L.date,V,!0)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date","popper-class","onPanelChange","onChange","onFocus"])],2),m("div",{class:j(["am-capai-recurr__row-time",[{"am-disable":!L.editing},t(e).responsiveClass]])},[$(Je,{modelValue:L.time,"onUpdate:modelValue":T=>L.time=T,size:"small",placeholder:`${t(o).select_time}`,disabled:!L.date},{default:I(()=>[(x(!0),F(ne,null,ve(L.editing?t(e).getFreeTimes(V,t(p)[V],!1):t(p)[V].times,T=>(x(),Y(Ye,{key:T,value:T,label:T},null,8,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled"])],2),m("div",{class:j(["am-capai-recurr__row-actions",t(e).responsiveClass])},[L.editing?(x(),Y(Fe,{key:1,category:"primary",size:"small",onClick:T=>S(V)},{default:I(()=>[ue(k(t(o).save),1)]),_:2},1032,["onClick"])):(x(),Y(Ea,{key:0,index:V,onRemove:v,onEdit:P},null,8,["index"]))],2)],2))),128))])],64)):N("",!0)])):(x(),Y(Zt,{key:0,count:t(u)},null,8,["count"]))],64)),t(g)?N("",!0):(x(),F("div",z8,[t(p)?N("",!0):(x(),Y(Fe,{key:0,category:"primary",size:"medium",onClick:C[2]||(C[2]=L=>b())},{default:I(()=>[ue(k(t(o).recurring_list),1)]),_:1})),t(p)?(x(),Y(Fe,{key:1,category:"secondary",type:"plain",size:"medium",onClick:C[3]||(C[3]=L=>w())},{default:I(()=>[ue(k(t(o).recurring_settings),1)]),_:1})):N("",!0)]))])):N("",!0)],4))}};const Y8=m("span",{class:"am-icon-email"},null,-1),W8=["href"],H8=m("span",{class:"am-icon-phone"},null,-1),Z8=["href"],G8={class:"am-capai-linked__list"},J8={class:"am-capai-linked__list-index"},X8={class:"am-capai-linked__list-date"},Q8=m("span",{class:"am-icon-calendar"},null,-1),K8={class:"am-capai-linked__list-action"},eh={props:{responsiveClass:{type:String,default:""},linkedAppointments:{type:Array,required:!0}},emits:["editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Ne();const l=U("shortcodeData");let o=U("amCustomize"),r=M(null);function i(D){return e.linkedAppointments.filter(v=>v.bookings.filter(P=>parseInt(P.customer.id)===parseInt(D.customer.id)).length)}const{noShowData:c}=U("noShowData");let u=U("amLabels");function g(D){s.commit("appointment/resetAppointment",{providerId:s.getters["auth/getProfile"].id}),s.commit("customerInfo/setCustomers",[]),s.commit("customerInfo/setCustomersIds",[]),a("editLinkedAppointment",D)}let p=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerPhone.visibility:!0),f=B(()=>l.value.cabinetType==="employee"?o.value.appointments.options.customerEmail.visibility:!0),b=U("amColors"),w=B(()=>({"--am-c-linked-bgr-op05":Q(b.value.colorMainText,.05)}));return Ze(()=>{s.getters["appointment/getBookings"].filter(D=>D.status!=="canceled"&&D.status!=="rejected").length<2&&(r.value=0)}),(D,v)=>{const P=Cs,S=ys;return x(),Y(S,{modelValue:t(r),"onUpdate:modelValue":v[0]||(v[0]=A=>Ae(r)?r.value=A:r=A),class:"am-capai-collapse am-capai-linked",accordion:"",style:Ce(t(w))},{default:I(()=>[(x(!0),F(ne,null,ve(t(s).getters["appointment/getBookings"],(A,d)=>(x(),F(ne,{key:d},[i(A).length?(x(),Y(P,{key:0,name:d,class:"am-capai-collapse__item"},{title:I(()=>[m("div",{class:j(["am-capai-customer__name",[{"am-pb-16":!(A.customer.email&&t(f)||A.customer.phone&&t(p))},t(c)(A.customer.noShowCount).class]])},[t(c)(A.customer.noShowCount).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(c)(A.customer.noShowCount).icon}`)},null,2)):N("",!0),ue(" "+k(A.customer.firstName+" "+A.customer.lastName),1)],2)]),default:I(()=>[A.customer.email&&t(f)||A.customer.phone&&t(p)?(x(),F("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(e).responsiveClass])},[A.customer.email&&t(f)?(x(),F("div",{key:0,class:j(["am-capai-customer__data",t(e).responsiveClass])},[Y8,m("a",{href:`mailto:${A.customer.email}`},k(A.customer.email),9,W8)],2)):N("",!0),A.customer.phone&&t(p)?(x(),F("div",{key:1,class:j(["am-capai-customer__data",t(e).responsiveClass])},[H8,m("a",{href:`tel:${A.customer.phone}`},k(A.customer.phone),9,Z8)],2)):N("",!0)],2)):N("",!0),m("div",G8,[(x(!0),F(ne,null,ve(i(A),(_,y)=>(x(),F("div",{key:A.id+"-"+y,class:j(["am-capai-linked__list-item",t(e).responsiveClass])},[m("div",J8,k(y+1),1),m("div",X8,[Q8,ue(" "+k(t(s0)(_.bookingStart)),1)]),m("div",K8,[$(Fe,{category:"primary",size:"small",onClick:E=>g(_)},{default:I(()=>[ue(k(t(u).edit),1)]),_:2},1032,["onClick"])])],2))),128))])]),_:2},1032,["name"])):N("",!0)],64))),128))]),_:1},8,["modelValue","style"])}}},Rs=tt(window.wpAmeliaLabels);function Di(n){if(n.gateway==="onSite")return Rs.on_site;if(n.gateway==="wc")return n.gatewayTitle;if(n.gateway)return n.gateway.charAt(0).toUpperCase()+n.gateway.slice(1)}function oo(n){switch(n){case"paid":return Rs.paid;case"pending":return Rs.pending;case"partiallyPaid":return Rs.partially_paid;case"refunded":return Rs.refunded}}function ds(n,a){switch(n){case"paid":return{icon:"am-icon-checkmark-circle",color:a.colorSuccess};case"pending":return{icon:"am-icon-refresh",color:a.colorWarning};case"partiallyPaid":return{icon:"am-icon-prepaid",color:a.colorPrimary};case"refunded":return{icon:"am-icon-refund",color:a.colorError}}}const th={class:"am-capai-pay__heading-status"},ah={class:"am-capai-pay__heading-status__text"},sh=m("span",{class:"am-icon-email"},null,-1),lh=["href"],nh=m("span",{class:"am-icon-phone"},null,-1),oh=["href"],rh={class:"am-capai-pay__row-label"},ih={class:"am-capai-pay__row-value"},ch={class:"am-capai-pay__row-label"},xh={class:"am-capai-pay__row-value"},uh={class:"am-capai-pay__row-label"},dh={class:"am-capai-pay__row-value"},mh={key:0,class:"am-divider"},ph={class:"am-capai-pay__row-label"},fh={class:"am-capai-pay__row-label"},gh={class:"am-capai-pay__row-label"},hh={class:"am-capai-pay__row-label"},vh={class:"am-capai-pay__row-label"},Eh={class:"am-capai-pay__row-label"},_h={class:"am-capai-pay__row-label"},Ch={class:"am-capai-pay__row-label"},yh={class:"am-capai-pay__row-label"},bh={class:"am-capai-pay__row-label"},Bh={class:"am-capai-pay__row-label"},Ah={props:{responsiveClass:{type:String,default:""},savedAppointment:{type:Object,default:()=>{}}},setup(n){const a=n;let e=Ne();const s=U("shortcodeData");let l=U("amCustomize"),o=U("pageWidth"),r=U("amLabels"),i=B(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerPhone.visibility:!0),c=B(()=>s.value.cabinetType==="employee"?l.value.appointments.options.customerEmail.visibility:!0),u=M(null),g=B(()=>e.getters["appointment/getEmployeeService"]),p=B(()=>e.getters["appointment/getBookings"].filter(v=>"id"in v&&v.id&&v.status!=="canceled"&&v.status!=="rejected")),f=B(()=>{let v=[];return p.value.forEach((P,S)=>{let A=l0(e.getters["appointment/getAppointmentData"],a.savedAppointment,P,g.value);v.push(go(e,{price:A?n0(g.value,P.persons,P.duration):P.price,persons:P.persons,aggregatedPrice:P.aggregatedPrice,extras:P.extras.filter(d=>"id"in d&&d.id),serviceId:e.getters["appointment/getServiceId"],tax:P.tax,coupon:P.coupon,wcTax:P.payments.filter(d=>d.wcOrderId&&d.wcItemTaxValue).reduce((d,_)=>d+_.wcItemTaxValue,0)},!1)),v[S].deposit=P.payments.length&&(P.payments[0].status==="paid"||P.payments[0].status==="partiallyPaid")?P.payments[0].amount:0,v[S].paid=P.payments.filter(d=>d.status==="paid"||d.status==="partiallyPaid").reduce((d,_)=>d+_.amount,0),v[S].refunded=P.payments.filter(d=>d.status==="refunded").reduce((d,_)=>d+_.amount,0),v[S].status=P.payments.reduce((d,_)=>d+_.amount,0),P.payments.filter(d=>d.status!=="refunded").length===0?v[S].status="refunded":v[S].paid-(v[S].total-v[S].discount+v[S].tax+v[S].wcTax)===0?v[S].status="paid":v[S].paid?v[S].status="partiallyPaid":v[S].status="pending"}),v});const{noShowData:b}=U("noShowData");let w=U("amColors"),D=B(()=>({"--am-c-pay-text-op03":Q(w.value.colorMainText,.03)}));return Ze(()=>{e.getters["appointment/getBookings"].filter(v=>v.status!=="canceled"&&v.status!=="rejected").length<2&&(u.value=0)}),(v,P)=>{const S=Cs,A=ys;return x(),Y(A,{modelValue:t(u),"onUpdate:modelValue":P[0]||(P[0]=d=>Ae(u)?u.value=d:u=d),class:"am-capai-collapse am-capai-pay",accordion:"",style:Ce(t(D))},{default:I(()=>[(x(!0),F(ne,null,ve(t(p),(d,_)=>(x(),Y(S,{key:_,name:_,class:"am-capai-collapse__item"},{title:I(()=>[m("div",{class:j(["am-capai-pay__heading",{"am-pb-16":!(d.customer.email&&t(c)||d.customer.phone&&t(i))}])},[m("div",{class:j(["am-capai-customer__name",t(b)(d.customer.noShowCount).class])},[t(b)(d.customer.noShowCount).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(b)(d.customer.noShowCount).icon}`)},null,2)):N("",!0),ue(" "+k(d.customer.firstName+" "+d.customer.lastName),1)],2),m("div",th,[m("span",{class:j(t(ds)(t(f)[_].status,t(w)).icon),style:Ce({color:t(ds)(t(f)[_].status,t(w)).color})},null,6),m("div",ah,k(t(oo)(t(f)[_].status)),1)])],2)]),default:I(()=>[d.customer.email&&t(c)||d.customer.phone&&t(i)?(x(),F("div",{key:0,class:j(["am-capai-customer__data-wrapper",t(a).responsiveClass])},[d.customer.email&&t(c)?(x(),F("div",{key:0,class:j(["am-capai-customer__data",t(a).responsiveClass])},[sh,m("a",{href:`mailto:${d.customer.email}`},k(d.customer.email),9,lh)],2)):N("",!0),d.customer.phone&&t(i)?(x(),F("div",{key:1,class:j(["am-capai-customer__data",t(a).responsiveClass])},[nh,m("a",{href:`tel:${d.customer.phone}`},k(d.customer.phone),9,oh)],2)):N("",!0)],2)):N("",!0),m("div",{class:j(["am-capai-pay__content",t(a).responsiveClass])},[(x(!0),F(ne,null,ve(d.payments,(y,E)=>(x(),F(ne,{key:E},[m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",rh,k(t(r).date),1),m("div",ih,k(t(it)(y.dateTime.split(" ")[0])),1)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",ch,k(t(r).payment_method),1),m("div",xh,k(t(Di)(y)),1)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",uh,k(t(r).status),1),m("div",dh,[m("span",{class:j(t(ds)(y.status,t(w)).icon),style:Ce({color:t(ds)(y.status,t(w)).color})},null,6),ue(" "+k(t(oo)(y.status)),1)])],2)],64))),128)),t(o)>480?(x(),F("div",mh)):N("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",ph,k(t(r).price),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].bookable)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",fh,k(t(r).extras),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].total-t(f)[_].bookable)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",gh,k(t(r).subtotal),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].total)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",hh,k(t(r).discount_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].discount)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",vh,k(t(r).tax),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].tax)),3)],2),t(f)[_].wcTax?(x(),F("div",{key:1,class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Eh,k(t(r).tax)+" (Woo) ",1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].wcTax)),3)],2)):N("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",_h,k(t(r).paid_deposit),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Ch,k(t(r).paid_remaining_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].paid?t(f)[_].paid-t(f)[_].deposit:0)),3)],2),t(f)[_].refunded?(x(),F("div",{key:2,class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",yh,k(t(r).refunded),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].refunded)),3)],2)):N("",!0),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",bh,k(t(r).due),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].paid-(t(f)[_].total-t(f)[_].discount+t(f)[_].tax+t(f)[_].wcTax))),3)],2),m("div",{class:j(["am-capai-pay__row",t(a).responsiveClass])},[m("div",Bh,k(t(r).total),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":t(o)>480}])},k(t(nt)(t(f)[_].total-t(f)[_].discount+t(f)[_].tax+t(f)[_].wcTax)),3)],2)],2)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue","style"])}}};const Fh={class:"am-capai__footer"},Dh={name:"CabinetAppointment"},kh=Object.assign(Dh,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},linkedAppointments:{type:Array,default:()=>[]}},emits:["close","save","editLinkedAppointment"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("amLabels");U("settings");let o=U("licence");const r=M("details"),i=M(null);let c=B(()=>s.getters["appointment/getEmployeeService"]),u=M(null),g=M(""),p=B(()=>s.getters["appointment/getBookings"].length?s.getters["appointment/getBookings"].filter(ae=>ae.status==="approved"||ae.status==="pending").map(ae=>ae.persons).reduce((ae,O)=>ae+O,0):0),f=M(null),b=B(()=>s.getters["appointment/getCustomFields"]),w=M(null);ze("recurringList",w);function D(ae,O){let W=ye(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD"),J={};return s.getters["appointment/getStartDate"]&&s.getters["appointment/getStartTime"]&&!O&&(J[W]={},J[W][s.getters["appointment/getStartTime"]]=!0),w.value&&w.value.forEach((re,me)=>{if(re.time&&(ae!==null?me!==ae:!0)){let oe=ye(re.date).format("YYYY-MM-DD");oe in J||(J[oe]={}),J[oe][re.time]=!0}}),J}function v(ae,O,W){if(O.date===null)return[];let J=ye(O.date).format("YYYY-MM-DD"),re=D(ae,W),me=O.time?Ut(O.time):null;if(J in re){let oe=O.times.filter(_e=>!Object.keys(re[J]).includes(_e)),De=[];return oe.forEach(_e=>{let Me=Ut(_e),Ee=!0;Object.keys(re[J]).map(be=>Ut(be)).sort((be,Pe)=>be-Pe).forEach(be=>{Me<be?Me+c.value.duration+c.value.timeAfter>be&&(Ee=!1):be+c.value.duration+c.value.timeAfter>Me&&(Ee=!1)}),Ee&&(me!==null&&Me>me&&De.indexOf(O.time)===-1&&De.push(O.time),De.push(_e))}),P(J,re,De)}return P(J,re,O.times)}function P(ae,O,W){let J=[],re=!1,me=ye(ae,"YYYY-MM-DD").subtract(1,"days").format("YYYY-MM-DD");if(me in O){let De=Object.keys(O[me]).map(Me=>Ut(Me)).sort((Me,Ee)=>Me-Ee),_e=De[De.length-1]+c.value.duration+c.value.timeAfter;_e>86400&&(W.forEach(Me=>{_e-86400<=Ut(Me)&&J.push(Me)}),W=J,re=!0)}let oe=ye(ae,"YYYY-MM-DD").add(1,"days").format("YYYY-MM-DD");if(oe in O){let De=Object.keys(O[oe]).map(_e=>Ut(_e)).sort((_e,Me)=>_e-Me);De[0]-c.value.duration-c.value.timeAfter<0&&(W.forEach(_e=>{let Me=Ut(_e);(Me+c.value.duration+c.value.timeAfter<=86400||De[0]>=Me+c.value.duration+c.value.timeAfter-86400)&&J.push(_e)}),re=!0)}return re?J:W}let S=M({});ze("slotsPricing",S);let A=M(""),d=M({}),_=M([]);function y(ae){_.value=Object.keys(d.value[ye(ae).format("YYYY-MM-DD")])}function E(ae){let O=d.value[ye(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")][ae][0].l;O&&s.commit("appointment/setLocationId",O)}function C(ae,O,W,J){let re=ye(ae).format("YYYY-MM-DD");return typeof J>"u"&&!(re in d.value&&(O?v(null,{date:ae,times:Object.keys(d.value[re])},W).length:!0))}let L=M(!1),V=B(()=>{let ae={};return s.getters["appointment/getBookings"].filter(O=>O.status==="pending"||O.status==="approved").forEach(O=>{O.extras.forEach(W=>{W.quantity&&!(W.extraId in ae)&&(ae[W.extraId]={id:W.extraId,quantity:W.quantity})})}),{serviceId:s.getters["appointment/getServiceId"],serviceDuration:Math.max.apply(Math,s.getters["appointment/getBookings"].filter(O=>O.status!=="canceled"&&O.status!=="rejected").map(O=>O.duration)),providerIds:s.getters["appointment/getProviderId"]?[s.getters["appointment/getProviderId"]]:[],locationId:s.getters["appointment/getLocationId"],extras:JSON.stringify(Object.values(ae)),persons:p.value?p.value:1,excludeAppointmentId:s.getters["appointment/getId"],group:s.getters["appointment/getId"]?0:1,timeZone:s.getters["cabinet/getTimeZone"],monthsLoad:1,page:"appointments",structured:!0}});function T(ae=!1){s.getters["appointment/getStartDate"]&&q(s.getters["appointment/getStartDate"],null,!1,ae)}function q(ae,O=null,W=!1,J=!1){s.getters["appointment/getServiceId"]&&(L.value=!0,Tr(Object.assign({startDateTime:ae?ye(ae).startOf("month").subtract(6,"days").format("YYYY-MM-DD"):null,endDateTime:ae?ye(ae).endOf("month").add(6,"days").format("YYYY-MM-DD"):null},V.value),{},(re,me,oe,De)=>{if(A.value=De,s.getters["appointment/getStartDate"]&&O===null&&!W){let Me=ye(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD");Me in re?(s.getters["appointment/getStartTime"]&&!(s.getters["appointment/getStartTime"]in re[Me])&&!J&&s.commit("appointment/setStartTime",null),_.value=Object.keys(re[Me]),d.value=re):J||(d.value={},s.commit("appointment/setStartTime",null),s.commit("appointment/setStartDate",null),s.commit("appointment/setTargetedDate",null),_.value=[])}else d.value=re;let _e=!o.isLite&&!o.isStarter&&!o.isBasic?o0(s,re,s.getters["appointment/getServiceId"]):null;S.value=_e?_e.dates:{},L.value=!1},()=>{}))}function H(){d.value={},A.value=null,w.value=null}function z(ae){if(ae){if(ae===1)return{class:"am-no-show-1",icon:"no-show-1"};if(ae===2)return{class:"am-no-show-2",icon:"no-show-2"};if(ae>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:z});let X=M(!1),K=M("");function te(){X.value=!1,K.value=""}let le=M(!1),ee=M(null);function xe(){const ae=new Promise(J=>{f.value?.customFieldsFormRef?f.value.customFieldsFormRef.validate(re=>{re?J(!0):(r.value="customFields",J(!1))}):J(!0)}),O=new Promise(J=>{u.value?.customersFormRef?u.value.customersFormRef.validate(re=>{!re||!s.getters["customerInfo/getCustomersIds"].length?(r.value="customers",J(!1)):J(!0)}):J(!0)}),W=new Promise(J=>{i.value?.detailsFormRef?i.value.detailsFormRef.validate(re=>{!re||!s.getters["appointment/getServiceId"]||!s.getters["appointment/getStartDate"]||!s.getters["appointment/getStartTime"]?(r.value="details",J(!1)):J(!0)}):J(!0)});Promise.all([ae,O,W]).then(J=>{if(!J.includes(!1)){if(g.value=s.getters["appointment/getBookings"].filter(re=>re.status!=="canceled"&&re.status!=="rejected").map(re=>re.persons).reduce((re,me)=>re+me,0)>c.value.maxCapacity?l.value.select_max_customer_count_warning+" "+c.value.maxCapacity:"",g.value){r.value="customers";return}se()}})}function se(){let ae=[];s.getters["appointment/getBookings"].forEach(re=>{let me={};Object.keys(re.customFields).forEach(oe=>{me[oe]=Object.assign({},re.customFields[oe],{value:re.customFields[oe].type==="datepicker"?re.customFields[oe].value?ye(re.customFields[oe].value).format("YYYY-MM-DD"):null:re.customFields[oe].value})}),ae.push(Object.assign({},re,{customerId:re.customer.id,extras:re.extras.filter(oe=>oe.quantity),customFields:me}))});let O=[];if(ee.value){let re=ee.value.bookings.map(oe=>"id"in oe&&oe.id),me=ae.map(oe=>"id"in oe&&oe.id);O=ee.value.bookings.filter(oe=>re.filter(De=>!me.includes(De)).includes(oe.id)).map(oe=>new Object({id:oe.id}))}let W=s.getters["cabinet/getTimeZone"],J={serviceId:s.getters["appointment/getServiceId"],providerId:s.getters["appointment/getProviderId"],locationId:s.getters["appointment/getLocationId"],bookings:ae,removedBookings:O,bookingStart:ye(s.getters["appointment/getStartDate"]).format("YYYY-MM-DD")+" "+s.getters["appointment/getStartTime"],utc:W==="UTC",timeZone:W==="UTC"?null:W,notifyParticipants:s.getters["appointment/getNotifyParticipants"]?1:0,internalNotes:s.getters["appointment/getInternalNotes"],id:s.getters["appointment/getId"],payment:{gateway:"onSite"},recurring:w.value?w.value.map(re=>new Object({bookingStart:ye(re.date).format("YYYY-MM-DD")+" "+re.time,providerId:re.slot[0][0],locationId:re.slot[0][1]})):[],lessonSpace:s.getters["appointment/getLessonSpace"]?"https://www.thelessonspace.com/space/"+s.getters["appointment/getLessonSpace"]:null,createPaymentLinks:s.getters["appointment/getCreatePaymentLinks"]?1:0};le.value=!0,$e.post("/appointments"+(s.getters["appointment/getId"]?"/"+s.getters["appointment/getId"]:""),J,Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(re=>{re.data.data.appointment.id&&ge("save")}).catch(re=>{K.value=l.value.error,"response"in re&&"data"in re.response&&"data"in re.response.data&&("timeSlotUnavailable"in re.response.data.data&&re.response.data.data.timeSlotUnavailable===!0&&(K.value=l.value.time_slot_unavailable,r.value="details"),"customerAlreadyBooked"in re.response.data.data&&re.response.data.data.customerAlreadyBooked===!0&&(K.value=l.value.customer_already_booked,r.value="customers")),X.value=!0}).finally(()=>{le.value=!1})}function ge(ae){s.commit("appointment/setActive",!1),a(ae)}Ze(()=>{if(s.commit("appointment/setActive",!0),s.getters["appointment/getId"]){ee.value=JSON.parse(JSON.stringify(s.getters["appointment/getAppointmentData"]));let ae=s.getters["entities/filteredLocations"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null}),O=s.getters["entities/filteredServices"]({categoryId:null,serviceId:null,providerId:s.getters["appointment/getProviderId"],locationId:null});s.getters["appointment/getId"]&&s.getters["appointment/getServiceId"]&&O.map(J=>J.id).indexOf(s.getters["appointment/getServiceId"])===-1||s.getters["appointment/getId"]&&s.getters["appointment/getLocationId"]&&ae.map(J=>J.id).indexOf(s.getters["appointment/getLocationId"])===-1||T(!0)}s.getters["appointment/getServiceId"]&&(s.dispatch("appointment/updateEmployeeService",s.getters["appointment/getServiceId"]),s.dispatch("appointment/addAllCustomFieldsFormRules",{label:l.value.required_field}))});let G=U("amColors"),ie=B(()=>({"--am-c-capai-text":G.value.colorMainText,"--am-c-capai-text-op10":Q(G.value.colorMainText,.1),"--am-c-capai-primary":G.value.colorPrimary,"--am-c-cust-no1":G.value.colorMainText,"--am-c-cust-no1-bgr":Q(G.value.colorMainText,.1),"--am-c-cust-no2":G.value.colorWarning,"--am-c-cust-no2-bgr":Q(G.value.colorWarning,.1),"--am-c-cust-no3":G.value.colorError,"--am-c-cust-no3-bgr":Q(G.value.colorError,.1),"--am-c-cust-link":Q(G.value.colorMainText,.5),"--am-c-cust-text":G.value.colorMainText}));return(ae,O)=>{const W=_a,J=Ca;return t(le)?(x(),Y(Zt,{key:1})):(x(),F("div",{key:0,class:j(["am-capai",[{"am-no-border":!0},t(e).responsiveClass]]),style:Ce(t(ie))},[t(X)?(x(),Y(bt,{key:0,class:"am-asi__top-message am-asi__top-message-error",type:"error","show-icon":!0,"show-border":!0,"close-after":5e3,onClose:te,onTriggerClose:te},{title:I(()=>[ue(k(t(K)),1)]),_:1})):N("",!0),$(J,{modelValue:r.value,"onUpdate:modelValue":O[1]||(O[1]=re=>r.value=re)},{default:I(()=>[$(W,{label:t(l).details,name:"details"},{default:I(()=>[$(I9,{ref_key:"appointmentDetailsRef",ref:i,"slots-props":t(V),"slots-loading":t(L),"free-slots":t(d),"is-disabled-date":C,times:t(_),"get-free-times":v,onRemoveSlots:H,onFetchSlots:q,onSelectDate:y,onSelectTime:E},null,8,["slots-props","slots-loading","free-slots","times"])]),_:1},8,["label"]),t(c)?(x(),Y(W,{key:0,label:t(l).customers,name:"customers"},{default:I(()=>[$(e8,{ref_key:"appointmentCustomersRef",ref:u,"responsive-class":t(e).responsiveClass,"capacity-warning":t(g),"appointment-capacity":t(p),"saved-appointment":t(ee),onChangedSlotCondition:T},null,8,["responsive-class","capacity-warning","appointment-capacity","saved-appointment"])]),_:1},8,["label"])):N("",!0),t(c)&&t(c).extras.length&&t(s).getters["appointment/getBookings"].length?(x(),Y(W,{key:1,label:t(l).extras,name:"extras"},{default:I(()=>[$(g8,{"responsive-class":t(e).responsiveClass,onChangedSlotCondition:T},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(c)&&t(b).length&&t(s).getters["appointment/getBookings"].length?(x(),Y(W,{key:2,label:t(l).custom_fields,name:"customFields"},{default:I(()=>[$(n8,{ref_key:"appointmentCustomFieldsRef",ref:f,"responsive-class":t(e).responsiveClass},null,8,["responsive-class"])]),_:1},8,["label"])):N("",!0),t(s).getters["appointment/getId"]&&n.linkedAppointments.length?(x(),Y(W,{key:3,label:t(l).linked,name:"linked"},{default:I(()=>[$(eh,{"linked-appointments":n.linkedAppointments,"responsive-class":t(e).responsiveClass,onEditLinkedAppointment:O[0]||(O[0]=re=>t(a)("editLinkedAppointment",re))},null,8,["linked-appointments","responsive-class"])]),_:1},8,["label"])):N("",!0),t(c)&&t(c).recurringCycle!=="disabled"&&t(s).getters["appointment/getStartDate"]&&t(s).getters["appointment/getStartTime"]&&!t(s).getters["appointment/getId"]&&!!t(s).getters["customerInfo/getCustomersIds"].length?(x(),Y(W,{key:4,label:t(l).recurring,name:"recurring"},{default:I(()=>[$(j8,{"free-slots":t(d),"slots-props":t(V),"maximum-booking-start-date":t(A),"get-free-times":v,"get-selected-dates-times":D,"is-disabled-date":C,"slots-loading":t(L),"responsive-class":t(e).responsiveClass,onFetchSlots:q},null,8,["free-slots","slots-props","maximum-booking-start-date","slots-loading","responsive-class"])]),_:1},8,["label"])):N("",!0),t(s).getters["appointment/getId"]?(x(),Y(W,{key:5,label:t(l).payment,name:"payment"},{default:I(()=>[$(Ah,{"responsive-class":t(e).responsiveClass,"saved-appointment":t(ee)},null,8,["responsive-class","saved-appointment"])]),_:1},8,["label"])):N("",!0)]),_:1},8,["modelValue"]),m("div",Fh,[$(Fe,{category:"secondary",size:"default",type:"plain",onClick:O[2]||(O[2]=()=>{t(a)("close")})},{default:I(()=>[ue(k(t(l).cancel),1)]),_:1}),$(Fe,{size:"default",onClick:xe},{default:I(()=>[ue(k(t(l).save),1)]),_:1})])],6))}}});const wh={key:0,class:"el-skeleton-item-wrapper-title"},Ph={name:"AuthSkeleton"},Zl=Object.assign(Ph,{props:{centerFirst:{type:Boolean,default:!1},count:{type:Number,default:3},mainClass:{type:String,default:""}},setup(n){const a=n;return(e,s)=>{const l=Nl,o=Ol;return x(),Y(o,{animated:"",class:j(["am-asi-el-skeleton",[{"am-asi":t(a).mainClass}]])},{template:I(()=>[t(a).centerFirst?(x(),F("div",wh,[$(l,{variant:"rect"})])):N("",!0),(x(!0),F(ne,null,ve(new Array(t(a).count),r=>(x(),F("div",{key:r,class:"el-skeleton-item-wrapper"},[$(l,{variant:"rect"})]))),128))]),_:1},8,["class"])}}});const Th={key:0,class:"am-icon-checkmark-circle-full"},Lh={key:1,class:"am-icon-clearable"},Sh={key:2,class:"am-cap__actions"},Ih={name:"CabinetAppointments",key:"appointments"},$h=Object.assign(Ih,{props:{loadBookingsCounter:{type:Number,default:0},appointments:{type:Object,default:null}},setup(n){const a=n;let e=Ne();const s=U("settings");let l=U("amCustomize");const o=U("shortcodeData"),r=U("labels"),i=U("localLanguage");let c=B(()=>s.general.usedLanguages.includes(i.value)),u=B(()=>{let le=tt({...r}),ee=l.value.appointments.translations;return ee&&Object.keys(ee).forEach(xe=>{ee[xe][i.value]&&c.value?le[xe]=ee[xe][i.value]:ee[xe].default&&(le[xe]=ee[xe].default)}),le});ze("amLabels",u);const g=M(null),{width:p}=Za(g);let f=B(()=>ot(p.value));ze("pageWidth",p);let b=M(null),w=M(!1),D=M("success"),v=M("");function P(){w.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"appointment"})}let S=U("cabinetType");e.commit("cabinetFilters/setDates",ho(S.value));let A=B(()=>e.getters["cabinet/getAppointmentsLoading"]),d=B(()=>e.getters["entities/getReady"]),_=M(null),y=M(0),E=M(1);function C(le){E.value=le,L(null,le)}function L(le=null,ee=1){e.commit("cabinet/setAppointmentsLoading",!0);let xe=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getAppointmentsFilters"])),se=e.getters["cabinet/getTimeZone"];xe.dates=xe.dates.map(G=>ye(G).format("YYYY-MM-DD")),xe.timeZone=se,xe.source="cabinet-"+S.value,xe.page=ee,e.commit("auth/setLoadingAppointmentsCounter",e.getters["auth/getLoadingAppointmentsCounter"]+1);let ge=e.getters["auth/getLoadingAppointmentsCounter"];$e.get("/appointments",Object.assign(Ue(e),{params:Js(xe)})).then(G=>{ge===e.getters["auth/getLoadingAppointmentsCounter"]&&(y.value=G.data.data.total,_.value=hi(G.data.data.appointments,se,S.value==="provider"))}).catch(G=>{G?.response?.data?.data?.reauthorize!==void 0&&G.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(G)}).finally(()=>{ge===e.getters["auth/getLoadingAppointmentsCounter"]&&(e.commit("cabinet/setAppointmentsLoading",!1),le&&"message"in le&&(w.value=!0,v.value=le.message,D.value="success",g.value&&b.value&&setTimeout(function(){gt(g.value,b.value.$el,0,300)},500)))})}let V=M([]);function T(le){e.commit("cabinet/setAppointmentsLoading",!0),$e.get("/appointments/"+le.id,Object.assign({params:{source:"cabinet-"+S.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(ee=>{let xe=ee.data.data.appointment.bookingStart.split(" "),se=e.getters["entities/getService"](ee.data.data.appointment.serviceId),ge=[];ee.data.data.appointment.bookings.forEach(G=>{let ie=[];se.extras.sort((O,W)=>O.position-W.position).forEach(O=>{ie.push({extraId:O.id,quantity:0});let W=G.extras.find(J=>J.extraId===O.id);typeof W<"u"&&(ie[ie.length-1]=W)});let ae=G.customFields?JSON.parse(G.customFields):{};Object.keys(ae).forEach(O=>{ae[O]=Object.assign({},ae[O],{value:ae[O].type==="datepicker"?ae[O].value?ye(ae[O].value).toDate():"":ae[O].value})}),ge.push({id:G.id,customer:le.bookings.find(O=>O.id===G.id).customer,persons:G.persons,status:G.status,duration:G.duration?G.duration.toString():null,extras:ie,customFields:ae,payments:G.payments,price:G.price,aggregatedPrice:G.aggregatedPrice,tax:G.tax,coupon:G.coupon})}),e.commit("appointment/setAppointment",{id:ee.data.data.appointment.id,categoryId:se.categoryId,serviceId:ee.data.data.appointment.serviceId,providerId:ee.data.data.appointment.providerId,locationId:ee.data.data.appointment.locationId,internalNotes:ee.data.data.appointment.internalNotes,lessonSpace:ee.data.data.appointment.lessonSpace!==null?ee.data.data.appointment.lessonSpace.split("https://www.thelessonspace.com/space/")[1]:null,startDate:ye(xe[0]).toDate(),startTime:xe[1].substring(0,5),bookings:ge,notifyParticipants:!!ee.data.data.appointment.notifyParticipants,createPaymentLinks:!!ee.data.data.appointment.createPaymentLinks}),V.value=ee.data.data.recurring,q.value=!0}).catch(ee=>{console.log(ee)}).finally(()=>{e.commit("cabinet/setAppointmentsLoading",!1)})}let q=M(!1);function H(){w.value=!0,v.value=u.value.appointment_saved,D.value="success",g.value&&b.value&&setTimeout(function(){gt(g.value,b.value.$el,0,300)},500),L(),K()}function z(le,ee){v.value=le,D.value=ee,w.value=!0}function X(){te(),q.value=!0}function K(){q.value=!1,te()}function te(){e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])}return xt(()=>a.loadBookingsCounter,()=>{L()}),Ze(()=>{L()}),(le,ee)=>(x(),F("div",{ref_key:"pageContainer",ref:g,class:j(["am-cap am-capa-main",{"am-capai-main":t(q)}])},[m("div",{class:j(["am-capa-main__inner",t(f)])},[t(w)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:b,type:t(D),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:P,onTriggerClose:P},{title:I(()=>[t(D)==="success"?(x(),F("span",Th)):N("",!0),t(D)==="error"?(x(),F("span",Lh)):N("",!0),ue(" "+k(t(v)),1)]),_:1},8,["type"])):N("",!0),!t(q)&&t(d)?(x(),Y(No,{key:1,"step-key":"appointments","responsive-class":t(f),empty:!1,onAddAppointment:X,onChangeFilters:L},null,8,["responsive-class"])):N("",!0),t(o).cabinetType==="employee"&&t(s).roles.allowWriteAppointments&&!t(q)&&t(d)?(x(),F("div",Sh,[$(Fe,{prefix:"plus",size:"small",category:"primary",type:t(l).appointments.options.newAppBtn.buttonType,onClick:X},{default:I(()=>[m("span",null,k(t(u).new_appointment),1)]),_:1},8,["type"])])):N("",!0),!t(A)&&t(d)?(x(),F(ne,{key:3},[!t(q)&&t(_)&&Object.keys(t(_)).length>0?(x(),Y(bi,{key:0,"grouped-appointments":t(_),"page-width":t(p),"responsive-class":t(f),"step-key":"appointments",onCanceled:L,onBooked:L,onEditAppointment:T,onStatusChange:z},null,8,["grouped-appointments","page-width","responsive-class"])):t(q)?N("",!0):(x(),Y(Ta,{key:1,heading:t(u).no_app_found,text:t(u).have_no_app},null,8,["heading","text"])),!t(q)&&t(_)&&Object.keys(t(_)).length>0&&t(y)>t(s).general.itemsPerPageBackEnd?(x(),Y(wl,{key:2,"page-size":t(s).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:t(y),"current-page":t(E),onCurrentChange:C},null,8,["page-size","total","current-page"])):N("",!0),t(q)?(x(),Y(kh,{key:3,"page-width":t(p),"responsive-class":t(f),"linked-appointments":t(V),onEditLinkedAppointment:T,onClose:K,onSave:H},null,8,["page-width","responsive-class","linked-appointments"])):N("",!0)],64)):(x(),Y(Zl,{key:4}))],2)],2))}});var ki={exports:{}};(function(n,a){(function(s,l){n.exports=l()})(typeof self<"u"?self:ha,function(){return function(e){var s={};function l(o){if(s[o])return s[o].exports;var r=s[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,l),r.l=!0,r.exports}return l.m=e,l.c=s,l.d=function(o,r,i){l.o(o,r)||Object.defineProperty(o,r,{configurable:!1,enumerable:!0,get:i})},l.n=function(o){var r=o&&o.__esModule?function(){return o.default}:function(){return o};return l.d(r,"a",r),r},l.o=function(o,r){return Object.prototype.hasOwnProperty.call(o,r)},l.p="",l(l.s=3)}([function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function r(i,c){this.width=c,this.height=i.length/c,this.data=i}return r.createEmpty=function(i,c){return new r(new Uint8ClampedArray(i*c),i)},r.prototype.get=function(i,c){return i<0||i>=this.width||c<0||c>=this.height?!1:!!this.data[c*this.width+i]},r.prototype.set=function(i,c,u){this.data[c*this.width+i]=u?1:0},r.prototype.setRegion=function(i,c,u,g,p){for(var f=c;f<c+g;f++)for(var b=i;b<i+u;b++)this.set(b,f,!!p)},r}();s.BitMatrix=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(2);function r(c,u){return c^u}s.addOrSubtractGF=r;var i=function(){function c(u,g,p){this.primitive=u,this.size=g,this.generatorBase=p,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var f=1,b=0;b<this.size;b++)this.expTable[b]=f,f=f*2,f>=this.size&&(f=(f^this.primitive)&this.size-1);for(var b=0;b<this.size-1;b++)this.logTable[this.expTable[b]]=b;this.zero=new o.default(this,Uint8ClampedArray.from([0])),this.one=new o.default(this,Uint8ClampedArray.from([1]))}return c.prototype.multiply=function(u,g){return u===0||g===0?0:this.expTable[(this.logTable[u]+this.logTable[g])%(this.size-1)]},c.prototype.inverse=function(u){if(u===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[u]-1]},c.prototype.buildMonomial=function(u,g){if(u<0)throw new Error("Invalid monomial degree less than 0");if(g===0)return this.zero;var p=new Uint8ClampedArray(u+1);return p[0]=g,new o.default(this,p)},c.prototype.log=function(u){if(u===0)throw new Error("Can't take log(0)");return this.logTable[u]},c.prototype.exp=function(u){return this.expTable[u]},c}();s.default=i},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),r=function(){function i(c,u){if(u.length===0)throw new Error("No coefficients.");this.field=c;var g=u.length;if(g>1&&u[0]===0){for(var p=1;p<g&&u[p]===0;)p++;if(p===g)this.coefficients=c.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(g-p);for(var f=0;f<this.coefficients.length;f++)this.coefficients[f]=u[p+f]}}else this.coefficients=u}return i.prototype.degree=function(){return this.coefficients.length-1},i.prototype.isZero=function(){return this.coefficients[0]===0},i.prototype.getCoefficient=function(c){return this.coefficients[this.coefficients.length-1-c]},i.prototype.addOrSubtract=function(c){var u;if(this.isZero())return c;if(c.isZero())return this;var g=this.coefficients,p=c.coefficients;g.length>p.length&&(u=[p,g],g=u[0],p=u[1]);for(var f=new Uint8ClampedArray(p.length),b=p.length-g.length,w=0;w<b;w++)f[w]=p[w];for(var w=b;w<p.length;w++)f[w]=o.addOrSubtractGF(g[w-b],p[w]);return new i(this.field,f)},i.prototype.multiply=function(c){if(c===0)return this.field.zero;if(c===1)return this;for(var u=this.coefficients.length,g=new Uint8ClampedArray(u),p=0;p<u;p++)g[p]=this.field.multiply(this.coefficients[p],c);return new i(this.field,g)},i.prototype.multiplyPoly=function(c){if(this.isZero()||c.isZero())return this.field.zero;for(var u=this.coefficients,g=u.length,p=c.coefficients,f=p.length,b=new Uint8ClampedArray(g+f-1),w=0;w<g;w++)for(var D=u[w],v=0;v<f;v++)b[w+v]=o.addOrSubtractGF(b[w+v],this.field.multiply(D,p[v]));return new i(this.field,b)},i.prototype.multiplyByMonomial=function(c,u){if(c<0)throw new Error("Invalid degree less than 0");if(u===0)return this.field.zero;for(var g=this.coefficients.length,p=new Uint8ClampedArray(g+c),f=0;f<g;f++)p[f]=this.field.multiply(this.coefficients[f],u);return new i(this.field,p)},i.prototype.evaluateAt=function(c){var u=0;if(c===0)return this.getCoefficient(0);var g=this.coefficients.length;if(c===1)return this.coefficients.forEach(function(f){u=o.addOrSubtractGF(u,f)}),u;u=this.coefficients[0];for(var p=1;p<g;p++)u=o.addOrSubtractGF(this.field.multiply(c,u),this.coefficients[p]);return u},i}();s.default=r},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(4),r=l(5),i=l(11),c=l(12);function u(f){var b=c.locate(f);if(!b)return null;for(var w=0,D=b;w<D.length;w++){var v=D[w],P=i.extract(f,v),S=r.decode(P.matrix);if(S)return{binaryData:S.bytes,data:S.text,chunks:S.chunks,version:S.version,location:{topRightCorner:P.mappingFunction(v.dimension,0),topLeftCorner:P.mappingFunction(0,0),bottomRightCorner:P.mappingFunction(v.dimension,v.dimension),bottomLeftCorner:P.mappingFunction(0,v.dimension),topRightFinderPattern:v.topRight,topLeftFinderPattern:v.topLeft,bottomLeftFinderPattern:v.bottomLeft,bottomRightAlignmentPattern:v.alignmentPattern}}}return null}var g={inversionAttempts:"attemptBoth"};function p(f,b,w,D){D===void 0&&(D={});var v=g;Object.keys(v||{}).forEach(function(E){v[E]=D[E]||v[E]});var P=v.inversionAttempts==="attemptBoth"||v.inversionAttempts==="invertFirst",S=v.inversionAttempts==="onlyInvert"||v.inversionAttempts==="invertFirst",A=o.binarize(f,b,w,P),d=A.binarized,_=A.inverted,y=u(S?_:d);return!y&&(v.inversionAttempts==="attemptBoth"||v.inversionAttempts==="invertFirst")&&(y=u(S?d:_)),y}p.default=p,s.default=p},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),r=8,i=24;function c(p,f,b){return p<f?f:p>b?b:p}var u=function(){function p(f,b){this.width=f,this.data=new Uint8ClampedArray(f*b)}return p.prototype.get=function(f,b){return this.data[b*this.width+f]},p.prototype.set=function(f,b,w){this.data[b*this.width+f]=w},p}();function g(p,f,b,w){if(p.length!==f*b*4)throw new Error("Malformed data passed to binarizer.");for(var D=new u(f,b),v=0;v<f;v++)for(var P=0;P<b;P++){var S=p[(P*f+v)*4+0],A=p[(P*f+v)*4+1],d=p[(P*f+v)*4+2];D.set(v,P,.2126*S+.7152*A+.0722*d)}for(var _=Math.ceil(f/r),y=Math.ceil(b/r),E=new u(_,y),C=0;C<y;C++)for(var L=0;L<_;L++){for(var V=0,T=1/0,q=0,P=0;P<r;P++)for(var v=0;v<r;v++){var H=D.get(L*r+v,C*r+P);V+=H,T=Math.min(T,H),q=Math.max(q,H)}var z=V/Math.pow(r,2);if(q-T<=i&&(z=T/2,C>0&&L>0)){var X=(E.get(L,C-1)+2*E.get(L-1,C)+E.get(L-1,C-1))/4;T<X&&(z=X)}E.set(L,C,z)}var K=o.BitMatrix.createEmpty(f,b),te=null;w&&(te=o.BitMatrix.createEmpty(f,b));for(var C=0;C<y;C++)for(var L=0;L<_;L++){for(var le=c(L,2,_-3),ee=c(C,2,y-3),V=0,xe=-2;xe<=2;xe++)for(var se=-2;se<=2;se++)V+=E.get(le+xe,ee+se);for(var ge=V/25,xe=0;xe<r;xe++)for(var se=0;se<r;se++){var v=L*r+xe,P=C*r+se,G=D.get(v,P);K.set(v,P,G<=ge),w&&te.set(v,P,!(G<=ge))}}return w?{binarized:K,inverted:te}:{binarized:K}}s.binarize=g},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0),r=l(6),i=l(9),c=l(10);function u(d,_){for(var y=d^_,E=0;y;)E++,y&=y-1;return E}function g(d,_){return _<<1|d}var p=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],f=[function(d){return(d.y+d.x)%2===0},function(d){return d.y%2===0},function(d){return d.x%3===0},function(d){return(d.y+d.x)%3===0},function(d){return(Math.floor(d.y/2)+Math.floor(d.x/3))%2===0},function(d){return d.x*d.y%2+d.x*d.y%3===0},function(d){return(d.y*d.x%2+d.y*d.x%3)%2===0},function(d){return((d.y+d.x)%2+d.y*d.x%3)%2===0}];function b(d){var _=17+4*d.versionNumber,y=o.BitMatrix.createEmpty(_,_);y.setRegion(0,0,9,9,!0),y.setRegion(_-8,0,8,9,!0),y.setRegion(0,_-8,9,8,!0);for(var E=0,C=d.alignmentPatternCenters;E<C.length;E++)for(var L=C[E],V=0,T=d.alignmentPatternCenters;V<T.length;V++){var q=T[V];L===6&&q===6||L===6&&q===_-7||L===_-7&&q===6||y.setRegion(L-2,q-2,5,5,!0)}return y.setRegion(6,9,1,_-17,!0),y.setRegion(9,6,_-17,1,!0),d.versionNumber>6&&(y.setRegion(_-11,0,3,6,!0),y.setRegion(0,_-11,6,3,!0)),y}function w(d,_,y){for(var E=f[y.dataMask],C=d.height,L=b(_),V=[],T=0,q=0,H=!0,z=C-1;z>0;z-=2){z===6&&z--;for(var X=0;X<C;X++)for(var K=H?C-1-X:X,te=0;te<2;te++){var le=z-te;if(!L.get(le,K)){q++;var ee=d.get(le,K);E({y:K,x:le})&&(ee=!ee),T=g(ee,T),q===8&&(V.push(T),q=0,T=0)}}H=!H}return V}function D(d){var _=d.height,y=Math.floor((_-17)/4);if(y<=6)return c.VERSIONS[y-1];for(var E=0,C=5;C>=0;C--)for(var L=_-9;L>=_-11;L--)E=g(d.get(L,C),E);for(var V=0,L=5;L>=0;L--)for(var C=_-9;C>=_-11;C--)V=g(d.get(L,C),V);for(var T=1/0,q,H=0,z=c.VERSIONS;H<z.length;H++){var X=z[H];if(X.infoBits===E||X.infoBits===V)return X;var K=u(E,X.infoBits);K<T&&(q=X,T=K),K=u(V,X.infoBits),K<T&&(q=X,T=K)}if(T<=3)return q}function v(d){for(var _=0,y=0;y<=8;y++)y!==6&&(_=g(d.get(y,8),_));for(var E=7;E>=0;E--)E!==6&&(_=g(d.get(8,E),_));for(var C=d.height,L=0,E=C-1;E>=C-7;E--)L=g(d.get(8,E),L);for(var y=C-8;y<C;y++)L=g(d.get(y,8),L);for(var V=1/0,T=null,q=0,H=p;q<H.length;q++){var z=H[q],X=z.bits,K=z.formatInfo;if(X===_||X===L)return K;var te=u(_,X);te<V&&(T=K,V=te),_!==L&&(te=u(L,X),te<V&&(T=K,V=te))}return V<=3?T:null}function P(d,_,y){var E=_.errorCorrectionLevels[y],C=[],L=0;if(E.ecBlocks.forEach(function(ee){for(var xe=0;xe<ee.numBlocks;xe++)C.push({numDataCodewords:ee.dataCodewordsPerBlock,codewords:[]}),L+=ee.dataCodewordsPerBlock+E.ecCodewordsPerBlock}),d.length<L)return null;d=d.slice(0,L);for(var V=E.ecBlocks[0].dataCodewordsPerBlock,T=0;T<V;T++)for(var q=0,H=C;q<H.length;q++){var z=H[q];z.codewords.push(d.shift())}if(E.ecBlocks.length>1)for(var X=E.ecBlocks[0].numBlocks,K=E.ecBlocks[1].numBlocks,T=0;T<K;T++)C[X+T].codewords.push(d.shift());for(;d.length>0;)for(var te=0,le=C;te<le.length;te++){var z=le[te];z.codewords.push(d.shift())}return C}function S(d){var _=D(d);if(!_)return null;var y=v(d);if(!y)return null;var E=w(d,_,y),C=P(E,_,y.errorCorrectionLevel);if(!C)return null;for(var L=C.reduce(function(te,le){return te+le.numDataCodewords},0),V=new Uint8ClampedArray(L),T=0,q=0,H=C;q<H.length;q++){var z=H[q],X=i.decode(z.codewords,z.codewords.length-z.numDataCodewords);if(!X)return null;for(var K=0;K<z.numDataCodewords;K++)V[T++]=X[K]}try{return r.decode(V,_.versionNumber)}catch{return null}}function A(d){if(d==null)return null;var _=S(d);if(_)return _;for(var y=0;y<d.width;y++)for(var E=y+1;E<d.height;E++)d.get(y,E)!==d.get(E,y)&&(d.set(y,E,!d.get(y,E)),d.set(E,y,!d.get(E,y)));return S(d)}s.decode=A},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(7),r=l(8),i;(function(D){D.Numeric="numeric",D.Alphanumeric="alphanumeric",D.Byte="byte",D.Kanji="kanji",D.ECI="eci"})(i=s.Mode||(s.Mode={}));var c;(function(D){D[D.Terminator=0]="Terminator",D[D.Numeric=1]="Numeric",D[D.Alphanumeric=2]="Alphanumeric",D[D.Byte=4]="Byte",D[D.Kanji=8]="Kanji",D[D.ECI=7]="ECI"})(c||(c={}));function u(D,v){for(var P=[],S="",A=[10,12,14][v],d=D.readBits(A);d>=3;){var _=D.readBits(10);if(_>=1e3)throw new Error("Invalid numeric value above 999");var y=Math.floor(_/100),E=Math.floor(_/10)%10,C=_%10;P.push(48+y,48+E,48+C),S+=y.toString()+E.toString()+C.toString(),d-=3}if(d===2){var _=D.readBits(7);if(_>=100)throw new Error("Invalid numeric value above 99");var y=Math.floor(_/10),E=_%10;P.push(48+y,48+E),S+=y.toString()+E.toString()}else if(d===1){var _=D.readBits(4);if(_>=10)throw new Error("Invalid numeric value above 9");P.push(48+_),S+=_.toString()}return{bytes:P,text:S}}var g=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function p(D,v){for(var P=[],S="",A=[9,11,13][v],d=D.readBits(A);d>=2;){var _=D.readBits(11),y=Math.floor(_/45),E=_%45;P.push(g[y].charCodeAt(0),g[E].charCodeAt(0)),S+=g[y]+g[E],d-=2}if(d===1){var y=D.readBits(6);P.push(g[y].charCodeAt(0)),S+=g[y]}return{bytes:P,text:S}}function f(D,v){for(var P=[],S="",A=[8,16,16][v],d=D.readBits(A),_=0;_<d;_++){var y=D.readBits(8);P.push(y)}try{S+=decodeURIComponent(P.map(function(E){return"%"+("0"+E.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:P,text:S}}function b(D,v){for(var P=[],S="",A=[8,10,12][v],d=D.readBits(A),_=0;_<d;_++){var y=D.readBits(13),E=Math.floor(y/192)<<8|y%192;E<7936?E+=33088:E+=49472,P.push(E>>8,E&255),S+=String.fromCharCode(r.shiftJISTable[E])}return{bytes:P,text:S}}function w(D,v){for(var P,S,A,d,_=new o.BitStream(D),y=v<=9?0:v<=26?1:2,E={text:"",bytes:[],chunks:[],version:v};_.available()>=4;){var C=_.readBits(4);if(C===c.Terminator)return E;if(C===c.ECI)_.readBits(1)===0?E.chunks.push({type:i.ECI,assignmentNumber:_.readBits(7)}):_.readBits(1)===0?E.chunks.push({type:i.ECI,assignmentNumber:_.readBits(14)}):_.readBits(1)===0?E.chunks.push({type:i.ECI,assignmentNumber:_.readBits(21)}):E.chunks.push({type:i.ECI,assignmentNumber:-1});else if(C===c.Numeric){var L=u(_,y);E.text+=L.text,(P=E.bytes).push.apply(P,L.bytes),E.chunks.push({type:i.Numeric,text:L.text})}else if(C===c.Alphanumeric){var V=p(_,y);E.text+=V.text,(S=E.bytes).push.apply(S,V.bytes),E.chunks.push({type:i.Alphanumeric,text:V.text})}else if(C===c.Byte){var T=f(_,y);E.text+=T.text,(A=E.bytes).push.apply(A,T.bytes),E.chunks.push({type:i.Byte,bytes:T.bytes,text:T.text})}else if(C===c.Kanji){var q=b(_,y);E.text+=q.text,(d=E.bytes).push.apply(d,q.bytes),E.chunks.push({type:i.Kanji,bytes:q.bytes,text:q.text})}}if(_.available()===0||_.readBits(_.available())===0)return E}s.decode=w},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=function(){function r(i){this.byteOffset=0,this.bitOffset=0,this.bytes=i}return r.prototype.readBits=function(i){if(i<1||i>32||i>this.available())throw new Error("Cannot read "+i.toString()+" bits");var c=0;if(this.bitOffset>0){var u=8-this.bitOffset,g=i<u?i:u,p=u-g,f=255>>8-g<<p;c=(this.bytes[this.byteOffset]&f)>>p,i-=g,this.bitOffset+=g,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(i>0){for(;i>=8;)c=c<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,i-=8;if(i>0){var p=8-i,f=255>>p<<p;c=c<<i|(this.bytes[this.byteOffset]&f)>>p,this.bitOffset+=i}}return c},r.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},r}();s.BitStream=o},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(1),r=l(2);function i(p,f,b,w){var D;f.degree()<b.degree()&&(D=[b,f],f=D[0],b=D[1]);for(var v=f,P=b,S=p.zero,A=p.one;P.degree()>=w/2;){var d=v,_=S;if(v=P,S=A,v.isZero())return null;P=d;for(var y=p.zero,E=v.getCoefficient(v.degree()),C=p.inverse(E);P.degree()>=v.degree()&&!P.isZero();){var L=P.degree()-v.degree(),V=p.multiply(P.getCoefficient(P.degree()),C);y=y.addOrSubtract(p.buildMonomial(L,V)),P=P.addOrSubtract(v.multiplyByMonomial(L,V))}if(A=y.multiplyPoly(S).addOrSubtract(_),P.degree()>=v.degree())return null}var T=A.getCoefficient(0);if(T===0)return null;var q=p.inverse(T);return[A.multiply(q),P.multiply(q)]}function c(p,f){var b=f.degree();if(b===1)return[f.getCoefficient(1)];for(var w=new Array(b),D=0,v=1;v<p.size&&D<b;v++)f.evaluateAt(v)===0&&(w[D]=p.inverse(v),D++);return D!==b?null:w}function u(p,f,b){for(var w=b.length,D=new Array(w),v=0;v<w;v++){for(var P=p.inverse(b[v]),S=1,A=0;A<w;A++)v!==A&&(S=p.multiply(S,o.addOrSubtractGF(1,p.multiply(b[A],P))));D[v]=p.multiply(f.evaluateAt(P),p.inverse(S)),p.generatorBase!==0&&(D[v]=p.multiply(D[v],P))}return D}function g(p,f){var b=new Uint8ClampedArray(p.length);b.set(p);for(var w=new o.default(285,256,0),D=new r.default(w,b),v=new Uint8ClampedArray(f),P=!1,S=0;S<f;S++){var A=D.evaluateAt(w.exp(S+w.generatorBase));v[v.length-1-S]=A,A!==0&&(P=!0)}if(!P)return b;var d=new r.default(w,v),_=i(w,w.buildMonomial(f,1),d,f);if(_===null)return null;var y=c(w,_[0]);if(y==null)return null;for(var E=u(w,_[1],y),C=0;C<y.length;C++){var L=b.length-1-w.log(y[C]);if(L<0)return null;b[L]=o.addOrSubtractGF(b[L],E[C])}return b}s.decode=g},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0}),s.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=l(0);function r(g,p,f,b){var w=g.x-p.x+f.x-b.x,D=g.y-p.y+f.y-b.y;if(w===0&&D===0)return{a11:p.x-g.x,a12:p.y-g.y,a13:0,a21:f.x-p.x,a22:f.y-p.y,a23:0,a31:g.x,a32:g.y,a33:1};var v=p.x-f.x,P=b.x-f.x,S=p.y-f.y,A=b.y-f.y,d=v*A-P*S,_=(w*A-P*D)/d,y=(v*D-w*S)/d;return{a11:p.x-g.x+_*p.x,a12:p.y-g.y+_*p.y,a13:_,a21:b.x-g.x+y*b.x,a22:b.y-g.y+y*b.y,a23:y,a31:g.x,a32:g.y,a33:1}}function i(g,p,f,b){var w=r(g,p,f,b);return{a11:w.a22*w.a33-w.a23*w.a32,a12:w.a13*w.a32-w.a12*w.a33,a13:w.a12*w.a23-w.a13*w.a22,a21:w.a23*w.a31-w.a21*w.a33,a22:w.a11*w.a33-w.a13*w.a31,a23:w.a13*w.a21-w.a11*w.a23,a31:w.a21*w.a32-w.a22*w.a31,a32:w.a12*w.a31-w.a11*w.a32,a33:w.a11*w.a22-w.a12*w.a21}}function c(g,p){return{a11:g.a11*p.a11+g.a21*p.a12+g.a31*p.a13,a12:g.a12*p.a11+g.a22*p.a12+g.a32*p.a13,a13:g.a13*p.a11+g.a23*p.a12+g.a33*p.a13,a21:g.a11*p.a21+g.a21*p.a22+g.a31*p.a23,a22:g.a12*p.a21+g.a22*p.a22+g.a32*p.a23,a23:g.a13*p.a21+g.a23*p.a22+g.a33*p.a23,a31:g.a11*p.a31+g.a21*p.a32+g.a31*p.a33,a32:g.a12*p.a31+g.a22*p.a32+g.a32*p.a33,a33:g.a13*p.a31+g.a23*p.a32+g.a33*p.a33}}function u(g,p){for(var f=i({x:3.5,y:3.5},{x:p.dimension-3.5,y:3.5},{x:p.dimension-6.5,y:p.dimension-6.5},{x:3.5,y:p.dimension-3.5}),b=r(p.topLeft,p.topRight,p.alignmentPattern,p.bottomLeft),w=c(b,f),D=o.BitMatrix.createEmpty(p.dimension,p.dimension),v=function(y,E){var C=w.a13*y+w.a23*E+w.a33;return{x:(w.a11*y+w.a21*E+w.a31)/C,y:(w.a12*y+w.a22*E+w.a32)/C}},P=0;P<p.dimension;P++)for(var S=0;S<p.dimension;S++){var A=S+.5,d=P+.5,_=v(A,d);D.set(S,P,g.get(Math.floor(_.x),Math.floor(_.y)))}return{matrix:D,mappingFunction:v}}s.extract=u},function(e,s,l){Object.defineProperty(s,"__esModule",{value:!0});var o=4,r=.5,i=1.5,c=function(A,d){return Math.sqrt(Math.pow(d.x-A.x,2)+Math.pow(d.y-A.y,2))};function u(A){return A.reduce(function(d,_){return d+_})}function g(A,d,_){var y,E,C,L,V=c(A,d),T=c(d,_),q=c(A,_),H,z,X;return T>=V&&T>=q?(y=[d,A,_],H=y[0],z=y[1],X=y[2]):q>=T&&q>=V?(E=[A,d,_],H=E[0],z=E[1],X=E[2]):(C=[A,_,d],H=C[0],z=C[1],X=C[2]),(X.x-z.x)*(H.y-z.y)-(X.y-z.y)*(H.x-z.x)<0&&(L=[X,H],H=L[0],X=L[1]),{bottomLeft:H,topLeft:z,topRight:X}}function p(A,d,_,y){var E=(u(b(A,_,y,5))/7+u(b(A,d,y,5))/7+u(b(_,A,y,5))/7+u(b(d,A,y,5))/7)/4;if(E<1)throw new Error("Invalid module size");var C=Math.round(c(A,d)/E),L=Math.round(c(A,_)/E),V=Math.floor((C+L)/2)+7;switch(V%4){case 0:V++;break;case 2:V--;break}return{dimension:V,moduleSize:E}}function f(A,d,_,y){var E=[{x:Math.floor(A.x),y:Math.floor(A.y)}],C=Math.abs(d.y-A.y)>Math.abs(d.x-A.x),L,V,T,q;C?(L=Math.floor(A.y),V=Math.floor(A.x),T=Math.floor(d.y),q=Math.floor(d.x)):(L=Math.floor(A.x),V=Math.floor(A.y),T=Math.floor(d.x),q=Math.floor(d.y));for(var H=Math.abs(T-L),z=Math.abs(q-V),X=Math.floor(-H/2),K=L<T?1:-1,te=V<q?1:-1,le=!0,ee=L,xe=V;ee!==T+K;ee+=K){var se=C?xe:ee,ge=C?ee:xe;if(_.get(se,ge)!==le&&(le=!le,E.push({x:se,y:ge}),E.length===y+1))break;if(X+=z,X>0){if(xe===q)break;xe+=te,X-=H}}for(var G=[],ie=0;ie<y;ie++)E[ie]&&E[ie+1]?G.push(c(E[ie],E[ie+1])):G.push(0);return G}function b(A,d,_,y){var E,C=d.y-A.y,L=d.x-A.x,V=f(A,d,_,Math.ceil(y/2)),T=f(A,{x:A.x-L,y:A.y-C},_,Math.ceil(y/2)),q=V.shift()+T.shift()-1;return(E=T.concat(q)).concat.apply(E,V)}function w(A,d){var _=u(A)/u(d),y=0;return d.forEach(function(E,C){y+=Math.pow(A[C]-E*_,2)}),{averageSize:_,error:y}}function D(A,d,_){try{var y=b(A,{x:-1,y:A.y},_,d.length),E=b(A,{x:A.x,y:-1},_,d.length),C={x:Math.max(0,A.x-A.y)-1,y:Math.max(0,A.y-A.x)-1},L=b(A,C,_,d.length),V={x:Math.min(_.width,A.x+A.y)+1,y:Math.min(_.height,A.y+A.x)+1},T=b(A,V,_,d.length),q=w(y,d),H=w(E,d),z=w(L,d),X=w(T,d),K=Math.sqrt(q.error*q.error+H.error*H.error+z.error*z.error+X.error*X.error),te=(q.averageSize+H.averageSize+z.averageSize+X.averageSize)/4,le=(Math.pow(q.averageSize-te,2)+Math.pow(H.averageSize-te,2)+Math.pow(z.averageSize-te,2)+Math.pow(X.averageSize-te,2))/te;return K+le}catch{return 1/0}}function v(A,d){for(var _=Math.round(d.x);A.get(_,Math.round(d.y));)_--;for(var y=Math.round(d.x);A.get(y,Math.round(d.y));)y++;for(var E=(_+y)/2,C=Math.round(d.y);A.get(Math.round(E),C);)C--;for(var L=Math.round(d.y);A.get(Math.round(E),L);)L++;var V=(C+L)/2;return{x:E,y:V}}function P(A){for(var d=[],_=[],y=[],E=[],C=function(se){for(var ge=0,G=!1,ie=[0,0,0,0,0],ae=function(W){var J=A.get(W,se);if(J===G)ge++;else{ie=[ie[1],ie[2],ie[3],ie[4],ge],ge=1,G=J;var re=u(ie)/7,me=Math.abs(ie[0]-re)<re&&Math.abs(ie[1]-re)<re&&Math.abs(ie[2]-3*re)<3*re&&Math.abs(ie[3]-re)<re&&Math.abs(ie[4]-re)<re&&!J,oe=u(ie.slice(-3))/3,De=Math.abs(ie[2]-oe)<oe&&Math.abs(ie[3]-oe)<oe&&Math.abs(ie[4]-oe)<oe&&J;if(me){var _e=W-ie[3]-ie[4],Me=_e-ie[2],Ee={startX:Me,endX:_e,y:se},be=_.filter(function(Se){return Me>=Se.bottom.startX&&Me<=Se.bottom.endX||_e>=Se.bottom.startX&&Me<=Se.bottom.endX||Me<=Se.bottom.startX&&_e>=Se.bottom.endX&&ie[2]/(Se.bottom.endX-Se.bottom.startX)<i&&ie[2]/(Se.bottom.endX-Se.bottom.startX)>r});be.length>0?be[0].bottom=Ee:_.push({top:Ee,bottom:Ee})}if(De){var Pe=W-ie[4],Ve=Pe-ie[3],Ee={startX:Ve,y:se,endX:Pe},be=E.filter(function(pe){return Ve>=pe.bottom.startX&&Ve<=pe.bottom.endX||Pe>=pe.bottom.startX&&Ve<=pe.bottom.endX||Ve<=pe.bottom.startX&&Pe>=pe.bottom.endX&&ie[2]/(pe.bottom.endX-pe.bottom.startX)<i&&ie[2]/(pe.bottom.endX-pe.bottom.startX)>r});be.length>0?be[0].bottom=Ee:E.push({top:Ee,bottom:Ee})}}},O=-1;O<=A.width;O++)ae(O);d.push.apply(d,_.filter(function(W){return W.bottom.y!==se&&W.bottom.y-W.top.y>=2})),_=_.filter(function(W){return W.bottom.y===se}),y.push.apply(y,E.filter(function(W){return W.bottom.y!==se})),E=E.filter(function(W){return W.bottom.y===se})},L=0;L<=A.height;L++)C(L);d.push.apply(d,_.filter(function(se){return se.bottom.y-se.top.y>=2})),y.push.apply(y,E);var V=d.filter(function(se){return se.bottom.y-se.top.y>=2}).map(function(se){var ge=(se.top.startX+se.top.endX+se.bottom.startX+se.bottom.endX)/4,G=(se.top.y+se.bottom.y+1)/2;if(!!A.get(Math.round(ge),Math.round(G))){var ie=[se.top.endX-se.top.startX,se.bottom.endX-se.bottom.startX,se.bottom.y-se.top.y+1],ae=u(ie)/ie.length,O=D({x:Math.round(ge),y:Math.round(G)},[1,1,3,1,1],A);return{score:O,x:ge,y:G,size:ae}}}).filter(function(se){return!!se}).sort(function(se,ge){return se.score-ge.score}).map(function(se,ge,G){if(ge>o)return null;var ie=G.filter(function(O,W){return ge!==W}).map(function(O){return{x:O.x,y:O.y,score:O.score+Math.pow(O.size-se.size,2)/se.size,size:O.size}}).sort(function(O,W){return O.score-W.score});if(ie.length<2)return null;var ae=se.score+ie[0].score+ie[1].score;return{points:[se].concat(ie.slice(0,2)),score:ae}}).filter(function(se){return!!se}).sort(function(se,ge){return se.score-ge.score});if(V.length===0)return null;var T=g(V[0].points[0],V[0].points[1],V[0].points[2]),q=T.topRight,H=T.topLeft,z=T.bottomLeft,X=S(A,y,q,H,z),K=[];X&&K.push({alignmentPattern:{x:X.alignmentPattern.x,y:X.alignmentPattern.y},bottomLeft:{x:z.x,y:z.y},dimension:X.dimension,topLeft:{x:H.x,y:H.y},topRight:{x:q.x,y:q.y}});var te=v(A,q),le=v(A,H),ee=v(A,z),xe=S(A,y,te,le,ee);return xe&&K.push({alignmentPattern:{x:xe.alignmentPattern.x,y:xe.alignmentPattern.y},bottomLeft:{x:ee.x,y:ee.y},topLeft:{x:le.x,y:le.y},topRight:{x:te.x,y:te.y},dimension:xe.dimension}),K.length===0?null:K}s.locate=P;function S(A,d,_,y,E){var C,L,V;try{C=p(y,_,E,A),L=C.dimension,V=C.moduleSize}catch{return null}var T={x:_.x-y.x+E.x,y:_.y-y.y+E.y},q=(c(y,E)+c(y,_))/2/V,H=1-3/q,z={x:y.x+H*(T.x-y.x),y:y.y+H*(T.y-y.y)},X=d.map(function(te){var le=(te.top.startX+te.top.endX+te.bottom.startX+te.bottom.endX)/4,ee=(te.top.y+te.bottom.y+1)/2;if(!!A.get(Math.floor(le),Math.floor(ee))){var xe=[te.top.endX-te.top.startX,te.bottom.endX-te.bottom.startX,te.bottom.y-te.top.y+1];u(xe)/xe.length;var se=D({x:Math.floor(le),y:Math.floor(ee)},[1,1,1],A),ge=se+c({x:le,y:ee},z);return{x:le,y:ee,score:ge}}}).filter(function(te){return!!te}).sort(function(te,le){return te.score-le.score}),K=q>=15&&X.length?X[0]:z;return{alignmentPattern:K,dimension:L}}}]).default})})(ki);var Nh=Ar(ki.exports);const Oh={class:"am-cqcs__header"},Mh={key:0,class:"am-cqcs__container"},Vh={class:"am-cqcs__container-inner"},Rh={class:"am-cqcs__camera-container"},qh=m("div",{class:"am-cqcs__video-overlay"},[m("div",{class:"am-cqcs__frame"})],-1),Uh={key:0,class:"am-cqcs__response-info"},zh={key:0,class:"am-cqcs__response-message"},jh={key:1,class:"am-cqcs__response-name"},Yh={key:2,class:"am-cqcs__response-item"},Wh={key:3,class:"am-cqcs__response-item"},Hh={key:4,class:"am-cqcs__response-item"},Zh={key:5,class:"am-cqcs__response-item"},Gh={key:1,class:"am-cqcs__error"},Jh=m("span",{class:"am-icon-close-filled"},null,-1),Xh={class:"am-cqcs__controls"},Qh=m("span",{class:"am-icon-refresh"},null,-1),Kh=m("span",{class:"am-icon-mobile"},null,-1),e1=m("span",{class:"am-icon-mobile"},null,-1),t1={props:{visibility:{type:Boolean,default:!1}},emits:["update:visibility"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("labels"),o=M(!1),r=M(!1),i=M(!1),c=M(!1),u=M([]),g=M(0),p=M(""),f=M(null),b=M(null),w=M(0),D=M(1500),v=M(null),P=M(null),S=M(null),A=M(null),d=M({ticketCode:""}),_=M({ticketCode:[{required:!0,message:"Ticket code is required",trigger:"click"}]}),y=M({ticketCode:{template:We.text,props:{itemName:"ticketCode",placeholder:l.enter_ticket_code,class:"am-cqcs__form-item",prepend:"#"}}}),E=M(null);async function C(){try{if(!(window.isSecureContext||location.protocol==="https:"||location.hostname==="localhost"||location.hostname==="127.0.0.1"||location.hostname.includes("ngrok.io")||location.hostname.startsWith("192.168.")||location.hostname.startsWith("10.")||location.hostname.startsWith("172.")))throw new Error("Camera access requires HTTPS or localhost. Please access this page over a secure connection or use localhost.");if(!navigator.mediaDevices)throw new Error("MediaDevices API not supported in this browser. Please update your browser or try Chrome/Firefox.");if(!navigator.mediaDevices.getUserMedia)throw new Error("getUserMedia not supported in this browser. Please update your browser or try Chrome/Firefox.");let ge=[];try{ge=await navigator.mediaDevices.enumerateDevices()}catch(G){console.warn("Could not enumerate devices:",G)}u.value=ge.filter(G=>G.kind==="videoinput"),await L()}catch(se){xe(se)}}async function L(){E.value&&E.value.closingFromParent(),v.value=null;try{if(p.value="",!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera access not supported in this browser");f.value&&f.value.getTracks().forEach(G=>G.stop());let se={video:{facingMode:"environment"}};u.value.length>0&&u.value[g.value]&&u.value[g.value].deviceId?se.video.deviceId={exact:u.value[g.value].deviceId}:se.video={facingMode:"environment",width:{ideal:1280,min:640},height:{ideal:720,min:480}},f.value=await navigator.mediaDevices.getUserMedia(se);const ge=f.value.getVideoTracks()[0];if(ge&&ge.getCapabilities){const G=ge.getCapabilities();c.value=!!G.torch}P.value&&(P.value.srcObject=f.value,P.value.onloadedmetadata=()=>{P.value.play().catch(G=>{console.warn("Could not auto-play video:",G)})}),r.value=!0,T()}catch(se){xe(se)}}function V(){v.value=null,r.value=!1,b.value&&(cancelAnimationFrame(b.value),b.value=null),f.value&&(f.value.getTracks().forEach(se=>se.stop()),f.value=null),P.value&&(P.value.srcObject=null)}function T(){const se=P.value,ge=S.value;if(!se||!ge)return;const G=ge.getContext("2d",{willReadFrequently:!0}),ie=()=>{if(!!r.value){if(se.readyState===se.HAVE_ENOUGH_DATA){(ge.width!==se.videoWidth||ge.height!==se.videoHeight)&&(ge.width=se.videoWidth,ge.height=se.videoHeight),G.drawImage(se,0,0,ge.width,ge.height);const ae=G.getImageData(0,0,ge.width,ge.height),O=performance.now();if(O-w.value>=D.value){const W=Nh(ae.data,ae.width,ae.height,{inversionAttempts:"dontInvert"});W&&W.data&&(W.data&&(K(W.data),V()),w.value=O)}}b.value=requestAnimationFrame(ie)}};b.value=requestAnimationFrame(ie)}async function q(){if(!(!c.value||!f.value))try{await f.value.getVideoTracks()[0].applyConstraints({advanced:[{torch:!i.value}]}),i.value=!i.value}catch(se){console.error("Error toggling torch:",se)}}async function H(){u.value.length<=1||(g.value=(g.value+1)%u.value.length,await L())}function z(){A.value.validate(se=>{if(se){const ge={ticketManualCode:d.value.ticketCode.trim(),scannedAt:at().format("YYYY-MM-DD")};te(ge),d.value.ticketCode=""}else return!1})}function X(se){const ge={},G=/(\w+)\s*:\s*([^\s|]+)/g;let ie;for(;(ie=G.exec(se))!==null;){let ae=ie[1],O=ie[2];/^-?\d+$/.test(O)&&(O=Number(O)),ge[ae]=O}return ge}function K(se){p.value="";let ge=X(se);const G=at().format("YYYY-MM-DD");let ie={...ge,scannedAt:G};te(ie)}function te(se){o.value=!0,p.value="",$e.post("/scan-eticket",{ticketManualCode:se.ticketManualCode,scannedAt:se.scannedAt},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(ge=>{ge.data&&ge.data.data&&(v.value={messageType:ge.data.data.messageType,message:ge.data.data.message,bookingId:ge.data.data.bookingId,ticketManualCode:ge.data.data.ticketManualCode,ticketControlNumber:ge.data.data.ticketControl,eventName:ge.data.data.eventName?ge.data.data.eventName:le(ge.data.data)},ee(ge.data.data)&&(v.value.eventTicketName=ee(ge.data.data)))}).catch(ge=>{const G=ge?.response?.data;!G||(G.data?v.value={messageType:G.data.messageType,message:G.data.message}:(v.value={messageType:"error",message:G.message},G.message.includes("Mandatory fields not passed!")&&(v.value.message=l.ticket_not_valid)))}).finally(()=>{o.value=!1})}function le(se){return se.qrCodes.find(G=>G.ticketManualCode===se.ticketManualCode).eventName||""}function ee(se){return se.qrCodes.find(G=>G.ticketManualCode===se.ticketManualCode).eventTicketName||""}function xe(se){console.error("Scanner error:",se),se.name==="NotAllowedError"?p.value=l.camera_error_1:se.name==="NotFoundError"?p.value=l.camera_error_2:se.name==="NotSupportedError"?p.value=l.camera_error_3:p.value=`Camera error: ${se.message}`}return Ze(()=>{xt(()=>e.visibility,se=>{se?C():V()},{immediate:!0})}),Yn(()=>{V()}),(se,ge)=>{const G=vt,ie=st;return e.visibility?(x(),Y(Sa,{key:0,visibility:e.visibility,class:"am-cqcs__dialog",position:"top","footer-visibility":!1,"onUpdate:visibility":ge[0]||(ge[0]=ae=>a("update:visibility",ae))},{header:I(()=>[m("div",Oh,k(t(l).e_ticket_scanner),1)]),default:I(()=>[e.visibility?(x(),F("div",Mh,[$t(m("div",Vh,[m("div",Rh,[m("video",{ref_key:"videoElement",ref:P,class:"am-cqcs__video",style:Ce({display:t(r)?"block":"none"}),autoplay:"",playsinline:""},null,4),m("canvas",{ref_key:"canvasElement",ref:S,class:"am-cqcs__canvas",style:{display:"none"}},null,512),qh]),t(v)?(x(),F("div",Uh,[m("span",{class:j(t(v).messageType==="error"?"am-icon-close-filled":"am-icon-checkmark-circle-full")},null,2),t(v).message?(x(),F("div",zh,k(t(l)[t(v).message]||t(v).message),1)):N("",!0),t(v).eventName?(x(),F("div",jh,k(t(v).eventName),1)):N("",!0),t(v).ticketManualCode?(x(),F("div",Yh,[m("span",null,k(t(l).ticket_id)+":",1),ue(" #"+k(t(v).ticketManualCode),1)])):N("",!0),t(v).eventTicketName?(x(),F("div",Wh,[m("span",null,k(t(l).ticket_name)+":",1),ue(" "+k(t(v).eventTicketName),1)])):N("",!0),t(v).bookingId?(x(),F("div",Hh,[m("span",null,k(t(l).booking_id)+":",1),ue(" #"+k(t(v).bookingId),1)])):N("",!0),t(v).ticketControlNumber?(x(),F("div",Zh,[m("span",null,k(t(l).attendees_allowed)+":",1),ue(" "+k(t(v).ticketControlNumber),1)])):N("",!0)])):N("",!0),t(p)?(x(),F("div",Gh,[Jh,ue(" "+k(t(p)),1)])):N("",!0),m("div",Xh,[t(c)?(x(),Y(Fe,{key:0,category:"primary",onClick:q},{default:I(()=>[m("span",{class:j(t(i)?"am-icon-bolt-lightning":"am-icon-bolt-lightning-fill")},null,2),ue(" "+k(t(i)?t(l).torch_off:t(l).torch_on),1)]),_:1})):N("",!0),t(u).length>1?(x(),Y(Fe,{key:1,onClick:H},{default:I(()=>[Qh,ue(" "+k(t(l).switch_camera),1)]),_:1})):N("",!0),t(r)?N("",!0):(x(),Y(Fe,{key:2,category:"primary",onClick:L},{default:I(()=>[Kh,ue(" "+k(t(l).start_scanner),1)]),_:1})),t(r)?(x(),Y(Fe,{key:3,category:"danger",onClick:V},{default:I(()=>[e1,ue(" "+k(t(l).stop_scanner),1)]),_:1})):N("",!0)]),$(fo,{class:"am-cqcs__collapse"},{default:I(()=>[$(po,{ref_key:"manualCodeCollapse",ref:E,class:"am-cqcs__collapse-item"},{heading:I(()=>[ue(k(t(l).enter_ticket_manually),1)]),default:I(()=>[$(ie,{ref_key:"manualCodeForm",ref:A,model:t(d),rules:t(_),class:"am-cqcs__form",onSubmit:r0(z,["prevent"])},{default:I(()=>[(x(!0),F(ne,null,ve(t(y),(ae,O)=>(x(),Y(ft(ae.template),kt({key:O,modelValue:t(d)[O],"onUpdate:modelValue":W=>t(d)[O]=W},ae.props),null,16,["modelValue","onUpdate:modelValue"]))),128)),$(G,null,{default:I(()=>[$(Fe,{category:"primary",onClick:z},{default:I(()=>[ue(k(t(l).validate_ticket),1)]),_:1})]),_:1})]),_:1},8,["model","rules","onSubmit"])]),_:1},512)]),_:1})],512),[[mo,!t(o)]]),t(o)?(x(),Y(Zl,{key:0})):N("",!0)])):N("",!0)]),_:1},8,["visibility"])):N("",!0)}}};function _s(n,a,e={},s={}){for(let l in a)l in n&&a[l]&&typeof a[l]=="object"?(l in s||(s[l]={}),_s(n[l],a[l],l in e?e[l]:n[l],s[l]),Object.keys(s[l]).length===0&&delete s[l]):l in e?s[l]=e[l]:l in n?s[l]=n[l]:s[l]=a[l];return s}function a1(n){lt.activation.stash&&$e.post("/stash",{},Object.assign(Ue(n),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(()=>{})}function s1(n,a){let e=n.getters["event/getDefaultEvent"],s=[],l={};a.customTickets.length&&a.bookings.forEach(i=>{i.ticketsData.forEach(c=>{l[c.eventTicketId]=!0})}),a.customTickets.forEach(i=>{JSON.parse(i.dateRanges).forEach((c,u)=>{u in s||s.push({enabled:c.enabled,range:[ye(c.startDate,"YYYY-MM-DD").toDate(),ye(c.endDate,"YYYY-MM-DD").toDate()],tickets:[]}),s[u].tickets.push({price:c.price})}),i.booked=i.id in l});let o=!a.description||a.description.startsWith("<!-- Content -->")?"text":"html",r=a.description?a.description.replace("<!-- Content -->",""):"";return Object.assign({},a,{description:r,descriptionMode:o,tags:a.tags.map(i=>i.name),organizerId:a.organizerId,periods:a.periods.map(i=>new Object({id:i.id,eventId:i.eventId,appleCalendarEventId:i.appleCalendarEventId,googleCalendarEventId:i.googleCalendarEventId,googleMeetUrl:i.googleMeetUrl,outlookCalendarEventId:i.outlookCalendarEventId,startDate:ye(i.periodStart.split(" ")[0],"YYYY-MM-DD").toDate(),endDate:ye(i.periodEnd.split(" ")[0],"YYYY-MM-DD").toDate(),startTime:i.periodStart.split(" ")[1].substring(0,5),endTime:i.periodEnd.split(" ")[1].substring(0,5)})),bookingOpens:{disabled:a.bookingOpens===null,date:a.bookingOpens?ye(a.bookingOpens.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingOpens?a.bookingOpens.split(" ")[1].substring(0,5):null},bookingOpensRec:a.bookingOpensRec==="same",bookingCloses:{disabled:a.bookingCloses===null,date:a.bookingCloses?ye(a.bookingCloses.split(" ")[0],"YYYY-MM-DD").toDate():null,time:a.bookingCloses?a.bookingCloses.split(" ")[1].substring(0,5):null},bookingClosesRec:a.bookingClosesRec==="same",recurringEnabled:a.recurring&&a.recurring.cycle!==null,recurring:a.recurring!==null?Object.assign({},a.recurring,{until:a.recurring.until?ye(a.recurring.until.split(" ")[0],"YYYY-MM-DD").toDate():null,monthDate:a.recurring.monthDate?ye(a.recurring.monthDate.split(" ")[0],"YYYY-MM-DD").toDate():null}):e.recurring,depositEnabled:a.depositPayment!=="disabled",depositPayment:a.depositPayment!=="disabled"?a.depositPayment:"percentage",customTicketsRangesEnabled:s.length>0,customTicketsRanges:s,maxCustomCapacity:a.maxCustomCapacity===null?1:a.maxCustomCapacity,maxCustomCapacityEnabled:a.maxCustomCapacity!==null,closeAfterMinEnabled:a.closeAfterMin!==null,closeAfterMinBookings:a.closeAfterMinBookings,closeAfterMin:a.closeAfterMin===null?1:a.closeAfterMin,maxExtraPeopleEnabled:a.maxExtraPeople!==null,maxExtraPeople:a.maxExtraPeople===null?0:a.maxExtraPeople,locationId:a.locationId===null&&a.customLocation?0:a.locationId,settings:_s(lt,e.settings,a.settings?JSON.parse(a.settings):{},{})})}function l1(n){let a=n.getters["event/getDefaultEvent"],e=[];n.getters["event/getCustomTickets"].forEach((l,o)=>{let r=[];n.getters["event/getCustomTicketsRanges"].filter(i=>i.range[0]&&i.range[1]).forEach(i=>{r.push({startDate:ye(i.range[0]).format("YYYY-MM-DD"),endDate:ye(i.range[1]).format("YYYY-MM-DD"),price:i.tickets[o].price})}),e.push(Object.assign({},l,{dateRanges:JSON.stringify(r)}))});let s=_s(_s(lt,a.settings,{},{}),a.settings,n.getters["event/getSettings"],{});return Object.keys(n.getters["event/getSettings"]).forEach(l=>{Object.keys(n.getters["event/getSettings"][l]).forEach(o=>{n.getters["event/getSettings"][l][o]!==null&&typeof n.getters["event/getSettings"][l][o]=="object"?(Object.keys(n.getters["event/getSettings"][l][o]).forEach(r=>{(n.getters["event/getSettings"][l][o][r]===lt[l][o][r]||lt[l][o][r]&&(n.getters["event/getSettings"][l][o][r]===""||n.getters["event/getSettings"][l][o][r]===null))&&delete s[l][o][r]}),typeof s[l][o]=="object"&&Object.keys(s[l][o]).length===0&&delete s[l][o]):l in lt&&o in lt[l]&&(s[l][o]===lt[l][o]||lt[l][o]&&(n.getters["event/getSettings"][l][o]===""||n.getters["event/getSettings"][l][o]===null))&&delete s[l][o]}),Object.keys(s[l]).length===0&&delete s[l]}),{aggregatedPrice:n.getters["event/getAggregatedPrice"],bookMultipleTimes:n.getters["event/getBookMultipleTimes"],bookingCloses:!n.getters["event/getBookingClosesDisabled"]&&n.getters["event/getBookingClosesDate"]&&n.getters["event/getBookingClosesTime"]?ye(n.getters["event/getBookingClosesDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingClosesTime"]+":00":null,bookingClosesRec:n.getters["event/getBookingClosesRec"]?"same":"calculate",bookingOpens:!n.getters["event/getBookingOpensDisabled"]&&n.getters["event/getBookingOpensDate"]&&n.getters["event/getBookingOpensTime"]?ye(n.getters["event/getBookingOpensDate"]).format("YYYY-MM-DD")+" "+n.getters["event/getBookingOpensTime"]+":00":null,bookingOpensRec:n.getters["event/getBookingOpensRec"]?"same":"calculate",bringingAnyone:n.getters["event/getBringingAnyone"],closeAfterMin:n.getters["event/getCloseAfterMinEnabled"]?n.getters["event/getCloseAfterMin"]:null,closeAfterMinBookings:n.getters["event/getCloseAfterMinBookings"],color:n.getters["event/getColor"],customLocation:n.getters["event/getCustomLocation"],customPricing:n.getters["event/getCustomPricing"],customTickets:e,deposit:n.getters["event/getDeposit"],depositPayment:n.getters["event/getDepositEnabled"]?n.getters["event/getDepositPayment"]:"disabled",depositPerPerson:n.getters["event/getDepositPerPerson"],description:n.getters["event/getDescription"]&&n.getters["event/getDescriptionMode"]==="text"?"<!-- Content -->"+n.getters["event/getDescription"]:n.getters["event/getDescription"],fullPayment:n.getters["event/getFullPayment"],gallery:n.getters["event/getGallery"],id:n.getters["event/getId"],locationId:n.getters["event/getLocationId"]===0?null:n.getters["event/getLocationId"],maxCapacity:n.getters["event/getMaxCapacity"],maxCustomCapacity:n.getters["event/getMaxCustomCapacityEnabled"]?n.getters["event/getMaxCustomCapacity"]:null,maxExtraPeople:n.getters["event/getMaxExtraPeopleEnabled"]?n.getters["event/getMaxExtraPeople"]:null,name:n.getters["event/getName"],notifyParticipants:n.getters["event/getNotifyParticipants"],organizerId:n.getters["event/getOrganizerId"],parentId:n.getters["event/getParentId"],periods:wi(n),price:n.getters["event/getPrice"],providers:n.getters["event/getId"]?n.getters["event/getProviders"]:[{id:n.getters["auth/getProfile"].id,firstName:n.getters["auth/getProfile"].firstName,lastName:n.getters["auth/getProfile"].lastName,email:n.getters["auth/getProfile"].email,type:"provider"}],recurring:n.getters["event/getRecurringEnabled"]?Object.assign({},n.getters["event/getRecurring"],{until:ye(n.getters["event/getRecurringUntil"]).format("YYYY-MM-DD"),monthDate:n.getters["event/getRecurringMonthDate"]?ye(n.getters["event/getRecurringMonthDate"]).format("YYYY-MM-DD"):null}):null,settings:Object.keys(s).length?JSON.stringify(s):null,show:n.getters["event/getShow"],tags:n.getters["event/getTags"].map(l=>new Object({name:l})),timeZone:n.getters["cabinet/getTimeZone"],translations:n.getters["event/getTranslations"],utc:n.getters["cabinet/getTimeZone"]==="UTC",zoomUserId:n.getters["event/getZoomUserId"]}}function wi(n){return n.getters["event/getPeriods"].map(a=>new Object({id:a.id,eventId:a.eventId,appleCalendarEventId:a.appleCalendarEventId,googleCalendarEventId:a.googleCalendarEventId,googleMeetUrl:a.googleMeetUrl,outlookCalendarEventId:a.outlookCalendarEventId,microsoftTeamsUrl:a.microsoftTeamsUrl,periodStart:n.getters["cabinet/getTimeZone"]==="UTC"?ye(a.startDate).utc().format("YYYY-MM-DD")+" "+a.startTime+":00":ye(a.startDate).format("YYYY-MM-DD")+" "+a.startTime+":00",periodEnd:n.getters["cabinet/getTimeZone"]==="UTC"?ye(a.endDate).utc().format("YYYY-MM-DD")+" "+a.endTime+":00":ye(a.endDate).format("YYYY-MM-DD")+" "+a.endTime+":00"}))}const bl=tt(window.wpAmeliaLabels);function Cr(n,a={}){return Object.assign(a,{id:n.id,eventId:n.event.id,customer:n.customer,customerId:n.customer.id,persons:n.persons,customFields:n.customFields?JSON.parse(n.customFields):{},ticketsData:n.ticketsData,status:n.status,tax:n.tax,price:n.price,coupon:n.coupon,payments:n.payments,qrCodes:n.qrCodes})}function Pi(n){let a={};return Object.keys(n.getters["attendee/getCustomFields"]).forEach(e=>{a[e]={label:n.getters["attendee/getCustomFields"][e].label,type:n.getters["attendee/getCustomFields"][e].type,value:n.getters["attendee/getCustomFields"][e].type==="datepicker"?n.getters["attendee/getCustomFields"][e].value?ye(n.getters["attendee/getCustomFields"][e].value).format("YYYY-MM-DD"):null:n.getters["attendee/getCustomFields"][e].value}}),{id:n.getters["attendee/getId"],type:"event",eventId:n.getters["attendee/getEventId"],bookings:[{customerId:n.getters["attendee/getCustomerId"],persons:n.getters["attendee/getPersons"],customFields:a,ticketsData:n.getters["attendee/getTickets"],status:n.getters["attendee/getStatus"],coupon:n.getters["attendee/getCoupon"]}],status:n.getters["attendee/getStatus"],validateCoupon:!1,isBackendOrCabinet:!0,createPaymentLinks:!1,payment:{gateway:"onSite"}}}function gs(n,a,e=null){let s=a.customFields,l=e&&e.customPricing?e.customTickets.map((o,r)=>new Object({eventTicketId:o.id,persons:r===0&&!Object.keys(a.ticketsData).length?1:0,price:o.price})):[];return e&&(n.getters["entities/getCustomFields"].filter(o=>o.allEvents||o.events.map(r=>r.id).indexOf(e.id)!==-1&&o.type!=="content"&&o.type!=="file").forEach(o=>{s[o.id]={type:o.type,label:o.label,value:o.id in s?s[o.id].value:o.type==="checkbox"||o.type==="file"?[]:"",width:o.width,options:o.options,id:o.id,required:o.required}}),e.customPricing&&Object.keys(a.ticketsData).forEach(o=>{let r=l.find(i=>i.eventTicketId===a.ticketsData[o].eventTicketId);r.id=a.ticketsData[o].id,r.persons=a.ticketsData[o].persons,r.price=a.ticketsData[o].price,r.customerBookingId=a.ticketsData[o].customerBookingId})),Object.assign({},a,{eventId:e?e.id:null,customFields:s,ticketsData:l})}function Ti(){return[{label:bl.approved,value:"approved",icon:"check",color:"var(--am-c-success)"},{label:bl.waiting,value:"waiting",icon:"clock",color:"var(--am-c-warning)"},{label:bl.canceled,value:"canceled",icon:"close",color:"var(--am-c-error)"},{label:bl["no-show"],value:"no-show",icon:"clock",color:"var(--am-c-warning)"}]}function Li(n){let a=0;return n.getters["attendee/getTickets"].length?n.getters["attendee/getTickets"].forEach(e=>{e.persons&&(a+=n.getters["attendee/getAggregatedPrice"]?e.price*e.persons:e.price)}):a=n.getters["attendee/getAggregatedPrice"]?n.getters["attendee/getPrice"]*n.getters["attendee/getPersons"]:n.getters["attendee/getPrice"],io(null,n.getters["attendee/getCoupon"],n.getters["attendee/getTax"]&&n.getters["attendee/getTax"].length?n.getters["attendee/getTax"][0]:null,a,!1)}const n1=["innerHTML"],o1=["innerHTML"],r1={setup(n,{expose:a}){let e=Ne(),s=U("amLabels"),l=U("licence");const o=U("settings");let r=M(e.getters["entities/getLocations"]),i=M(e.getters["entities/getTags"]),c=M("");function u(P){c.value=P.toLowerCase()}let g=B(()=>c.value?i.value.filter(P=>P.name.toLowerCase().includes(c.value)):i.value),p=M(null),f=M({name:B({get:()=>e.getters["event/getName"],set:P=>{e.commit("event/setName",P)}}),locationId:B({get:()=>e.getters["event/getLocationId"],set:P=>{e.commit("event/setLocationId",P)}}),customLocation:B({get:()=>e.getters["event/getCustomLocation"],set:P=>{e.commit("event/setCustomLocation",P)}}),organizerId:B({get:()=>e.getters["event/getOrganizerId"],set:P=>{e.commit("event/setOrganizerId",P)}}),zoomUserId:B({get:()=>e.getters["event/getZoomUserId"],set:P=>{e.commit("event/setZoomUserId",P)}}),tags:B({get:()=>e.getters["event/getTags"],set:P=>{e.commit("event/setTags",P)}}),notifyParticipants:B({get:()=>e.getters["event/getNotifyParticipants"],set:P=>{e.commit("event/setNotifyParticipants",P)}}),description:B({get:()=>e.getters["event/getDescription"],set:P=>{e.commit("event/setDescription",P||"")}})}),b=B(()=>f.value.organizerId!==null);function w(P){e.commit("event/setOrganizerId",P?e.getters["auth/getProfile"].id:null)}let D=B(()=>({name:[{required:!0,message:s.value.please_enter_name,trigger:["submit","change"]}]})),v=B(()=>{let P=e.getters["auth/getZoomUsers"];return P.length?P.map(S=>({value:S.id,label:`${S.first_name} ${S.last_name} (${S.email})`})):[]});return a({detailsFormRef:p}),(P,S)=>{const A=vt,d=Ml,_=st;return x(),Y(_,{ref_key:"detailsFormRef",ref:p,model:t(f),rules:t(D),class:"am-capei-def"},{default:I(()=>[$(A,{prop:"name",label:`${t(s).name}:`,class:"am-capei-def__item"},{default:I(()=>[$(ct,{modelValue:t(f).name,"onUpdate:modelValue":S[0]||(S[0]=y=>t(f).name=y),placeholder:t(s).enter_event_name},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),!t(l).isStarter&&t(r).length>1?(x(),Y(A,{key:0,label:`${t(s).event_select_address}:`,class:"am-capei-def__item"},{default:I(()=>[$(Je,{modelValue:t(f).locationId,"onUpdate:modelValue":S[1]||(S[1]=y=>t(f).locationId=y),placeholder:t(s).select},{default:I(()=>[(x(),Y(Ye,{key:0,value:0,label:t(s).event_custom_address},null,8,["label"])),(x(!0),F(ne,null,ve(t(r),y=>(x(),Y(Ye,{key:y.id,value:y.id,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0),t(f).locationId?N("",!0):(x(),Y(A,{key:1,label:`${t(s).event_custom_address}:`,class:"am-capei-def__item"},{default:I(()=>[$(ct,{modelValue:t(f).customLocation,"onUpdate:modelValue":S[2]||(S[2]=y=>t(f).customLocation=y)},null,8,["modelValue"])]),_:1},8,["label"])),t(o).zoom.enabled?(x(),Y(A,{key:2,label:`${t(s).zoom_user}:`,class:"am-capei-def__item"},{default:I(()=>[$(Je,{modelValue:t(f).zoomUserId,"onUpdate:modelValue":S[3]||(S[3]=y=>t(f).zoomUserId=y),clearable:"",placeholder:t(s).zoom_user_placeholder},{default:I(()=>[(x(!0),F(ne,null,ve(t(v),y=>(x(),Y(Ye,{key:y.value,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0),!t(l).isStarter&&(t(o).googleCalendar.enabled||t(o).outlookCalendar.enabled||t(o).appleCalendar)&&(t(e).getters["employee/getGoogleCalendarId"]||t(e).getters["employee/getOutlookCalendarId"]||t(e).getters["employee/getAppleCalendarId"])?(x(),Y(A,{key:3,class:"am-capei-def__item am-capei-def__item-tool"},{default:I(()=>[$(rt,{modelValue:t(b),"onUpdate:modelValue":S[4]||(S[4]=y=>Ae(b)?b.value=y:b=y),disabled:t(f).organizerId&&t(f).organizerId!==t(e).getters["auth/getProfile"].id,"active-text":t(s).event_organizer,"aria-label":t(s).event_organizer,onChange:w},null,8,["modelValue","disabled","active-text","aria-label"]),$(d,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(s).event_organizer_tooltip},null,8,n1)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1})):N("",!0),$(A,{label:`${t(s).event_tags}:`,class:"am-capei-def__item"},{default:I(()=>[$(Je,{modelValue:t(f).tags,"onUpdate:modelValue":S[5]||(S[5]=y=>t(f).tags=y),clearable:"",filterable:"",multiple:"","allow-create":!0,placeholder:t(s).event_tags_select_or_create,"filter-method":u},{default:I(()=>[(x(!0),F(ne,null,ve(t(g),(y,E)=>(x(),Y(Ye,{key:E,value:y.name,label:y.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),$(A,{class:"am-capei-def__item am-capei-def__item-tool"},{default:I(()=>[$(rt,{modelValue:t(f).notifyParticipants,"onUpdate:modelValue":S[6]||(S[6]=y=>t(f).notifyParticipants=y),"active-text":t(s).notify_attendees,"aria-label":t(s).notify_attendees},null,8,["modelValue","active-text","aria-label"]),$(d,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(s).notify_attendees_tooltip},null,8,o1)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1}),$(A,{prop:"description",label:t(s).description_colon,class:"am-capei-def__item"},{default:I(()=>[$(pi,{modelValue:t(f).description,"onUpdate:modelValue":S[7]||(S[7]=y=>t(f).description=y),mode:t(e).getters["event/getDescriptionMode"],onSetMode:S[8]||(S[8]=y=>t(e).commit("event/setDescriptionMode",y))},null,8,["modelValue","mode"])]),_:1},8,["label"])]),_:1},8,["model","rules"])}}};const i1={class:"am-capei-per__segment"},c1={key:0,class:"am-capei-per__delete"},x1={class:"am-capei-per__segment"},u1=["innerHTML"],d1={class:"am-capei-per__segment"},m1=["innerHTML"],p1={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=B(()=>ot(e.pageWidth));const l=Ne(),o=U("settings");let r=U("amLabels"),i=U("localLanguage"),c=M(at());function u(A){let d=v.value.periods.map(_=>_.endDate).filter(_=>_ instanceof Date&&!isNaN(_));return at(A)<c.value||at(A)>at(new Date(Math.max(...d)))}function g(A,d){const _=at(A)<c.value;return(d?at(A)>at(d):!1)||_}function p(A,d){return d?at(A)<at(d):at(A)<c.value}function f(){let A=!0;D.value.validate(d=>{d||(A=!1)}),A&&v.value.periods.push({eventId:l.getters["event/getId"]?l.getters["event/getId"]:null,startDate:null,endDate:null,startTime:null,endTime:null})}function b(A){l.getters["event/getId"]&&v.value.periods[A]?.id&&v.value.periods[A].id&&v.value.periods.forEach((d,_)=>{_!==A&&!d?.id&&(v.value.periods[_].id=v.value.periods[A].id,v.value.periods[_].eventId=v.value.periods[A].eventId,v.value.periods[_].appleCalendarEventId=v.value.periods[A].appleCalendarEventId,v.value.periods[_].googleCalendarEventId=v.value.periods[A].googleCalendarEventId,v.value.periods[_].googleMeetUrl=v.value.periods[A].googleMeetUrl,v.value.periods[_].outlookCalendarEventId=v.value.periods[A].outlookCalendarEventId,v.value.periods[_].microsoftTeamsUrl=v.value.periods[A].microsoftTeamsUrl)}),v.value.periods.splice(A,1)}let w=B(()=>l.getters["event/getRecurringEnabled"]),D=M(null),v=M({periods:B({get:()=>l.getters["event/getPeriods"],set:A=>{l.commit("event/setPeriods",A)}}),bookingOpensDisabled:B({get:()=>l.getters["event/getBookingOpensDisabled"],set:A=>{l.commit("event/setBookingOpensDisabled",A)}}),bookingOpensDate:B({get:()=>l.getters["event/getBookingOpensDate"],set:A=>{l.commit("event/setBookingOpensDate",A)}}),bookingOpensTime:B({get:()=>l.getters["event/getBookingOpensTime"],set:A=>{l.commit("event/setBookingOpensTime",A)}}),bookingOpensRec:B({get:()=>l.getters["event/getBookingOpensRec"],set:A=>{l.commit("event/setBookingOpensRec",A)}}),bookingClosesDisabled:B({get:()=>l.getters["event/getBookingClosesDisabled"],set:A=>{l.commit("event/setBookingClosesDisabled",A)}}),bookingClosesDate:B({get:()=>l.getters["event/getBookingClosesDate"],set:A=>{l.commit("event/setBookingClosesDate",A)}}),bookingClosesTime:B({get:()=>l.getters["event/getBookingClosesTime"],set:A=>{l.commit("event/setBookingClosesTime",A)}}),bookingClosesRec:B({get:()=>l.getters["event/getBookingClosesRec"],set:A=>{l.commit("event/setBookingClosesRec",A)}})});a({periodsFormRef:D});let P=U("amColors"),S=B(()=>({"--am-c-capei-per-text":P.value.colorMainText,"--am-c-capei-per-text-op03":Q(P.value.colorMainText,.03),"--am-c-capei-per-inp-bgr-op03":Q(P.value.colorInpBgr,.03)}));return(A,d)=>{const _=vt,y=Ml,E=st;return x(),Y(E,{ref_key:"periodsFormRef",ref:D,model:t(v),"label-position":"top",class:"am-capei-per",style:Ce(t(S))},{default:I(()=>[m("div",i1,[(x(!0),F(ne,null,ve(t(v).periods,(C,L)=>(x(),F(ne,{key:L},[$(_,{prop:"periods."+L+".startDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},label:`${t(r).start_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(Ht,{modelValue:C.startDate,"onUpdate:modelValue":V=>C.startDate=V,format:t(Wt)(),lang:t(i),"disabled-date":V=>g(V,C.endDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),$(_,{prop:"periods."+L+".endDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},label:`${t(r).end_date}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(Ht,{modelValue:C.endDate,"onUpdate:modelValue":V=>C.endDate=V,format:t(Wt)(),lang:t(i),"disabled-date":V=>p(V,C.startDate)},null,8,["modelValue","onUpdate:modelValue","format","lang","disabled-date"])]),_:2},1032,["prop","rules","label","class"]),$(_,{prop:"periods."+L+".startTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},label:`${t(r).start_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(ka,{modelValue:C.startTime,"onUpdate:modelValue":V=>C.startTime=V,start:"00:00",end:t(Mt)(t(Ut)("24:00")-t(o).general.timeSlotLength),"min-time":null,"max-time":C.endTime,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","onUpdate:modelValue","end","max-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),$(_,{prop:"periods."+L+".endTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},label:`${t(r).end_time}:`,class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(ka,{modelValue:C.endTime,"onUpdate:modelValue":V=>C.endTime=V,disabled:!C.startTime,start:"00:00",end:"24:00","min-time":C.startTime,"max-time":null,step:t(Mt)(t(o).general.timeSlotLength),clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","onUpdate:modelValue","disabled","min-time","step","placeholder"])]),_:2},1032,["prop","rules","label","class"]),t(v).periods.length>1?(x(),F("div",c1,[$(Fe,{size:"default",category:"danger",onClick:V=>b(L)},{default:I(()=>[ue(k(t(r).delete_period),1)]),_:2},1032,["onClick"])])):N("",!0)],64))),128)),$(Fe,{size:"default",onClick:d[0]||(d[0]=C=>f())},{default:I(()=>[ue(k(t(r).add_period),1)]),_:1})]),m("div",x1,[$(ht,{modelValue:t(v).bookingOpensDisabled,"onUpdate:modelValue":d[1]||(d[1]=C=>t(v).bookingOpensDisabled=C),label:t(r).event_booking_opens_now},null,8,["modelValue","label"]),t(v).bookingOpensDisabled?N("",!0):(x(),F(ne,{key:0},[$(_,{label:`${t(r).date}:`,prop:"bookingOpensDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(Ht,{modelValue:t(v).bookingOpensDate,"onUpdate:modelValue":d[2]||(d[2]=C=>t(v).bookingOpensDate=C),format:t(Wt)(),lang:t(i),"disabled-date":u},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),$(_,{label:`${t(r).time}:`,prop:"bookingOpensTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(ka,{modelValue:t(v).bookingOpensTime,"onUpdate:modelValue":d[3]||(d[3]=C=>t(v).bookingOpensTime=C),placeholder:t(r).select_time,step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1},null,8,["modelValue","placeholder","step"])]),_:1},8,["label","rules","class"])],64)),t(w)?(x(),Y(ht,{key:1,modelValue:t(v).bookingOpensRec,"onUpdate:modelValue":d[4]||(d[4]=C=>t(v).bookingOpensRec=C)},{default:I(()=>[ue(k(t(r).apply_to_all)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(r).event_booking_closes_apply},null,8,u1)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):N("",!0)]),m("div",d1,[$(ht,{modelValue:t(v).bookingClosesDisabled,"onUpdate:modelValue":d[5]||(d[5]=C=>t(v).bookingClosesDisabled=C),label:t(r).event_booking_closes_after},null,8,["modelValue","label"]),t(v).bookingClosesDisabled?N("",!0):(x(),F(ne,{key:0},[$(_,{label:`${t(r).date}:`,prop:"bookingClosesDate",rules:{required:!0,message:t(r).select_date_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(Ht,{modelValue:t(v).bookingClosesDate,"onUpdate:modelValue":d[6]||(d[6]=C=>t(v).bookingClosesDate=C),format:t(Wt)(),lang:t(i),"disabled-date":u},null,8,["modelValue","format","lang"])]),_:1},8,["label","rules","class"]),$(_,{label:`${t(r).time}:`,prop:"bookingClosesTime",rules:{required:!0,message:t(r).select_time_warning,trigger:["blur","change"]},class:j(["am-capei-per__item am-w-50",t(s)])},{default:I(()=>[$(ka,{modelValue:t(v).bookingClosesTime,"onUpdate:modelValue":d[7]||(d[7]=C=>t(v).bookingClosesTime=C),step:t(Mt)(t(o).general.timeSlotLength),start:"00:00",end:"24:00",clearable:!1,placeholder:t(r).select_time},null,8,["modelValue","step","placeholder"])]),_:1},8,["label","rules","class"])],64)),t(w)?(x(),Y(ht,{key:1,modelValue:t(v).bookingClosesRec,"onUpdate:modelValue":d[8]||(d[8]=C=>t(v).bookingClosesRec=C)},{default:I(()=>[ue(k(t(r).apply_to_all)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(r).event_booking_closes_apply},null,8,m1)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),_:1},8,["modelValue"])):N("",!0)])]),_:1},8,["model","style"])}}};const f1={class:"am-capei-recurr__header"},g1={class:"am-capei-recurr__header-text"},h1={props:{pageWidth:{type:Number,default:0},recurringUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=B(()=>ot(e.pageWidth));const l=Ne();let o=U("amLabels"),r=U("localLanguage"),i=M([{label:o.value.day,value:"daily"},{label:o.value.week,value:"weekly"},{label:o.value.month,value:"monthly"},{label:o.value.year,value:"yearly"}]),c=M([{label:o.value.recurring_date_first,value:"first"},{label:o.value.recurring_date_second,value:"second"},{label:o.value.recurring_date_third,value:"third"},{label:o.value.recurring_date_fourth,value:"fourth"},{label:o.value.recurring_date_fifth,value:"fifth"},{label:o.value.recurring_date_last,value:"last"}]),u=[{label:o.value.weekday_monday,value:"monday"},{label:o.value.weekday_tuesday,value:"tuesday"},{label:o.value.weekday_wednesday,value:"wednesday"},{label:o.value.weekday_thursday,value:"thursday"},{label:o.value.weekday_friday,value:"friday"},{label:o.value.weekday_saturday,value:"saturday"},{label:o.value.weekday_sunday,value:"sunday"}],g=M(null),p=M({enabled:B({get:()=>l.getters["event/getRecurringEnabled"],set:S=>{l.commit("event/setRecurringEnabled",S)}}),cycle:B({get:()=>l.getters["event/getRecurringCycle"],set:S=>{l.commit("event/setRecurringCycle",S)}}),cycleInterval:B({get:()=>l.getters["event/getRecurringCycleInterval"],set:S=>{l.commit("event/setRecurringCycleInterval",S)}}),monthDate:B({get:()=>l.getters["event/getRecurringMonthDate"],set:S=>{l.commit("event/setRecurringMonthDate",S)}}),monthlyOnDay:B({get:()=>l.getters["event/getRecurringMonthlyOnDay"],set:S=>{l.commit("event/setRecurringMonthlyOnDay",S)}}),monthlyOnRepeat:B({get:()=>l.getters["event/getRecurringMonthlyOnRepeat"],set:S=>{l.commit("event/setRecurringMonthlyOnRepeat",S)}}),monthlyRepeat:B({get:()=>l.getters["event/getRecurringMonthlyRepeat"],set:S=>{l.commit("event/setRecurringMonthlyRepeat",S)}}),order:B({get:()=>l.getters["event/getRecurringOrder"],set:S=>{l.commit("event/setRecurringOrder",S)}}),until:B({get:()=>l.getters["event/getRecurringUntil"],set:S=>{l.commit("event/setRecurringUntil",S)}})}),f=B(()=>({cycle:[{required:!0,message:o.value.select_cycle_warning,trigger:["submit","change"]}],until:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}],monthDate:[{required:!0,message:o.value.select_date_warning,trigger:["submit","change"]}]})),b=B(()=>l.getters["event/getPeriods"]),w=B(()=>e.recurringUntil!==null?e.recurringUntil:b.value.length?at(b.value[0].startDate,"YYYY-MM-DD"):at());function D(S){return at(S)<=w.value}a({recurringFormRef:g});let v=U("amColors"),P=B(()=>({"--am-c-capei-recurr-text":v.value.colorMainText,"--am-c-capei-recurr-text-op03":Q(v.value.colorMainText,.03),"--am-c-capei-recurr-inp-bgr-op03":Q(v.value.colorInpBgr,.03),"--am-c-capei-recurr-bgr-op03":Q(v.value.colorMainText,.03)}));return(S,A)=>{const d=vt,_=st;return x(),F("div",{class:"am-capei-recurr",style:Ce(t(P))},[m("div",f1,[m("div",g1,k(t(o).event_recurring_check),1),$(rt,{modelValue:t(p).enabled,"onUpdate:modelValue":A[0]||(A[0]=y=>t(p).enabled=y),disabled:!t(b).length||!t(b)[0].startDate||!t(b)[0].endDate,"aria-label":t(o).event_recurring_check},null,8,["modelValue","disabled","aria-label"])]),t(p).enabled&&t(b).length&&t(b)[0].startDate&&t(b)[0].endDate?(x(),Y(_,{key:0,ref_key:"recurringFormRef",ref:g,rules:t(f),model:t(p),"label-position":"top",class:"am-capei-recurr__form"},{default:I(()=>[$(d,{label:`${t(o).repeat_every}`,class:j(["am-capei-recurr__form-item am-ws-150",t(s)])},{default:I(()=>[$(Ct,{modelValue:t(p).cycleInterval,"onUpdate:modelValue":A[1]||(A[1]=y=>t(p).cycleInterval=y),min:1,disabled:t(e).recurringUntil!==null},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),$(d,{prop:"cycle",class:j(["am-capei-recurr__form-item am-inline-ws-150 am-align-end",t(s)])},{default:I(()=>[$(Je,{modelValue:t(p).cycle,"onUpdate:modelValue":A[2]||(A[2]=y=>t(p).cycle=y),clearable:"",placeholder:t(o).select_repeat_period,disabled:t(e).recurringUntil!==null},{default:I(()=>[(x(!0),F(ne,null,ve(t(i),(y,E)=>(x(),Y(Ye,{key:E,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["class"]),t(p).cycle==="monthly"?(x(),Y(Vl,{key:0,modelValue:t(p).monthlyRepeat,"onUpdate:modelValue":A[6]||(A[6]=y=>t(p).monthlyRepeat=y),class:"am-w-100",disabled:t(e).recurringUntil!==null},{default:I(()=>[$(d,{class:"am-capei-recurr__form-item"},{default:I(()=>[$(La,{value:"each"},{default:I(()=>[ue(k(t(o).recurrence_each),1)]),_:1})]),_:1}),$(d,{prop:"monthDate",class:"am-capei-recurr__form-item"},{default:I(()=>[$(Ht,{modelValue:t(p).monthDate,"onUpdate:modelValue":A[3]||(A[3]=y=>t(p).monthDate=y),disabled:t(p).monthlyRepeat==="on"||t(e).recurringUntil!==null,format:t(Wt)(),lang:t(r),placeholder:t(o).select_date},null,8,["modelValue","disabled","format","lang","placeholder"])]),_:1}),$(d,{prop:"on",class:"am-capei-recurr__form-item"},{default:I(()=>[$(La,{value:"on"},{default:I(()=>[ue(k(t(o).recurrence_on),1)]),_:1})]),_:1}),$(d,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:I(()=>[$(Je,{modelValue:t(p).monthlyOnRepeat,"onUpdate:modelValue":A[4]||(A[4]=y=>t(p).monthlyOnRepeat=y),disabled:t(p).monthlyRepeat==="each"||t(e).recurringUntil!==null,placeholder:t(o).select_repeat_period},{default:I(()=>[(x(!0),F(ne,null,ve(t(c),(y,E)=>(x(),Y(Ye,{key:E,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"]),$(d,{class:j(["am-capei-recurr__form-item am-w-50",t(s)])},{default:I(()=>[$(Je,{modelValue:t(p).monthlyOnDay,"onUpdate:modelValue":A[5]||(A[5]=y=>t(p).monthlyOnDay=y),disabled:t(p).monthlyRepeat==="each",placeholder:t(o).select_repeat_period},{default:I(()=>[(x(!0),F(ne,null,ve(t(u),(y,E)=>(x(),Y(Ye,{key:E,value:y.value,label:y.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder"])]),_:1},8,["class"])]),_:1},8,["modelValue","disabled"])):N("",!0),$(d,{label:t(o).event_recurring_until,prop:"until",class:"am-capei-recurr__form-item"},{default:I(()=>[$(Ht,{modelValue:t(p).until,"onUpdate:modelValue":A[7]||(A[7]=y=>t(p).until=y),format:t(Wt)(),lang:t(r),"disabled-date":D,placeholder:t(o).select_date},null,8,["modelValue","format","lang","placeholder"])]),_:1},8,["label"])]),_:1},8,["rules","model"])):N("",!0)],4)}}};const v1={class:"am-capei-price__heading"},E1={key:0,class:"am-capei-price__segment"},_1={key:0,class:"am-capei-price__block"},C1={class:"am-capei-price__block-header"},y1={class:"am-capei-price__block-header__text"},b1={key:1,class:"am-capei-price__segment"},B1={key:1,class:"am-capei-price__block"},A1={class:"am-capei-price__block-header"},F1={class:"am-capei-price__block-header__text"},D1={key:0,class:"am-capei-price__block-heading am-pl-32 am-pr-44"},k1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-40"},w1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},P1={class:"am-capei-price__block-heading__item am-custom-pricing am-w-30"},T1={key:1,class:"am-separator am-order-6"},L1=m("div",{class:"am-separator"},null,-1),S1={class:"am-capei-price__part"},I1=m("div",{class:"am-separator"},null,-1),$1={class:"am-capei-price__block-header"},N1={class:"am-capei-price__block-header__text"},O1={key:1,class:"am-capei-price__block-segment"},M1={key:0,class:"am-capei-price__block-heading"},V1={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},R1={class:"am-capei-price__block-heading__item am-custom-date am-w-50"},q1=m("div",{class:"am-separator"},null,-1),U1={key:2,class:"am-capei-price__block"},z1={class:"am-capei-price__block-header"},j1={class:"am-capei-price__block-header__text"},Y1={key:0,class:"am-capei-price__part"},W1={key:3,class:"am-capei-price__block"},H1={class:"am-capei-price__block-header"},Z1={class:"am-capei-price__block-header__text"},G1={key:0,class:"am-capei-price__part"},J1={props:{pageWidth:{type:Number,default:0}},setup(n,{expose:a}){const e=n;let s=B(()=>ot(e.pageWidth)),l=Ne(),o=U("amLabels"),r=U("localLanguage"),i=U("licence"),c={components:{IconComponent:Ge},template:'<IconComponent icon="plus"/>'};function u(E){let C=ye(E),L=!1;if(d.value.customTicketsRanges.forEach(q=>{!L&&q.range[0]&&q.range[1]&&(L=ye(q.range[0])<=C&&ye(q.range[1])>=C)}),L)return!0;let V=l.getters["event/getBookingOpensDisabled"]?ye():ye(l.getters["event/getBookingOpensDate"]),T=l.getters["event/getBookingClosesDisabled"]?l.getters["event/getPeriods"][0].startDate?ye(l.getters["event/getPeriods"][0].startDate,"YYYY-MM-DD"):ye():ye(l.getters["event/getBookingClosesDate"]);return C<V||C>T}let g=B(()=>l.getters["event/getEvent"]),p=B(()=>d.value.customPricing?d.value.customTickets.reduce((E,C)=>E+C.spots,0)>1:d.value.maxCapacity>1),f=B(()=>d.value.customPricing?d.value.customTickets.reduce((E,C)=>E+C.spots,0):0),b=B(()=>d.value.customPricing&&d.value.maxCustomCapacityEnabled?d.value.maxCustomCapacity:d.value.customPricing?f.value:d.value.maxCapacity);function w(){d.value.customPricing&&d.value.customTickets.length===0&&v()}function D(E){d.value.customTickets.splice(E,1)}function v(){d.value.customTickets.push({enabled:!0,name:"",spots:1,waitingListSpots:0,price:0}),d.value.customTicketsRanges.forEach(E=>{E.tickets.push(new Object({price:0}))})}function P(E){d.value.customTicketsRanges.splice(E,1)}function S(){d.value.customTicketsRanges.push({range:["",""],tickets:d.value.customTickets.map(E=>new Object({price:E.price}))})}const A=M(null);let d=M({price:B({get:()=>l.getters["event/getPrice"],set:E=>{l.commit("event/setPrice",E)}}),maxCapacity:B({get:()=>l.getters["event/getMaxCapacity"],set:E=>{l.commit("event/setMaxCapacity",E)}}),bringingAnyone:B({get:()=>l.getters["event/getBringingAnyone"],set:E=>{l.commit("event/setBringingAnyone",E)}}),aggregatedPrice:B({get:()=>l.getters["event/getAggregatedPrice"],set:E=>{l.commit("event/setAggregatedPrice",E)}}),bookMultipleTimes:B({get:()=>l.getters["event/getBookMultipleTimes"],set:E=>{l.commit("event/setBookMultipleTimes",E)}}),depositEnabled:B({get:()=>l.getters["event/getDepositEnabled"],set:E=>{l.commit("event/setDepositEnabled",E)}}),deposit:B({get:()=>l.getters["event/getDeposit"],set:E=>{l.commit("event/setDeposit",E)}}),depositPayment:B({get:()=>l.getters["event/getDepositPayment"],set:E=>{l.commit("event/setDepositPayment",E)}}),depositPerPerson:B({get:()=>l.getters["event/getDepositPerPerson"],set:E=>{l.commit("event/setDepositPerPerson",E)}}),fullPayment:B({get:()=>l.getters["event/getFullPayment"],set:E=>{l.commit("event/setFullPayment",E)}}),customPricing:B({get:()=>l.getters["event/getCustomPricing"],set:E=>{l.commit("event/setCustomPricing",E)}}),customTickets:B({get:()=>l.getters["event/getCustomTickets"],set:E=>{l.commit("event/setCustomTickets",E)}}),customTicketsRangesEnabled:B({get:()=>l.getters["event/getCustomTicketsRangesEnabled"],set:E=>{l.commit("event/setCustomTicketsRangesEnabled",E)}}),customTicketsRanges:B({get:()=>l.getters["event/getCustomTicketsRanges"],set:E=>{l.commit("event/setCustomTicketsRanges",E)}}),maxCustomCapacityEnabled:B({get:()=>l.getters["event/getMaxCustomCapacityEnabled"],set:E=>{l.commit("event/setMaxCustomCapacityEnabled",E)}}),maxCustomCapacity:B({get:()=>l.getters["event/getMaxCustomCapacity"],set:E=>{l.commit("event/setMaxCustomCapacity",E)}}),closeAfterMinEnabled:B({get:()=>l.getters["event/getCloseAfterMinEnabled"],set:E=>{l.commit("event/setCloseAfterMinEnabled",E)}}),closeAfterMin:B({get:()=>l.getters["event/getCloseAfterMin"],set:E=>{l.commit("event/setCloseAfterMin",E)}}),closeAfterMinBookings:B({get:()=>l.getters["event/getCloseAfterMinBookings"],set:E=>{l.commit("event/setCloseAfterMinBookings",E)}}),maxExtraPeopleEnabled:B({get:()=>l.getters["event/getMaxExtraPeopleEnabled"],set:E=>{l.commit("event/setMaxExtraPeopleEnabled",E)}}),maxExtraPeople:B({get:()=>l.getters["event/getMaxExtraPeople"],set:E=>{l.commit("event/setMaxExtraPeople",E)}})});a({pricingFormRef:A});let _=U("amColors"),y=B(()=>({"--am-c-capei-price-text":_.value.colorMainText,"--am-c-capei-price-text-op03":Q(_.value.colorMainText,.03),"--am-c-capei-price-inp-bgr-op03":Q(_.value.colorInpBgr,.03)}));return(E,C)=>{const L=vt,V=st;return x(),Y(V,{ref_key:"pricingFormRef",ref:A,model:t(d),style:Ce(t(y)),class:"am-capei-price"},{default:I(()=>[m("div",v1,[$(L,{label:`${t(o).price}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:I(()=>[$(ct,{modelValue:t(d).price,"onUpdate:modelValue":C[0]||(C[0]=T=>t(d).price=T),disabled:t(d).customPricing,"is-money":!0},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),$(L,{label:`${t(o).event_max_capacity}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:I(()=>[$(Ct,{modelValue:t(d).maxCapacity,"onUpdate:modelValue":C[1]||(C[1]=T=>t(d).maxCapacity=T),disabled:t(d).customPricing,min:1},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]),t(p)?(x(),F("div",E1,[$(ht,{modelValue:t(d).bringingAnyone,"onUpdate:modelValue":C[2]||(C[2]=T=>t(d).bringingAnyone=T),label:t(o).event_bringing_anyone},null,8,["modelValue","label"]),t(d).bringingAnyone?(x(),Y(ht,{key:0,modelValue:t(d).aggregatedPrice,"onUpdate:modelValue":C[3]||(C[3]=T=>t(d).aggregatedPrice=T),label:t(o).event_aggregated_price},null,8,["modelValue","label"])):N("",!0),$(ht,{modelValue:t(d).bookMultipleTimes,"onUpdate:modelValue":C[4]||(C[4]=T=>t(d).bookMultipleTimes=T),label:t(o).event_book_more_than_once},null,8,["modelValue","label"])])):N("",!0)]),t(i).isStarter?N("",!0):(x(),F("div",_1,[m("div",C1,[m("div",y1,k(t(o).deposit_enabled),1),$(rt,{modelValue:t(d).depositEnabled,"onUpdate:modelValue":C[5]||(C[5]=T=>t(d).depositEnabled=T),"aria-label":t(o).deposit_enabled},null,8,["modelValue","aria-label"])]),t(d).depositEnabled?(x(),F(ne,{key:0},[$(L,{label:`${t(o).deposit_payment}:`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:I(()=>[$(Je,{modelValue:t(d).depositPayment,"onUpdate:modelValue":C[6]||(C[6]=T=>t(d).depositPayment=T)},{default:I(()=>[$(Ye,{value:"percentage",label:t(o).amount_percentage},null,8,["label"]),$(Ye,{value:"fixed",label:t(o).amount_fixed},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["label","class"]),t(d).depositPayment==="fixed"?(x(),Y(L,{key:0,label:`${t(o).amount} (${t(i0)()}):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:I(()=>[$(ct,{modelValue:t(d).deposit,"onUpdate:modelValue":C[7]||(C[7]=T=>t(d).deposit=T),"is-money":!0},null,8,["modelValue"])]),_:1},8,["label","class"])):N("",!0),t(d).depositPayment==="percentage"?(x(),Y(L,{key:1,label:`${t(o).amount} (%):`,class:j(["am-capei-price__item am-w-50",t(s)])},{default:I(()=>[$(Ct,{modelValue:t(d).deposit,"onUpdate:modelValue":C[8]||(C[8]=T=>t(d).deposit=T),min:1,max:100},null,8,["modelValue"])]),_:1},8,["label","class"])):N("",!0)],64)):N("",!0),t(d).depositEnabled?(x(),F("div",b1,[$(ht,{modelValue:t(d).depositPerPerson,"onUpdate:modelValue":C[9]||(C[9]=T=>t(d).depositPerPerson=T),label:t(o).deposit_per_person},null,8,["modelValue","label"]),$(ht,{modelValue:t(d).fullPayment,"onUpdate:modelValue":C[10]||(C[10]=T=>t(d).fullPayment=T),label:t(o).allow_total_event_amount},null,8,["modelValue","label"])])):N("",!0)])),t(i).isStarter?N("",!0):(x(),F("div",B1,[m("div",A1,[m("div",F1,k(t(o).custom_pricing_enabled),1),$(rt,{modelValue:t(d).customPricing,"onUpdate:modelValue":C[11]||(C[11]=T=>t(d).customPricing=T),disabled:t(g).bookings&&t(g).bookings.length>0,"aria-label":t(o).custom_pricing_enabled,onChange:w},null,8,["modelValue","disabled","aria-label"])]),t(d).customPricing?(x(),F(ne,{key:0},[e.pageWidth>545?(x(),F("div",D1,[m("div",k1,k(t(o).name)+": ",1),m("div",w1,k(t(o).price)+": ",1),m("div",P1,k(t(o).spots)+": ",1)])):N("",!0),(x(!0),F(ne,null,ve(t(d).customTickets,(T,q)=>(x(),F("div",{key:q,class:"am-capei-price__block-segment am-custom-76"},[m("div",{class:j(["am-capei-price__block-inner am-ws-16",{"am-mt-22":e.pageWidth<546}])},[$(L,null,{default:I(()=>[$(ht,{modelValue:T.enabled,"onUpdate:modelValue":H=>T.enabled=H},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-40":e.pageWidth>545},{"am-we-100":e.pageWidth<546}]])},[$(L,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:I(()=>[$(ct,{modelValue:T.name,"onUpdate:modelValue":H=>T.name=H,disabled:!T.enabled,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-2":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[$(L,{label:e.pageWidth<546?t(o).price:""},{default:I(()=>[$(ct,{modelValue:T.price,"onUpdate:modelValue":H=>T.price=H,disabled:!T.enabled,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-we-30":e.pageWidth>545},{"am-w-50 am-order-3":e.pageWidth<546},{"am-w-100":e.pageWidth<401}]])},[$(L,{label:e.pageWidth<546?`${t(o).spots}:`:""},{default:I(()=>[$(Ct,{modelValue:T.spots,"onUpdate:modelValue":H=>T.spots=H,min:1,disabled:!T.enabled||t(d).maxCustomCapacityEnabled,"aria-label":t(o).spots},null,8,["modelValue","onUpdate:modelValue","disabled","aria-label"])]),_:2},1032,["label"])],2),!T.booked&&t(d).customTickets.length>1?(x(),F("div",{key:0,class:j(["am-capei-price__block-delete",{"am-order-1 am-mt-22":e.pageWidth<546}])},[$(Fe,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ge},template:"<IconComponent icon='bucket'/>"},onClick:H=>D(q)},null,8,["icon","onClick"])],2)):N("",!0),e.pageWidth<546?(x(),F("div",T1)):N("",!0)]))),128)),$(Fe,{icon:t(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:v},{default:I(()=>[ue(k(t(o).add_ticket_category),1)]),_:1},8,["icon"]),L1,m("div",S1,[m("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[$(ht,{modelValue:t(d).maxCustomCapacityEnabled,"onUpdate:modelValue":C[12]||(C[12]=T=>t(d).maxCustomCapacityEnabled=T),label:`${t(o).event_max_capacity}:`},null,8,["modelValue","label"])],2),m("div",{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},[$(Ct,{modelValue:t(d).maxCustomCapacity,"onUpdate:modelValue":C[13]||(C[13]=T=>t(d).maxCustomCapacity=T),min:1,disabled:!t(d).maxCustomCapacityEnabled},null,8,["modelValue","disabled"])],2)]),I1,m("div",$1,[m("div",N1,k(t(o).pricing_by_date_enabled),1),$(rt,{modelValue:t(d).customTicketsRangesEnabled,"onUpdate:modelValue":C[14]||(C[14]=T=>t(d).customTicketsRangesEnabled=T),"aria-label":t(o).pricing_by_date_enabled},null,8,["modelValue","aria-label"])]),t(d).customTicketsRangesEnabled?(x(),F("div",O1,[(x(!0),F(ne,null,ve(t(d).customTicketsRanges,(T,q)=>(x(),F(ne,{key:q},[$(L,{label:`${t(o).event_date_range}:`,class:"am-capei-price__date-range"},{default:I(()=>[$(Ht,{modelValue:T.range,"onUpdate:modelValue":H=>T.range=H,type:"daterange",format:t(Wt)(),placeholder:"Pick a day",lang:t(r),"disabled-date":u,"start-placeholder":t(o).start_date,"end-placeholder":t(o).end_date},null,8,["modelValue","onUpdate:modelValue","format","lang","start-placeholder","end-placeholder"]),$(Fe,{category:"secondary",type:"plain",size:"mini","icon-only":!0,icon:{components:{IconComponent:Ge},template:"<IconComponent icon='bucket'/>"},"aria-label":t(o).delete,onClick:H=>P(q)},null,8,["icon","aria-label","onClick"])]),_:2},1032,["label"]),e.pageWidth>545?(x(),F("div",M1,[m("div",V1,k(t(o).name)+": ",1),m("div",R1,k(t(o).price)+": ",1)])):N("",!0),(x(!0),F(ne,null,ve(t(d).customTickets,(H,z)=>(x(),F(ne,{key:z},[m("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[$(L,{label:e.pageWidth<546?`${t(o).name}:`:""},{default:I(()=>[$(ct,{modelValue:H.name,"onUpdate:modelValue":X=>H.name=X,disabled:!0,"aria-label":t(o).name},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2),m("div",{class:j(["am-capei-price__block-inner",[{"am-w-50":e.pageWidth>545},{"am-w-100":e.pageWidth<546}]])},[$(L,{label:e.pageWidth<546?`${t(o).price}:`:""},{default:I(()=>[$(ct,{modelValue:T.tickets[z].price,"onUpdate:modelValue":X=>T.tickets[z].price=X,"is-money":!0,"aria-label":t(o).price},null,8,["modelValue","onUpdate:modelValue","aria-label"])]),_:2},1032,["label"])],2)],64))),128)),q1],64))),128)),$(Fe,{icon:t(c),prefix:"plus",size:"default",category:"primary",type:"filled",onClick:S},{default:I(()=>[ue(k(t(o).event_add_date_range),1)]),_:1},8,["icon"])])):N("",!0)],64)):N("",!0)])),t(d).maxCapacity>1||t(d).maxCustomCapacity>1||t(f)>1?(x(),F("div",U1,[m("div",z1,[m("div",j1,k(t(o).event_close_after_min),1),$(rt,{modelValue:t(d).closeAfterMinEnabled,"onUpdate:modelValue":C[15]||(C[15]=T=>t(d).closeAfterMinEnabled=T),"aria-label":t(o).event_close_after_min},null,8,["modelValue","aria-label"])]),t(d).closeAfterMinEnabled&&(t(d).maxCapacity>1||t(d).maxCustomCapacity>1||t(f)>1)?(x(),F("div",Y1,[$(Vl,{modelValue:t(d).closeAfterMinBookings,"onUpdate:modelValue":C[16]||(C[16]=T=>t(d).closeAfterMinBookings=T),class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:I(()=>[$(La,{value:!1},{default:I(()=>[ue(k(t(o).event_close_min_total),1)]),_:1}),$(La,{value:!0},{default:I(()=>[ue(k(t(o).event_close_min_bookings),1)]),_:1})]),_:1},8,["modelValue","class"]),$(L,{class:j(["am-capei-price__part-item",[{"am-w-100":e.pageWidth<546},{"am-w-50":e.pageWidth>545}]])},{default:I(()=>[$(Ct,{modelValue:t(d).closeAfterMin,"onUpdate:modelValue":C[17]||(C[17]=T=>t(d).closeAfterMin=T),min:1,max:t(b)},null,8,["modelValue","max"])]),_:1},8,["class"])])):N("",!0)])):N("",!0),t(d).maxCapacity>1||t(d).maxCustomCapacity>1||t(f)>1?(x(),F("div",W1,[m("div",H1,[m("div",Z1,k(t(o).limit_extra_people),1),$(rt,{modelValue:t(d).maxExtraPeopleEnabled,"onUpdate:modelValue":C[18]||(C[18]=T=>t(d).maxExtraPeopleEnabled=T),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(d).maxExtraPeopleEnabled&&(t(d).maxCapacity>1||t(d).maxCustomCapacity>1||t(f)>1)?(x(),F("div",G1,[$(L,{label:`${t(o).limit_extra_people_set}:`,class:"am-capei-price__part-item am-w-100"},{default:I(()=>[$(Ct,{modelValue:t(d).maxExtraPeople,"onUpdate:modelValue":C[19]||(C[19]=T=>t(d).maxExtraPeople=T),min:0,max:t(b)-1},null,8,["modelValue","max"])]),_:1},8,["label"])])):N("",!0)])):N("",!0)]),_:1},8,["model","style"])}}};const X1={class:"am-capei-custef__heading"},Q1={class:"am-capei-custef__colors"},K1=["onClick"],ev={key:0,class:"am-icon-check"},tv={setup(n){let a=Ne(),e=U("amLabels");const s=M(null);let l=M(1),o=M(["#1788FB","#4BBEC6","#FBC22D","#FA3C52","#D696B8","#689BCA","#26CC2B","#FD7E35","#E38587","#774DFB"]),r=M({color:B({get:()=>a.getters["event/getColor"],set:i=>{a.commit("event/setColor",i)}}),show:B({get:()=>a.getters["event/getShow"],set:i=>{a.commit("event/setShow",i)}})});return Ze(()=>{let i=a.getters["event/getColor"];o.value.filter(u=>u===i).length>0?l.value=1:l.value=2}),(i,c)=>{const u=vt,g=c0,p=st;return x(),Y(p,{ref_key:"customizeFormRef",ref:s,model:t(r),class:"am-capei-custef"},{default:I(()=>[m("div",X1,k(t(e).event_colors),1),$(Vl,{modelValue:t(l),"onUpdate:modelValue":c[2]||(c[2]=f=>Ae(l)?l.value=f:l=f)},{default:I(()=>[$(u,{class:"am-capei-custef__item"},{default:I(()=>[$(La,{value:1},{default:I(()=>[ue(k(t(e).event_colors_preset)+": ",1)]),_:1}),m("div",Q1,[(x(!0),F(ne,null,ve(t(o),f=>(x(),F("div",{key:f,class:j(["am-capei-custef__colors-item",{"am-disabled":t(l)===2}]),onClick:b=>t(a).commit("event/setColor",f)},[m("div",{class:"am-capei-custef__colors-item__inner",style:Ce({backgroundColor:f})},[f===t(r).color?(x(),F("span",ev)):N("",!0)],4)],10,K1))),128))])]),_:1}),$(u,{class:"am-capei-custef__item"},{default:I(()=>[$(La,{value:2},{default:I(()=>[ue(k(t(e).event_colors_custom)+": ",1)]),_:1}),$(g,{modelValue:t(r).color,"onUpdate:modelValue":c[0]||(c[0]=f=>t(r).color=f),disabled:t(l)===1,"aria-label":t(e).event_colors_custom},null,8,["modelValue","disabled","aria-label"])]),_:1}),$(u,{class:"am-capei-custef__item"},{default:I(()=>[$(ht,{modelValue:t(r).show,"onUpdate:modelValue":c[1]||(c[1]=f=>t(r).show=f),label:t(e).event_show_on_site},null,8,["modelValue","label"])]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model"])}}};const av={class:"am-capei-waiting__header"},sv={class:"am-capei-waiting__header-text"},lv={class:"am-capei-waiting__header"},nv={class:"am-capei-waiting__header-text"},ov={props:{pageWidth:{type:Number,default:0},waitingListUntil:{type:Object,default:null}},setup(n,{expose:a}){const e=n;let s=B(()=>ot(e.pageWidth));const l=Ne();let o=U("amLabels"),r=M(null),i=M({enabled:B({get:()=>l.getters["event/getWaitingListEnabled"],set:b=>{l.commit("event/setWaitingListEnabled",b)}}),maxCapacity:B({get:()=>l.getters["event/getWaitingListMaxCapacity"],set:b=>{l.commit("event/setWaitingListMaxCapacity",b)}}),maxExtraPeopleEnabled:B({get:()=>l.getters["event/getWaitingListMaxExtraPeopleEnabled"],set:b=>{l.commit("event/setWaitingListMaxExtraPeopleEnabled",b)}}),maxExtraPeople:B({get:()=>l.getters["event/getWaitingListMaxExtraPeople"],set:b=>{l.commit("event/setWaitingListMaxExtraPeople",b)}})}),c=B(()=>l.getters["event/getCustomTickets"]),u=B(()=>l.getters["event/getCustomPricing"]),g=B(()=>l.getters["event/getMaxCustomCapacityEnabled"]);a({waitingListFormRef:r});let p=U("amColors"),f=B(()=>({"--am-c-capei-waiting-text":p.value.colorMainText,"--am-c-capei-waiting-text-op03":Q(p.value.colorMainText,.03),"--am-c-capei-waiting-inp-bgr-op03":Q(p.value.colorInpBgr,.03),"--am-c-capei-waiting-bgr-op05":Q(p.value.colorPrimary,.05)}));return(b,w)=>{const D=vt,v=st;return x(),F("div",{class:"am-capei-waiting",style:Ce(t(f))},[m("div",av,[m("div",sv,k(t(o).events_show_waiting_list_booking_full),1),$(rt,{modelValue:t(i).enabled,"onUpdate:modelValue":w[0]||(w[0]=P=>t(i).enabled=P),"aria-label":t(o).events_show_waiting_list_booking_full},null,8,["modelValue","aria-label"])]),t(i).enabled?(x(),Y(v,{key:0,ref_key:"waitingListFormRef",ref:r,model:t(i),"label-position":"top"},{default:I(()=>[!t(u)||t(g)?(x(),Y(D,{key:0,label:`${t(o).maximum_capacity}`,class:j(["am-capei-waiting__item",t(s)])},{default:I(()=>[$(Ct,{modelValue:t(i).maxCapacity,"onUpdate:modelValue":w[1]||(w[1]=P=>t(i).maxCapacity=P),min:1},null,8,["modelValue"])]),_:1},8,["label","class"])):N("",!0),t(u)?(x(!0),F(ne,{key:1},ve(t(c),(P,S)=>(x(),Y(D,{key:S,label:P.name,class:j(["am-capei-waiting__item",t(s)])},{default:I(()=>[$(Ct,{modelValue:P.waitingListSpots,"onUpdate:modelValue":A=>P.waitingListSpots=A,min:1,disabled:t(g)},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128)):N("",!0),m("div",lv,[m("div",nv,k(t(o).limit_extra_people),1),$(rt,{modelValue:t(i).maxExtraPeopleEnabled,"onUpdate:modelValue":w[2]||(w[2]=P=>t(i).maxExtraPeopleEnabled=P),"aria-label":t(o).limit_extra_people},null,8,["modelValue","aria-label"])]),t(i).maxExtraPeopleEnabled?(x(),Y(D,{key:2,class:j(t(s))},{default:I(()=>[$(Ct,{modelValue:t(i).maxExtraPeople,"onUpdate:modelValue":w[3]||(w[3]=P=>t(i).maxExtraPeople=P),min:0,disabled:!t(i).maxExtraPeopleEnabled},null,8,["modelValue","disabled"])]),_:1},8,["class"])):N("",!0)]),_:1},8,["model"])):N("",!0)],4)}}};const rv={class:"am-capei-sef__header"},iv=m("span",{class:"am-icon-options"},null,-1),cv={class:"am-capei-sef__header-text"},xv={class:"am-capei-sef__content"},uv=["innerHTML"],dv=["innerHTML"],mv={class:"am-capei-sef__header"},pv=m("span",{class:"am-icon-payments"},null,-1),fv={class:"am-capei-sef__header-text"},gv={class:"am-capei-sef__content"},hv={class:"am-capei-sef__segment"},vv={key:0,class:"am-capei-sef__heading"},Ev={class:"am-capei-sef__heading-text"},_v=["innerHTML"],Cv=["innerHTML"],yv={key:0,class:"am-capei-sef__heading"},bv={class:"am-capei-sef__heading-text"},Bv={class:"am-capei-sef__segment"},Av={key:0,class:"am-capei-sef__heading"},Fv={class:"am-capei-sef__heading-text"},Dv={key:1,class:"am-capei-sef__heading"},kv=["src"],wv={key:2,class:"am-capei-sef__heading"},Pv=["src"],Tv={key:3,class:"am-capei-sef__heading"},Lv=["src"],Sv={key:4,class:"am-capei-sef__heading"},Iv=["src"],$v={key:5,class:"am-capei-sef__heading"},Nv=["src"],Ov={key:6,class:"am-capei-sef__heading"},Mv=["src"],Vv={class:"am-capei-sef__header"},Rv=m("span",{class:"am-icon-options"},null,-1),qv={class:"am-capei-sef__header-text"},Uv={key:0,class:"am-capei-sef__heading"},zv={class:"am-capei-sef__heading-text"},jv={key:1,class:"am-capei-sef__heading"},Yv={class:"am-capei-sef__heading-text"},Wv={key:2,class:"am-capei-sef__heading"},Hv={class:"am-capei-sef__heading-text"},Zv={setup(n){let a=Ne(),e=U("licence"),s=U("amLabels");const l=U("settings"),o=U("baseUrls");let r=M([{label:s.value.disabled,value:0},{label:s.value.min10,value:600},{label:s.value.min12,value:720},{label:s.value.min15,value:900},{label:s.value.min30,value:1800},{label:s.value.min45,value:2700},{label:s.value.h1,value:3600},{label:s.value.h1min30,value:5400},{label:s.value.h2,value:7200},{label:s.value.h3,value:10800},{label:s.value.h4,value:14400},{label:s.value.h6,value:21600},{label:s.value.h8,value:28800},{label:s.value.h9,value:32400},{label:s.value.h10,value:36e3},{label:s.value.h11,value:39600},{label:s.value.h12,value:43200},{label:s.value.day1,value:86400},{label:s.value.days2,value:172800},{label:s.value.days3,value:259200},{label:s.value.days4,value:345600},{label:s.value.days5,value:432e3},{label:s.value.days6,value:518400},{label:s.value.week1,value:604800},{label:s.value.weeks2,value:1209600},{label:s.value.weeks3,value:1814400},{label:s.value.weeks4,value:2419200},{label:s.value.months3,value:7884e3},{label:s.value.months6,value:15768e3}]),i=M([]),c=M(!1),u=M(0),g=M(null),p=B(()=>{if(i.value.length){let d=i.value.find(_=>_.id===l.payments.wc.productId);return typeof d<"u"?d.name:s.value.select}return""});function f(){l.payments.wc.enabled&&b({id:P.value.paymentsWcProductId},d=>{i.value=d.length?d:[]})}function b(d,_){clearTimeout(g.value),c.value=!0,u.value++,g.value=setTimeout(()=>{let y=u.value;$e.get("/payment/wc/products",{params:d}).then(E=>{y>=u.value&&_(E.data.data.products.sort((C,L)=>C.name.toLowerCase()>L.name.toLowerCase()?1:-1))}).finally(()=>{c.value=!1})},500)}function w(d){d&&b({name:d},_=>{i.value=_})}let D=M("");const v=M(null);let P=M({generalMinimumTimeRequirementPriorToCanceling:B({get:()=>a.getters["event/getSettingsGeneralMinimumTimeRequirementPriorToCanceling"],set:d=>{a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",d)}}),generalRedirectUrlAfterAppointment:B({get:()=>a.getters["event/getSettingsGeneralRedirectUrlAfterAppointment"],set:d=>{a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",d)}}),paymentsPaymentLinksEnabled:B({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksEnabled"],set:d=>{a.commit("event/setSettingsPaymentsPaymentLinksEnabled",d)}}),paymentsPaymentLinksRedirectUrl:B({get:()=>a.getters["event/getSettingsPaymentsPaymentLinksRedirectUrl"],set:d=>{a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",d)}}),paymentsOnSite:B({get:()=>a.getters["event/getSettingsPaymentsOnSite"],set:d=>{a.commit("event/setSettingsPaymentsOnSite",d)}}),paymentsWcEnabled:B({get:()=>a.getters["event/getSettingsPaymentsWcEnabled"],set:d=>{a.commit("event/setSettingsPaymentsWcEnabled",d)}}),paymentsWcProductId:B({get:()=>a.getters["event/getSettingsPaymentsWcProductId"],set:d=>{a.commit("event/setSettingsPaymentsWcProductId",d)}}),paymentsStripeEnabled:B({get:()=>a.getters["event/getSettingsPaymentsStripeEnabled"],set:d=>{a.commit("event/setSettingsPaymentsStripeEnabled",d)}}),paymentsPayPalEnabled:B({get:()=>a.getters["event/getSettingsPaymentsPayPalEnabled"],set:d=>{a.commit("event/setSettingsPaymentsPayPalEnabled",d)}}),paymentsMollieEnabled:B({get:()=>a.getters["event/getSettingsPaymentsMollieEnabled"],set:d=>{a.commit("event/setSettingsPaymentsMollieEnabled",d)}}),paymentsRazorpayEnabled:B({get:()=>a.getters["event/getSettingsPaymentsRazorpayEnabled"],set:d=>{a.commit("event/setSettingsPaymentsRazorpayEnabled",d)}}),paymentsBarionEnabled:B({get:()=>a.getters["event/getSettingsPaymentsBarionEnabled"],set:d=>{a.commit("event/setSettingsPaymentsBarionEnabled",d)}}),paymentsSquareEnabled:B({get:()=>a.getters["event/getSettingsPaymentsSquareEnabled"],set:d=>{a.commit("event/setSettingsPaymentsSquareEnabled",d)}}),integrationsGoogleMeetEnabled:B({get:()=>a.getters["event/getSettingsIntegrationsGoogleMeetEnabled"],set:d=>{a.commit("event/setSettingsIntegrationsGoogleMeetEnabled",d)}}),integrationsMicrosoftTeamsEnabled:B({get:()=>a.getters["event/getSettingsIntegrationsMicrosoftTeamsEnabled"],set:d=>{a.commit("event/setSettingsIntegrationsMicrosoftTeamsEnabled",d)}}),integrationsLessonSpaceEnabled:B({get:()=>a.getters["event/getSettingsIntegrationsLessonSpaceEnabled"],set:d=>{a.commit("event/setSettingsIntegrationsLessonSpaceEnabled",d)}})});Ze(()=>{P.value.generalMinimumTimeRequirementPriorToCanceling===l.general.minimumTimeRequirementPriorToCanceling&&a.commit("event/setSettingsGeneralMinimumTimeRequirementPriorToCanceling",""),P.value.generalRedirectUrlAfterAppointment===l.general.redirectUrlAfterAppointment&&a.commit("event/setSettingsGeneralRedirectUrlAfterAppointment",""),P.value.paymentsPaymentLinksRedirectUrl===l.payments.paymentLinks.redirectUrl&&a.commit("event/setSettingsPaymentsPaymentLinksRedirectUrl",""),f()});let S=U("amColors"),A=B(()=>({"--am-c-capei-sef-primary":S.value.colorPrimary,"--am-c-capei-sef-text":S.value.colorMainText,"--am-c-capei-sef-text-op03":Q(S.value.colorMainText,.03),"--am-c-capei-sef-bgr":S.value.colorMainBgr}));return(d,_)=>{const y=Ml,E=vt,C=Cs,L=ys,V=st;return x(),Y(V,{ref_key:"settingsFormRef",ref:v,model:t(P),class:"am-capei-sef",style:Ce(t(A))},{default:I(()=>[$(L,{modelValue:t(D),"onUpdate:modelValue":_[16]||(_[16]=T=>Ae(D)?D.value=T:D=T),accordion:"",class:"am-capei-sef__collapse"},{default:I(()=>[$(C,{name:"general",class:"am-capei-sef__collapse-item"},{title:I(()=>[m("div",rv,[iv,m("div",cv,k(t(s).general),1)])]),default:I(()=>[m("div",xv,[$(E,null,{label:I(()=>[ue(k(t(s).minimum_time_before_canceling)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(s).minimum_time_before_canceling_tooltip},null,8,uv)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:I(()=>[$(Je,{modelValue:t(P).generalMinimumTimeRequirementPriorToCanceling,"onUpdate:modelValue":_[0]||(_[0]=T=>t(P).generalMinimumTimeRequirementPriorToCanceling=T),placeholder:t(r).find(T=>T.value===t(l).general.minimumTimeRequirementPriorToCanceling).label,clearable:""},{default:I(()=>[(x(!0),F(ne,null,ve(t(r),(T,q)=>(x(),Y(Ye,{key:q,value:T.value,label:T.label},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1}),$(E,null,{label:I(()=>[ue(k(t(s).redirect_url_after_appointment)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(s).redirect_url_after_appointment_tooltip},null,8,dv)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:I(()=>[$(ct,{modelValue:t(P).generalRedirectUrlAfterAppointment,"onUpdate:modelValue":_[1]||(_[1]=T=>t(P).generalRedirectUrlAfterAppointment=T),placeholder:t(l).general.redirectUrlAfterAppointment},null,8,["modelValue","placeholder"])]),_:1})])]),_:1}),$(C,{name:"payment",class:"am-capei-sef__collapse-item"},{title:I(()=>[m("div",mv,[pv,m("div",fv,k(t(s).payments),1)])]),default:I(()=>[m("div",gv,[m("div",hv,[t(e).isStarter?N("",!0):(x(),F("div",vv,[m("div",Ev,[ue(k(t(s).payment_links_enable)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(s).payment_links_enable_tooltip},null,8,_v)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),$(rt,{modelValue:t(P).paymentsPaymentLinksEnabled,"onUpdate:modelValue":_[2]||(_[2]=T=>t(P).paymentsPaymentLinksEnabled=T)},null,8,["modelValue"])])),t(P).paymentsPaymentLinksEnabled&&!t(e).isStarter?(x(),Y(E,{key:1,label:t(s).redirect_url_after_appointment},{label:I(()=>[ue(k(t(s).redirect_url_after_appointment)+" ",1),$(y,{effect:"dark",placement:"top"},{content:I(()=>[m("div",{innerHTML:t(e).isPro||t(e).isDeveloper?t(s).redirect_url_after_app_or_package_tt:t(s).redirect_url_after_appointment_tooltip},null,8,Cv)]),default:I(()=>[$(Ge,{class:"am-tooltip__trigger",icon:"info-reverse"})]),_:1})]),default:I(()=>[$(ct,{modelValue:t(P).paymentsPaymentLinksRedirectUrl,"onUpdate:modelValue":_[3]||(_[3]=T=>t(P).paymentsPaymentLinksRedirectUrl=T),placeholder:t(l).payments.paymentLinks.redirectUrl},null,8,["modelValue","placeholder"])]),_:1},8,["label"])):N("",!0)]),t(l).payments.onSite?(x(),F("div",yv,[m("div",bv,k(t(s).on_site),1),$(rt,{modelValue:t(P).paymentsOnSite,"onUpdate:modelValue":_[4]||(_[4]=T=>t(P).paymentsOnSite=T)},null,8,["modelValue"])])):N("",!0),m("div",Bv,[t(l).payments.wc.enabled?(x(),F("div",Av,[m("div",Fv,k(t(s).wc_service),1),$(rt,{modelValue:t(P).paymentsWcEnabled,"onUpdate:modelValue":_[5]||(_[5]=T=>t(P).paymentsWcEnabled=T)},null,8,["modelValue"])])):N("",!0),t(P).paymentsWcEnabled?(x(),Y(E,{key:1},{default:I(()=>[$(Je,{modelValue:t(P).paymentsWcProductId,"onUpdate:modelValue":_[6]||(_[6]=T=>t(P).paymentsWcProductId=T),clearable:"",filterable:"",remote:"",placeholder:t(p),loading:t(c),"remote-method":w},{default:I(()=>[(x(!0),F(ne,null,ve(t(i),(T,q)=>(x(),Y(Ye,{key:q,value:T.id,label:T.name},null,8,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","loading"])]),_:1})):N("",!0)]),t(l).payments.payPal.enabled?(x(),F("div",Dv,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/paypal-light.svg",alt:"PayPal"},null,8,kv),$(rt,{modelValue:t(P).paymentsPayPalEnabled,"onUpdate:modelValue":_[7]||(_[7]=T=>t(P).paymentsPayPalEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).payments.stripe.enabled?(x(),F("div",wv,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/stripe.svg",alt:"Stripe"},null,8,Pv),$(rt,{modelValue:t(P).paymentsStripeEnabled,"onUpdate:modelValue":_[8]||(_[8]=T=>t(P).paymentsStripeEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).payments.mollie.enabled?(x(),F("div",Tv,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/mollie.svg",alt:"Mollie"},null,8,Lv),$(rt,{modelValue:t(P).paymentsMollieEnabled,"onUpdate:modelValue":_[9]||(_[9]=T=>t(P).paymentsMollieEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).payments.square.enabled?(x(),F("div",Sv,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/square.svg",alt:"Square"},null,8,Iv),$(rt,{modelValue:t(P).paymentsSquareEnabled,"onUpdate:modelValue":_[10]||(_[10]=T=>t(P).paymentsSquareEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).payments.razorpay.enabled?(x(),F("div",$v,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/razorpay.svg",alt:"Razorpay"},null,8,Nv),$(rt,{modelValue:t(P).paymentsRazorpayEnabled,"onUpdate:modelValue":_[11]||(_[11]=T=>t(P).paymentsRazorpayEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).payments.barion.enabled?(x(),F("div",Ov,[m("img",{style:{width:"60px"},src:t(o).wpAmeliaPluginURL+"public/img/payments/barion.svg",alt:"Barion"},null,8,Mv),$(rt,{modelValue:t(P).paymentsBarionEnabled,"onUpdate:modelValue":_[12]||(_[12]=T=>t(P).paymentsBarionEnabled=T)},null,8,["modelValue"])])):N("",!0)])]),_:1}),t(l).googleCalendar.enabled&&t(l).googleMeet.enabled||t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled||t(l).lessonSpace.enabled?(x(),Y(C,{key:0,name:"integrations",class:"am-capei-sef__collapse-item"},{title:I(()=>[m("div",Vv,[Rv,m("div",qv,k(t(s).integrations_settings),1)])]),default:I(()=>[t(l).googleCalendar.enabled&&t(l).googleMeet.enabled?(x(),F("div",Uv,[m("div",zv,k(t(s).enable_google_meet),1),$(rt,{modelValue:t(P).integrationsGoogleMeetEnabled,"onUpdate:modelValue":_[13]||(_[13]=T=>t(P).integrationsGoogleMeetEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).outlookCalendar.enabled&&t(l).microsoftTeams.enabled?(x(),F("div",jv,[m("div",Yv,k(t(s).enable_microsoft_teams),1),$(rt,{modelValue:t(P).integrationsMicrosoftTeamsEnabled,"onUpdate:modelValue":_[14]||(_[14]=T=>t(P).integrationsMicrosoftTeamsEnabled=T)},null,8,["modelValue"])])):N("",!0),t(l).lessonSpace.enabled?(x(),F("div",Wv,[m("div",Hv,k(t(s).lesson_space),1),$(rt,{modelValue:t(P).integrationsLessonSpaceEnabled,"onUpdate:modelValue":_[15]||(_[15]=T=>t(P).integrationsLessonSpaceEnabled=T)},null,8,["modelValue"])])):N("",!0)]),_:1})):N("",!0)]),_:1},8,["modelValue"])]),_:1},8,["model","style"])}}};const Gv={class:"am-capei__footer-actions"},Jv={name:"CabinetEvent"},Xv=Object.assign(Jv,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["close","save","duplicate"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("amLabels");const o=U("settings");let r=U("licence");const i=M("details");let c=M(null),u=M(null),g=M(null),p=M(null),f=M(null),b=M(!0),w=M(!1),D=M(!1);function v(){a("duplicate",Object.assign(JSON.parse(JSON.stringify(s.getters["event/getEvent"])),{id:null,bookings:[]}))}async function P(){let C=!0;await new Promise(L=>{c.value?.detailsFormRef.validate(V=>{V||(i.value="details",C=!1),L()})}),C&&(await new Promise(L=>{u.value?.periodsFormRef.validate(V=>{V||(i.value="periods",C=!1),L()})}),C&&(s.getters["event/getRecurringEnabled"]&&(await new Promise(L=>{g.value?.recurringFormRef.validate(V=>{V||(i.value="recurring",C=!1),L()})}),!C)||d(L=>{L?D.value=!0:A()})))}function S(C){b.value=!0,$e.post("/events"+(s.getters["event/getId"]?"/"+s.getters["event/getId"]:""),Object.assign(l1(s),{applyGlobally:C}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{a1(s),_("save")}).catch(L=>{console.log(L)}).finally(()=>{b.value=!1})}function A(){f.value?(b.value=!1,D.value=!1,w.value=!0):S(!1)}function d(C){let L=s.getters["event/getOrganizerId"]?s.getters["employee/getEmployee"]:null;if(L&&(L.googleCalendar||L.outlookCalendar)){b.value=!0;let V=s.getters["event/getProviders"].map(T=>new Object({id:T.id}));$e.post("/events/calendar",{providers:s.getters["event/getProviders"].map(T=>T.id).indexOf(L.id)===-1?V.concat([{id:L.id}]):V,periods:wi(s),eventIds:[s.getters["event/getId"],s.getters["event/getParentId"]],recurring:s.getters["event/getRecurring"]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{C(!1)}).catch(()=>{C(!0),b.value=!1})}else C(!1)}function _(C){s.commit("event/setActive",!1),a(C)}Ze(()=>{s.getters["event/getId"]&&s.getters["event/getRecurringUntil"]&&(f.value=at(s.getters["event/getRecurringUntil"].toISOString().split("T")[0])),s.commit("event/setActive",!0),b.value=!1});let y=U("amColors"),E=B(()=>({"--am-c-capei-text":y.value.colorMainText,"--am-c-capei-text-op10":Q(y.value.colorMainText,.1),"--am-c-capei-primary":y.value.colorPrimary,"--am-c-cust-no1":y.value.colorMainText,"--am-c-cust-no1-bgr":Q(y.value.colorMainText,.1),"--am-c-cust-no2":y.value.colorWarning,"--am-c-cust-no2-bgr":Q(y.value.colorWarning,.1),"--am-c-cust-no3":y.value.colorError,"--am-c-cust-no3-bgr":Q(y.value.colorError,.1),"--am-c-cust-link":Q(y.value.colorMainText,.5),"--am-c-cust-text":y.value.colorMainText}));return(C,L)=>{const V=_a,T=Ca;return x(),F(ne,null,[t(b)?(x(),Y(Zt,{key:1})):(x(),F("div",{key:0,class:j(["am-capei",t(e).responsiveClass]),style:Ce(t(E))},[$(T,{modelValue:i.value,"onUpdate:modelValue":L[0]||(L[0]=q=>i.value=q),class:"am-ap__tabs"},{default:I(()=>[$(V,{label:t(l).details,name:"details"},{default:I(()=>[$(r1,{ref_key:"eventDetailsRef",ref:c},null,512)]),_:1},8,["label"]),$(V,{label:t(l).periods,name:"periods"},{default:I(()=>[$(p1,{ref_key:"eventPeriodsRef",ref:u,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),t(r).isStarter?N("",!0):(x(),Y(V,{key:0,label:t(l).recurring,name:"recurring"},{default:I(()=>[$(h1,{ref_key:"eventRecurringRef",ref:g,"page-width":t(e).pageWidth,"recurring-until":t(f)},null,8,["page-width","recurring-until"])]),_:1},8,["label"])),$(V,{label:t(l).pricing,name:"pricing"},{default:I(()=>[$(J1,{ref_key:"eventPricingRef",ref:p,"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"]),$(V,{label:t(l).customize,name:"customize"},{default:I(()=>[$(tv)]),_:1},8,["label"]),t(o).appointments.waitingListEvents.enabled&&!t(r).isStarter&&!t(r).isBasic?(x(),Y(V,{key:1,label:t(l).waiting_list,name:"waitingList"},{default:I(()=>[$(ov,{"page-width":t(e).pageWidth},null,8,["page-width"])]),_:1},8,["label"])):N("",!0),$(V,{label:t(l).settings,name:"settings"},{default:I(()=>[$(Zv)]),_:1},8,["label"])]),_:1},8,["modelValue"]),m("div",{class:j(["am-capei__footer",[{"am-capei__footer_new":!t(s).getters["event/getId"]},t(e).responsiveClass]])},[t(s).getters["event/getId"]?(x(),Y(Fe,{key:0,class:"am-capei__footer-duplicate","icon-only":!0,icon:"duplicate",type:"plain",category:"secondary",onClick:v})):N("",!0),m("div",Gv,[$(Fe,{category:"secondary",size:"default",type:"plain",onClick:L[1]||(L[1]=()=>{t(a)("close")})},{default:I(()=>[ue(k(t(l).cancel),1)]),_:1}),$(Fe,{size:"default",onClick:P},{default:I(()=>[ue(k(t(l).save),1)]),_:1})])],2)],6)),$(Ha,{visibility:t(w)&&t(f)!==null,title:t(l).confirm,description:t(l).confirm_save_following,"close-btn-text":t(l).save_single,"confirm-btn-text":t(l).update_following,"customized-options":{cancelBtn:{type:"plain"},confirmBtn:{type:""}},onDecline:L[2]||(L[2]=q=>S(!1)),onConfirm:L[3]||(L[3]=q=>S(!0)),onClose:L[4]||(L[4]=q=>Ae(w)?w.value=!1:w=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),$(Ha,{visibility:t(D),title:t(l).confirm,description:t(l).confirm_save_conflict,"close-btn-text":t(l).cancel,"confirm-btn-text":t(l).confirm,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:L[5]||(L[5]=q=>Ae(D)?D.value=!1:D=!1),onConfirm:A,onClose:L[6]||(L[6]=q=>Ae(D)?D.value=!1:D=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],64)}}});const Qv={class:"am-cap__att"},Kv={class:"am-cap-customers"},eE={class:"am-cap__cust-option"},tE={class:"am-cap__cust-option__heading"},aE={key:0,class:"am-cap__cust-option__inner"},sE={key:1,class:"am-cap__cust-option__inner"},lE={key:0,class:"am-cap-cust__data-wrapper"},nE={key:0,class:"am-cap-cust__data"},oE=m("span",{class:"am-icon-phone"},null,-1),rE=["href"],iE={key:1,class:"am-cap-cust__data"},cE=m("span",{class:"am-icon-email"},null,-1),xE=["href"],uE={class:"am-cap__att-heading"},dE={props:{event:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1},pageWidth:{type:Number,required:!0}},setup(n,{expose:a}){const e=n;let s=B(()=>ot(e.pageWidth)),l=Ne(),o=U("amLabels");const r=U("settings"),i=U("shortcodeData");let c=U("amCustomize"),u=B(()=>i.value.cabinetType==="employee"?c.value.events.options.customerPhone.visibility:!0),g=B(()=>i.value.cabinetType==="employee"?c.value.events.options.customerEmail.visibility:!0),p=M(null),f=M({customerId:B({get:()=>l.getters["attendee/getCustomerId"],set:V=>l.commit("attendee/setCustomerId",V)}),status:B({get:()=>l.getters["attendee/getStatus"],set:V=>l.commit("attendee/setStatus",V)}),persons:B({get:()=>l.getters["attendee/getPersons"],set:V=>l.commit("attendee/setPersons",V)}),tickets:B({get:()=>l.getters["attendee/getTickets"],set:V=>l.commit("attendee/setTickets",V)})}),b=M({customerId:[{required:!0,message:o.value.select_customer,trigger:["submit","change"]}]}),w=B(()=>e.event.settings?JSON.parse(e.event.settings):null),D=M(Ti().filter(V=>V.value!=="canceled"&&(!r.appointments.waitingListEvents.enabled||(w.value?"waitingList"in w.value&&!w.value.waitingList.enabled:!0)?V.value!=="waiting":!0)&&V.value!=="no-show")),v=B(()=>l.getters["customerInfo/getLoading"]),P=B(()=>l.getters["customerInfo/getCustomers"]),S=B(()=>f.value.customerId?P.value.find(V=>V.id===f.value.customerId):null);function A(V){l.dispatch("customerInfo/resetCustomer"),l.commit("customerInfo/setLoading",!0),d.value=!0,$e.get("/users/customers/"+V,Object.assign({params:{source:"cabinet-provider"}},Ue(l))).then(T=>{l.commit("customerInfo/setCustomer",Bi(l,T.data.data.user))}).catch(T=>{console.log(T)}).finally(()=>{l.commit("customerInfo/setLoading",!1)})}let d=M(!1);function _(){l.dispatch("customerInfo/resetCustomer"),d.value=!0}function y(V){l.commit("customerInfo/setCustomers",[V]),l.commit("attendee/setCustomerId",V.id)}Ze(()=>{l.getters["attendee/getId"]||l.commit("customerInfo/setCustomers",l.getters["auth/getPreloadedCustomers"])}),a({detailsFormRef:p});function E(V){if(V){if(V===1)return{class:"am-no-show-1",icon:"no-show-1"};if(V===2)return{class:"am-no-show-2",icon:"no-show-2"};if(V>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}let C=U("amColors"),L=B(()=>({"--am-c-cust-no1":C.value.colorMainText,"--am-c-cust-no1-bgr":Q(C.value.colorMainText,.1),"--am-c-cust-no2":C.value.colorWarning,"--am-c-cust-no2-bgr":Q(C.value.colorWarning,.1),"--am-c-cust-no3":C.value.colorError,"--am-c-cust-no3-bgr":Q(C.value.colorError,.1),"--am-c-cust-text":C.value.colorMainText,"--am-c-cust-link":Q(C.value.colorMainText,.5)}));return(V,T)=>{const q=vt,H=st;return x(),F("div",Qv,[$(H,{ref_key:"detailsFormRef",ref:p,model:t(f),rules:t(b),class:"am-cap__att-form"},{default:I(()=>[m("div",Kv,[e.isNew?(x(),Y(q,{key:0,prop:"customerId",class:"am-cap__att-form__item am-w-100"},{default:I(()=>[$(Je,{modelValue:t(f).customerId,"onUpdate:modelValue":T[0]||(T[0]=z=>t(f).customerId=z),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-inp-text)","popper-class":"am-cap-cust__popper",placeholder:t(o).event_attendees_search,"remote-method":z=>{t(Zs)(t(l),z)},loading:t(v),onFocus:T[1]||(T[1]=z=>t($o)(t(l)))},{default:I(()=>[(x(!0),F(ne,null,ve(t(P),z=>(x(),Y(Ye,{key:z.id,value:z.id,label:z.email?z.email:z.firstName+" "+z.lastName},{default:I(()=>[m("div",eE,[m("div",tE,k(z.firstName+" "+z.lastName),1),z.email&&t(g)?(x(),F("div",aE,k(z.email),1)):N("",!0),z.phone&&t(u)?(x(),F("div",sE,k(z.phone),1)):N("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"])]),_:1})):N("",!0),!t(l).getters["attendee/getId"]&&t(r).roles.allowWriteCustomers?(x(),Y(Fe,{key:1,class:j(["am-capai-cuf__heading-add",e.responsiveClass]),size:"default",disabled:!!t(f).customerId,prefix:"plus",icon:"plus","icon-only":e.pageWidth<=420,onClick:_},{default:I(()=>[ue(k(t(o).new_customer),1)]),_:1},8,["class","disabled","icon-only"])):N("",!0)]),t(S)?(x(),F("div",{key:0,class:j(["am-cap-attendee",t(s)])},[m("div",{class:j(["am-cap-cust",t(s)]),style:Ce(t(L))},[m("div",{class:j(["am-cap-cust__name",E(0).class])},[E(0).icon?(x(),F("span",{key:0,class:j(`am-icon-${E(0).icon}`)},null,2)):N("",!0),ue(" "+k(t(S).firstName+" "+t(S).lastName),1)],2),t(S).phone&&t(u)||t(S).email&&t(g)?(x(),F("div",lE,[t(S).phone&&t(u)?(x(),F("div",nE,[oE,m("a",{href:`tel:${t(S).phone}`},k(t(S).phone),9,rE)])):N("",!0),t(S).email&&t(g)?(x(),F("div",iE,[cE,m("a",{href:`mailto:${t(S).email}`},k(t(S).email),9,xE)])):N("",!0)])):N("",!0)],6),$(q,{prop:"status",class:j(["am-cap__att-form__item",t(s)])},{default:I(()=>[$(Je,{modelValue:t(f).status,"onUpdate:modelValue":T[2]||(T[2]=z=>t(f).status=z),disabled:!e.isNew,placeholder:t(o).select,"prefix-icon":t(D).find(z=>z.value===t(f).status).icon,"prefix-icon-color":t(D).find(z=>z.value===t(f).status).color,"popper-class":"am-capei-att__popper"},{default:I(()=>[(x(!0),F(ne,null,ve(t(D),z=>(x(),Y(Ye,{key:z.value,value:z.value,label:z.label},{default:I(()=>[m("span",{class:j(`am-icon-${z.icon}`),style:Ce({color:z.color})},null,6),ue(" "+k(z.label),1)]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","disabled","placeholder","prefix-icon","prefix-icon-color"])]),_:1},8,["class"]),t(r).roles.allowWriteCustomers?(x(),Y(Ea,{key:0,"have-delete":!1,"reference-class":t(s),onEdit:T[3]||(T[3]=z=>A(t(S).id))},null,8,["reference-class"])):N("",!0)],2)):N("",!0),t(S)?(x(),F(ne,{key:1},[e.event.customPricing?(x(),F(ne,{key:1},[m("div",uE,k(`${t(o).event_book_tickets}:`),1),(x(!0),F(ne,null,ve(t(f).tickets,(z,X)=>(x(),Y(q,{key:X,label:e.event.customTickets.find(K=>K.id===z.eventTicketId).name,class:j(["am-cap__att-form__item",t(s)])},{default:I(()=>[$(Ct,{modelValue:z.persons,"onUpdate:modelValue":K=>z.persons=K,min:0,disabled:!t(r).roles.allowWriteEvents},null,8,["modelValue","onUpdate:modelValue","disabled"])]),_:2},1032,["label","class"]))),128))],64)):(x(),Y(q,{key:0,prop:"persons",label:`${t(o).event_book_persons}:`,class:j(["am-cap__att-form__item",t(s)])},{default:I(()=>[$(Ct,{modelValue:t(f).persons,"onUpdate:modelValue":T[4]||(T[4]=z=>t(f).persons=z),min:1,disabled:!t(r).roles.allowWriteEvents},null,8,["modelValue","disabled"])]),_:1},8,["label","class"]))],64)):N("",!0),t(S)?N("",!0):(x(),Y(Ta,{key:2,heading:t(o).no_attendees_yet},null,8,["heading"]))]),_:1},8,["model","rules"]),t(d)?(x(),Y(Fi,{key:0,visibility:t(d),"responsive-class":e.responsiveClass,"onUpdate:visibility":T[5]||(T[5]=z=>Ae(d)?d.value=z:d=z),onAddedCustomer:y},null,8,["visibility","responsive-class"])):N("",!0)])}}};const mE={props:{responsiveClass:{type:String,default:""}},setup(n,{expose:a}){const e=n;let s=Ne();const l=U("settings");let o=U("amLabels"),r=M(null),i=M({}),c=M({}),u=M({}),g=B(()=>s.getters["attendee/getCustomFields"]);function p(w,D){let v=s.getters["attendee/getId"];(w.type!=="file"||v)&&(i.value[D]=B({get:()=>{let P=s.getters["attendee/getCustomFields"][D]?.value;return P||""},set:P=>s.commit("attendee/setCustomFields",{id:D,value:P})}))}function f(w,D){let v=s.getters["attendee/getId"];(w.type!=="file"||v)&&(u.value[D]={template:We[w.type],props:{id:D,itemName:D.toString(),label:w.label,options:w.options,class:`am-capei-att-cf__item am-cf-width-${w.width}`}}),(w.type==="checkbox"||w.type==="radio")&&(u.value[D].props.options=u.value[D].props.options.map(P=>({...P,value:P.label}))),w.type==="text-area"&&(u.value[D].props={...u.value[D].props,itemType:"textarea"}),w.type==="file"&&v&&(u.value[D].props={...u.value[D].props,btnLabel:o.value.upload_file_here,isUpload:!1,bookingId:v,source:"cabinet-provider"}),w.type==="datepicker"&&(u.value[D].props={...u.value[D].props,weekStartsFromDay:l.wordpress.startOfWeek})}function b(w){let D=s.getters["attendee/getId"];(w.type!=="file"||D)&&(c.value[w.id]=[{message:o.value.required_field,required:w.required,trigger:["submit","change"]}])}return Ze(()=>{i.value={},u.value={};for(let w in g.value)p(g.value[w],w),f(g.value[w],w),b(g.value[w])}),a({customFieldsFormRef:r}),(w,D)=>{const v=st;return x(),Y(v,{ref_key:"customFieldsFormRef",ref:r,model:t(i),rules:t(c),"label-position":"top",class:j(["am-capei-att-cf__form",e.responsiveClass])},{default:I(()=>[(x(!0),F(ne,null,ve(Object.keys(t(g)),P=>(x(),F(ne,{key:P},[P in t(i)?(x(),Y(ft(t(u)[P].template),kt({key:0,modelValue:t(i)[P],"onUpdate:modelValue":S=>t(i)[P]=S},t(u)[P].props),null,16,["modelValue","onUpdate:modelValue"])):N("",!0)],64))),128))]),_:1},8,["model","rules","class"])}}};const pE={class:"am-capai-pay__row-label"},fE={class:"am-capai-pay__row-value"},gE={class:"am-capai-pay__row-label"},hE={class:"am-capai-pay__row-value"},vE={class:"am-capai-pay__row-label"},EE={class:"am-capai-pay__row-value"},_E={key:0,class:"am-divider"},CE={class:"am-capai-pay__row-label"},yE={class:"am-capai-pay__row-label"},bE={class:"am-capai-pay__row-label"},BE={class:"am-capai-pay__row-label"},AE={class:"am-capai-pay__row-label"},FE={class:"am-capai-pay__row-label"},DE={class:"am-capai-pay__row-label"},kE={props:{event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},setup(n){const a=n;let e=Ne(),s=U("amLabels"),l=B(()=>e.getters["attendee/getPayments"]),o=B(()=>Object.assign(Li(e),{deposit:l.value[0].amount,paid:l.value.reduce((c,u)=>c+u.amount,0)})),r=U("amColors"),i=B(()=>({"--am-c-pay-text-op03":Q(r.value.colorMainText,.03)}));return(c,u)=>(x(),F("div",{class:j(["am-capai-pay__content",a.responsiveClass]),style:Ce(t(i))},[(x(!0),F(ne,null,ve(t(l),(g,p)=>(x(),F(ne,{key:p},[m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",pE,k(t(s).date),1),m("div",fE,k(t(it)(g.dateTime.split(" ")[0])),1)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",gE,k(t(s).payment_method),1),m("div",hE,k(t(Di)(g)),1)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",vE,k(t(s).status),1),m("div",EE,[m("span",{class:j(t(ds)(g.status,t(r)).icon),style:Ce({color:t(ds)(g.status,t(r)).color})},null,6),ue(" "+k(t(oo)(g.status)),1)])],2)],64))),128)),a.pageWidth>480?(x(),F("div",_E)):N("",!0),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",CE,k(t(s).price),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).price)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",yE,k(t(s).discount_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).discount)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",bE,k(t(s).tax),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).tax)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",BE,k(t(s).paid_deposit),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",AE,k(t(s).paid_remaining_amount),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).paid-t(o).deposit)),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",FE,k(t(s).due),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).paid-(t(o).price-t(o).discount+t(o).tax))),3)],2),m("div",{class:j(["am-capai-pay__row",a.responsiveClass])},[m("div",DE,k(t(s).total),1),m("div",{class:j(["am-capai-pay__row-value",{"am-pl-34":a.pageWidth>480}])},k(t(nt)(t(o).price-t(o).discount+t(o).tax)),3)],2)],6))}};const wE=m("span",{class:"am-icon-clearable"},null,-1),PE={class:"am-capei-atti__footer"},TE={name:"CabinetEventAttendee"},Si=Object.assign(TE,{props:{title:{type:String,default:""},visibility:{type:Boolean,default:!1},isNew:{type:Boolean,default:!1},event:{type:Object,default:()=>{}},pageWidth:{type:Number,default:0}},emits:["close","save"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("amLabels");const o=U("settings");let r=M(!1),i=B(()=>s.getters["attendee/getCustomFields"]);const c=M("details");let u=M(null),g=M(null),p=M(!1),f=M(null),b=M("");function w(){p.value=!1,b.value=""}let D=M(!1),v=M();ze("formWrapper",v);function P(){let C=Li(s);return C.price-C.discount+C.tax}function S(){let C=!0;if(g.value?.customFieldsFormRef.validate(T=>{T||(c.value="customFields",C=!1)}),u.value?.detailsFormRef.validate(T=>{T||(c.value="details",C=!1)}),!C)return;let L=o.payments.paymentLinks&&o.payments.paymentLinks.enabled,V=e.event.settings?JSON.parse(e.event.settings):null;V&&"payments"in V&&"paymentLinks"in V.payments&&(L=V.payments.paymentLinks.enabled),L&&s.getters["attendee/getId"]&&P()>d.value?D.value=!0:A(!1)}function A(C){r.value=!0,$e.post(s.getters["attendee/getId"]?"/events/bookings/"+s.getters["attendee/getId"]:"/bookings",Object.assign(Pi(s),{runInstantPostBookingActions:!0,createPaymentLinks:C}),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{a("save"),s.commit("attendee/setActive",!1)}).catch(L=>{console.log(L)}).finally(()=>{r.value=!1})}let d=M(0);function _(){s.commit("attendee/setActive",!1),a("close")}Ze(()=>{s.commit("attendee/setActive",!0),s.getters["attendee/getId"]&&(d.value=P())});let y=U("amColors"),E=B(()=>({"--am-c-capai-text":y.value.colorMainText,"--am-c-capai-text-op10":Q(y.value.colorMainText,.1),"--am-c-capai-primary":y.value.colorPrimary,"--am-c-cust-no1":y.value.colorMainText,"--am-c-cust-no1-bgr":Q(y.value.colorMainText,.1),"--am-c-cust-no2":y.value.colorWarning,"--am-c-cust-no2-bgr":Q(y.value.colorWarning,.1),"--am-c-cust-no3":y.value.colorError,"--am-c-cust-no3-bgr":Q(y.value.colorError,.1),"--am-c-cust-link":Q(y.value.colorMainText,.5),"--am-c-cust-text":y.value.colorMainText}));return(C,L)=>{const V=_a,T=Ca;return t(r)?(x(),Y(Zt,{key:1})):(x(),F("div",{key:0,class:j(["am-capei-atti",[{"am-no-border":!0},t(e).responsiveClass]]),style:Ce(t(E))},[t(p)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:f,type:"error","show-border":!0,"close-after":1e4,"custom-class":"am-csd__alert",onClose:w,onTriggerClose:w},{title:I(()=>[wE,ue(" "+k(t(b)),1)]),_:1},512)):N("",!0),$(T,{modelValue:c.value,"onUpdate:modelValue":L[0]||(L[0]=q=>c.value=q)},{default:I(()=>[$(V,{label:t(l).details,name:"details"},{default:I(()=>[$(t(dE),{ref_key:"attendeeDetailsRef",ref:u,event:t(e).event,"is-new":t(e).isNew,"page-width":t(e).pageWidth},null,8,["event","is-new","page-width"])]),_:1},8,["label"]),Object.keys(t(i)).length?(x(),Y(V,{key:0,label:t(l).custom_fields,name:"customFields"},{default:I(()=>[$(t(mE),{ref_key:"attendeeCustomFieldsRef",ref:g,event:t(e).event},null,8,["event"])]),_:1},8,["label"])):N("",!0),t(s).getters["attendee/getId"]?(x(),Y(V,{key:1,label:t(l).payment,name:"payment"},{default:I(()=>[$(t(kE),{event:t(e).event,"page-width":t(e).pageWidth},null,8,["event","page-width"])]),_:1},8,["label"])):N("",!0)]),_:1},8,["modelValue"]),m("div",PE,[$(Fe,{category:"secondary",size:"default",type:"plain",onClick:_},{default:I(()=>[ue(k(t(o).roles.allowWriteEvents?t(l).cancel:t(l).close),1)]),_:1}),t(o).roles.allowWriteEvents?(x(),Y(Fe,{key:0,size:"default",onClick:S},{default:I(()=>[ue(k(t(l).save),1)]),_:1})):N("",!0)]),$(Ha,{visibility:t(D),title:t(l).confirm,description:t(l).price_changed_message,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:L[1]||(L[1]=q=>A(!1)),onConfirm:L[2]||(L[2]=q=>A(!0)),onClose:L[3]||(L[3]=q=>Ae(D)?D.value=!1:D=!1)},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"])],6))}}});const LE=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),SE={key:1,class:"am-capei-att__top"},IE={class:"am-capei-att__top-heading"},$E={class:"am-capei-att__top-text"},NE={key:0,class:"am-capei-att__top-places"},OE={class:"am-cap__cust-option"},ME={class:"am-cap__cust-option__heading"},VE={key:0,class:"am-cap__cust-option__inner"},RE={key:1,class:"am-cap__cust-option__inner"},qE={key:0,class:"am-capei-att__card-wrapper"},UE={key:0,class:"am-capei-customer__data-wrapper"},zE={key:0,class:"am-capei-customer__data"},jE=m("span",{class:"am-icon-phone"},null,-1),YE=["href"],WE={key:1,class:"am-capei-customer__data"},HE=m("span",{class:"am-icon-email"},null,-1),ZE=["href"],GE={key:0,class:"am-capei-att__card-tickets"},JE={class:"am-capei-att__card-label"},XE={class:"am-capei-att__card-tickets__inner"},QE={key:1,class:"am-capei-att__card-persons"},KE={class:"am-capei-att__card-label"},e_={class:"am-capei-att__card-person"},t_={key:2,class:"am-capei-att__card-etickets"},a_={class:"am-capei-att__card-etickets__label"},s_={class:"am-capei-att__card-etickets__date"},l_={class:"am-capei-att__card-etickets__capacity"},n_={key:0,class:"am-capei-att__card-wrapper"},o_={key:0,class:"am-capei-customer__data-wrapper"},r_={key:0,class:"am-capei-customer__data"},i_=m("span",{class:"am-icon-phone"},null,-1),c_=["href"],x_={key:1,class:"am-capei-customer__data"},u_=m("span",{class:"am-icon-email"},null,-1),d_=["href"],m_={key:0,class:"am-capei-att__card-tickets"},p_={class:"am-capei-att__card-label"},f_={class:"am-capei-att__card-tickets__inner"},g_={key:1,class:"am-capei-att__card-persons"},h_={class:"am-capei-att__card-label"},v_={class:"am-capei-att__card-person"},E_={name:"CabinetEventAttendees"},__=Object.assign(E_,{props:{responsiveClass:{type:String,default:""},pageWidth:{type:Number},event:{type:Object,default:()=>{}}},emits:["close","openAttendee"],setup(n,{emit:a}){const e=n;let s=Ne(),l=U("amLabels");const o=U("settings"),r=U("shortcodeData");let i=U("amCustomize"),c=B(()=>r.value.cabinetType==="employee"?i.value.events.options.customerPhone.visibility:!0),u=B(()=>r.value.cabinetType==="employee"?i.value.events.options.customerEmail.visibility:!0),g=M(null),p=M(!1),f=M("success"),b=M("");function w(){p.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}let D=M(!1),v=M(!1),P=M(!1),S=M([]),A=M(0),d=M(1),_=M(!1),y=M([]),E=M(0),C=M(1),L=B(()=>e.event.settings?JSON.parse(e.event.settings):null);const{noShowData:V}=U("noShowData");let T=M(!1),q=M(null),H=M(!1);function z(){q.value=null,T.value=!1}function X(Ve,Se){q.value=Ve,H.value=Se,T.value=!0}let K=M(null);function te(){s.commit("attendee/setActive",!1),p.value=!0,b.value=l.value.event_attendee_saved,K.value&&g.value&&setTimeout(function(){gt(K.value,g.value.$el,0,300)},500),O(se.value==="approved"?["approved","canceled"]:["waiting"]),le()}function le(){D.value=!1,v.value=!1,a("openAttendee",!1)}function ee(){s.commit("attendee/setAttendee",gs(s,s.getters["attendee/getDefaultAttendee"],e.event)),D.value=!0,a("openAttendee",!0)}function xe(Ve){let Se=s.getters["customerInfo/getCustomers"],Be=s.getters["customerInfo/getCustomersIds"];Se.filter(pe=>pe.id===Ve.customer.id).length===0&&(Se.push(Ve.customer),s.commit("customerInfo/setCustomers",Se)),Be.indexOf(Ve.customer.id)===-1&&(Be.push(Ve.customer.id),s.commit("customerInfo/setCustomersIds",Be)),s.commit("attendee/setAttendee",gs(s,Ve,e.event)),v.value=!0,D.value=!0,a("openAttendee",!0)}const se=M("approved");function ge(){switch(se.value){case"approved":d.value=1;break;case"waiting":C.value=1;break}O(se.value==="approved"?["approved","canceled"]:["waiting"])}let G=M(null),ie=B(()=>s.getters["customerInfo/getLoading"]),ae=B(()=>s.getters["customerInfo/getCustomers"]);function O(Ve,Se=1){Ve[0]==="approved"?P.value=!0:_.value=!0,$e.get("/bookings/events",Object.assign(Ue(s),{params:Js({source:"cabinet-provider",statuses:Ve,page:Se,limit:parseInt(o.general.itemsPerPageBackEnd),events:[e.event.id],customers:G.value?[G.value]:[]})})).then(Be=>{Ve[0]==="approved"?(oe.value=Be.data.data.attendeeCount,De.value=Be.data.data.maxCapacity,S.value=Be.data.data.bookings.filter(pe=>pe.status==="approved"||pe.status==="canceled").reduce((pe,ce)=>(pe.push(gs(s,Cr(ce,s.getters["attendee/getAttendee"]),e.event)),pe),[]),A.value=Be.data.data.filteredCount):(oe.value=Be.data.data.waitingCount,De.value=Be.data.data.waitingCapacity,y.value=Be.data.data.bookings.filter(pe=>pe.status==="waiting").reduce((pe,ce)=>(pe.push(Cr(ce)),pe),[]),E.value=Be.data.data.filteredCount)}).catch(Be=>{console.log(Be)}).finally(()=>{P.value=!1,_.value=!1})}function W(Ve,Se){$e.post("/events/bookings/"+Ve,{status:Se,bookings:[{status:Se}]},Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{}).catch(Be=>{console.log(Be)}).finally(()=>{})}function J(Ve){let Se=se.value==="approved"?["approved","canceled"]:["waiting"];Se[0]==="approved"?d.value=Ve:C.value=Ve,O(Se,Ve)}function re(){T.value=!1,H.value?_.value=!0:P.value=!0,$e.post("/events/bookings/delete/"+q.value.id,Pi(s),Object.assign(Ue(s),{params:{source:"cabinet-provider"}})).then(()=>{J(d.value)}).catch(()=>{_.value=!1,P.value=!1})}let me=M(Ti().filter(Ve=>(!o.appointments.waitingListEvents.enabled||(L.value?"waitingList"in L.value&&!L.value.waitingList.enabled:!0)?Ve.value!=="waiting":!0)&&(o.roles.enableNoShowTag?!0:Ve.value!=="no-show"))),oe=M(0),De=M(0),_e=B(()=>`${oe.value}/${De.value}`),Me=B(()=>oe.value===1?l.value.attendee:l.value.attendees);function Ee(Ve){const Se=JSON.parse(Ve),Be={};return Se.forEach(pe=>{if(pe.type!=="booking")for(const[ce,je]of Object.entries(pe.dates))(Be[ce]=Be[ce]||[]).push(je)}),Object.fromEntries(Object.entries(Be).map(([pe,ce])=>[pe,`${ce.filter(Boolean).length}/${ce.length}`]))}Ze(()=>{O(["approved","canceled"]),s.commit("customerInfo/setCustomers",s.getters["auth/getPreloadedCustomers"])});let be=U("amColors"),Pe=B(()=>({"--am-c-capei-att-primary":be.value.colorPrimary,"--am-c-capei-att-text":be.value.colorMainText,"--am-c-capei-att-text-op90":Q(be.value.colorMainText,.9),"--am-c-capei-att-text-op10":Q(be.value.colorMainText,.1)}));return(Ve,Se)=>{const Be=_a,pe=Ca;return x(),F("div",{ref_key:"attendeesContainer",ref:K,class:"am-capei-att",style:Ce(t(Pe))},[t(p)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:g,type:t(f),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:w,onTriggerClose:w},{title:I(()=>[LE,ue(" "+k(t(b)),1)]),_:1},8,["type"])):N("",!0),t(D)?N("",!0):(x(),F("div",SE,[m("div",IE,[m("div",$E,k(t(e).event.name),1),t(De)?(x(),F("div",NE,k(t(_e))+" "+k(t(Me)),1)):N("",!0)]),$(Fe,{category:"secondary",type:"plain",size:"small",class:"am-capei-att__back",onClick:Se[0]||(Se[0]=ce=>t(a)("close"))},{default:I(()=>[ue(k(t(l).back),1)]),_:1})])),t(D)?N("",!0):(x(),F("div",{key:2,class:j(["am-capei-att__header",t(e).responsiveClass])},[$(Je,{modelValue:t(G),"onUpdate:modelValue":Se[1]||(Se[1]=ce=>Ae(G)?G.value=ce:G=ce),filterable:"",clearable:"","collapse-tags":"","collapse-tags-tooltip":"",remote:"","prefix-icon":"search","prefix-icon-color":"var(--am-c-capei-att-text)","popper-class":"am-cap-cust__popper",placeholder:t(l).event_attendees_search,"remote-method":ce=>{t(Zs)(t(s),ce)},loading:t(ie),onFocus:Se[2]||(Se[2]=ce=>t($o)(t(s))),onChange:Se[3]||(Se[3]=ce=>O(se.value==="approved"?["approved","canceled"]:["waiting"],1))},{default:I(()=>[(x(!0),F(ne,null,ve(t(ae),ce=>(x(),Y(Ye,{key:ce.id,value:ce.id,label:`${ce.firstName} ${ce.lastName}`},{default:I(()=>[m("div",OE,[m("div",ME,k(ce.firstName+" "+ce.lastName),1),t(u)?(x(),F("div",VE,k(ce.email),1)):N("",!0),t(c)?(x(),F("div",RE,k(ce.phone),1)):N("",!0)])]),_:2},1032,["value","label"]))),128))]),_:1},8,["modelValue","placeholder","remote-method","loading"]),t(o).roles.allowWriteEvents?(x(),Y(Fe,{key:0,prefix:"plus",icon:"plus","icon-only":t(e).pageWidth<540,onClick:ee},{default:I(()=>[ue(k(t(l).event_add_attendee),1)]),_:1},8,["icon-only"])):N("",!0)],2)),t(D)?N("",!0):(x(),Y(pe,{key:3,modelValue:se.value,"onUpdate:modelValue":Se[4]||(Se[4]=ce=>se.value=ce),onTabClick:ge},{default:I(()=>[$(Be,{label:t(l).attendees,name:"approved"},{default:I(()=>[t(P)?(x(),Y(Zt,{key:1})):(x(),F("div",qE,[t(S).length?(x(),F(ne,{key:0},[(x(!0),F(ne,null,ve(t(S),(ce,je)=>(x(),F("div",{key:je,class:j(["am-capei-att__card",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[m("div",{class:j(["am-capei-customer__name",t(V)(0).class])},[t(V)(0).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(V)(0).icon}`)},null,2)):N("",!0),ue(" "+k(ce.customer.firstName+" "+ce.customer.lastName),1)],2),ce.customer.phone&&t(c)||ce.customer.email&&t(u)?(x(),F("div",UE,[ce.customer.phone&&t(c)?(x(),F("div",zE,[jE,m("a",{href:`tel:${ce.customer.phone}`},k(ce.customer.phone),9,YE)])):N("",!0),ce.customer.email&&t(u)?(x(),F("div",WE,[HE,m("a",{href:`mailto:${ce.customer.email}`},k(ce.customer.email),9,ZE)])):N("",!0)])):N("",!0)],2),$(Je,{modelValue:ce.status,"onUpdate:modelValue":he=>ce.status=he,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(me).find(he=>he.value===ce.status).icon,"prefix-icon-color":t(me).find(he=>he.value===ce.status).color,"popper-class":"am-capei-att__popper","parent-class":t(e).responsiveClass,onChange:he=>{W(ce.id,he)}},{default:I(()=>[(x(!0),F(ne,null,ve(t(me),he=>(x(),Y(Ye,{key:he.value,value:he.value,label:he.label},{default:I(()=>[m("span",{class:j(`am-icon-${he.icon}`),style:Ce({color:he.color})},null,6),ue(" "+k(he.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","parent-class","onChange"])],2),ce.ticketsData.length?(x(),F("div",GE,[m("div",JE,k(t(l).event_book_tickets)+": ",1),m("div",XE,[(x(!0),F(ne,null,ve(ce.ticketsData,(he,ke)=>(x(),F("div",{key:ke,class:"am-capei-att__card-ticket"},k(he.persons)+" x "+k(t(e).event.customTickets.find(Oe=>Oe.id===he.eventTicketId).name),1))),128))])])):(x(),F("div",QE,[m("div",KE,k(t(l).event_book_persons)+": ",1),m("div",e_,k(ce.persons),1)])),t(o).appointments.qrCodeEvents.enabled&&ce.qrCodes?(x(),F("div",t_,[m("div",a_,k(t(l).checked_in)+": ",1),(x(!0),F(ne,null,ve(Ee(ce.qrCodes),(he,ke)=>(x(),F("div",{key:ke,class:"am-capei-att__card-etickets__item"},[m("span",s_,k(ke)+":",1),m("span",l_,k(he),1)]))),128))])):N("",!0),t(o).roles.allowWriteEvents?(x(),Y(Ea,{key:3,index:je,"reference-class":t(e).responsiveClass,onEdit:he=>xe(ce),onRemove:he=>X(ce,!1)},null,8,["index","reference-class","onEdit","onRemove"])):N("",!0)],2))),128)),t(A)>t(o).general.itemsPerPageBackEnd?(x(),Y(wl,{key:0,"page-size":t(o).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:t(A),"current-page":t(d),onCurrentChange:J},null,8,["page-size","total","current-page"])):N("",!0)],64)):(x(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"]),t(o).appointments.waitingListEvents.enabled&&t(L)!==null&&"waitingList"in t(L)&&t(L).waitingList.enabled?(x(),Y(Be,{key:0,label:t(l).waiting_list,name:"waiting"},{default:I(()=>[t(_)?(x(),Y(Zt,{key:1})):(x(),F("div",n_,[t(y).length?(x(),F(ne,{key:0},[(x(!0),F(ne,null,ve(t(y),(ce,je)=>(x(),F("div",{key:je,class:"am-capei-att__card"},[m("div",{class:j(["am-capei-att__card-inner",t(e).responsiveClass])},[m("div",{class:j(["am-capei-att__info",t(e).responsiveClass])},[m("div",{class:j(["am-capei-customer__name",t(V)(0).class])},[t(V)(0).icon?(x(),F("span",{key:0,class:j(`am-icon-${t(V)(0).icon}`)},null,2)):N("",!0),ue(" "+k(ce.customer.firstName+" "+ce.customer.lastName),1)],2),ce.customer.phone&&t(c)||ce.customer.email&&t(u)?(x(),F("div",o_,[ce.customer.phone&&t(c)?(x(),F("div",r_,[i_,m("a",{href:`tel:${ce.customer.phone}`},k(ce.customer.phone),9,c_)])):N("",!0),ce.customer.email&&t(u)?(x(),F("div",x_,[u_,m("a",{href:`mailto:${ce.customer.email}`},k(ce.customer.email),9,d_)])):N("",!0)])):N("",!0)],2),$(Je,{modelValue:ce.status,"onUpdate:modelValue":he=>ce.status=he,placeholder:t(l).select,disabled:!t(o).roles.allowWriteEvents,"prefix-icon":t(me).find(he=>he.value===ce.status).icon,"prefix-icon-color":t(me).find(he=>he.value===ce.status).color,"popper-class":"am-capei-att__popper",onChange:he=>{W(ce.id,he)}},{default:I(()=>[(x(!0),F(ne,null,ve(t(me),he=>(x(),Y(Ye,{key:he.value,value:he.value,label:he.label},{default:I(()=>[m("span",{class:j(`am-icon-${he.icon}`),style:Ce({color:he.color})},null,6),ue(" "+k(he.label),1)]),_:2},1032,["value","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","placeholder","disabled","prefix-icon","prefix-icon-color","onChange"])],2),Object.keys(ce.ticketsData).length?(x(),F("div",m_,[m("div",p_,k(t(l).event_book_tickets)+": ",1),m("div",f_,[(x(!0),F(ne,null,ve(ce.ticketsData,(he,ke)=>(x(),F("div",{key:ke,class:"am-capei-att__card-ticket"},k(he.persons)+" x "+k(t(e).event.customTickets.find(Oe=>Oe.id===he.eventTicketId).name),1))),128))])])):(x(),F("div",g_,[m("div",h_,k(t(l).event_book_persons)+": ",1),m("div",v_,k(ce.persons),1)])),t(o).roles.allowWriteEvents?(x(),Y(Ea,{key:2,index:je,"reference-class":t(e).responsiveClass,onEdit:he=>xe(ce),onRemove:he=>X(ce,!0)},null,8,["index","reference-class","onEdit","onRemove"])):N("",!0)]))),128)),t(E)>t(o).general.itemsPerPageBackEnd?(x(),Y(wl,{key:0,"page-size":t(o).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:t(E),"current-page":t(C),onCurrentChange:J},null,8,["page-size","total","current-page"])):N("",!0)],64)):(x(),Y(Ta,{key:1,heading:t(l).no_attendees_yet},null,8,["heading"]))]))]),_:1},8,["label"])):N("",!0)]),_:1},8,["modelValue"])),$(Ha,{visibility:t(T),title:t(l).confirm,description:t(l).event_attendee_remove,"close-btn-text":t(l).no,"confirm-btn-text":t(l).yes,"customized-options":{cancelBtn:{buttonType:"plain"},confirmBtn:{buttonType:"filled"}},onDecline:z,onConfirm:re,onClose:z},null,8,["visibility","title","description","close-btn-text","confirm-btn-text"]),t(D)?(x(),Y(Si,{key:4,visibility:t(D),title:t(v)?t(l).event_edit_attendee:t(l).event_add_attendee,event:t(e).event,"page-width":t(e).pageWidth,"is-new":!t(v),onSave:te,onClose:le},null,8,["visibility","title","event","page-width","is-new"])):N("",!0)],4)}}});const C_=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),y_={name:"CabinetEvents",key:"events"},b_=Object.assign(y_,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Ne(),s=M(null),{width:l}=Za(s),o=B(()=>ot(l.value)),r={components:{IconComponent:Ge},template:'<IconComponent icon="plus"/>'},i=U("licence");const c=U("settings");let u=U("originKey"),g=U("amCustomize");const p=U("shortcodeData");let f=B(()=>p.value.cabinetType==="customer"&&(i.isPro||i.isDeveloper)&&c.appointments.qrCodeEvents.enabled);const b=U("labels"),w=U("localLanguage");let D=B(()=>c.general.usedLanguages.includes(w.value)),v=B(()=>{let he=tt({...b}),ke=g.value.events.translations;return ke&&Object.keys(ke).forEach(Oe=>{ke[Oe][w.value]&&D.value?he[Oe]=ke[Oe][w.value]:ke[Oe].default&&(he[Oe]=ke[Oe].default)}),he});ze("amLabels",v);let P=M(null),S=M(!1),A=M("success"),d=M("");function _(){S.value=!1,e.commit("cabinet/setPaymentLinkError",{value:!1,type:"event"})}function y(he){let ke=tt({...b}),Oe=g.value[he].translations;return Oe&&Object.keys(Oe).forEach(Ke=>{Oe[Ke][w.value]&&D.value?ke[Ke]=Oe[Ke][w.value]:Oe[Ke].default&&(ke[Ke]=Oe[Ke].default)}),ke}function E(he){return g.value[he].options}let C=B(()=>e.getters["entities/getReady"]),L=U("cabinetType");e.commit("cabinetFilters/setDates",ho(L.value));let V=B(()=>e.getters["cabinet/getEventsLoading"]),T=M(!1),q=M(null),H=M(null),z=M(0),X=M(1);function K(he){X.value=he,te(he)}function te(he=1){q.value=null,e.commit("cabinet/setEventsLoading",!0);let ke=e.getters["cabinet/getTimeZone"],Oe=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getEventsFilters"]));Oe.dates=Oe.dates.map(Re=>ye(Re).format("YYYY-MM-DD")),Oe.timeZone=ke,Oe.source="cabinet-"+L.value,Oe.id=Oe.events,Oe.group=!0,Oe.page=he,Oe.limit=c.general.itemsPerPageBackEnd,Oe.customers&&(Oe.customerId=Oe.customers),e.commit("auth/setLoadingEventsCounter",e.getters["auth/getLoadingEventsCounter"]+1);let Ke=e.getters["auth/getLoadingEventsCounter"];$e.get("/events",Object.assign(Ue(e),{params:Js(Oe)})).then(Re=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&(e.dispatch("cabinetFilters/injectEventsOptions",Re.data.data.events),e.commit("auth/setPreloadedEvents",Re.data.data.events),z.value=Re.data.data.count,e.commit("eventEntities/setEvents",Re.data.data.events),H.value=D0(Re.data.data.events,e.getters["cabinet/getTimeZone"],e))}).catch(Re=>{Re?.response?.data?.data?.reauthorize!==void 0&&Re.response.data.data.reauthorize&&e.dispatch("auth/logout"),console.log(Re)}).finally(()=>{Ke===e.getters["auth/getLoadingEventsCounter"]&&e.commit("cabinet/setEventsLoading",!1)})}function le(he){e.commit("cabinet/setEventsLoading",!0),$e.get("/events/"+he.id,Object.assign({params:{source:"cabinet-"+L.value,timeZone:e.getters["cabinet/getTimeZone"]}},Ue(e))).then(ke=>{e.commit("event/setEvent",s1(e,ke.data.data.event)),ee.value=!0}).catch(ke=>{console.log(ke)}).finally(()=>{e.commit("cabinet/setEventsLoading",!1)})}let ee=M(!1),xe=M(!1),se=M(!1),ge=M(!1),G=M(!1),ie=M(null);function ae(he){e.commit("cabinet/setEventsLoading",!0),ee.value=!1,setTimeout(()=>{e.commit("event/setEvent",he),ee.value=!0,e.commit("cabinet/setEventsLoading",!1)},500)}function O(){S.value=!0,d.value=v.value.event_saved,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500),te(),Ee()}function W(){be(),ee.value=!0}function J(he){ie.value=he,Me(gs(e,e.getters["attendee/getDefaultAttendee"],he)),se.value=!0}function re(){te(X.value),me()}function me(){se.value=!1,ge.value=!1}function oe(he){ie.value=he,xe.value=!0}function De(){ie.value=null,te(X.value),Me(gs(e,e.getters["attendee/getDefaultAttendee"])),xe.value=!1,G.value=!1}function _e(he){G.value=he}function Me(he={}){e.commit("attendee/setAttendee",he)}function Ee(){ee.value=!1,be()}function be(){e.commit("event/setEvent",{bookings:[],settings:_s(c,e.getters["event/getSettings"],{},{})})}let Pe=M(!1);function Ve(){Pe.value=!0,$e.post("/bookings/cancel/"+q.value.id,{type:"event",source:"cabinet-"+L.value},Object.assign(Ue(e),{params:{source:"cabinet-"+L.value}})).then(()=>{q.value=null,te(),S.value=!0,d.value=v.value.event_canceled,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500)}).catch(he=>{!("data"in he.response.data)&&"message"in he.response.data&&(S.value=!0,d.value=he.response.data.message,s.value&&P.value&&setTimeout(function(){gt(s.value,P.value.$el,0,300)},500))}).finally(()=>{Pe.value=!1})}xt(()=>a.loadBookingsCounter,()=>{te()}),Ze(()=>{te()});function Se(he){let ke=[],Oe=e.getters["entities/getEmployees"];if(he.organizerId&&Oe.find(Ke=>Ke.id===he.organizerId)){let Ke={...Oe.find(Re=>Re.id===he.organizerId),rank:"organizer"};if(!he.providers.length)return Ke;ke.push(Ke)}return he.providers.length&&he.providers.forEach(Ke=>{Ke.id!==he.organizerId&&Oe.find(Re=>Re.id===Ke.id)&&ke.push(Oe.find(Re=>Re.id===Ke.id))}),ke}function Be(he){if(he){if(he===1)return{class:"am-no-show-1",icon:"no-show-1"};if(he===2)return{class:"am-no-show-2",icon:"no-show-2"};if(he>2)return{class:"am-no-show-3",icon:"no-show-3"}}return{class:"",icon:""}}ze("noShowData",{noShowData:Be});let pe=M(!1),ce=U("amColors"),je=B(()=>({"--am-c-cape-bgr":ce.value.colorMainBgr,"--am-c-cape-text":ce.value.colorMainText,"--am-c-cape-text-op70":Q(ce.value.colorMainText,.7),"--am-c-cape-text-op25":Q(ce.value.colorMainText,.25),"--am-c-cape-primary":ce.value.colorPrimary,"--am-c-cust-no1":ce.value.colorMainText,"--am-c-cust-no1-bgr":Q(ce.value.colorMainText,.1),"--am-c-cust-no2":ce.value.colorWarning,"--am-c-cust-no2-bgr":Q(ce.value.colorWarning,.1),"--am-c-cust-no3":ce.value.colorError,"--am-c-cust-no3-bgr":Q(ce.value.colorError,.1),"--am-c-cust-text":ce.value.colorMainText,"--am-c-cust-link":Q(ce.value.colorMainText,.5)}));return(he,ke)=>(x(),F("div",{ref_key:"pageContainer",ref:s,class:j(["am-cap am-cape-main",{"am-capei-main":t(ee)||t(se)||t(G)}]),style:Ce(t(je))},[m("div",{class:j(["am-cape-main__inner",t(o)])},[t(S)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:P,type:t(A),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:_,onTriggerClose:_},{title:I(()=>[C_,ue(" "+k(t(d)),1)]),_:1},8,["type"])):N("",!0),!t(se)&&!t(ee)&&!t(xe)&&t(C)?(x(),Y(No,{key:1,"step-key":"events",empty:t(T),"responsive-class":t(o),onChangeFilters:te},null,8,["empty","responsive-class"])):N("",!0),t(p).cabinetType==="employee"&&t(C)&&!t(se)&&!t(ee)&&!t(xe)&&((t(i).isPro||t(i).isDeveloper)&&t(c).appointments.qrCodeEvents.enabled||t(c).roles.allowWriteEvents)?(x(),F("div",{key:2,class:j(["am-cap__actions",t(o)])},[(t(i).isPro||t(i).isDeveloper)&&t(c).appointments.qrCodeEvents.enabled&&(t(g).events.options?.scanQrCodeBtn?.visibility??!0)?(x(),Y(Fe,{key:0,prefix:"scan-qr-code",size:"small",category:"secondary",type:"plain",onClick:ke[0]||(ke[0]=Oe=>Ae(pe)?pe.value=!0:pe=!0)},{default:I(()=>[ue(k(t(v).scan_e_ticket),1)]),_:1})):N("",!0),t(c).roles.allowWriteEvents?(x(),Y(Fe,{key:1,icon:t(r),prefix:"plus",size:"small",category:"primary",type:t(g).events.options.newEvtBtn.buttonType,onClick:W},{default:I(()=>[m("span",null,k(t(v).new_event),1)]),_:1},8,["icon","type"])):N("",!0)],2)):N("",!0),!t(V)&&t(C)?(x(),F(ne,{key:3},[!t(se)&&!t(ee)&&!t(xe)&&t(H)&&Object.keys(t(H)).length>0?(x(),F("div",{key:0,class:j(["am-cape__wrapper",[{"am-no-border":t(H)&&Object.keys(t(H)).length===1},t(o)]])},[(x(!0),F(ne,null,ve(t(H),(Oe,Ke)=>(x(),F("div",{key:Ke,class:"am-cape"},[m("div",{class:j(["am-cape__date",[{"am-today":t(it)(Ke)===t(it)(t(ye)().format("YYYY-MM-DD"))},{"am-no-flag":t(H)&&Object.keys(t(H)).length===1},t(o)]])},k(t(it)(Ke)),3),(x(!0),F(ne,null,ve(Oe.events,(Re,$a)=>(x(),Y(Ci,{key:$a,start:t(vs)(Re.periods[0].periodStart.split(" ")[1].slice(0,5)),name:Re.name,employee:Se(Re),customers:Re.bookings.filter(ut=>ut.status!=="rejected"&&ut.status!=="canceled").map(ut=>ut.customer),price:t(Lr)(Re),duration:null,periods:(he.periods=t(k0)(Re.periods))?he.periods:[],extras:[],tickets:t(w0)(Re),"custom-fields":t(vi)(Re.bookings,t(p).cabinetType),location:t(P0)(t(e),Re),"qr-codes":t(f)?t(T0)(Re):[],"google-meet-link":Re.periods.length===1&&Re.periods[0].googleMeetUrl?Re.periods[0].googleMeetUrl:"","microsoft-teams-link":Re.periods.length===1&&Re.periods[0].microsoftTeamsUrl?Re.periods[0].microsoftTeamsUrl:"","zoom-link":Re.periods.length===1&&Re.periods[0].zoomMeeting?Re.periods[0].zoomMeeting.joinUrl:"","lesson-space-link":Re.periods.length===1&&Re.periods[0].lessonSpace?Re.periods[0].lessonSpace:"",bookable:Re,reservation:Re,booking:Re.bookings[0],"responsive-class":t(o),"parent-width":t(l),"customized-options":E("events"),onEditEvent:le,onAddEventAttendee:J,onListEventAttendees:oe,onCancelBooking:ke[1]||(ke[1]=ut=>{Ae(q)?q.value=ut:q=ut})},null,8,["start","name","employee","customers","price","periods","tickets","custom-fields","location","qr-codes","google-meet-link","microsoft-teams-link","zoom-link","lesson-space-link","bookable","reservation","booking","responsive-class","parent-width","customized-options"]))),128))]))),128))],2)):N("",!0),!t(se)&&!t(ee)&&!t(xe)&&(t(H)===null||Object.keys(t(H)).length===0)?(x(),Y(Ta,{key:1,heading:t(v).no_evt_found,text:t(v).have_no_evt},null,8,["heading","text"])):N("",!0),!t(se)&&!t(ee)&&!t(xe)&&t(H)&&Object.keys(t(H)).length>0&&t(z)>t(c).general.itemsPerPageBackEnd?(x(),Y(wl,{key:2,"page-size":t(c).general.itemsPerPageBackEnd,"pager-count":5,layout:"prev, pager, next",total:t(z),"current-page":t(X),onCurrentChange:K},null,8,["page-size","total","current-page"])):N("",!0),t(ee)?(x(),Y(Xv,{key:3,"page-width":t(l),"responsive-class":t(o),onClose:Ee,onSave:O,onDuplicate:ae},null,8,["page-width","responsive-class"])):N("",!0),!t(se)&&t(xe)?(x(),Y(__,{key:4,event:t(ie),"page-width":t(l),"responsive-class":t(o),onClose:De,onOpenAttendee:_e},null,8,["event","page-width","responsive-class"])):N("",!0),t(se)?(x(),Y(Si,{key:5,visibility:t(se),title:t(ge)?t(v).event_edit_attendee:t(v).event_add_attendee,event:t(ie),"page-width":t(l),"is-new":!t(ge),onSave:re,onClose:me},null,8,["visibility","title","event","page-width","is-new"])):N("",!0),t(u)==="capc"?(x(),Y(Ha,{key:6,visibility:t(q)!==null,title:y("cancelEvent").cancel_event,description:y("cancelEvent").confirm_cancel_event,"close-btn-text":y("cancelEvent").close,"confirm-btn-text":y("cancelEvent").confirm,"customized-options":E("cancelEvent"),loading:t(Pe),onClose:ke[2]||(ke[2]=Oe=>Ae(q)?q.value=null:q=null),onDecline:ke[3]||(ke[3]=Oe=>Ae(q)?q.value=null:q=null),onConfirm:Ve},null,8,["visibility","title","description","close-btn-text","confirm-btn-text","customized-options","loading"])):N("",!0),t(pe)?(x(),Y(t1,{key:7,visibility:t(pe),"onUpdate:visibility":[ke[4]||(ke[4]=Oe=>Ae(pe)?pe.value=Oe:pe=Oe),ke[5]||(ke[5]=Oe=>Ae(pe)?pe.value=Oe:pe=Oe)]},null,8,["visibility"])):N("",!0)],64)):(x(),Y(Zl,{key:4}))],2)],6))}});const B_={class:"am-sc__top-menu"},A_={class:"am-sc__top-left"},F_={class:"am-sc__name"},D_={key:0,class:"am-sc__date"},k_={key:1,class:"am-sc__date"},w_=["onClick"],P_={class:"am-sc__edit"},T_=["onClick"],L_=m("span",{class:"am-icon-eye"},null,-1),S_={class:"am-sc__edit-text"},I_=["onClick"],$_=m("span",{class:"am-icon-download"},null,-1),N_={class:"am-sc__edit-text"},O_=["onClick"],M_={class:"am-sc__capacity"},V_=m("div",{class:"am-sc__btn"},[m("span",{class:"am-icon-arrow-right"})],-1),R_={key:0,class:"am-sc__bottom"},q_=m("span",{class:"am-icon-triangle-info"},null,-1),U_={name:"CabinetPackagesList"},z_=Object.assign(U_,{props:{packages:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""}},emits:["click"],setup(n,{emit:a}){const e=n;let s=Ne();function l(C){return ye(C,"YYYY-MM-DD").diff(ye(),"days")}function o(C){a("click",C)}function r(C,L,V){let T=0;return Object.keys(C).forEach(q=>{(L===null||parseInt(L)===parseInt(q))&&(T+=C[q].purchaseData[V])}),T}function i(C){return C===1?D.value.appointment_booked:D.value.appointments_booked}function c(C){let L=C.packageData.sharedCapacity?C.packageData.sharedCount:r(C.services,null,"count"),V=C.packageData.sharedCapacity?C.packageData.sharedTotal:r(C.services,null,"total");return`${V-L}/${V} ${i(V-L)}`}let u=U("containerWidth");const g=U("settings");let p=U("amCustomize");const f=U("labels"),b=U("localLanguage");let w=B(()=>g.general.usedLanguages.includes(b.value)),D=B(()=>{let C=tt({...f}),L=p.value.packagesList.translations;return L&&Object.keys(L).forEach(V=>{L[V][b.value]&&w.value?C[V]=L[V][b.value]:L[V].default&&(C[V]=L[V].default)}),C}),v=U("amColors"),P=U("licence");const S=M([]);Ze(()=>{S.value=e.packages.map(()=>!1)});function A(C,L){C.stopPropagation(),S.value=S.value.map((V,T)=>T===L?!V:!1)}function d(C){S.value[C]=!1}function _(C){s.commit("cabinet/setPackageLoading",!0),$e.post("/invoices/"+e.packages[C][1].packageData.payments[0].id,{format:"pdf"},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(L=>{window.open(kl(L)),S.value[C]=!1}).catch(L=>{console.log(L.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}function y(C){s.commit("cabinet/setPackageLoading",!0);const L=g.notifications.invoiceFormat||"pdf";$e.post("/invoices/"+e.packages[C][1].packageData.payments[0].id,{format:L},Object.assign(Ue(s),{params:{source:"cabinet-customer"}})).then(V=>{let T=kl(V,L);const q=document.createElement("a");q.href=T,q.download=`Invoice.${L}`,document.body.appendChild(q),q.click(),document.body.removeChild(q),S.value[C]=!1}).catch(V=>{console.log(V.message)}).finally(()=>{s.commit("cabinet/setPackageLoading",!1)})}let E=B(()=>({"--am-c-sc-bgr":v.value.colorMainBgr,"--am-c-sc-bgr-op15":Q(v.value.colorMainText,.15),"--am-c-sc-text":v.value.colorMainText,"--am-c-sc-text-op80":Q(v.value.colorMainText,.8),"--am-c-sc-text-op60":Q(v.value.colorMainText,.6),"--am-c-sc-text-op10":Q(v.value.colorMainText,.1),"--am-c-sc-text-op15":Q(v.value.colorMainText,.15),"--am-c-sc-warning-op50":Q(v.value.colorWarning,.5)}));return(C,L)=>{const V=bs;return t(e).packages.length?(x(!0),F(ne,{key:0},ve(t(e).packages,(T,q)=>(x(),F("div",{key:T[0],style:Ce(t(E)),class:j(["am-sc",{"am-sc__canceled":T[1].packageData.status==="canceled"}])},[m("div",{class:j(["am-sc__top",n.responsiveClass])},[m("div",B_,[m("div",A_,[m("div",F_,k(T[1].packageData.name),1),T[1].packageData.end?(x(),F("div",D_,k(t(D).package_book_expire)+" "+k(t(it)(T[1].packageData.end.split(" ")[0])),1)):(x(),F("div",k_,k(`${t(D).package_book_expiration} ${t(D).package_book_unlimited}`),1))]),t(P).isStarter?N("",!0):(x(),Y(V,{key:0,ref_for:!0,ref:"editRef",visible:S.value[q],persistent:!1,"show-arrow":!1,width:"auto","popper-class":"am-sc__popper","popper-style":t(E),trigger:"click",placement:"bottom-end"},{reference:I(()=>[m("span",{class:"am-cc__edit-btn am-icon-dots-vertical",onClick:H=>A(H,q)},null,8,w_)]),default:I(()=>[$t((x(),F("div",P_,[t(P).isStarter?N("",!0):(x(),F("div",{key:0,class:"am-sc__edit-item",onClick:H=>_(q)},[L_,m("span",S_,k(t(D).preview_invoice),1)],8,T_)),t(P).isStarter?N("",!0):(x(),F("div",{key:1,class:"am-sc__edit-item",onClick:H=>y(q)},[$_,m("span",N_,k(t(D).download_invoice),1)],8,I_))])),[[t(ea),()=>d(q)]])]),_:2},1032,["visible","popper-style"]))]),m("div",{class:j(["am-sc__top-right",n.responsiveClass]),onClick:H=>o(T[0])},[m("div",M_,k(c(T[1])),1),V_],10,O_)],2),T[1].packageData.end&&T[1].packageData.status!=="canceled"?(x(),F(ne,{key:0},[l(T[1].packageData.end.split(" ")[0])>0?(x(),F("div",R_,[m("span",{class:j(["am-sc__expiration",{"am-mobile":t(u)<481}])},[q_,ue(" "+k(`${t(D).package_deal_expire_in} ${l(T[1].packageData.end.split(" ")[0])} ${t(D).expires_days}, ${t(D).appointments_deal_expire}`),1)],2)])):N("",!0)],64)):N("",!0)],6))),128)):(x(),Y(Ta,{key:1,heading:t(D).no_pack_found,text:t(D).have_no_pack},null,8,["heading","text"]))}}});const j_=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),Y_={class:"am-cappa__back"},W_={class:"am-cappa__heading-left"},H_={key:0,class:"am-cappa__img-name"},Z_={class:"am-cappa__info"},G_={class:"am-cappa__name"},J_={key:0,class:"am-cappa__date"},X_={key:1,class:"am-cappa__date"},Q_={key:2,class:"am-cappa__capacity"},K_={class:"am-cappa__service-heading"},eC={class:"am-cappa__service-right"},tC={key:0,class:"am-cappa__service-img__name"},aC={class:"am-cappa__service-info"},sC={class:"am-cappa__service-name"},lC={key:0,class:"am-cappa__service-capacity"},nC={name:"CabinetPackageAppointmentsList",key:"packagesList"},oC=Object.assign(nC,{props:{data:{type:[Object,Array],default:()=>{}},responsiveClass:{type:String,default:""},pageWidth:{type:Number}},emits:["goBack","booked","canceled","cancelError"],setup(n,{emit:a}){const e=n;let s=Ne(),l=B(()=>s.getters.getSettings),o={components:{IconComponent:Ge},template:'<IconComponent icon="arrow-left"></IconComponent>'},{selectedPackageCustomerId:r}=U("packageSelection"),i=B(()=>s.getters["entities/getPackage"](e.data.packageData.id)),c=B(()=>i.value.bookable.filter(O=>e.data.services[O.service.id]).map(O=>O.service.id.toString())),u=B(()=>i.value.bookable.find(O=>parseInt(O.service.id)===parseInt(v.value))),g=M(null),p=M(null),f=B(()=>{let O=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredEmployees"],J=[];if(u.value){if(p.value)Object.keys(O).forEach(me=>{P.value&&P.value.serviceId in O[me]&&O[me][parseInt(P.value.serviceId)].indexOf(p.value)!==-1&&J.push(parseInt(me))});else{let me=[];if(u.value.locations.length)me=u.value.locations.map(oe=>oe.id);else for(let oe in O)u.value.service.id in O[oe]&&(me=me.concat(O[oe][u.value.service.id]));for(let oe in O)u.value.service.id in O[oe]&&me.forEach(De=>{O[oe][u.value.service.id].indexOf(De)!==-1&&J.push(parseInt(oe))})}let re=u.value.providers.length?u.value.providers.map(me=>me.id):W.map(me=>me.id);return W.filter(me=>re.indexOf(me.id)!==-1&&J.indexOf(me.id)!==-1&&(s.getters["entities/getShowHidden"]||me.status==="visible"&&me.show))}return[]}),b=B(()=>{let O=s.getters["entities/getEntitiesRelations"],W=s.getters["entities/getUnfilteredLocations"],J=[];if(u.value){if(g.value)J=O[g.value][u.value.service.id];else{let me=[];if(u.value.providers.length)me=u.value.providers.map(oe=>oe.id);else for(let oe in O)u.value.service.id in O[oe]&&me.push(parseInt(oe));for(let oe in O)u.value.service.id in O[oe]&&me.indexOf(parseInt(oe))!==-1&&(J=J.concat(O[oe][u.value.service.id]))}let re=u.value.locations.length?u.value.locations.map(me=>me.id):W.map(me=>me.id);return W.filter(me=>re.indexOf(me.id)!==-1&&J.indexOf(me.id)!==-1&&(s.getters["entities/getShowHidden"]||me.status==="visible"))}return[]}),w=B(()=>{let O=[];return Object.keys(e.data.services).forEach(W=>{Object.keys(e.data.services[W].appointments).forEach(J=>{e.data.services[W].appointments[J].appointments.forEach(re=>{O.push(re)})})}),{type:"package",package:i.value,booking:null,bookable:i.value,paymentId:e.data.packageData.payments.length?e.data.packageData.payments[0].id:null,customer:s.getters["auth/getProfile"],packageCustomerId:parseInt(r.value),packageReservations:O,payments:e.data.packageData.payments,price:e.data.packageData.price,tax:e.data.packageData.tax,coupon:e.data.packageData.coupon,discount:e.data.packageData.discount,end:e.data.packageData.end}}),D=M(!1),v=M(null),P=M(null),S=M(null);Ze(()=>{v.value=c.value[0]});function A(O,W,J){let re=0;return Object.keys(O).forEach(me=>{(W===null||parseInt(W)===parseInt(me))&&(re+=O[me].purchaseData[J])}),re}function d(O){return O===1?te.value.appointment_booked:te.value.appointments_booked}function _(O,W=null){let J=O.packageData.sharedCapacity?O.packageData.sharedCount:A(O.services,W,"count"),re=O.packageData.sharedCapacity?O.packageData.sharedTotal:A(O.services,W,"total");return`${re-J}/${re} ${d(re-J)}`}function y(O){v.value=O.paneName}function E(){let O=s.getters["auth/getProfile"],W=s.getters["cabinet/getTimeZone"]?s.getters["cabinet/getTimeZone"]:"UTC",J={serviceId:parseInt(v.value),group:1,timeZone:s.getters["cabinet/getTimeZone"],structured:!0,page:"cabinet"},re=i.value.bookable.find(me=>parseInt(me.service.id)===parseInt(v.value)).providers.map(me=>me.id);re.length&&(J.providerIds=re),J.locationId=null,S.value=J,P.value={type:"appointment",bookings:[{packageCustomerService:{id:e.data.services[v.value].purchaseData.packageCustomerServiceId},customer:{id:O.id,firstName:O.firstName,lastName:O.lastName,email:O.email,phone:O.phone,countryPhoneIso:O.countryPhoneIso,externalId:O.externalId,translations:O.translations},customerId:O.id,customFields:null,persons:1,extras:[],deposit:0}],serviceId:v.value,locationId:e.data.services[v.value].purchaseData.locitionId,providerId:e.data.services[v.value].purchaseData.employeeId,isGroup:!0,notifyParticipants:l.value.notifications.notifyCustomers?1:0,payment:null,recurring:[],package:[],timeZone:W===""?Intl.DateTimeFormat().resolvedOptions().timeZone:W,utc:W==="",locale:window.localeLanguage[0]}}function C(O){P.value=null,a("booked",O)}let L=M(!1);function V(){L.value=!0,$e.post("/packages/customers/"+parseInt(r.value),{status:"canceled"},Ue(s)).then(()=>{D.value=!1,a("canceled",{message:te.value.package_purchase_canceled})}).catch(O=>{O.response&&a("cancelError",O.response.data)}).finally(()=>{L.value=!1})}function T(O){a("booked",O)}function q(){a("goBack")}let H=U("amCustomize");const z=U("labels"),X=U("localLanguage");let K=B(()=>l.value.general.usedLanguages.includes(X.value)),te=B(()=>{let O=tt({...z}),W=H.value.packageAppointmentsList.translations;return W&&Object.keys(W).forEach(J=>{W[J][X.value]&&K.value?O[J]=W[J][X.value]:W[J].default&&(O[J]=W[J].default)}),O});ze("amLabels",te);let le=B(()=>s.getters["cabinet/getPaymentLinkError"].package),ee=M("error"),xe=M(te.value.payment_link_error);function se(){le.value=!1,s.commit("cabinet/setPaymentLinkError",{value:!1,type:"package"})}function ge(O){let W=tt({...z}),J=H.value[O].translations;return J&&Object.keys(J).forEach(re=>{J[re][X.value]&&K.value?W[re]=J[re][X.value]:J[re].default&&(W[re]=J[re].default)}),W}function G(O){return H.value[O].options}let ie=U("amColors"),ae=B(()=>({"--am-c-cappa-text":ie.value.colorMainText,"--am-c-cappa-bgr":ie.value.colorMainBgr,"--am-c-cappa-text-op80":Q(ie.value.colorMainText,.8),"--am-c-cappa-text-op70":Q(ie.value.colorMainText,.7),"--am-c-cappa-text-op20":Q(ie.value.colorMainText,.2),"--am-c-cappa-primary":ie.value.colorPrimary}));return(O,W)=>{const J=_a,re=Ca;return x(),F("div",{class:"am-cappa",style:Ce(t(ae))},[t(le)?(x(),Y(bt,{key:0,ref:"alertContainer",type:t(ee),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:se,onTriggerClose:se},{title:I(()=>[j_,ue(" "+k(t(xe)),1)]),_:1},8,["type"])):N("",!0),m("div",Y_,[$(Fe,{"custom-class":"am-cappa__back-btn",icon:t(o),type:t(H).packageAppointmentsList.options.backBtn.buttonType,size:"micro",category:"secondary","icon-only":"","aria-label":t(te).back_btn,onClick:q},null,8,["icon","type","aria-label"]),m("span",null,k(t(te).back_btn),1)]),m("div",{class:j(["am-cappa__heading",n.responsiveClass])},[m("div",W_,[m("div",{class:"am-cappa__img",style:Ce(t(e).data.packageData.pictureThumbPath?{backgroundImage:`url(${t(e).data.packageData.pictureThumbPath})`}:{})},[t(e).data.packageData.pictureThumbPath?N("",!0):(x(),F("span",H_,k(t(Uo)(t(e).data.packageData.name)),1)),m("span",{class:"am-cappa__img-color",style:Ce({backgroundColor:t(e).data.packageData.color})},null,4)],4),m("div",Z_,[m("div",G_,k(t(e).data.packageData.name),1),t(e).data.packageData.end?(x(),F("div",J_,k(t(te).package_book_expire)+" "+k(t(it)(t(e).data.packageData.end.split(" ")[0])),1)):(x(),F("div",X_,k(`${t(te).package_book_expiration} ${t(te).package_book_unlimited}`),1)),Object.keys(t(e).data.services).length>1?(x(),F("div",Q_,k(_(t(e).data)),1)):N("",!0)])]),m("div",{class:j(["am-cappa__heading-right",n.responsiveClass])},[t(l).roles.allowCustomerCancelPackages&&t(e).data.packageData.status!=="canceled"?(x(),Y(Fe,{key:0,category:"danger",size:"small",class:j(["am-cappa__actions",n.responsiveClass]),type:t(H).packageAppointmentsList.options.cancelBtn.buttonType,onClick:W[0]||(W[0]=()=>{Ae(D)?D.value=!0:D=!0})},{default:I(()=>[ue(k(t(te).cancel),1)]),_:1},8,["class","type"])):N("",!0),t(e).data.packageData.status==="approved"&&t(e).data.packageData.price>0?(x(),Y(Ei,{key:1,"btn-size":"small",class:j(`am-cappa__actions ${n.responsiveClass}`),type:t(H).packageAppointmentsList.options.payBtn.buttonType,reservation:t(w),bookable:t(i)},null,8,["class","type","reservation","bookable"])):N("",!0)],2)],2),$(re,{modelValue:t(v),"onUpdate:modelValue":W[1]||(W[1]=me=>Ae(v)?v.value=me:v=me),class:"am-cappa__service",onTabClick:y},{default:I(()=>[(x(!0),F(ne,null,ve(t(c),me=>(x(),Y(J,{key:me,name:me},{label:I(()=>[m("div",K_,k(t(e).data.services[me].purchaseData.name),1)]),default:I(()=>[t(v)===me?(x(),F(ne,{key:0},[m("div",{class:j(["am-cappa__service-top",n.responsiveClass])},[m("div",eC,[m("div",{class:"am-cappa__service-img",style:Ce(t(e).data.services[t(v)].purchaseData.pictureThumbPath?{backgroundImage:`url(${t(e).data.services[t(v)].purchaseData.pictureThumbPath})`}:{})},[t(e).data.services[t(v)].purchaseData.pictureThumbPath?N("",!0):(x(),F("span",tC,k(t(Uo)(t(e).data.services[t(v)].purchaseData.name)),1)),m("span",{class:"am-cappa__service-img__color",style:Ce({backgroundColor:t(e).data.services[t(v)].purchaseData.color})},null,4)],4),m("div",aC,[m("div",sC,k(t(e).data.services[t(v)].purchaseData.name),1),t(e).data.packageData.sharedCapacity?N("",!0):(x(),F("div",lC,k(_(t(e).data,t(v))),1))])]),t(e).data.packageData.status!=="canceled"?(x(),Y(Fe,{key:0,class:j(["am-cappa__service-book",n.responsiveClass]),size:"small",type:t(H).packageAppointmentsList.options.bookBtn.buttonType,disabled:A(t(e).data.services,t(v),"count")===0,onClick:E},{default:I(()=>[ue(k(t(te).book_now),1)]),_:1},8,["class","type","disabled"])):N("",!0)],2),$(bi,{"grouped-appointments":t(e).data.services[t(v)].appointments,"page-width":n.pageWidth,"responsive-class":n.responsiveClass,"is-package-booking":!0,"step-key":"packageAppointmentsList",onCanceled:T,onBooked:T},null,8,["grouped-appointments","page-width","responsive-class"])],64)):N("",!0)]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),$(Ha,{loading:t(L),visibility:t(D),title:ge("cancelPackage").cancel_package,description:ge("cancelPackage").confirm_cancel_package,"close-btn-text":ge("cancelPackage").close,"confirm-btn-text":ge("cancelPackage").confirm,"customized-options":G("cancelPackage"),onClose:W[2]||(W[2]=()=>{Ae(D)?D.value=!1:D=!1}),onDecline:W[3]||(W[3]=()=>{Ae(D)?D.value=!1:D=!1}),onConfirm:V},null,8,["loading","visibility","title","description","close-btn-text","confirm-btn-text","customized-options"]),$(yi,{visibility:t(P)!==null&&!t(P).id,appointment:t(P),employees:t(f),locations:t(b),"slots-params":t(S),labels:ge("bookAppointment"),"customized-options":G("bookAppointment"),onClose:W[4]||(W[4]=me=>Ae(P)?P.value=null:P=null),onSuccess:C,onError:W[5]||(W[5]=()=>{}),onEmployeeSelection:W[6]||(W[6]=me=>Ae(g)?g.value=me:g=me),onLocationSelection:W[7]||(W[7]=me=>Ae(p)?p.value=me:p=me)},null,8,["visibility","appointment","employees","locations","slots-params","labels","customized-options"])],4)}}});const rC=m("span",{class:"am-icon-checkmark-circle-full"},null,-1),iC={name:"CabinetPackages",key:"packages"},cC=Object.assign(iC,{props:{loadBookingsCounter:{type:Number,default:0}},setup(n){const a=n;let e=Ne(),s=M(null),l=M(0),o=U("sidebarCollapsed");window.addEventListener("resize",r);function r(){s.value&&(l.value=s.value.offsetWidth)}xt(o,q=>{q?setTimeout(()=>{i()},1500):setTimeout(()=>{i()},500)});function i(){l.value=s.value.offsetWidth}Ze(()=>{co(()=>{l.value=s.value.offsetWidth})});let c=B(()=>ot(l.value)),u=M(null),g=M(!1),p=M("success"),f=M("");function b(){g.value=!1,f.value=""}let w=U("cabinetType");e.commit("cabinetFilters/setDates",ho(w.value));let D=B(()=>e.getters["cabinet/getPackageLoading"]),v=M([]),P=M(null);function S(){let q=e.getters["cabinetFilters/getPackages"],H=e.getters["cabinetFilters/getServices"],z=e.getters["cabinetFilters/getProviders"],X=e.getters["cabinetFilters/getLocations"];v.value=E.value.filter(K=>{let te=e.getters["entities/getPackageEntities"](K[1].packageData.id);return(H.length===0||H.filter(le=>te.services.includes(le)).length>0)&&(z.length===0||z.filter(le=>te.providers.includes(le)).length>0)&&(X.length===0||X.filter(le=>te.locations.includes(le)).length>0)&&(q.length===0||q.filter(le=>te.packages.includes(le)).length>0)})}function A(q,H,z){let X=0;return Object.keys(q).forEach(K=>{(H===null||parseInt(H)===parseInt(K))&&(X+=q[K].purchaseData[z])}),X}function d(q){let H=A(q.services,null,"count"),z=A(q.services,null,"total");return z-H===z}function _(q){e.commit("cabinet/setPackageLoading",!0);let H=e.getters["cabinet/getTimeZone"],z=JSON.parse(JSON.stringify(e.getters["cabinetFilters/getPackagesFilters"]));z.timeZone=H,z.source="cabinet-"+w.value,z.activePackages=0,$e.get("/appointments",Js(Object.assign(Ue(e),{params:z}))).then(X=>{let K={};X.data.data.availablePackageBookings.forEach(G=>{G.packages.forEach(ie=>{ie.services.forEach(ae=>{ae.bookings.forEach(O=>{let W=e.getters["entities/getPackage"](ie.packageId);if(W&&(O.packageCustomerId in K||(K[O.packageCustomerId]={packageData:{id:W.id,name:W.name,start:O.start,end:O.end,price:O.price,tax:O.tax,coupon:O.coupon,status:O.status,type:"package",payments:O.payments,sharedCapacity:O.sharedCapacity,sharedTotal:O.total,sharedCount:O.count,discount:0,color:W.color,pictureFullPath:W.pictureFullPath,pictureThumbPath:W.pictureThumbPath},services:{}}),!(ae.serviceId in K[O.packageCustomerId].services))){let J=e.getters["entities/getService"](ae.serviceId);K[O.packageCustomerId].services[ae.serviceId]={appointments:{},purchaseData:{packageCustomerServiceId:O.id,total:O.total,count:O.count,employeeId:O.employeeId,locationId:O.locationId,name:J.name,color:J.color,pictureThumbPath:J.pictureThumbPath}}}})})})});let te=hi(X.data.data.appointments,H,w.value==="provider");Object.keys(te).forEach(G=>{te[G].appointments.forEach(ie=>{ie.bookings.forEach(ae=>{let O=ae.packageCustomerService.packageCustomer.id;O in K&&(G in K[O].services[ie.serviceId].appointments||(K[O].services[ie.serviceId].appointments[G]={date:G,appointments:[]}),K[O].services[ie.serviceId].appointments[G].appointments.push(ie))})})});let le=Object.entries(K).filter(G=>G[1].packageData.status==="canceled"),ee=Object.entries(K).filter(G=>G[1].packageData.status!=="canceled"&&d(G[1])),xe=Object.entries(K).filter(G=>G[1].packageData.status!=="canceled"&&!d(G[1])&&G[1].packageData.end===null),se=Object.entries(K).filter(G=>G[1].packageData.status!=="canceled"&&!d(G[1])&&G[1].packageData.end!==null).sort((G,ie)=>ye(G[1].packageData.end,"YYYY-MM-DD HH:mm:ss").diff(ye(ie[1].packageData.end,"YYYY-MM-DD HH:mm:ss"),"minutes"));if(v.value=[...se,...xe,...ee,...le],E.value=[...se,...xe,...ee,...le],!(z.packages.length||z.services.length||z.providers.length||z.locations.length)){let G=[],ie=[],ae=[],O=[];v.value.forEach(W=>{let J=e.getters["entities/getPackageEntities"](W[1].packageData.id);G=G.concat(J.services),ie=ie.concat(J.providers),ae=ae.concat(J.locations),O=O.concat(J.packages)}),e.dispatch("cabinetFilters/injectServiceOptions",G.filter((W,J,re)=>re.indexOf(W)===J)),e.dispatch("cabinetFilters/injectProviderOptions",ie.filter((W,J,re)=>re.indexOf(W)===J)),e.dispatch("cabinetFilters/injectLocationOptions",ae.filter((W,J,re)=>re.indexOf(W)===J)),e.dispatch("cabinetFilters/injectPackagesOptions",O.filter((W,J,re)=>re.indexOf(W)===J))}}).catch(X=>{console.log(X)}).finally(()=>{e.commit("cabinet/setPackageLoading",!1),q&&"message"in q&&(g.value=!0,f.value=q.message,s.value&&u.value&&setTimeout(function(){gt(s.value,u.value.$el,0,300)},500))})}function y(q){g.value=!0,f.value=q.message,p.value="error",s.value&&u.value&&setTimeout(function(){gt(s.value,u.value.$el,0,300)},500)}ze("packageSelection",{selectedPackageCustomerId:P});let E=M([]);xt(()=>a.loadBookingsCounter,()=>{_()}),Ze(()=>{_()});let C=B(()=>({list:{template:Qe(z_),props:{packages:v.value,responsiveClass:c.value},handlers:{click:V}},item:{template:Qe(oC),props:{data:P.value?v.value.find(q=>q[0]===P.value)[1]:{},responsiveClass:c.value,pageWidth:l.value},handlers:{goBack:T,booked:_,canceled:_,cancelError:y}}})),L=M("list");function V(q){P.value=q,L.value="item"}function T(){P.value=null,L.value="list"}return(q,H)=>(x(),F("div",{ref_key:"pageContainer",ref:s,class:"am-cap"},[t(g)?(x(),Y(bt,{key:0,ref_key:"alertContainer",ref:u,type:t(p),"show-border":!0,"close-after":5e3,"custom-class":"am-cap__alert",onClose:b,onTriggerClose:b},{title:I(()=>[rC,ue(" "+k(t(f)),1)]),_:1},8,["type"])):N("",!0),$t($(No,{"step-key":"packages","responsive-class":t(c),onChangeFilters:S},null,8,["responsive-class"]),[[mo,t(L)==="list"]]),t(D)?(x(),Y(Zl,{key:2})):(x(),Y(ft(t(C)[t(L)].template),kt({key:1},t(C)[t(L)].props,uo(t(C)[t(L)].handlers)),null,16))],512))}});const xC=m("link",{rel:"preconnect",href:"https://fonts.googleapis.com"},null,-1),uC=m("link",{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:""},null,-1),dC=["href"],mC={class:"am-fs-sb__page-wrapper am-fs-sb__page-wrapper__cabinet"},pC=["onClick"],fC={class:"am-fs-sb__page-icon"},gC={key:1,class:"am-fs-sb__page-divider"},hC={class:"am-fs-sb__page-inner"},vC=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-dashboard"})],-1),EC=m("div",{class:"am-fs-sb__page-divider"},null,-1),_C={class:"am-fs-sb__page-inner"},CC=m("div",{class:"am-fs-sb__page-icon"},[m("span",{class:"am-icon-logout"})],-1),yC={class:"am-caph"},bC={class:"am-caph__text"},BC=m("span",{class:"am-icon-menu"},null,-1),AC=[BC],FC={name:"CustomerPanel"},DC=Object.assign(FC,{setup(n){const a=$l().cookies,e=Ne();let s=B(()=>e.getters.getIsRtl);const l=U("shortcodeData");let o=B(()=>e.getters["auth/getAuthenticated"]);xt(o,oe=>{oe&&(e.commit("auth/setNewPassword",""),e.commit("auth/setConfirmPassword",""))});let r=M(l.value.cabinetType==="employee"?"provider":"customer");ze("cabinetType",r);let i=U("licence"),c=B(()=>r.value==="provider"?"cape":"capc");ze("originKey",c);let u=M(null),{width:g}=Za(u);ze("containerWidth",g);const p=U("settings");let f=M(l.value.appointments||!l.value.events?"appointments":"events");const b=B(()=>p.customizedData&&c.value in p.customizedData?p.customizedData[c.value]:Dl[c.value]);ze("amCustomize",b);const w=M(p.customizedData?p.customizedData.fonts:Dl.fonts);ze("amFonts",w);const D=U("labels");ze("amLabels",D);const v=U("localLanguage");let P=B(()=>p.general.usedLanguages.includes(v.value)),S=B(()=>{let oe=tt({...D});return p.customizedData&&Object.keys(b.value).forEach(De=>{if(De!=="colors"&&b.value[De].translations){let _e=b.value[De].translations;Object.keys(_e).forEach(Me=>{_e[Me][v.value]&&P.value?oe[Me]=_e[Me][v.value]:_e[Me].default&&(oe[Me]=_e[Me].default)})}}),oe});function A(){let oe=document.head||document.getElementsByTagName("head")[0];oe.querySelector("#amCustomFont")&&oe.querySelector("#amCustomFont").remove();let De="@font-face {font-family: 'comic'; src: url(http://localhost/amelia-test/wp-content/uploads/amelia/fonts/comic.woff);}",_e=document.createElement("style");oe.appendChild(_e),_e.setAttribute("type","text/css"),_e.setAttribute("id","amCustomFont"),_e.appendChild(document.createTextNode(De))}w.value.customFontSelected&&A();let d=B(()=>f.value==="packages"?b.value.packagesList.options:b.value[f.value].options),_=B(()=>{let oe=f.value;return r.value==="customer"?oe!=="profile"?d.value.timeZone.visibility:!0:oe==="appointments"||oe==="events"?d.value.timeZone.visibility:!0}),y=M(!1),E=M(!1);ze("sidebarCollapsed",x0(E));let C=M("");xt(E,oe=>{oe?setTimeout(()=>{C.value="am-collapsed"},1e3):C.value=""});let L=M(null),V=M(0),T=B(()=>g.value>480);Ze(()=>{L.value&&setTimeout(()=>{V.value=L.value.offsetHeight},200),setTimeout(()=>{E.value=g.value<=600?!0:b.value.sidebar.options.toggle.visibility},1300)});const q=()=>{g.value<=600?E.value=!0:E.value=b.value.sidebar.options.toggle.visibility};window.addEventListener("resize",q),xt(g,oe=>{y.value=oe>481?!1:y.value});const H=B(()=>e.getters["entities/getReady"]);xt(H,oe=>{if(oe){if(l.value.cabinetType==="employee"&&e.getters["employee/getId"]){let De=e.getters["employee/getEmployee"];e.commit("employee/setServiceList",Br(e,De.serviceList)),e.commit("entities/setEmployees",[e.getters["entities/getEmployee"](e.getters["employee/getId"])])}e.dispatch("cabinetFilters/injectServiceOptions",e.getters["entities/getServices"].map(De=>De.id)),e.dispatch("cabinetFilters/injectProviderOptions",r.value==="customer"?e.getters["entities/getEmployees"].map(De=>De.id):[]),e.dispatch("cabinetFilters/injectLocationOptions",e.getters["entities/getLocations"].map(De=>De.id))}});const z=U("baseUrls");let X=["employees","categories","locations","packages","entitiesRelations","customFields"];l.value.cabinetType==="employee"&&(X=X.concat(["taxes","spaces","tags","settings"])),e.dispatch("entities/getEntities",{types:X,licence:"basic",loadEntities:!0,showHidden:!0,isPanel:!0});let K=B(()=>e.getters.getReady),te=M({profile:Qe(l.value.cabinetType==="employee"?Rp:Qc)});(l.value.appointments||!l.value.events)&&(te.value.appointments=Qe($h)),(l.value.events||!l.value.appointments)&&(te.value.events=Qe(b_)),(l.value.appointments||!l.value.events)&&(i.isPro||i.isDeveloper)&&(te.value.packages=Qe(cC));const le=M([{key:"profile",icon:"user",pageLabel:S.value.my_profile,label:B(()=>c.value==="cape"?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:b.value.profile.options.lastName.visibility?`${e.getters["auth/getProfile"].firstName} ${e.getters["auth/getProfile"].lastName}`:`${e.getters["auth/getProfile"].firstName}`)}]);(l.value.appointments||!l.value.events)&&le.value.push({key:"appointments",icon:"service",label:S.value.appointments}),(l.value.events||!l.value.appointments)&&le.value.push({key:"events",icon:"star-outline",label:S.value.events}),l.value.cabinetType==="customer"&&(l.value.appointments||!l.value.events)&&(i.isPro||i.isDeveloper)&&le.value.push({key:"packages",icon:"shipment",label:S.value.packages}),ze("sidebarSteps",le),Ze(()=>{ee.value=le.value.findIndex(oe=>oe.key===f.value)});let ee=M(0);function xe(oe,De){l.value.cabinetType==="employee"&&(oe.key!=="appointments"&&(e.commit("appointment/resetAppointment",{providerId:e.getters["auth/getProfile"].id,categoryId:null,serviceId:null,locationId:null}),e.commit("customerInfo/setCustomers",[]),e.commit("customerInfo/setCustomersIds",[])),oe.key!=="events"&&(e.commit("event/setEvent",{settings:_s(p,e.getters["event/getSettings"],{},{})}),e.commit("attendee/setAttendee",gs(e,e.getters["attendee/getDefaultAttendee"])))),f.value=oe.key,ee.value=De,e.commit("cabinetFilters/setResetFilters")}function se(oe){l.value.cabinetType==="employee"&&l.value.profile&&oe.step.key==="profile"||(xe(oe.step,oe.index),e.commit("cabinetFilters/setResetFilters"))}function ge(){e.dispatch("auth/logout")}function G(){y.value=!1,ge()}let ie=M(0);function ae(){ie.value++}let O=B(()=>{switch(le.value[ee.value].key){case"profile":return le.value[ee.value].pageLabel;case"appointments":return e.getters["appointment/getActive"]&&!e.getters["appointment/getId"]?S.value.new_appointment:e.getters["appointment/getActive"]&&e.getters["appointment/getId"]?S.value.edit_appointment:le.value[ee.value].label;case"events":return e.getters["attendee/getActive"]&&!e.getters["attendee/getId"]?S.value.event_add_attendee:e.getters["attendee/getActive"]&&e.getters["attendee/getId"]?S.value.event_edit_attendee:e.getters["event/getActive"]&&!e.getters["event/getId"]?S.value.new_event:e.getters["event/getActive"]&&e.getters["event/getId"]?S.value.edit_event:le.value[ee.value].label;default:return le.value[ee.value].label}});ze("bookingsCounterChanger",{bookingsCounterChanger:ae});const W=U("timeZone");Gs(()=>{if(!p.general.showClientTimeZone){let oe=W.value;a.get("ameliaUserTimeZone")&&(oe=a.get("ameliaUserTimeZone")),e.commit("cabinet/setTimeZone",oe)}e.getters["cabinet/getTimeZone"]||e.commit("cabinet/setTimeZone",zs())});let J=B(()=>b.value.colors);ze("amColors",J);let re=B(()=>({"--am-c-primary":J.value.colorPrimary,"--am-c-success":J.value.colorSuccess,"--am-c-error":J.value.colorError,"--am-c-warning":J.value.colorWarning,"--am-c-main-bgr":J.value.colorMainBgr,"--am-c-main-heading-text":J.value.colorMainHeadingText,"--am-c-main-text":J.value.colorMainText,"--am-c-main-text-op10":Q(J.value.colorMainText,.1),"--am-c-sb-bgr":J.value.colorSbBgr,"--am-c-sb-text":J.value.colorSbText,"--am-c-inp-bgr":J.value.colorInpBgr,"--am-c-inp-border":J.value.colorInpBorder,"--am-c-inp-text":J.value.colorInpText,"--am-c-inp-placeholder":J.value.colorInpPlaceHolder,"--am-c-drop-bgr":J.value.colorDropBgr,"--am-c-drop-text":J.value.colorDropText,"--am-c-btn-prim":J.value.colorBtnPrim,"--am-c-btn-prim-text":J.value.colorBtnPrimText,"--am-c-btn-sec":J.value.colorBtnSec,"--am-c-btn-sec-text":J.value.colorBtnSecText,"--am-c-btn-danger":J.value.colorBtnDanger,"--am-c-btn-danger-text":J.value.colorBtnDangerText,"--am-c-skeleton-op20":Q(J.value.colorMainText,.2),"--am-c-skeleton-op60":Q(J.value.colorMainText,.6),"--am-c-skeleton-sb-op20":Q(J.value.colorSbText,.2),"--am-c-skeleton-sb-op60":Q(J.value.colorSbText,.6),"--am-c-scroll-op30":Q(J.value.colorPrimary,.3),"--am-c-scroll-op10":Q(J.value.colorPrimary,.1),"--am-font-family":w.value.fontFamily,"--am-rad-inp":"6px","--am-fs-inp":"15px","--am-mw-main":T.value?E.value?"858px":"1024px":"520px","--am-brad-main":T.value?"0 0.5rem 0.5rem 0":"0.5rem"})),me=B(()=>({"--am-c-msd-bgr":J.value.colorSbBgr,"--am-c-msd-text":J.value.colorSbText,"--am-c-msd-text-op05":Q(J.value.colorSbText,.05),"--am-c-msd-text-op10":Q(J.value.colorSbText,.1),"--am-c-msd-text-op60":Q(J.value.colorSbText,.6)}));return(oe,De)=>(x(),F(ne,null,[w.value.customFontSelected?N("",!0):(x(),F(ne,{key:0},[xC,uC,m("link",{rel:"stylesheet",type:"text/css",href:`${t(z).wpAmeliaPluginURL}v3/src/assets/scss/common/fonts/font.css`,media:"all"},null,8,dC)],64)),m("div",{id:"amelia-container",ref_key:"ameliaContainer",ref:u,class:j(["am-cap__wrapper",[{"am-collapsed":t(E)},{"am-auth":!t(o)}]]),style:Ce(t(re))},[t(o)?N("",!0):(x(),Y(qc,{key:0})),t(o)?(x(),F(ne,{key:1},[t(T)?(x(),Y(u0,{key:0,class:j(["am-fs-sb",[{"am-collapsed":t(E)},{"am-rtl":t(s)}]]),style:Ce({width:t(E)?"72px":"240px",paddingBottom:`${t(V)+16}px`})},{"step-list":I(()=>[m("div",mC,[(x(!0),F(ne,null,ve(le.value,(_e,Me)=>(x(),F(ne,{key:_e.key},[_e.key!=="packages"||t(e).getters["entities/getPackages"].length?(x(),F("div",{key:0,class:j(["am-fs-sb__page",{selected:t(f)===_e.key}]),style:Ce({"pointer-events":t(l).cabinetType==="employee"&&t(l).profile&&_e.key==="profile"?"none":""}),onClick:()=>{t(l).cabinetType==="employee"&&t(l).profile&&_e.key==="profile"||xe(_e,Me)}},[m("div",{class:j(["am-fs-sb__page-inner",{"am-collapsed":t(E)}])},[m("div",fC,[m("span",{class:j(`am-icon-${_e.icon}`)},null,2)]),$(ga,{name:"fade"},{default:I(()=>[t(E)?N("",!0):(x(),F("p",{key:0,class:j(["am-fs-sb__page-heading",[t(C),{"am-rtl":t(s)}]])},k(_e.label),3))]),_:2},1024),$(ga,{name:"fade"},{default:I(()=>[t(E)?N("",!0):(x(),F("div",{key:0,class:j(["am-fs-sb__page-indicator",[t(C),{"am-rtl":t(s)}]])},[m("span",{class:j(t(s)?"am-icon-arrow-big-left":"am-icon-arrow-big-right")},null,2)],2))]),_:1})],2)],14,pC)):N("",!0),Me===0&&le.value[0].key==="profile"?(x(),F("div",gC)):N("",!0)],64))),128))])]),"support-info":I(()=>[m("div",{ref_key:"sidebarFooterRef",ref:L,class:"am-fs-sb__footer"},[m("div",{class:"am-fs-sb__page",onClick:De[0]||(De[0]=_e=>Ae(E)?E.value=!t(E):E=!t(E))},[m("div",hC,[vC,$(ga,{name:"fade"},{default:I(()=>[t(E)?N("",!0):(x(),F("p",{key:0,class:j(["am-fs-sb__page-heading",t(C)])},k(t(S).toggle_sidebar),3))]),_:1})])]),EC,m("div",{class:"am-fs-sb__page",onClick:ge},[m("div",_C,[CC,$(ga,{name:"fade"},{default:I(()=>[t(E)?N("",!0):(x(),F("p",{key:0,class:j(["am-fs-sb__page-heading",t(C)])},k(t(S).log_out),3))]),_:1})])])],512)]),_:1},8,["class","style"])):N("",!0),$(d0,{"max-width":786,"old-responsive":!1},{header:I(()=>[$(v0,{ready:t(K)},{default:I(()=>[m("div",yC,[m("div",bC,k(t(O)),1),t(T)?N("",!0):(x(),F("div",{key:0,class:"am-caph__menu",onClick:De[1]||(De[1]=()=>Ae(y)?y.value=!t(y):y=!t(y))},AC)),t(H)&&t(T)&&t(_)?(x(),Y(Wn,{key:1})):N("",!0),$(U0,{"menu-items":le.value,monitor:t(f),visibility:t(y),"custom-css":t(me),"customized-labels":t(S),position:"right",width:240,"onUpdate:visibility":De[2]||(De[2]=_e=>Ae(y)?y.value=_e:y=_e),onClick:se,onLogout:G},null,8,["menu-items","monitor","visibility","custom-css","customized-labels"])])]),_:1},8,["ready"])]),step:I(()=>[(x(),Y(ft(t(te)[t(f)]),{class:"am-fs__main-content","load-bookings-counter":t(ie)},null,8,["load-bookings-counter"]))]),_:1})],64)):N("",!0)],6)],64))}});var NC=Object.freeze(Object.defineProperty({__proto__:null,default:DC},Symbol.toStringTag,{value:"Module"}));export{NC as C,rt as _,b0 as a,Ht as b,k0 as c,v0 as d,U0 as e,TC as f,PC as g,qt as h,ia as i,f0 as j,Lr as u};
